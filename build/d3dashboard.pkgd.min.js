!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,function(s){"use strict";function u(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function c(n){let r=n,a=n,o=n;function s(t,e,n=0,i=t.length){if(n<i){if(0!==a(e,e))return i;do{var r=n+i>>>1;o(t[r],e)<0?n=1+r:i=r}while(n<i)}return n}return 2!==n.length&&(r=(t,e)=>n(t)-e,a=u,o=(t,e)=>u(n(t),e)),{left:s,center:function(t,e,n=0,i=t.length){return i=s(t,e,n,i-1),n<i&&r(t[i-1],e)>-r(t[i],e)?i-1:i},right:function(t,e,n=0,i=t.length){if(n<i){if(0!==a(e,e))return i;do{var r=n+i>>>1;o(t[r],e)<=0?n=1+r:i=r}while(n<i)}return n}}}function a(t){return null===t?NaN:+t}var t=c(u),e=t.right,n=t.left,i=c(a).center,v=e;function r(e,n){let i=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&++i;else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(r=+r)>=r&&++i}return i}function l(t){return 0|t.length}function f(t){return!(0<t)}function h(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function o(e,n){let i=0,r,a=0,o=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(r=t-a,a+=r/++i,o+=r*(t-a));else{let t=-1;for(var s of e)null!=(s=n(s,++t,e))&&(s=+s)>=s&&(r=s-a,a+=r/++i,o+=r*(s-a))}if(1<i)return o/(i-1)}function d(t,e){e=o(t,e);return e&&Math.sqrt(e)}function y(e,n){let i,r;if(void 0===n)for(const t of e)null!=t&&(void 0===i?t>=t&&(i=r=t):(i>t&&(i=t),r<t&&(r=t)));else{let t=-1;for(var a of e)null!=(a=n(a,++t,e))&&(void 0===i?a>=a&&(i=r=a):(i>a&&(i=a),r<a&&(r=a)))}return[i,r]}class S{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let t=0;t<this._n&&t<32;t++){var r=n[t],a=e+r,r=Math.abs(e)<Math.abs(r)?e-(a-r):r-(a-e);r&&(n[i++]=r),e=a}return n[i]=e,this._n=i+1,this}valueOf(){var t=this._partials;let e=this._n,n,i,r,a=0;if(0<e){for(a=t[--e];0<e&&(n=a,i=t[--e],a=n+i,r=i-(a-n),!r););0<e&&(r<0&&t[e-1]<0||0<r&&0<t[e-1])&&(i=2*r,n=a+i,i==n-a&&(a=n))}return a}}class g extends Map{constructor(t,e=b){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(x(this,t))}has(t){return super.has(x(this,t))}set(t,e){return super.set(_(this,t),e)}delete(t){return super.delete(m(this,t))}}class p extends Set{constructor(t,e=b){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const n of t)this.add(n)}has(t){return super.has(x(this,t))}add(t){return super.add(_(this,t))}delete(t){return super.delete(m(this,t))}}function x({_intern:t,_key:e},n){e=e(n);return t.has(e)?t.get(e):n}function _({_intern:t,_key:e},n){e=e(n);return t.has(e)?t.get(e):(t.set(e,n),n)}function m({_intern:t,_key:e},n){e=e(n);return t.has(e)&&(n=t.get(e),t.delete(e)),n}function b(t){return null!==t&&"object"==typeof t?t.valueOf():t}function w(t){return t}function T(t,...e){return D(t,w,w,e)}function A(t,...e){return D(t,Array.from,w,e)}function M(n,i){for(let t=1,e=i.length;t<e;++t)n=n.flatMap(n=>n.pop().map(([t,e])=>[...n,t,e]));return n}function k(t,e,...n){return D(t,w,e,n)}function E(t,e,...n){return D(t,Array.from,e,n)}function C(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function D(t,l,f,h){return function t(e,n){if(n>=h.length)return f(e);const i=new g,r=h[n++];let a=-1;for(const s of e){var o=r(s,++a,e);const u=i.get(o);u?u.push(s):i.set(o,[s])}for(const[c,e]of i)i.set(c,t(e,n));return l(i)}(t,0)}function R(e,t){return Array.from(t,t=>e[t])}function O(e,...r){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[n]=r;if(n&&2!==n.length||1<r.length){const t=Uint32Array.from(e,(t,e)=>e);return 1<r.length?(r=r.map(t=>e.map(t)),t.sort((t,e)=>{for(const i of r){var n=P(i[t],i[e]);if(n)return n}})):(n=e.map(n),t.sort((t,e)=>P(n[t],n[e]))),R(e,t)}return e.sort(L(n))}function L(i=u){if(i===u)return P;if("function"!=typeof i)throw new TypeError("compare is not a function");return(t,e)=>{var n=i(t,e);return n||0===n?n:(0===i(e,e))-(0===i(t,t))}}function P(t,e){return(null==t||!(t<=t))-(null==e||!(e<=e))||(t<e?-1:e<t?1:0)}var z=Array.prototype.slice;function N(t){return()=>t}var I=Math.sqrt(50),F=Math.sqrt(10),B=Math.sqrt(2);function X(n,i,t){var e,r,a,o,s=-1;if(t=+t,(n=+n)===(i=+i)&&0<t)return[n];if((e=i<n)&&(r=n,n=i,i=r),0===(o=$(n,i,t))||!isFinite(o))return[];if(0<o){let t=Math.round(n/o),e=Math.round(i/o);for(t*o<n&&++t,e*o>i&&--e,a=new Array(r=e-t+1);++s<r;)a[s]=(t+s)*o}else{o=-o;let t=Math.round(n*o),e=Math.round(i*o);for(t/o<n&&++t,e/o>i&&--e,a=new Array(r=e-t+1);++s<r;)a[s]=(t+s)/o}return e&&a.reverse(),a}function $(t,e,n){t=(e-t)/Math.max(0,n),n=Math.floor(Math.log(t)/Math.LN10),t/=Math.pow(10,n);return 0<=n?(I<=t?10:F<=t?5:B<=t?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(I<=t?10:F<=t?5:B<=t?2:1)}function Y(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),n=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),i=i/n;return I<=i?n*=10:F<=i?n*=5:B<=i&&(n*=2),e<t?-n:n}function j(t,e,n){let i;for(;;){var r=$(t,e,n);if(r===i||0===r||!isFinite(r))return[t,e];0<r?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}function G(t){return Math.ceil(Math.log(r(t))/Math.LN2)+1}function H(){var d=w,g=y,p=G;function e(t){for(var e,n=(t=!Array.isArray(t)?Array.from(t):t).length,i=new Array(n),r=0;r<n;++r)i[r]=d(t[r],r,t);var a,o=g(i),s=o[0],u=o[1],c=p(i,s,u);Array.isArray(c)||(a=u,o=+c,g===y&&([s,u]=j(s,u,o)),(c=X(s,u,o))[c.length-1]>=u&&(u<=a&&g===y?(o=$(s,u,o),isFinite(o)&&(0<o?u=(Math.floor(u/o)+1)*o:o<0&&(u=(Math.ceil(u*-o)+1)/-o))):c.pop()));for(var l=c.length;c[0]<=s;)c.shift(),--l;for(;c[l-1]>u;)c.pop(),--l;var f,h=new Array(l+1);for(r=0;r<=l;++r)(f=h[r]=[]).x0=0<r?c[r-1]:s,f.x1=r<l?c[r]:u;for(r=0;r<n;++r)null!=(e=i[r])&&s<=e&&e<=u&&h[v(c,e,0,l)].push(t[r]);return h}return e.value=function(t){return arguments.length?(d="function"==typeof t?t:N(t),e):d},e.domain=function(t){return arguments.length?(g="function"==typeof t?t:N([t[0],t[1]]),e):g},e.thresholds=function(t){return arguments.length?(p="function"==typeof t?t:Array.isArray(t)?N(z.call(t)):N(t),e):p},e}function V(e,n){let i;if(void 0===n)for(const t of e)null!=t&&(i<t||void 0===i&&t>=t)&&(i=t);else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(i<r||void 0===i&&r>=r)&&(i=r)}return i}function U(e,n){let i;if(void 0===n)for(const t of e)null!=t&&(i>t||void 0===i&&t>=t)&&(i=t);else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(i>r||void 0===i&&r>=r)&&(i=r)}return i}function q(n,i,r=0,a=n.length-1,o){for(o=void 0===o?P:L(o);r<a;){var s,u,c,l;600<a-r&&(s=a-r+1,u=i-r+1,l=Math.log(s),c=.5*Math.exp(2*l/3),l=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),q(n,i,Math.max(r,Math.floor(i-u*c/s+l)),Math.min(a,Math.floor(i+(s-u)*c/s+l)),o));var f=n[i];let t=r,e=a;for(W(n,r,i),0<o(n[a],f)&&W(n,r,a);t<e;){for(W(n,t,e),++t,--e;o(n[t],f)<0;)++t;for(;0<o(n[e],f);)--e}0===o(n[r],f)?W(n,r,e):(++e,W(n,e,a)),e<=i&&(r=e+1),i<=e&&(a=e-1)}return n}function W(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Z(t,e,n){if(i=(t=Float64Array.from(function*(e,n){if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(yield t);else{let t=-1;for(var i of e)null!=(i=n(i,++t,e))&&(i=+i)>=i&&(yield i)}}(t,n))).length){if((e=+e)<=0||i<2)return U(t);if(1<=e)return V(t);var n=(i-1)*e,i=Math.floor(n),e=V(q(t,i).subarray(0,i+1));return e+(U(t.subarray(i+1))-e)*(n-i)}}function K(t,e,n=a){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(1<=e)return+n(t[r-1],r-1,t);var i=(r-1)*e,r=Math.floor(i),e=+n(t[r],r,t);return e+(+n(t[r+1],r+1,t)-e)*(i-r)}}function J(t,e){let n,i=-1,r=-1;if(void 0===e)for(const o of t)++r,null!=o&&(n<o||void 0===n&&o>=o)&&(n=o,i=r);else for(var a of t)null!=(a=e(a,++r,t))&&(n<a||void 0===n&&a>=a)&&(n=a,i=r);return i}function Q(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function tt(t,e){let n,i=-1,r=-1;if(void 0===e)for(const o of t)++r,null!=o&&(n>o||void 0===n&&o>=o)&&(n=o,i=r);else for(var a of t)null!=(a=e(a,++r,t))&&(n>a||void 0===n&&a>=a)&&(n=a,i=r);return i}function et(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a}function nt(t,e=u){if(1===e.length)return tt(t,e);let n,i=-1,r=-1;for(const a of t)++r,(i<0?0===e(a,a):e(a,n)<0)&&(n=a,i=r);return i}var it=rt(Math.random);function rt(o){return function(t,e=0,n=t.length){let i=n-(e=+e);for(;i;){var r=o()*i--|0,a=t[i+e];t[i+e]=t[r+e],t[r+e]=a}return t}}function at(t){if(!(r=t.length))return[];for(var e=-1,n=U(t,ot),i=new Array(n);++e<n;)for(var r,a=-1,o=i[e]=new Array(r);++a<r;)o[a]=t[a][e];return i}function ot(t){return t.length}function st(t){return t instanceof p?t:new p(t)}function ut(t,e){const n=t[Symbol.iterator](),i=new Set;for(const s of e){var r,a=ct(s);if(!i.has(a))for(;{value:o,done:r}=n.next();){if(r)return!1;var o=ct(o);if(i.add(o),Object.is(a,o))break}}return!0}function ct(t){return null!==t&&"object"==typeof t?t.valueOf():t}function lt(t){return t}var ft=1,ht=2,dt=3,gt=4,pt=1e-6;function vt(t){return"translate("+t+",0)"}function yt(t){return"translate(0,"+t+")"}function xt(e){return t=>+e(t)}function _t(e,n){return n=Math.max(0,e.bandwidth()-2*n)/2,e.round()&&(n=Math.round(n)),t=>+e(t)+n}function mt(){return!this.__axis}function bt(d,g){var p=[],v=null,y=null,x=6,_=6,m=3,b="undefined"!=typeof window&&1<window.devicePixelRatio?0:.5,w=d===ft||d===gt?-1:1,T=d===gt||d===ht?"x":"y",A=d===ft||d===dt?vt:yt;function e(t){var e=null==v?g.ticks?g.ticks.apply(g,p):g.domain():v,n=null==y?g.tickFormat?g.tickFormat.apply(g,p):lt:y,i=Math.max(x,0)+m,r=g.range(),a=+r[0]+b,o=+r[r.length-1]+b,s=(g.bandwidth?_t:xt)(g.copy(),b),u=t.selection?t.selection():t,c=u.selectAll(".domain").data([null]),l=(h=u.selectAll(".tick").data(e,g).order()).exit(),f=h.enter().append("g").attr("class","tick"),r=h.select("line"),e=h.select("text"),c=c.merge(c.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),h=h.merge(f),r=r.merge(f.append("line").attr("stroke","currentColor").attr(T+"2",w*x)),e=e.merge(f.append("text").attr("fill","currentColor").attr(T,w*i).attr("dy",d===ft?"0em":d===dt?"0.71em":"0.32em"));t!==u&&(c=c.transition(t),h=h.transition(t),r=r.transition(t),e=e.transition(t),l=l.transition(t).attr("opacity",pt).attr("transform",function(t){return isFinite(t=s(t))?A(t+b):this.getAttribute("transform")}),f.attr("opacity",pt).attr("transform",function(t){var e=this.parentNode.__axis;return A((e&&isFinite(e=e(t))?e:s(t))+b)})),l.remove(),c.attr("d",d===gt||d===ht?_?"M"+w*_+","+a+"H"+b+"V"+o+"H"+w*_:"M"+b+","+a+"V"+o:_?"M"+a+","+w*_+"V"+b+"H"+o+"V"+w*_:"M"+a+","+b+"H"+o),h.attr("opacity",1).attr("transform",function(t){return A(s(t)+b)}),r.attr(T+"2",w*x),e.attr(T,w*i).text(n),u.filter(mt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",d===ht?"start":d===gt?"end":"middle"),u.each(function(){this.__axis=s})}return e.scale=function(t){return arguments.length?(g=t,e):g},e.ticks=function(){return p=Array.from(arguments),e},e.tickArguments=function(t){return arguments.length?(p=null==t?[]:Array.from(t),e):p.slice()},e.tickValues=function(t){return arguments.length?(v=null==t?null:Array.from(t),e):v&&v.slice()},e.tickFormat=function(t){return arguments.length?(y=t,e):y},e.tickSize=function(t){return arguments.length?(x=_=+t,e):x},e.tickSizeInner=function(t){return arguments.length?(x=+t,e):x},e.tickSizeOuter=function(t){return arguments.length?(_=+t,e):_},e.tickPadding=function(t){return arguments.length?(m=+t,e):m},e.offset=function(t){return arguments.length?(b=+t,e):b},e}var wt={value:()=>{}};function Tt(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new At(i)}function At(t){this._=t}function Mt(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=wt,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}At.prototype=Tt.prototype={constructor:At,on:function(t,e){var n,i,r=this._,a=(i=r,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)r[n]=Mt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Mt(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=function(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}(r[n],t.name)))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new At(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(i=this._[t]).length;a<n;++a)i[a].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};var kt="http://www.w3.org/1999/xhtml",St={svg:"http://www.w3.org/2000/svg",xhtml:kt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Et(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),St.hasOwnProperty(e)?{space:St[e],local:t}:t}function Ct(t){t=Et(t);return(t.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===kt&&t.documentElement.namespaceURI===kt?t.createElement(n):t.createElementNS(e,n)}})(t)}function Dt(){}function Rt(t){return null==t?Dt:function(){return this.querySelector(t)}}function Ot(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Lt(){return[]}function Pt(t){return null==t?Lt:function(){return this.querySelectorAll(t)}}function zt(t){return function(){return this.matches(t)}}function Nt(e){return function(t){return t.matches(e)}}var It=Array.prototype.find;function Ft(){return this.firstElementChild}var Bt=Array.prototype.filter;function Xt(){return Array.from(this.children)}function $t(t){return new Array(t.length)}function Yt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function jt(t,e,n,i,r,a){for(var o,s=0,u=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new Yt(t,a[s]);for(;s<u;++s)(o=e[s])&&(r[s]=o)}function Gt(t,e,n,i,r,a,o){for(var s,u,c=new Map,l=e.length,f=a.length,h=new Array(l),d=0;d<l;++d)(s=e[d])&&(h[d]=u=o.call(s,s.__data__,d,e)+"",c.has(u)?r[d]=s:c.set(u,s));for(d=0;d<f;++d)u=o.call(t,a[d],d,a)+"",(s=c.get(u))?((i[d]=s).__data__=a[d],c.delete(u)):n[d]=new Yt(t,a[d]);for(d=0;d<l;++d)(s=e[d])&&c.get(h[d])===s&&(r[d]=s)}function Ht(t){return t.__data__}function Vt(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function Ut(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function qt(t,e){return t.style.getPropertyValue(e)||Ut(t).getComputedStyle(t,null).getPropertyValue(e)}function Wt(t){return t.trim().split(/^|\s+/)}function Zt(t){return t.classList||new Kt(t)}function Kt(t){this._node=t,this._names=Wt(t.getAttribute("class")||"")}function Jt(t,e){for(var n=Zt(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Qt(t,e){for(var n=Zt(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function te(){this.textContent=""}function ee(){this.innerHTML=""}function ne(){this.nextSibling&&this.parentNode.appendChild(this)}function ie(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function re(){return null}function ae(){var t=this.parentNode;t&&t.removeChild(this)}function oe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function se(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ue(a){return function(){var t=this.__on;if(t){for(var e,n=0,i=-1,r=t.length;n<r;++n)e=t[n],a.type&&e.type!==a.type||e.name!==a.name?t[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?t.length=i:delete this.__on}}}function ce(o,s,u){return function(){var t,e,n=this.__on,i=(e=s,function(t){e.call(this,t,this.__data__)});if(n)for(var r=0,a=n.length;r<a;++r)if((t=n[r]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=i,t.options=u),void(t.value=s);this.addEventListener(o.type,i,u),t={type:o.type,name:o.name,value:s,listener:i,options:u},n?n.push(t):this.__on=[t]}}function le(t,e,n){var i=Ut(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}Yt.prototype={constructor:Yt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Kt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var fe=[null];function he(t,e){this._groups=t,this._parents=e}function de(){return new he([[document.documentElement]],fe)}function ge(t){return"string"==typeof t?new he([[document.querySelector(t)]],[document.documentElement]):new he([[t]],fe)}he.prototype=de.prototype={constructor:he,select:function(t){"function"!=typeof t&&(t=Rt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o,s=e[r],u=s.length,c=i[r]=new Array(u),l=0;l<u;++l)(a=s[l])&&(o=t.call(a,a.__data__,l,s))&&("__data__"in a&&(o.__data__=a.__data__),c[l]=o);return new he(i,this._parents)},selectAll:function(t){var e;t="function"==typeof t?(e=t,function(){return Ot(e.apply(this,arguments))}):Pt(t);for(var n=this._groups,i=n.length,r=[],a=[],o=0;o<i;++o)for(var s,u=n[o],c=u.length,l=0;l<c;++l)(s=u[l])&&(r.push(t.call(s,s.__data__,l,u)),a.push(s));return new he(r,a)},selectChild:function(t){return this.select(null==t?Ft:(e="function"==typeof t?t:Nt(t),function(){return It.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?Xt:(e="function"==typeof t?t:Nt(t),function(){return Bt.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=zt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,u=i[r]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&u.push(a);return new he(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Ht);var n,i=e?Gt:jt,r=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),u=new Array(o),c=new Array(o),l=0;l<o;++l){var f=r[l],h=a[l],d=h.length,g="object"==typeof(g=t.call(f,f&&f.__data__,l,r))&&"length"in g?g:Array.from(g),p=g.length,v=u[l]=new Array(p),y=s[l]=new Array(p);i(f,h,v,y,c[l]=new Array(d),g,e);for(var x,_,m=0,b=0;m<p;++m)if(x=v[m]){for(b<=m&&(b=m+1);!(_=y[b])&&++b<p;);x._next=_||null}}return(s=new he(s,r))._enter=u,s._exit=c,s},enter:function(){return new he(this._enter||this._groups.map($t),this._parents)},exit:function(){return new he(this._exit||this._groups.map($t),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,a=this.exit(),i="function"==typeof t?(i=t(i))&&i.selection():i.append(t+"");return null!=e&&(r=(r=e(r))&&r.selection()),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,n=t._groups,i=e.length,t=n.length,r=Math.min(i,t),a=new Array(i),o=0;o<r;++o)for(var s,u=e[o],c=n[o],l=u.length,f=a[o]=new Array(l),h=0;h<l;++h)(s=u[h]||c[h])&&(f[h]=s);for(;o<i;++o)a[o]=e[o];return new he(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],a=r.length-1,o=r[a];0<=--a;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||Vt;for(var e=this._groups,i=e.length,r=new Array(i),a=0;a<i;++a){for(var o,s=e[a],u=s.length,c=r[a]=new Array(u),l=0;l<u;++l)(o=s[l])&&(c[l]=o);c.sort(t)}return new he(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,a=e[n],o=0,s=a.length;o<s;++o)(r=a[o])&&t.call(r,r.__data__,o,a);return this},attr:function(t,e){var n=Et(t);if(arguments.length<2){t=this.node();return n.local?t.getAttributeNS(n.space,n.local):t.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,i){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):qt(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=Wt(t+"");if(arguments.length<2){for(var i=Zt(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?Jt:Qt)(this,t)}}:e?function(t){return function(){Jt(this,t)}}:function(t){return function(){Qt(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?te:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ee:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(ne)},lower:function(){return this.each(ie)},append:function(t){var e="function"==typeof t?t:Ct(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:Ct(t),i=null==e?re:"function"==typeof e?e:Rt(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(ae)},clone:function(t){return this.select(t?se:oe)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,a=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=a.length;if(!(arguments.length<2)){for(s=e?ce:ue,i=0;i<o;++i)this.each(s(a[i],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(i=0,u=s[c];i<o;++i)if((r=a[i]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return le(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return le(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],a=0,o=r.length;a<o;++a)(i=r[a])&&(yield i)}};var pe=0;function ve(){return new ye}function ye(){this._="@"+(++pe).toString(36)}function xe(t){for(var e;e=t.sourceEvent;)t=e;return t}function _e(t,e){if(t=xe(t),e=void 0===e?t.currentTarget:e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const me={passive:!(ye.prototype=ve.prototype={constructor:ye,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}})},be={capture:!0,passive:!1};function we(t){t.stopImmediatePropagation()}function Te(t){t.preventDefault(),t.stopImmediatePropagation()}function Ae(t){var e=t.document.documentElement,t=ge(t).on("dragstart.drag",Te,be);"onselectstart"in e?t.on("selectstart.drag",Te,be):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Me(t,e){var n=t.document.documentElement,i=ge(t).on("dragstart.drag",null);e&&(i.on("click.drag",Te,be),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var ke=t=>()=>t;function Se(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:a,x:o,y:s,dx:u,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}function Ee(t){return!t.ctrlKey&&!t.button}function Ce(){return this.parentNode}function De(t,e){return null==e?{x:t.x,y:t.y}:e}function Re(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oe(t,e,n){(t.prototype=e.prototype=n).constructor=t}function Le(t,e){var n,i=Object.create(t.prototype);for(n in e)i[n]=e[n];return i}function Pe(){}Se.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var ze=1/.7,Ne="\\s*([+-]?\\d+)\\s*",Ie="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Be=/^#([0-9a-f]{3,8})$/,Xe=new RegExp("^rgb\\("+[Ne,Ne,Ne]+"\\)$"),$e=new RegExp("^rgb\\("+[Fe,Fe,Fe]+"\\)$"),Ye=new RegExp("^rgba\\("+[Ne,Ne,Ne,Ie]+"\\)$"),je=new RegExp("^rgba\\("+[Fe,Fe,Fe,Ie]+"\\)$"),Ge=new RegExp("^hsl\\("+[Ie,Fe,Fe]+"\\)$"),He=new RegExp("^hsla\\("+[Ie,Fe,Fe,Ie]+"\\)$"),Ve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ue(){return this.rgb().formatHex()}function qe(){return this.rgb().formatRgb()}function We(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Be.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ze(e):3===n?new tn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ke(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ke(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Xe.exec(t))?new tn(e[1],e[2],e[3],1):(e=$e.exec(t))?new tn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ye.exec(t))?Ke(e[1],e[2],e[3],e[4]):(e=je.exec(t))?Ke(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ge.exec(t))?an(e[1],e[2]/100,e[3]/100,1):(e=He.exec(t))?an(e[1],e[2]/100,e[3]/100,e[4]):Ve.hasOwnProperty(t)?Ze(Ve[t]):"transparent"===t?new tn(NaN,NaN,NaN,0):null}function Ze(t){return new tn(t>>16&255,t>>8&255,255&t,1)}function Ke(t,e,n,i){return new tn(t=i<=0?e=n=NaN:t,e,n,i)}function Je(t){return(t=t instanceof Pe?t:We(t))?new tn((t=t.rgb()).r,t.g,t.b,t.opacity):new tn}function Qe(t,e,n,i){return 1===arguments.length?Je(t):new tn(t,e,n,null==i?1:i)}function tn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function en(){return"#"+rn(this.r)+rn(this.g)+rn(this.b)}function nn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function rn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function an(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new un(t,e,n,i)}function on(t){if(t instanceof un)return new un(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof Pe)?We(t):t))return new un;if(t instanceof un)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,u=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=u<.5?a+r:2-a-r,o*=60):s=0<u&&u<1?0:o,new un(o,s,u,t.opacity)}function sn(t,e,n,i){return 1===arguments.length?on(t):new un(t,e,n,null==i?1:i)}function un(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function cn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Oe(Pe,We,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ue,formatHex:Ue,formatHsl:function(){return on(this).formatHsl()},formatRgb:qe,toString:qe}),Oe(tn,Qe,Le(Pe,{brighter:function(t){return t=null==t?ze:Math.pow(ze,t),new tn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new tn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:en,formatHex:en,formatRgb:nn,toString:nn})),Oe(un,sn,Le(Pe,{brighter:function(t){return t=null==t?ze:Math.pow(ze,t),new un(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new un(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new tn(cn(240<=t?t-240:120+t,n,e),cn(t,n,e),cn(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const ln=Math.PI/180,fn=180/Math.PI,hn=.96422,dn=1,gn=.82521,pn=4/29,vn=6/29,yn=3*vn*vn,xn=vn*vn*vn;function _n(t){if(t instanceof bn)return new bn(t.l,t.a,t.b,t.opacity);if(t instanceof En)return Cn(t);var e,n,i=Mn((t=!(t instanceof tn)?Je(t):t).r),r=Mn(t.g),a=Mn(t.b),o=wn((.2225045*i+.7168786*r+.0606169*a)/dn);return i===r&&r===a?e=n=o:(e=wn((.4360747*i+.3850649*r+.1430804*a)/hn),n=wn((.0139322*i+.0971045*r+.7141733*a)/gn)),new bn(116*o-16,500*(e-o),200*(o-n),t.opacity)}function mn(t,e,n,i){return 1===arguments.length?_n(t):new bn(t,e,n,null==i?1:i)}function bn(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function wn(t){return t>xn?Math.pow(t,1/3):t/yn+pn}function Tn(t){return t>vn?t*t*t:yn*(t-pn)}function An(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Mn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kn(t){if(t instanceof En)return new En(t.h,t.c,t.l,t.opacity);if(0===(t=!(t instanceof bn)?_n(t):t).a&&0===t.b)return new En(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*fn;return new En(e<0?360+e:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Sn(t,e,n,i){return 1===arguments.length?kn(t):new En(t,e,n,null==i?1:i)}function En(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Cn(t){if(isNaN(t.h))return new bn(t.l,0,0,t.opacity);var e=t.h*ln;return new bn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Oe(bn,mn,Le(Pe,{brighter:function(t){return new bn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new bn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new tn(An(3.1338561*(e=hn*Tn(e))-1.6168667*(t=dn*Tn(t))-.4906146*(n=gn*Tn(n))),An(-.9787684*e+1.9161415*t+.033454*n),An(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Oe(En,Sn,Le(Pe,{brighter:function(t){return new En(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new En(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Cn(this).rgb()}}));var Dn=1.78277,Rn=-.29227,On=-.90649,Ln=1.97294,Pn=Ln*On,zn=Ln*Dn,Nn=Dn*Rn- -.14861*On;function In(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Fn)return new Fn(t.h,t.s,t.l,t.opacity);var e=(t=!(t instanceof tn)?Je(t):t).r/255,n=t.g/255,i=t.b/255,r=(Nn*i+Pn*e-zn*n)/(Nn+Pn-zn),i=(Ln*(n-r)-Rn*(e=i-r))/On,n=Math.sqrt(i*i+e*e)/(Ln*r*(1-r));return new Fn((e=n?Math.atan2(i,e)*fn-120:NaN)<0?e+360:e,n,r,t.opacity)}(t):new Fn(t,e,n,null==i?1:i)}function Fn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Bn(t,e,n,i,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*i+o*r)/6}function Xn(o){var s=o.length-1;return function(t){var e=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),n=o[e],i=o[e+1],r=0<e?o[e-1]:2*n-i,a=e<s-1?o[e+2]:2*i-n;return Bn((t-e/s)*s,r,n,i,a)}}function $n(o){var s=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*s),n=o[(e+s-1)%s],i=o[e%s],r=o[(e+1)%s],a=o[(e+2)%s];return Bn((t-e/s)*s,n,i,r,a)}}Oe(Fn,In,Le(Pe,{brighter:function(t){return t=null==t?ze:Math.pow(ze,t),new Fn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Fn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ln,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),t=Math.sin(t);return new tn(255*(e+n*(-.14861*i+Dn*t)),255*(e+n*(Rn*i+On*t)),255*(e+Ln*i*n),this.opacity)}}));var Yn=t=>()=>t;function jn(e,n){return function(t){return e+t*n}}function Gn(t,e){var n=e-t;return n?jn(t,180<n||n<-180?n-360*Math.round(n/360):n):Yn(isNaN(t)?e:t)}function Hn(a){return 1==(a=+a)?Vn:function(t,e){return e-t?(n=t,i=e,r=a,n=Math.pow(n,r),i=Math.pow(i,r)-n,r=1/r,function(t){return Math.pow(n+t*i,r)}):Yn(isNaN(t)?e:t);var n,i,r}}function Vn(t,e){var n=e-t;return n?jn(t,n):Yn(isNaN(t)?e:t)}var Un=function t(e){var o=Hn(e);function n(e,t){var n=o((e=Qe(e)).r,(t=Qe(t)).r),i=o(e.g,t.g),r=o(e.b,t.b),a=Vn(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=r(t),e.opacity=a(t),e+""}}return n.gamma=t,n}(1);function qn(s){return function(t){for(var e,n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),o=0;o<n;++o)e=Qe(t[o]),i[o]=e.r||0,r[o]=e.g||0,a[o]=e.b||0;return i=s(i),r=s(r),a=s(a),e.opacity=1,function(t){return e.r=i(t),e.g=r(t),e.b=a(t),e+""}}}var Wn=qn(Xn),Zn=qn($n);function Kn(e,n){n=n||[];var i,r=e?Math.min(n.length,e.length):0,a=n.slice();return function(t){for(i=0;i<r;++i)a[i]=e[i]*(1-t)+n[i]*t;return a}}function Jn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Qn(t,e){for(var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),o=0;o<i;++o)r[o]=oi(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(t){for(o=0;o<i;++o)a[o]=r[o](t);return a}}function ti(e,n){var i=new Date;return e=+e,n=+n,function(t){return i.setTime(e*(1-t)+n*t),i}}function ei(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function ni(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),e=null===e||"object"!=typeof e?{}:e)n in t?i[n]=oi(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var ii=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ri=new RegExp(ii.source,"g");function ai(t,i){var e,n,r,a,o,s=ii.lastIndex=ri.lastIndex=0,u=-1,c=[],l=[];for(t+="",i+="";(e=ii.exec(t))&&(n=ri.exec(i));)(r=n.index)>s&&(r=i.slice(s,r),c[u]?c[u]+=r:c[++u]=r),(e=e[0])===(n=n[0])?c[u]?c[u]+=n:c[++u]=n:(c[++u]=null,l.push({i:u,x:ei(e,n)})),s=ri.lastIndex;return s<i.length&&(r=i.slice(s),c[u]?c[u]+=r:c[++u]=r),c.length<2?l[0]?(o=l[0].x,function(t){return o(t)+""}):(a=i,function(){return a}):(i=l.length,function(t){for(var e,n=0;n<i;++n)c[(e=l[n]).i]=e.x(t);return c.join("")})}function oi(t,e){var n=typeof e;return null==e||"boolean"==n?Yn(e):("number"==n?ei:"string"==n?(n=We(e))?(e=n,Un):ai:e instanceof We?Un:e instanceof Date?ti:Jn(e)?Kn:Array.isArray(e)?Qn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ni:ei)(t,e)}function si(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var ui,ci=180/Math.PI,li={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fi(t,e,n,i,r,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,u/=s),t*i<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*ci,skewX:Math.atan(u)*ci,scaleX:o,scaleY:s}}function hi(f,h,d,g){function p(t){return t.length?t.pop()+" ":""}return function(t,e){var n,i,r,a,o,s,u,c=[],l=[];return t=f(t),e=f(e),r=t.translateX,a=t.translateY,u=e.translateX,s=e.translateY,o=c,n=l,r!==u||a!==s?(i=o.push("translate(",null,h,null,d),n.push({i:i-4,x:ei(r,u)},{i:i-2,x:ei(a,s)})):(u||s)&&o.push("translate("+u+h+s+d),n=t.rotate,r=e.rotate,i=c,a=l,n!==r?(180<n-r?r+=360:180<r-n&&(n+=360),a.push({i:i.push(p(i)+"rotate(",null,g)-2,x:ei(n,r)})):r&&i.push(p(i)+"rotate("+r+g),o=t.skewX,u=e.skewX,s=c,a=l,o!==u?a.push({i:s.push(p(s)+"skewX(",null,g)-2,x:ei(o,u)}):u&&s.push(p(s)+"skewX("+u+g),n=t.scaleX,i=t.scaleY,r=e.scaleX,a=e.scaleY,o=c,s=l,n!==r||i!==a?(u=o.push(p(o)+"scale(",null,",",null,")"),s.push({i:u-4,x:ei(n,r)},{i:u-2,x:ei(i,a)})):1===r&&1===a||o.push(p(o)+"scale("+r+","+a+")"),t=e=null,function(t){for(var e,n=-1,i=l.length;++n<i;)c[(e=l[n]).i]=e.x(t);return c.join("")}}}var di=hi(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?li:fi(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),gi=hi(function(t){return null==t?li:((ui=ui||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=ui.transform.baseVal.consolidate())?fi((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):li)},", ",")",")");function pi(t){return((t=Math.exp(t))+1/t)/2}var vi=function n(h,d,g){function t(t,e){var i,r,a,n,o=t[0],s=t[1],u=t[2],c=e[0],t=e[1],e=e[2],l=c-o,f=t-s,c=l*l+f*f;return(n=c<1e-12?(a=Math.log(e/u)/h,function(t){return[o+t*l,s+t*f,u*Math.exp(h*t*a)]}):(i=Math.sqrt(c),t=(e*e-u*u+g*c)/(2*u*d*i),n=(e*e-u*u-g*c)/(2*e*d*i),r=Math.log(Math.sqrt(t*t+1)-t),a=(Math.log(Math.sqrt(n*n+1)-n)-r)/h,function(t){var e=t*a,n=pi(r),t=u/(d*i)*(n*(t=h*e+r,((t=Math.exp(2*t))-1)/(t+1))-(t=r,((t=Math.exp(t))-1/t)/2));return[o+t*l,s+t*f,u*n/pi(h*e+r)]})).duration=1e3*a*h/Math.SQRT2,n}return t.rho=function(t){var e=Math.max(.001,+t),t=e*e;return n(e,t,t*t)},t}(Math.SQRT2,2,4);function yi(o){return function(e,t){var n=o((e=sn(e)).h,(t=sn(t)).h),i=Vn(e.s,t.s),r=Vn(e.l,t.l),a=Vn(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=i(t),e.l=r(t),e.opacity=a(t),e+""}}}var xi=yi(Gn),_i=yi(Vn);function mi(o){return function(e,t){var n=o((e=Sn(e)).h,(t=Sn(t)).h),i=Vn(e.c,t.c),r=Vn(e.l,t.l),a=Vn(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=i(t),e.l=r(t),e.opacity=a(t),e+""}}}var bi=mi(Gn),wi=mi(Vn);function Ti(s){return function t(o){function e(e,t){var n=s((e=In(e)).h,(t=In(t)).h),i=Vn(e.s,t.s),r=Vn(e.l,t.l),a=Vn(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=i(t),e.l=r(Math.pow(t,o)),e.opacity=a(t),e+""}}return o=+o,e.gamma=t,e}(1)}var Ai=Ti(Gn),Mi=Ti(Vn);function ki(t,e){void 0===e&&(e=t,t=oi);for(var n=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);n<i;)a[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return a[e](t-e)}}var Si,Ei,Ci=0,Di=0,Ri=0,Oi=1e3,Li=0,Pi=0,zi=0,Ni="object"==typeof performance&&performance.now?performance:Date,Ii="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Fi(){return Pi||(Ii(Bi),Pi=Ni.now()+zi)}function Bi(){Pi=0}function Xi(){this._call=this._time=this._next=null}function $i(t,e,n){var i=new Xi;return i.restart(t,e,n),i}function Yi(){Fi(),++Ci;for(var t,e=Si;e;)0<=(t=Pi-e._time)&&e._call.call(void 0,t),e=e._next;--Ci}function ji(){Pi=(Li=Ni.now())+zi,Ci=Di=0;try{Yi()}finally{Ci=0,function(){var t,e,n=Si,i=1/0;for(;n;)n=n._call?(i>n._time&&(i=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:Si=e);Ei=t,Hi(i)}(),Pi=0}}function Gi(){var t=Ni.now(),e=t-Li;Oi<e&&(zi-=e,Li=t)}function Hi(t){Ci||(Di=Di&&clearTimeout(Di),24<t-Pi?(t<1/0&&(Di=setTimeout(ji,t-Ni.now()-zi)),Ri=Ri&&clearInterval(Ri)):(Ri||(Li=Ni.now(),Ri=setInterval(Gi,Oi)),Ci=1,Ii(ji)))}function Vi(e,n,t){var i=new Xi;return i.restart(t=>{i.stop(),e(t+n)},n=null==n?0:+n,t),i}Xi.prototype=$i.prototype={constructor:Xi,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Fi():+n)+(null==e?0:+e),this._next||Ei===this||(Ei?Ei._next=this:Si=this,Ei=this),this._call=t,this._time=n,Hi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hi())}};var Ui=Tt("start","end","cancel","interrupt"),qi=[],Wi=0,Zi=1,Ki=2,Ji=3,Qi=4,tr=5,er=6;function nr(t,e,n,i,r,a){var o,s,u,c,l,f=t.__transition;if(f){if(n in f)return}else t.__transition={};function h(t){var e,n,i,r;if(u.state!==Zi)return g();for(e in l)if((r=l[e]).name===u.name){if(r.state===Ji)return Vi(h);r.state===Qi?(r.state=er,r.timer.stop(),r.on.call("interrupt",o,o.__data__,r.index,r.group),delete l[e]):+e<s&&(r.state=er,r.timer.stop(),r.on.call("cancel",o,o.__data__,r.index,r.group),delete l[e])}if(Vi(function(){u.state===Ji&&(u.state=Qi,u.timer.restart(d,u.delay,u.time),d(t))}),u.state=Ki,u.on.call("start",o,o.__data__,u.index,u.group),u.state===Ki){for(u.state=Ji,c=new Array(i=u.tween.length),e=0,n=-1;e<i;++e)(r=u.tween[e].value.call(o,o.__data__,u.index,u.group))&&(c[++n]=r);c.length=n+1}}function d(t){for(var e=t<u.duration?u.ease.call(null,t/u.duration):(u.timer.restart(g),u.state=tr,1),n=-1,i=c.length;++n<i;)c[n].call(o,e);u.state===tr&&(u.on.call("end",o,o.__data__,u.index,u.group),g())}function g(){for(var t in u.state=er,u.timer.stop(),delete l[s],l)return;delete o.__transition}o=t,s=n,u={name:e,index:i,group:r,on:Ui,tween:qi,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Wi},((l=o.__transition)[s]=u).timer=$i(function(t){u.state=Zi,u.timer.restart(h,u.delay,u.time),u.delay<=t&&h(t-u.delay)},0,u.time)}function ir(t,e){e=ar(t,e);if(e.state>Wi)throw new Error("too late; already scheduled");return e}function rr(t,e){e=ar(t,e);if(e.state>Ji)throw new Error("too late; already running");return e}function ar(t,e){t=t.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function or(t,e){var n,i,r,a=t.__transition,o=!0;if(a){for(r in e=null==e?null:e+"",a)(n=a[r]).name===e?(i=n.state>Ki&&n.state<tr,n.state=er,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete t.__transition}}function sr(t,e,n){var i=t._id;return t.each(function(){var t=rr(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return ar(t,i).value[e]}}function ur(t,e){var n;return("number"==typeof e?ei:e instanceof We?Un:(n=We(e))?(e=n,Un):ai)(t,e)}function cr(i,r){var a,o;function t(){var e,n,t=r.apply(this,arguments);return a=t!==o?(o=t)&&(e=i,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}):a}return t._value=r,t}function lr(i,r){var a,o;function t(){var e,n,t=r.apply(this,arguments);return a=t!==o?(o=t)&&(e=i,n=t,function(t){this.setAttribute(e,n.call(this,t))}):a}return t._value=r,t}var fr=de.prototype.constructor;function hr(t){return function(){this.style.removeProperty(t)}}function dr(r,a,o){var s,u;function t(){var e,n,i,t=a.apply(this,arguments);return s=t!==u?(u=t)&&(e=r,n=t,i=o,function(t){this.style.setProperty(e,n.call(this,t),i)}):s}return t._value=a,t}function gr(n){var i,r;function t(){var e,t=n.apply(this,arguments);return i=t!==r?(r=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):i}return t._value=n,t}var pr=0;function vr(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function yr(t){return de().transition(t)}var xr=de.prototype;vr.prototype=yr.prototype={constructor:vr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Rt(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s,u,c=i[o],l=c.length,f=a[o]=new Array(l),h=0;h<l;++h)(s=c[h])&&(u=t.call(s,s.__data__,h,c))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,nr(f[h],e,n,h,f,ar(s,n)));return new vr(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Pt(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var u,c=i[s],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var h,d=t.call(u,u.__data__,f,c),g=ar(u,n),p=0,v=d.length;p<v;++p)(h=d[p])&&nr(h,e,n,p,d,g);a.push(d),o.push(u)}return new vr(a,o,e,n)},selectChild:xr.selectChild,selectChildren:xr.selectChildren,filter:function(t){"function"!=typeof t&&(t=zt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,u=i[r]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&u.push(a);return new vr(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,t=n.length,r=Math.min(i,t),a=new Array(i),o=0;o<r;++o)for(var s,u=e[o],c=n[o],l=u.length,f=a[o]=new Array(l),h=0;h<l;++h)(s=u[h]||c[h])&&(f[h]=s);for(;o<i;++o)a[o]=e[o];return new vr(a,this._parents,this._name,this._id)},selection:function(){return new fr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++pr,i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],u=s.length,c=0;c<u;++c)(o=s[c])&&nr(o,t,n,c,s,{time:(o=ar(o,e)).time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease});return new vr(i,this._parents,t,n)},call:xr.call,nodes:xr.nodes,node:xr.node,size:xr.size,empty:xr.empty,each:xr.each,on:function(t,e){var n,i,r,a,o,s,u=this._id;return arguments.length<2?ar(this.node(),u).on.on(t):this.each((n=u,r=e,s=((i=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?ir:rr,function(){var t=s(this,n),e=t.on;e!==a&&(o=(a=e).copy()).on(i,r),t.on=o}))},attr:function(t,e){var n=Et(t),i="transform"===n?gi:ur;return this.attrTween(t,"function"==typeof e?(n.local?function(i,r,a){var o,s,u;return function(){var t,e,n=a(this);if(null!=n)return(t=this.getAttributeNS(i.space,i.local))===(e=n+"")?null:t===o&&e===s?u:(s=e,u=r(o=t,n));this.removeAttributeNS(i.space,i.local)}}:function(i,r,a){var o,s,u;return function(){var t,e,n=a(this);if(null!=n)return(t=this.getAttribute(i))===(e=n+"")?null:t===o&&e===s?u:(s=e,u=r(o=t,n));this.removeAttribute(i)}})(n,i,sr(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,i){var r,a,o=i+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===r?a:a=n(r=t,i)}}:function(e,n,i){var r,a,o=i+"";return function(){var t=this.getAttribute(e);return t===o?null:t===r?a:a=n(r=t,i)}})(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return t=Et(t),this.tween(n,(t.local?cr:lr)(t,e))},style:function(t,e,n){var i,r,a,o,s,u,c,l,f,h,d,g,p,v,y,x,_,m,b,w,T,A,M,k,S,E="transform"==(t+="")?di:ur;return null==e?this.styleTween(t,(T=t,A=E,function(){var t=qt(this,T),e=(this.style.removeProperty(T),qt(this,T));return t===e?null:t===M&&e===k?S:S=A(M=t,k=e)})).on("end.style."+t,hr(t)):"function"==typeof e?this.styleTween(t,(x=E,_=sr(this,"style."+(y=t),e),function(){var t=qt(this,y),e=_(this),n=e+"";return null==e&&(this.style.removeProperty(y),n=e=qt(this,y)),t===n?null:t===m&&n===b?w:(b=n,w=x(m=t,e))})).each((c=this._id,v="end."+(p="style."+(l=t)),function(){var t=rr(this,c),e=t.on,n=null==t.value[p]?g=g||hr(l):void 0;e===f&&d===n||(h=(f=e).copy()).on(v,d=n),t.on=h})):this.styleTween(t,(i=t,r=E,u=(a=e)+"",function(){var t=qt(this,i);return t===u?null:t===o?s:s=r(o=t,a)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,dr(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=sr(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,gr(t))},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=ar(this.node(),n).tween,a=0,o=r.length;a<o;++a)if((i=r[a]).name===t)return i.value;return null}return this.each((null==e?function(r,a){var o,s;return function(){var t=rr(this,r),e=t.tween;if(e!==o)for(var n=0,i=(s=o=e).length;n<i;++n)if(s[n].name===a){(s=s.slice()).splice(n,1);break}t.tween=s}}:function(a,o,s){var u,c;if("function"!=typeof s)throw new Error;return function(){var t=rr(this,a),e=t.tween;if(e!==u){c=(u=e).slice();for(var n={name:o,value:s},i=0,r=c.length;i<r;++i)if(c[i].name===o){c[i]=n;break}i===r&&c.push(n)}t.tween=c}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ir(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ir(this,t).delay=e}})(e,t)):ar(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){rr(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){rr(this,t).duration=e}})(e,t)):ar(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){rr(this,t).ease=e}}(e,t)):ar(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;rr(this,e).ease=t}));var e,n},end:function(){var r,a,o=this,s=o._id,u=o.size();return new Promise(function(t,e){var n={value:e},i={value:function(){0==--u&&t()}};o.each(function(){var t=rr(this,s),e=t.on;e!==r&&((a=(r=e).copy())._.cancel.push(n),a._.interrupt.push(n),a._.end.push(i)),t.on=a}),0===u&&t()})},[Symbol.iterator]:xr[Symbol.iterator]};function _r(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function mr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var br=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),wr=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Tr=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Ar=Math.PI,Mr=Ar/2;function kr(t){return(1-Math.cos(Ar*t))/2}function Sr(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Er(t){return((t*=2)<=1?Sr(1-t):2-Sr(t-1))/2}function Cr(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Dr=4/11,Rr=6/11,Or=8/11,Lr=.75,Pr=9/11,zr=10/11,Nr=.9375,Ir=21/22,Fr=63/64,Br=1/Dr/Dr;function Xr(t){return(t=+t)<Dr?Br*t*t:t<Or?Br*(t-=Rr)*t+Lr:t<zr?Br*(t-=Pr)*t+Nr:Br*(t-=Ir)*t+Fr}var $r=1.70158,Yr=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}($r),jr=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}($r),Gr=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}($r),Hr=2*Math.PI,Vr=function e(n,i){var r=Math.asin(1/(n=Math.max(1,n)))*(i/=Hr);function t(t){return n*Sr(- --t)*Math.sin((r-t)/i)}return t.amplitude=function(t){return e(t,i*Hr)},t.period=function(t){return e(n,t)},t}(1,.3),Ur=function e(n,i){var r=Math.asin(1/(n=Math.max(1,n)))*(i/=Hr);function t(t){return 1-n*Sr(t=+t)*Math.sin((t+r)/i)}return t.amplitude=function(t){return e(t,i*Hr)},t.period=function(t){return e(n,t)},t}(1,.3),qr=function e(n,i){var r=Math.asin(1/(n=Math.max(1,n)))*(i/=Hr);function t(t){return((t=2*t-1)<0?n*Sr(-t)*Math.sin((r-t)/i):2-n*Sr(t)*Math.sin((r+t)/i))/2}return t.amplitude=function(t){return e(t,i*Hr)},t.period=function(t){return e(n,t)},t}(1,.3),Wr={time:null,delay:0,duration:250,ease:mr};de.prototype.interrupt=function(t){return this.each(function(){or(this,t)})},de.prototype.transition=function(t){var e,n;t=t instanceof vr?(e=t._id,t._name):(e=++pr,(n=Wr).time=Fi(),null==t?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],u=s.length,c=0;c<u;++c)(o=s[c])&&nr(o,t,e,c,s,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}(o,e));return new vr(i,this._parents,t,e)};var Zr=[null];var Kr=t=>()=>t;function Jr(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Qr(t){t.preventDefault(),t.stopImmediatePropagation()}var ta={name:"drag"},ea={name:"space"},na={name:"handle"},ia={name:"center"};const{abs:ra,max:aa,min:oa}=Math;function sa(t){return[+t[0],+t[1]]}function ua(t){return[sa(t[0]),sa(t[1])]}var ca={name:"x",handles:["w","e"].map(ya),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},la={name:"y",handles:["n","s"].map(ya),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},fa={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ya),input:function(t){return null==t?null:ua(t)},output:function(t){return t}},ha={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},da={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ga={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},pa={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},va={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ya(t){return{type:t}}function xa(t){return!t.ctrlKey&&!t.button}function _a(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ma(){return navigator.maxTouchPoints||"ontouchstart"in this}function ba(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function wa(z){var N,e=_a,I=xa,n=ma,F=!0,r=Tt("start","brush","end"),i=6;function a(t){var e=t.property("__brush",l).selectAll(".overlay").data([ya("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ha.overlay).merge(e).each(function(){var t=ba(this).extent;ge(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([ya("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ha.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");e=t.selectAll(".handle").data(z.handles,function(t){return t.type});e.exit().remove(),e.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return ha[t.type]}),t.each(B).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",s).filter(n).on("touchstart.brush",s).on("touchmove.brush",u).on("touchend.brush touchcancel.brush",c).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function B(){var t=ge(this),e=ba(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-i/2:e[0][0]-i/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-i/2:e[0][1]-i/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+i:i}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+i:i})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function X(t,e,n){var i=t.__brush.emitter;return!i||n&&i.clean?new o(t,e,n):i}function o(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function s(t){var a,r,o,s,u,c,l,f,h,d,g,p,v,y,x,_,m,b,w,T,A,M,k,e,S,E,C,D,n,R,i;function O(t){for(const n of t.changedTouches||[t])for(const i of M)i.identifier===n.identifier&&(i.cur=_e(n,a));var e;!w||T||A||1!==M.length||(e=M[0],ra(e.cur[0]-e[0])>ra(e.cur[1]-e[1])?A=!0:T=!0);for(const r of M)r.cur&&(r[0]=r.cur[0],r[1]=r.cur[1]);b=!0,Qr(t),L(t)}function L(t){var e,n=M[0],i=n.point0;switch(_=n[0]-i[0],m=n[1]-i[1],o){case ea:case ta:s&&(_=aa(f-h,oa(p-v,_)),S=h+_,C=v+_),u&&(m=aa(d-g,oa(y-x,m)),E=g+m,D=x+m);break;case na:M[1]?(s&&(S=aa(f,oa(p,M[0][0])),C=aa(f,oa(p,M[1][0])),s=1),u&&(E=aa(d,oa(y,M[0][1])),D=aa(d,oa(y,M[1][1])),u=1)):(s<0?(_=aa(f-h,oa(p-h,_)),S=h+_,C=v):0<s&&(_=aa(f-v,oa(p-v,_)),S=h,C=v+_),u<0?(m=aa(d-g,oa(y-g,m)),E=g+m,D=x):0<u&&(m=aa(d-x,oa(y-x,m)),E=g,D=x+m));break;case ia:s&&(S=aa(f,oa(p,h-_*s)),C=aa(f,oa(p,v+_*s))),u&&(E=aa(d,oa(y,g-m*u)),D=aa(d,oa(y,x+m*u)))}C<S&&(s*=-1,e=h,h=v,v=e,e=S,S=C,C=e,r in da&&R.attr("cursor",ha[r=da[r]])),D<E&&(u*=-1,e=g,g=x,x=e,e=E,E=D,D=e,r in ga&&R.attr("cursor",ha[r=ga[r]])),c.selection&&(l=c.selection),T&&(S=l[0][0],C=l[1][0]),A&&(E=l[0][1],D=l[1][1]),l[0][0]===S&&l[0][1]===E&&l[1][0]===C&&l[1][1]===D||(c.selection=[[S,E],[C,D]],B.call(a),k.brush(t,o.name))}function P(t){if(t.stopImmediatePropagation(),t.touches){if(t.touches.length)return;N&&clearTimeout(N),N=setTimeout(function(){N=null},500)}else Me(t.view,b),i.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var e;n.attr("pointer-events","all"),R.attr("cursor",ha.overlay),c.selection&&(l=c.selection),(e=l)[0][0]!==e[1][0]&&e[0][1]!==e[1][1]||(c.selection=null,B.call(a)),k.end(t,o.name)}N&&!t.touches||I.apply(this,arguments)&&(r=t.target.__data__.type,o="selection"===(F&&t.metaKey?r="overlay":r)?ta:F&&t.altKey?ia:na,s=z===la?null:pa[r],u=z===ca?null:va[r],e=(c=ba(a=this)).extent,l=c.selection,f=e[0][0],d=e[0][1],p=e[1][0],y=e[1][1],m=_=0,w=s&&u&&F&&t.shiftKey,M=Array.from(t.touches||[t],t=>{var e=t.identifier;return(t=_e(t,a)).point0=t.slice(),t.identifier=e,t}),or(a),k=X(a,arguments,!0).beforestart(),"overlay"===r?(l&&(b=!0),e=[M[0],M[1]||M[0]],c.selection=l=[[h=z===la?f:oa(e[0][0],e[1][0]),g=z===ca?d:oa(e[0][1],e[1][1])],[v=z===la?p:aa(e[0][0],e[1][0]),x=z===ca?y:aa(e[0][1],e[1][1])]],1<M.length&&L(t)):(h=l[0][0],g=l[0][1],v=l[1][0],x=l[1][1]),S=h,E=g,C=v,D=x,n=ge(a).attr("pointer-events","none"),R=n.selectAll(".overlay").attr("cursor",ha[r]),t.touches?(k.moved=O,k.ended=P):(i=ge(t.view).on("mousemove.brush",O,!0).on("mouseup.brush",P,!0),F&&i.on("keydown.brush",function(t){switch(t.keyCode){case 16:w=s&&u;break;case 18:o===na&&(s&&(v=C-_*s,h=S+_*s),u&&(x=D-m*u,g=E+m*u),o=ia,L(t));break;case 32:o!==na&&o!==ia||(s<0?v=C-_:0<s&&(h=S-_),u<0?x=D-m:0<u&&(g=E-m),o=ea,R.attr("cursor",ha.selection),L(t));break;default:return}Qr(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:w&&(T=A=w=!1,L(t));break;case 18:o===ia&&(s<0?v=C:0<s&&(h=S),u<0?x=D:0<u&&(g=E),o=na,L(t));break;case 32:o===ea&&(o=t.altKey?(s&&(v=C-_*s,h=S+_*s),u&&(x=D-m*u,g=E+m*u),ia):(s<0?v=C:0<s&&(h=S),u<0?x=D:0<u&&(g=E),na),R.attr("cursor",ha[r]),L(t));break;default:return}Qr(t)},!0),Ae(t.view)),B.call(a),k.start(t,o.name))}function u(t){X(this,arguments).moved(t)}function c(t){X(this,arguments).ended(t)}function l(){var t=this.__brush||{selection:null};return t.extent=ua(e.apply(this,arguments)),t.dim=z,t}return a.move=function(t,s,i){t.tween?t.on("start.brush",function(t){X(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){X(this,arguments).end(t)}).tween("brush",function(){var e=this,n=e.__brush,i=X(e,arguments),t=n.selection,r=z.input("function"==typeof s?s.apply(this,arguments):s,n.extent),a=oi(t,r);function o(t){n.selection=1===t&&null===r?null:a(t),B.call(e),i.brush()}return null!==t&&null!==r?o:o(1)}):t.each(function(){var t=arguments,e=this.__brush,n=z.input("function"==typeof s?s.apply(this,t):s,e.extent),t=X(this,t).beforestart();or(this),e.selection=null===n?null:n,B.call(this),t.start(i).brush(i).end(i)})},a.clear=function(t,e){a.move(t,null,e)},o.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(t,e,n){var i=ge(this.that).datum();r.call(t,this.that,new Jr(t,{sourceEvent:e,target:a,selection:z.output(this.state.selection),mode:n,dispatch:r}),i)}},a.extent=function(t){return arguments.length?(e="function"==typeof t?t:Kr(ua(t)),a):e},a.filter=function(t){return arguments.length?(I="function"==typeof t?t:Kr(!!t),a):I},a.touchable=function(t){return arguments.length?(n="function"==typeof t?t:Kr(!!t),a):n},a.handleSize=function(t){return arguments.length?(i=+t,a):i},a.keyModifiers=function(t){return arguments.length?(F=!!t,a):F},a.on=function(){var t=r.on.apply(r,arguments);return t===r?a:t},a}var Ta=Math.abs,Aa=Math.cos,Ma=Math.sin,ka=Math.PI,Sa=ka/2,Ea=2*ka,Ca=Math.max,Da=1e-12;function Ra(n,t){return Array.from({length:t-n},(t,e)=>n+e)}function Oa(x,e){var _=0,m=null,b=null,w=null;function i(i){var t,r=i.length,a=new Array(r),n=Ra(0,r),o=new Array(r*r),s=new Array(r),u=0;i=Float64Array.from({length:r*r},e?(t,e)=>i[e%r][e/r|0]:(t,e)=>i[e/r|0][e%r]);for(let n=0;n<r;++n){let e=0;for(let t=0;t<r;++t)e+=i[n*r+t]+x*i[t*r+n];u+=a[n]=e}t=(u=Ca(0,Ea-_*r)/u)?_:Ea/r;{let e=0;m&&n.sort((t,e)=>m(a[t],a[e]));for(const f of n){var c,l=e;if(x){const h=Ra(1+~r,r).filter(t=>t<0?i[~t*r+f]:i[f*r+t]);b&&h.sort((t,e)=>b(t<0?-i[~t*r+f]:i[f*r+t],e<0?-i[~e*r+f]:i[f*r+e]));for(const d of h)if(d<0){const g=o[~d*r+f]||(o[~d*r+f]={source:null,target:null});g.target={index:f,startAngle:e,endAngle:e+=i[~d*r+f]*u,value:i[~d*r+f]}}else{const p=o[f*r+d]||(o[f*r+d]={source:null,target:null});p.source={index:f,startAngle:e,endAngle:e+=i[f*r+d]*u,value:i[f*r+d]}}s[f]={index:f,startAngle:l,endAngle:e,value:a[f]}}else{const v=Ra(0,r).filter(t=>i[f*r+t]||i[t*r+f]);b&&v.sort((t,e)=>b(i[f*r+t],i[f*r+e]));for(const y of v){let t;f<y?(t=o[f*r+y]||(o[f*r+y]={source:null,target:null}),t.source={index:f,startAngle:e,endAngle:e+=i[f*r+y]*u,value:i[f*r+y]}):(t=o[y*r+f]||(o[y*r+f]={source:null,target:null}),t.target={index:f,startAngle:e,endAngle:e+=i[f*r+y]*u,value:i[f*r+y]},f===y&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value&&(c=t.source,t.source=t.target,t.target=c)}s[f]={index:f,startAngle:l,endAngle:e,value:a[f]}}e+=t}}return(o=Object.values(o)).groups=s,w?o.sort(w):o}return i.padAngle=function(t){return arguments.length?(_=Ca(0,t),i):_},i.sortGroups=function(t){return arguments.length?(m=t,i):m},i.sortSubgroups=function(t){return arguments.length?(b=t,i):b},i.sortChords=function(t){return arguments.length?(null==t?w=null:(w=function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)})._=n=t,i):w&&w._;var n},i}const La=Math.PI,Pa=2*La,za=1e-6,Na=Pa-za;function Ia(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Fa(){return new Ia}Ia.prototype=Fa.prototype={constructor:Ia,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){var a,o,s=this._x1,u=this._y1,c=(n=+n)-(t=+t),l=(i=+i)-(e=+e),f=s-t,h=u-e,d=f*f+h*h;if((r=+r)<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=e):d>za&&(Math.abs(h*c-l*f)>za&&r?(o=c*c+l*l,s=(a=n-s)*a+(n=i-u)*n,i=Math.sqrt(o),u=Math.sqrt(d),u=(s=r*Math.tan((La-Math.acos((o+d-s)/(2*i*u)))/2))/u,i=s/i,Math.abs(u-1)>za&&(this._+="L"+(t+u*f)+","+(e+u*h)),this._+="A"+r+","+r+",0,0,"+ +(f*n<h*a)+","+(this._x1=t+i*c)+","+(this._y1=e+i*l)):this._+="L"+(this._x1=t)+","+(this._y1=e))},arc:function(t,e,n,i,r,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(i),s=n*Math.sin(i),u=t+o,c=e+s,l=1^a,i=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>za||Math.abs(this._y1-c)>za)&&(this._+="L"+u+","+c),n&&((i=i<0?i%Pa+Pa:i)>Na?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):i>za&&(this._+="A"+n+","+n+",0,"+ +(i>=La)+","+l+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Ba=Array.prototype.slice;function Xa(t){return function(){return t}}function $a(t){return t.source}function Ya(t){return t.target}function ja(t){return t.radius}function Ga(t){return t.startAngle}function Ha(t){return t.endAngle}function Va(){return 0}function Ua(){return 10}function qa(u){var c=$a,l=Ya,f=ja,h=ja,d=Ga,g=Ha,p=Va,v=null;function e(){var t,e=c.apply(this,arguments),n=l.apply(this,arguments),i=p.apply(this,arguments)/2,r=Ba.call(arguments),a=+f.apply(this,(r[0]=e,r)),o=d.apply(this,r)-Sa,s=g.apply(this,r)-Sa,e=+h.apply(this,(r[0]=n,r)),n=d.apply(this,r)-Sa,r=g.apply(this,r)-Sa;if(v=v||(t=Fa()),Da<i&&(Ta(s-o)>2*i+Da?o<s?(o+=i,s-=i):(o-=i,s+=i):o=s=(o+s)/2,Ta(r-n)>2*i+Da?n<r?(n+=i,r-=i):(n-=i,r+=i):n=r=(n+r)/2),v.moveTo(a*Aa(o),a*Ma(o)),v.arc(0,0,a,o,s),o===n&&s===r||(u?(i=e-+u.apply(this,arguments),s=(n+r)/2,v.quadraticCurveTo(0,0,i*Aa(n),i*Ma(n)),v.lineTo(e*Aa(s),e*Ma(s)),v.lineTo(i*Aa(r),i*Ma(r))):(v.quadraticCurveTo(0,0,e*Aa(n),e*Ma(n)),v.arc(0,0,e,n,r))),v.quadraticCurveTo(0,0,a*Aa(o),a*Ma(o)),v.closePath(),t)return v=null,t+""||null}return u&&(e.headRadius=function(t){return arguments.length?(u="function"==typeof t?t:Xa(+t),e):u}),e.radius=function(t){return arguments.length?(f=h="function"==typeof t?t:Xa(+t),e):f},e.sourceRadius=function(t){return arguments.length?(f="function"==typeof t?t:Xa(+t),e):f},e.targetRadius=function(t){return arguments.length?(h="function"==typeof t?t:Xa(+t),e):h},e.startAngle=function(t){return arguments.length?(d="function"==typeof t?t:Xa(+t),e):d},e.endAngle=function(t){return arguments.length?(g="function"==typeof t?t:Xa(+t),e):g},e.padAngle=function(t){return arguments.length?(p="function"==typeof t?t:Xa(+t),e):p},e.source=function(t){return arguments.length?(c=t,e):c},e.target=function(t){return arguments.length?(l=t,e):l},e.context=function(t){return arguments.length?(v=null==t?null:t,e):v},e}var Wa=Array.prototype.slice;function Za(t,e){return t-e}var Ka=t=>()=>t;function Ja(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=function(t,e){for(var n=e[0],i=e[1],r=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var u=t[a],c=u[0],l=u[1],f=t[s],h=f[0],d=f[1];if(function(t,e,n){return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&function(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}(t[t=+(t[0]===e[0])],n[t],e[t])}(u,f,e))return 0;i<l!=i<d&&n<(h-c)*(i-l)/(d-l)+c&&(r=-r)}return r}(t,e[i]))return n;return 0}function Qa(){}var to=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function eo(){var h=1,d=1,r=G,a=e;function n(e){var t,n,i=r(e);return(i=Array.isArray(i)?i.slice().sort(Za):(n=Y((t=y(e))[0],t[1],i),X(Math.floor(t[0]/n)*n,Math.floor(t[1]/n-1)*n,i))).map(t=>o(e,t))}function o(e,n){var r=[],i=[];return function(t,e,o){var s,u,n,i,r,a,c=new Array,l=new Array;s=u=-1,i=t[0]>=e,to[i<<1].forEach(f);for(;++s<h-1;)n=i,i=t[s+1]>=e,to[n|i<<1].forEach(f);to[i<<0].forEach(f);for(;++u<d-1;){for(s=-1,i=t[u*h+h]>=e,r=t[u*h]>=e,to[i<<1|r<<2].forEach(f);++s<h-1;)n=i,i=t[u*h+h+s+1]>=e,a=r,r=t[u*h+s+1]>=e,to[n|i<<1|r<<2|a<<3].forEach(f);to[i|r<<3].forEach(f)}s=-1,r=t[u*h]>=e,to[r<<2].forEach(f);for(;++s<h-1;)a=r,r=t[u*h+s+1]>=e,to[r<<2|a<<3].forEach(f);function f(t){var e,n=[t[0][0]+s,t[0][1]+u],i=[t[1][0]+s,t[1][1]+u],r=g(n),a=g(i);(t=l[r])?(e=c[a])?(delete l[t.end],delete c[e.start],t===e?(t.ring.push(i),o(t.ring)):c[t.start]=l[e.end]={start:t.start,end:e.end,ring:t.ring.concat(e.ring)}):(delete l[t.end],t.ring.push(i),l[t.end=a]=t):(t=c[a])?(e=l[r])?(delete c[t.start],delete l[e.end],t===e?(t.ring.push(i),o(t.ring)):c[e.start]=l[t.end]={start:e.start,end:t.end,ring:e.ring.concat(t.ring)}):(delete c[t.start],t.ring.unshift(n),c[t.start=r]=t):c[r]=l[a]={start:r,end:a,ring:[n,i]}}to[r<<3].forEach(f)}(e,n,function(t){a(t,e,n),0<function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)?r.push([t]):i.push(t)}),i.forEach(function(t){for(var e,n=0,i=r.length;n<i;++n)if(-1!==Ja((e=r[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:n,coordinates:r}}function g(t){return 2*t[0]+t[1]*(h+1)*4}function e(t,s,u){t.forEach(function(t){var e,n=t[0],i=t[1],r=0|n,a=0|i,o=s[a*h+r];0<n&&n<h&&r===n&&(e=s[a*h+r-1],t[0]=n+(u-e)/(o-e)-.5),0<i&&i<d&&a===i&&(e=s[(a-1)*h+r],t[1]=i+(u-e)/(o-e)-.5)})}return n.contour=o,n.size=function(t){if(!arguments.length)return[h,d];var e=Math.floor(t[0]),t=Math.floor(t[1]);if(!(0<=e&&0<=t))throw new Error("invalid size");return h=e,d=t,n},n.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:Array.isArray(t)?Ka(Wa.call(t)):Ka(t),n):r},n.smooth=function(t){return arguments.length?(a=t?e:Qa,n):a===e},n}function no(t,e,n){for(var i=t.width,r=t.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=t.data[s+o*i]),n<=s&&(a<=s&&(u-=t.data[s-a+o*i]),e.data[s-n+o*i]=u/Math.min(s+1,i-1+a-s,a))}function io(t,e,n){for(var i=t.width,r=t.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=t.data[o+s*i]),n<=s&&(a<=s&&(u-=t.data[o+(s-a)*i]),e.data[o+(s-n)*i]=u/Math.min(s+1,r-1+a-s,a))}function ro(t){return t[0]}function ao(t){return t[1]}function oo(){return 1}var so=11102230246251565e-32;const uo=134217729,co=(3+8*so)*so;function lo(t,e,n,i,r){let a,o,s,u,c=e[0],l=i[0],f=0,h=0;l>c==l>-c?(a=c,c=e[++f]):(a=l,l=i[++h]);let d=0;if(f<t&&h<n)for(l>c==l>-c?(o=c+a,s=a-(o-c),c=e[++f]):(o=l+a,s=a-(o-l),l=i[++h]),a=o,0!==s&&(r[d++]=s);f<t&&h<n;)l>c==l>-c?(o=a+c,u=o-a,s=a-(o-u)+(c-u),c=e[++f]):(o=a+l,u=o-a,s=a-(o-u)+(l-u),l=i[++h]),a=o,0!==s&&(r[d++]=s);for(;f<t;)o=a+c,u=o-a,s=a-(o-u)+(c-u),c=e[++f],a=o,0!==s&&(r[d++]=s);for(;h<n;)o=a+l,u=o-a,s=a-(o-u)+(l-u),l=i[++h],a=o,0!==s&&(r[d++]=s);return 0===a&&0!==d||(r[d++]=a),d}function fo(t){return new Float64Array(t)}const ho=(2+12*so)*so,go=(9+64*so)*so*so,po=fo(4),vo=fo(8),yo=fo(12),xo=fo(16),_o=fo(4);function mo(t,e,n,i,r,a,o){var s,u,c,l,f,h,d,g,p=t-r,v=n-r,y=e-a,x=i-a,_=p*x,m=uo*p,b=m-(m-p),w=p-b,T=y*v,A=(h=w*(u=x-(s=(m=uo*x)-(m-x)))-(_-b*s-w*s-b*u))-(c=h-(d=(w=y-(b=(m=uo*y)-(m-y)))*(u=v-(s=(m=uo*v)-(m-v)))-(T-b*s-w*s-b*u)));po[0]=h-(c+A)+(A-d),A=(f=_-((l=_+c)-(A=l-_))+(c-A))-(c=f-T),po[1]=f-(c+A)+(A-T),A=(g=l+c)-l,po[2]=l-(g-A)+(c-A),po[3]=g;let M=function(e,n){let i=n[0];for(let t=1;t<e;t++)i+=n[t];return i}(4,po),k=ho*o;if(M>=k||-M>=k)return M;if(t=t-(p+(A=t-p))+(A-r),r=n-(v+(A=n-v))+(A-r),e=e-(y+(A=e-y))+(A-a),a=i-(x+(A=i-x))+(A-a),0==t&&0==e&&0==r&&0==a)return M;if(k=go*o+co*Math.abs(M),M+=p*a+x*t-(y*r+v*e),M>=k||-M>=k)return M;_=t*x,T=e*v,A=(h=(w=t-(b=(m=uo*t)-(m-t)))*(u=x-(s=(m=uo*x)-(m-x)))-(_-b*s-w*s-b*u))-(c=h-(d=(w=e-(b=(m=uo*e)-(m-e)))*(u=v-(s=(m=uo*v)-(m-v)))-(T-b*s-w*s-b*u))),_o[0]=h-(c+A)+(A-d),A=(f=_-((l=_+c)-(A=l-_))+(c-A))-(c=f-T),_o[1]=f-(c+A)+(A-T),A=(g=l+c)-l,_o[2]=l-(g-A)+(c-A),_o[3]=g;v=lo(4,po,4,_o,vo);_=p*a,T=y*r,A=(h=(w=p-(b=(m=uo*p)-(m-p)))*(u=a-(s=(m=uo*a)-(m-a)))-(_-b*s-w*s-b*u))-(c=h-(d=(w=y-(b=(m=uo*y)-(m-y)))*(u=r-(s=(m=uo*r)-(m-r)))-(T-b*s-w*s-b*u))),_o[0]=h-(c+A)+(A-d),A=(f=_-((l=_+c)-(A=l-_))+(c-A))-(c=f-T),_o[1]=f-(c+A)+(A-T),A=(g=l+c)-l,_o[2]=l-(g-A)+(c-A),_o[3]=g;v=lo(v,vo,4,_o,yo);_=t*a,T=e*r,A=(h=(w=t-(b=(m=uo*t)-(m-t)))*(u=a-(s=(m=uo*a)-(m-a)))-(_-b*s-w*s-b*u))-(c=h-(d=(w=e-(b=(m=uo*e)-(m-e)))*(u=r-(s=(m=uo*r)-(m-r)))-(T-b*s-w*s-b*u))),_o[0]=h-(c+A)+(A-d),A=(f=_-((l=_+c)-(A=l-_))+(c-A))-(c=f-T),_o[1]=f-(c+A)+(A-T),A=(g=l+c)-l,_o[2]=l-(g-A)+(c-A),_o[3]=g;v=lo(v,yo,4,_o,xo);return xo[v-1]}function bo(t,e,n,i,r,a){var o=(e-a)*(n-r),s=(t-r)*(i-a),u=o-s;if(0==o||0==s||0<o!=0<s)return u;s=Math.abs(o+s);return Math.abs(u)>=33306690738754716e-32*s?u:-mo(t,e,n,i,r,a,s)}const wo=Math.pow(2,-52),To=new Uint32Array(512);class Ao{static from(e,n=function(t){return t[0]},i=function(t){return t[1]}){var r=e.length;const a=new Float64Array(2*r);for(let t=0;t<r;t++){var o=e[t];a[2*t]=n(o),a[2*t+1]=i(o)}return new Ao(a)}constructor(t){var e=t.length>>1;if(0<e&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;t=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*t),this._halfedges=new Int32Array(3*t),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:a,_hullPrev:o,_hullNext:s,_hullTri:u,_hullHash:c}=this;var i=a.length>>1;let e=1/0,n=1/0,r=-1/0,l=-1/0;for(let t=0;t<i;t++){var f=a[2*t],h=a[2*t+1];f<e&&(e=f),h<n&&(n=h),f>r&&(r=f),h>l&&(l=h),this._ids[t]=t}var d=(e+r)/2,g=(n+l)/2;let p=1/0,v,y,x;for(let t=0;t<i;t++){var _=Mo(d,g,a[2*t],a[2*t+1]);_<p&&(v=t,p=_)}var m,b,w,T,A,M,k,S,E=a[2*v],C=a[2*v+1];p=1/0;for(let t=0;t<i;t++)t!==v&&((m=Mo(E,C,a[2*t],a[2*t+1]))<p&&0<m&&(y=t,p=m));let D=a[2*y],R=a[2*y+1],O=1/0;for(let t=0;t<i;t++)t!==v&&t!==y&&(b=E,w=C,T=D,A=R,M=a[2*t],k=a[2*t+1],S=void 0,S=T-b,T=A-w,A=M-b,(w=(T=((M=k-w)*(b=S*S+T*T)-T*(k=A*A+M*M))*(w=.5/(S*M-T*A)))*T+(w*=S*k-A*b)*w)<O&&(x=t,O=w));let t=a[2*x],L=a[2*x+1];if(O===1/0){for(let t=0;t<i;t++)this._dists[t]=a[2*t]-a[0]||a[2*t+1]-a[1];ko(this._ids,this._dists,0,i-1);const q=new Uint32Array(i);let n=0;for(let t=0,e=-1/0;t<i;t++){var P=this._ids[t];this._dists[P]>e&&(q[n++]=P,e=this._dists[P])}return this.hull=q.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}bo(E,C,D,R,t,L)<0&&(B=y,X=D,$=R,y=x,D=t,R=L,x=B,t=X,L=$);var z,N,I,F,B,X,$,Y,j=(Y=E,z=C,N=D,I=R,F=t,B=L,X=N-Y,{x:$=Y+((N=B-z)*(I=X*X+($=I-z)*$)-$*(F=(Y=F-Y)*Y+N*N))*(B=.5/(X*N-$*Y)),y:B=z+(X*F-Y*I)*B});this._cx=j.x,this._cy=j.y;for(let t=0;t<i;t++)this._dists[t]=Mo(a[2*t],a[2*t+1],j.x,j.y);ko(this._ids,this._dists,0,i-1),this._hullStart=v;let G=3;s[v]=o[x]=y,s[y]=o[v]=x,s[x]=o[y]=v,u[v]=0,u[y]=1,u[x]=2,c.fill(-1),c[this._hashKey(E,C)]=v,c[this._hashKey(D,R)]=y,c[this._hashKey(t,L)]=x,this.trianglesLen=0,this._addTriangle(v,y,x,-1,-1,-1);for(let t=0,e,n;t<this._ids.length;t++){var H=this._ids[t],V=a[2*H],U=a[2*H+1];if(!(0<t&&Math.abs(V-e)<=wo&&Math.abs(U-n)<=wo)&&(e=V,n=U,H!==v&&H!==y&&H!==x)){let n=0;for(let t=0,e=this._hashKey(V,U);t<this._hashSize&&(n=c[(e+t)%this._hashSize],-1===n||n===s[n]);t++);n=o[n];let i=n,r;for(;r=s[i],0<=bo(V,U,a[2*i],a[2*i+1],a[2*r],a[2*r+1]);)if(i=r,i===n){i=-1;break}if(-1!==i){let t=this._addTriangle(i,H,s[i],-1,-1,u[i]);u[H]=this._legalize(t+2),u[i]=t,G++;let e=s[i];for(;r=s[e],bo(V,U,a[2*e],a[2*e+1],a[2*r],a[2*r+1])<0;)t=this._addTriangle(e,H,r,u[H],-1,u[e]),u[H]=this._legalize(t+2),s[e]=e,G--,e=r;if(i===n)for(;r=o[i],bo(V,U,a[2*r],a[2*r+1],a[2*i],a[2*i+1])<0;)t=this._addTriangle(r,H,i,-1,u[i],u[r]),this._legalize(t+2),u[r]=t,s[i]=i,G--,i=r;this._hullStart=o[H]=i,s[i]=o[e]=H,s[H]=e,c[this._hashKey(V,U)]=H,c[this._hashKey(a[2*i],a[2*i+1])]=i}}}this.hull=new Uint32Array(G);for(let t=0,e=this._hullStart;t<G;t++)this.hull[t]=e,e=s[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){t/=Math.abs(t)+Math.abs(e);return(0<e?3-t:1+t)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:i}=this;let r=0,a=0;for(;;){var o=n[e],s=e-e%3;if(a=s+(e+2)%3,-1!==o){var u=o-o%3,c=u+(o+2)%3,l=t[a],f=t[e],h=t[s+(e+1)%3],d=t[c];if(g=i[2*l],p=i[2*l+1],v=i[2*f],y=i[2*f+1],x=i[2*h],_=i[2*h+1],s=i[2*d],f=i[2*d+1],h=void 0,h=g-s,g=p-f,p=v-s,h*((v=y-f)*(f=(y=x-s)*y+(x=_-f)*x)-(_=p*p+v*v)*x)-g*(p*f-_*y)+(s=h*h+g*g)*(p*x-v*y)<0){t[e]=d,t[o]=l;l=n[c];if(-1===l){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}}while(t=this._hullPrev[t],t!==this._hullStart)}this._link(e,l),this._link(o,n[a]),this._link(a,c);o=u+(o+1)%3;r<To.length&&(To[r++]=o)}else{if(0===r)break;e=To[--r]}}else{if(0===r)break;e=To[--r]}}var g,p,v,y,x,_;return a}_link(t,e){-1!==(this._halfedges[t]=e)&&(this._halfedges[e]=t)}_addTriangle(t,e,n,i,r,a){var o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,i),this._link(o+1,r),this._link(o+2,a),this.trianglesLen+=3,o}}function Mo(t,e,n,i){n=t-n,i=e-i;return n*n+i*i}function ko(n,i,r,a){if(a-r<=20)for(let e=r+1;e<=a;e++){var o=n[e],s=i[o];let t=e-1;for(;t>=r&&i[n[t]]>s;)n[t+1]=n[t--];n[t+1]=o}else{let t=r+1,e=a;So(n,r+a>>1,t),i[n[r]]>i[n[a]]&&So(n,r,a),i[n[t]]>i[n[a]]&&So(n,t,a),i[n[r]]>i[n[t]]&&So(n,r,t);for(var u=n[t],c=i[u];;){for(;t++,i[n[t]]<c;);for(;e--,i[n[e]]>c;);if(e<t)break;So(n,t,e)}n[r+1]=n[e],n[e]=u,a-t+1>=e-r?(ko(n,i,t,a),ko(n,i,r,e-1)):(ko(n,i,r,e-1),ko(n,i,t,a))}}function So(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}class Eo{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){var i=(t=+t)+(n=+n),r=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${r}`:(1e-6<Math.abs(this._x1-i)||1e-6<Math.abs(this._y1-r))&&(this._+="L"+i+","+r),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=i},${this._y1=r}`)}rect(t,e,n,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class Co{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class Do{constructor(t,[e,n,i,r]=[0,0,960,500]){if(!((i=+i)>=(e=+e)&&(r=+r)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=e,this.ymax=r,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:a,hull:e,triangles:o},vectors:n}=this,s=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2);for(let t=0,e=0,n=o.length,i,r;t<n;t+=3,e+=2){var u=2*o[t],c=2*o[t+1],l=2*o[t+2];const _=a[u],b=a[1+u];var f,h=a[c],d=a[1+c],g=a[l],p=a[1+l],v=h-_,u=d-b,c=g-_,l=p-b,h=2*(v*l-u*c);r=Math.abs(h)<1e-9?(f=1e9,d=2*o[0],f*=Math.sign((a[d]-_)*l-(a[1+d]-b)*c),i=(_+g)/2-f*l,(b+p)/2+f*c):(p=1/h,f=v*v+u*u,h=c*c+l*l,i=_+(l*f-u*h)*p,b+(v*h-c*f)*p),s[e]=i,s[e+1]=r}var i=e[e.length-1];let r,y=4*i,x,_=a[2*i],m,b=a[2*i+1];n.fill(0);for(let t=0;t<e.length;++t)i=e[t],r=y,x=_,m=b,y=4*i,_=a[2*i],b=a[2*i+1],n[r+2]=n[y]=m-b,n[r+3]=n[y+1]=_-x}render(n){const t=null==n?n=new Eo:void 0;var{delaunay:{halfedges:i,inedges:e,hull:r},circumcenters:a,vectors:o}=this;if(r.length<=1)return null;for(let t=0,e=i.length;t<e;++t){var s,u,c,l=i[t];l<t||(u=2*Math.floor(t/3),c=2*Math.floor(l/3),s=a[u],l=a[1+u],u=a[c],c=a[1+c],this._renderSegment(s,l,u,c,n))}let f,h=r[r.length-1];for(let t=0;t<r.length;++t){f=h,h=r[t];var d=2*Math.floor(e[h]/3),g=a[d],p=a[1+d],d=4*f,d=this._project(g,p,o[2+d],o[3+d]);d&&this._renderSegment(g,p,d[0],d[1],n)}return t&&t.value()}renderBounds(t){const e=null==t?t=new Eo:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,n){const i=null==n?n=new Eo:void 0;var r=this._clip(t);if(null!==r&&r.length){n.moveTo(r[0],r[1]);let e=r.length;for(;r[0]===r[e-2]&&r[1]===r[e-1]&&1<e;)e-=2;for(let t=2;t<e;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||n.lineTo(r[t],r[t+1]);return n.closePath(),i&&i.value()}}*cellPolygons(){var{delaunay:{points:n}}=this;for(let t=0,e=n.length/2;t<e;++t){const i=this.cellPolygon(t);i&&(i.index=t,yield i)}}cellPolygon(t){const e=new Co;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,i,r){var a=this._regioncode(t,e),o=this._regioncode(n,i);0===a&&0===o?(r.moveTo(t,e),r.lineTo(n,i)):(o=this._clipSegment(t,e,n,i,a,o))&&(r.moveTo(o[0],o[1]),r.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){var r=this._clip(t);if(r)for(const o of this.delaunay.neighbors(t)){var a=this._clip(o);if(a)t:for(let n=0,i=r.length;n<i;n+=2)for(let t=0,e=a.length;t<e;t+=2)if(r[n]==a[t]&&r[n+1]==a[t+1]&&r[(n+2)%i]==a[(t+e-2)%e]&&r[(n+3)%i]==a[(t+e-1)%e]){yield o;break t}}}_cell(t){var{circumcenters:e,delaunay:{inedges:n,halfedges:i,triangles:r}}=this,a=n[t];if(-1===a)return null;const o=[];let s=a;do{var u=Math.floor(s/3);if(o.push(e[2*u],e[2*u+1]),s=s%3==2?s-2:s+1,r[s]!==t)break}while(s=i[s],s!==a&&-1!==s);return o}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var e=this._cell(t);if(null===e)return null;var{vectors:n}=this,i=4*t;return n[i]||n[1+i]?this._clipInfinite(t,e,n[i],n[1+i],n[2+i],n[3+i]):this._clipFinite(t,e)}_clipFinite(a,e){var n=e.length;let o=null,s,u,c=e[n-2],l=e[n-1],f,h=this._regioncode(c,l),d,g=0;for(let t=0;t<n;t+=2)if(s=c,u=l,c=e[t],l=e[t+1],f=h,h=this._regioncode(c,l),0===f&&0===h)d=g,g=0,o?o.push(c,l):o=[c,l];else{let t,e,n,i,r;if(0===f){if(null===(t=this._clipSegment(s,u,c,l,f,h)))continue;[e,n,i,r]=t}else{if(null===(t=this._clipSegment(c,l,s,u,h,f)))continue;[i,r,e,n]=t,d=g,g=this._edgecode(e,n),d&&g&&this._edge(a,d,g,o,o.length),o?o.push(e,n):o=[e,n]}d=g,g=this._edgecode(i,r),d&&g&&this._edge(a,d,g,o,o.length),o?o.push(i,r):o=[i,r]}if(o)d=g,g=this._edgecode(o[0],o[1]),d&&g&&this._edge(a,d,g,o,o.length);else if(this.contains(a,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return o}_clipSegment(i,r,a,o,s,u){for(;;){if(0===s&&0===u)return[i,r,a,o];if(s&u)return null;let t,e,n=s||u;8&n?(t=i+(a-i)*(this.ymax-r)/(o-r),e=this.ymax):4&n?(t=i+(a-i)*(this.ymin-r)/(o-r),e=this.ymin):t=2&n?(e=r+(o-r)*(this.xmax-i)/(a-i),this.xmax):(e=r+(o-r)*(this.xmin-i)/(a-i),this.xmin),s?(i=t,r=e,s=this._regioncode(i,r)):(a=t,o=e,u=this._regioncode(a,o))}}_clipInfinite(r,t,e,n,i,a){let o=Array.from(t),s;if((s=this._project(o[0],o[1],e,n))&&o.unshift(s[0],s[1]),(s=this._project(o[o.length-2],o[o.length-1],i,a))&&o.push(s[0],s[1]),o=this._clipFinite(r,o))for(let t=0,e=o.length,n,i=this._edgecode(o[e-2],o[e-1]);t<e;t+=2)n=i,i=this._edgecode(o[t],o[t+1]),n&&i&&(t=this._edge(r,n,i,o,t),e=o.length);else this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(n,i,t,r,a){for(;i!==t;){let t,e;switch(i){case 5:i=4;continue;case 4:i=6,t=this.xmax,e=this.ymin;break;case 6:i=2;continue;case 2:i=10,t=this.xmax,e=this.ymax;break;case 10:i=8;continue;case 8:i=9,t=this.xmin,e=this.ymax;break;case 9:i=1;continue;case 1:i=5,t=this.xmin,e=this.ymin}r[a]===t&&r[a+1]===e||!this.contains(n,t,e)||(r.splice(a,0,t,e),a+=2)}if(4<r.length)for(let t=0;t<r.length;t+=2){const a=(t+2)%r.length,e=(t+4)%r.length;(r[t]===r[a]&&r[a]===r[e]||r[t+1]===r[1+a]&&r[1+a]===r[1+e])&&(r.splice(a,2),t-=2)}return a}_project(t,e,n,i){let r=1/0,a,o,s;if(i<0){if(e<=this.ymin)return null;(a=(this.ymin-e)/i)<r&&(s=this.ymin,o=t+(r=a)*n)}else if(0<i){if(e>=this.ymax)return null;(a=(this.ymax-e)/i)<r&&(s=this.ymax,o=t+(r=a)*n)}if(0<n){if(t>=this.xmax)return null;(a=(this.xmax-t)/n)<r&&(o=this.xmax,s=e+(r=a)*i)}else if(n<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/n)<r&&(o=this.xmin,s=e+(r=a)*i)}return[o,s]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const Ro=2*Math.PI,Oo=Math.pow;var Lo={},Po={},zo=34,No=10,Io=13;function Fo(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Bo(t){var n=Object.create(null),i=[];return t.forEach(function(t){for(var e in t)e in n||i.push(n[e]=e)}),i}function Xo(t,e){var n=t+"",t=n.length;return t<e?new Array(e-t+1).join(0)+n:n}function $o(t){var e,n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Xo(-e,6):9999<e?"+"+Xo(e,6):Xo(e,4))+"-"+Xo(t.getUTCMonth()+1,2)+"-"+Xo(t.getUTCDate(),2)+(a?"T"+Xo(n,2)+":"+Xo(i,2)+":"+Xo(r,2)+"."+Xo(a,3)+"Z":r?"T"+Xo(n,2)+":"+Xo(i,2)+":"+Xo(r,2)+"Z":i||n?"T"+Xo(n,2)+":"+Xo(i,2)+"Z":"")}function Yo(i){var e=new RegExp('["'+i+"\n\r]"),f=i.charCodeAt(0);function n(i,t){var e,n=[],r=i.length,a=0,o=0,s=r<=0,u=!1;function c(){if(s)return Po;if(u)return u=!1,Lo;var t,e,n=a;if(i.charCodeAt(n)===zo){for(;a++<r&&i.charCodeAt(a)!==zo||i.charCodeAt(++a)===zo;);return(t=a)>=r?s=!0:(e=i.charCodeAt(a++))===No?u=!0:e===Io&&(u=!0,i.charCodeAt(a)===No&&++a),i.slice(n+1,t-1).replace(/""/g,'"')}for(;a<r;){if((e=i.charCodeAt(t=a++))===No)u=!0;else if(e===Io)u=!0,i.charCodeAt(a)===No&&++a;else if(e!==f)continue;return i.slice(n,t)}return s=!0,i.slice(n,r)}for(i.charCodeAt(r-1)===No&&--r,i.charCodeAt(r-1)===Io&&--r;(e=c())!==Po;){for(var l=[];e!==Lo&&e!==Po;)l.push(e),e=c();t&&null==(l=t(l,o++))||n.push(l)}return n}function r(t,n){return t.map(function(e){return n.map(function(t){return o(e[t])}).join(i)})}function a(t){return t.map(o).join(i)}function o(t){return null==t?"":t instanceof Date?$o(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,a){var o,s;return(t=n(t,function(t,e){return o?o(t,e-1):(s=t,void(o=a?(i=a,r=Fo(n=t),function(t,e){return i(r(t),e,n)}):Fo(t)));var n,i,r})).columns=s||[],t},parseRows:n,format:function(t,e){return[(e=null==e?Bo(t):e).map(o).join(i)].concat(r(t,e)).join("\n")},formatBody:function(t,e){return r(t,e=null==e?Bo(t):e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}var jo=Yo(","),Go=jo.parse,Ho=jo.parseRows,Vo=jo.format,Uo=jo.formatBody,qo=jo.formatRows,Wo=jo.formatRow,Zo=jo.formatValue,Ko=Yo("\t"),Jo=Ko.parse,Qo=Ko.parseRows,ts=Ko.format,es=Ko.formatBody,ns=Ko.formatRows,is=Ko.formatRow,rs=Ko.formatValue;const as=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function os(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function ss(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function us(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function cs(t,e){return fetch(t,e).then(us)}function ls(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),cs(t,e).then(function(t){return i(t,n)})}}var fs=ls(Go),hs=ls(Jo);function ds(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function gs(n){return(t,e)=>cs(t,e).then(t=>(new DOMParser).parseFromString(t,n))}var ps=gs("application/xml"),vs=gs("text/html"),ys=gs("image/svg+xml");function xs(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,a,o,s,u,c,l,f,h,d=t._root,g={data:i},p=t._x0,v=t._y0,y=t._x1,x=t._y1;if(!d)return t._root=g,t;for(;d.length;)if((c=e>=(a=(p+y)/2))?p=a:y=a,(l=n>=(o=(v+x)/2))?v=o:x=o,!(d=(r=d)[f=l<<1|c]))return r[f]=g,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return g.next=d,r?r[f]=g:t._root=g,t;for(;r=r?r[f]=new Array(4):t._root=new Array(4),(c=e>=(a=(p+y)/2))?p=a:y=a,(l=n>=(o=(v+x)/2))?v=o:x=o,(f=l<<1|c)==(h=(o<=u)<<1|a<=s););return r[h]=d,r[f]=g,t}function _s(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function ms(t){return t[0]}function bs(t){return t[1]}function ws(t,e,n){n=new Ts(null==e?ms:e,null==n?bs:n,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function Ts(t,e,n,i,r,a){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function As(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ms=ws.prototype=Ts.prototype;function ks(t){return function(){return t}}function Ss(t){return 1e-6*(t()-.5)}function Es(t){return t.x+t.vx}function Cs(t){return t.y+t.vy}function Ds(t){return t.index}function Rs(t,e){t=t.get(e);if(!t)throw new Error("node not found: "+e);return t}Ms.copy=function(){var t,e,n=new Ts(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=As(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=As(e));return n},Ms.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return xs(this.cover(e,n),e,n,t)},Ms.addAll=function(t){for(var e,n,i,r=t.length,a=new Array(r),o=new Array(r),s=1/0,u=1/0,c=-1/0,l=-1/0,f=0;f<r;++f)isNaN(n=+this._x.call(null,e=t[f]))||isNaN(i=+this._y.call(null,e))||((a[f]=n)<s&&(s=n),c<n&&(c=n),(o[f]=i)<u&&(u=i),l<i&&(l=i));if(c<s||l<u)return this;for(this.cover(s,u).cover(c,l),f=0;f<r;++f)xs(this,a[f],o[f],t[f]);return this},Ms.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,a=(i=Math.floor(e))+1;else{for(var o,s,u=r-n||1,c=this._root;t<n||r<=t||e<i||a<=e;)switch(s=(e<i)<<1|t<n,(o=new Array(4))[s]=c,c=o,u*=2,s){case 0:r=n+u,a=i+u;break;case 1:n=r-u,a=i+u;break;case 2:r=n+u,i=a-u;break;case 3:n=r-u,i=a-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this},Ms.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},Ms.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ms.find=function(t,e,n){var i,r,a,o,s,u,c,l,f=this._x0,h=this._y0,d=this._x1,g=this._y1,p=[],v=this._root;for(v&&p.push(new _s(v,f,h,d,g)),null==n?n=1/0:(f=t-n,h=e-n,d=t+n,g=e+n,n*=n);c=p.pop();)!(v=c.node)||(i=c.x0)>d||(r=c.y0)>g||(a=c.x1)<f||(o=c.y1)<h||(v.length?(p.push(new _s(v[3],s=(i+a)/2,u=(r+o)/2,a,o),new _s(v[2],i,u,s,o),new _s(v[1],s,r,a,u),new _s(v[0],i,r,s,u)),(s=(u<=e)<<1|s<=t)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-s],p[p.length-1-s]=c)):(c=(c=t-+this._x.call(null,v.data))*c+(c=e-+this._y.call(null,v.data))*c)<n&&(f=t-(c=Math.sqrt(n=c)),h=e-c,d=t+c,g=e+c,l=v.data));return l},Ms.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,r,a,o,s,u,c,l,f,h=this._root,d=this._x0,g=this._y0,p=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((u=a>=(c=(d+p)/2))?d=c:p=c,(c=o>=(s=(g+v)/2))?g=s:v=s,!(h=(e=h)[l=c<<1|u]))return this;if(!h.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,f=l)}for(;h.data!==t;)if(!(h=(i=h).next))return this;return(r=h.next)&&delete h.next,i?r?i.next=r:delete i.next:e?(r?e[l]=r:delete e[l],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[f]=h:this._root=h)):this._root=r,this},Ms.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Ms.root=function(){return this._root},Ms.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},Ms.visit=function(t){var e,n,i,r,a,o,s,u=[],c=this._root;for(c&&u.push(new _s(c,this._x0,this._y0,this._x1,this._y1));e=u.pop();)!t(c=e.node,n=e.x0,i=e.y0,r=e.x1,a=e.y1)&&c.length&&(o=(n+r)/2,s=(i+a)/2,(e=c[3])&&u.push(new _s(e,o,s,r,a)),(e=c[2])&&u.push(new _s(e,n,s,o,a)),(e=c[1])&&u.push(new _s(e,o,i,r,s)),(e=c[0])&&u.push(new _s(e,n,i,o,s)));return this},Ms.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new _s(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r,a,o,s,u,c,l,f=e.node;f.length&&(a=e.x0,o=e.y0,c=(a+(s=e.x1))/2,l=(o+(u=e.y1))/2,(r=f[0])&&n.push(new _s(r,a,o,c,l)),(r=f[1])&&n.push(new _s(r,c,o,s,l)),(r=f[2])&&n.push(new _s(r,a,l,c,u)),(r=f[3])&&n.push(new _s(r,c,l,s,u))),i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ms.x=function(t){return arguments.length?(this._x=t,this):this._x},Ms.y=function(t){return arguments.length?(this._y=t,this):this._y};const Os=1664525,Ls=1013904223,Ps=4294967296;function zs(t){return t.x}function Ns(t){return t.y}var Is=Math.PI*(3-Math.sqrt(5));function Fs(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+t.slice(n+1)]}function Bs(t){return(t=Fs(Math.abs(t)))?t[1]:NaN}var Xs,$s=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ys(t){if(!(e=$s.exec(t)))throw new Error("invalid format: "+t);var e;return new js({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function js(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Gs(t,e){e=Fs(t,e);if(!e)return t+"";t=e[0],e=e[1];return e<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")}Ys.prototype=js.prototype,js.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Hs={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Gs(100*t,e),r:Gs,s:function(t,e){if(!(i=Fs(t,e)))return t+"";var n=i[0],i=(r=i[1])-(Xs=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,r=n.length;return i===r?n:r<i?n+new Array(i-r+1).join("0"):0<i?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Fs(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Vs(t){return t}var Us,qs=Array.prototype.map,Ws=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Zs(t){var e,s,u,w=void 0===t.grouping||void 0===t.thousands?Vs:(s=qs.call(t.grouping,Number),u=t.thousands+"",function(t,e){for(var n=t.length,i=[],r=0,a=s[0],o=0;0<n&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),i.push(t.substring(n-=a,n+a)),!((o+=a+1)>e));)a=s[r=(r+1)%s.length];return i.reverse().join(u)}),i=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",T=void 0===t.decimal?".":t.decimal+"",A=void 0===t.numerals?Vs:(e=qs.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}),a=void 0===t.percent?"%":t.percent+"",M=void 0===t.minus?"":t.minus+"",k=void 0===t.nan?"NaN":t.nan+"";function o(t){var c=(t=Ys(t)).fill,l=t.align,f=t.sign,e=t.symbol,h=t.zero,d=t.width,g=t.comma,p=t.precision,v=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Hs[y]||(void 0===p&&(p=12),v=!0,y="g"),(h||"0"===c&&"="===l)&&(h=!0,c="0",l="=");var x="$"===e?i:"#"===e&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",_="$"===e?r:/[%p]/.test(y)?a:"",m=Hs[y],b=/[defgprs%]/.test(y);function n(t){var e,n,i,r=x,a=_;if("c"===y)a=m(t)+a,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?k:m(Math.abs(t),p),v&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;0<r&&(r=0)}return 0<r?t.slice(0,r)+t.slice(e+1):t}(t)),r=((o=o&&0==+t&&"+"!==f?!1:o)?"("===f?f:M:"-"===f||"("===f?"":f)+r,a=("s"===y?Ws[8+Xs/3]:"")+a+(o&&"("===f?")":""),b)for(e=-1,n=t.length;++e<n;)if((i=t.charCodeAt(e))<48||57<i){a=(46===i?T+t.slice(e+1):t.slice(e))+a,t=t.slice(0,e);break}}g&&!h&&(t=w(t,1/0));var s=r.length+t.length+a.length,u=s<d?new Array(d-s+1).join(c):"";switch(g&&h&&(t=w(u+t,u.length?d-a.length:1/0),u=""),l){case"<":t=r+t+a+u;break;case"=":t=r+u+t+a;break;case"^":t=u.slice(0,s=u.length>>1)+r+t+a+u.slice(s);break;default:t=u+r+t+a}return A(t)}return p=void 0===p?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=Ys(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(Bs(e)/3))),i=Math.pow(10,-e),r=Ws[8+e/3];return function(t){return n(i*t)+r}}}}function Ks(t){return Us=Zs(t),s.format=Us.format,s.formatPrefix=Us.formatPrefix,Us}function Js(t){return Math.max(0,-Bs(Math.abs(t)))}function Qs(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Bs(e)/3)))-Bs(Math.abs(t)))}function tu(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Bs(e)-Bs(t))+1}s.format=void 0,s.formatPrefix=void 0,Ks({thousands:",",grouping:[3],currency:["$",""]});var eu=1e-6,nu=1e-12,iu=Math.PI,ru=iu/2,au=iu/4,ou=2*iu,su=180/iu,uu=iu/180,cu=Math.abs,lu=Math.atan,fu=Math.atan2,hu=Math.cos,du=Math.ceil,gu=Math.exp,pu=Math.hypot,vu=Math.log,yu=Math.pow,xu=Math.sin,_u=Math.sign||function(t){return 0<t?1:t<0?-1:0},mu=Math.sqrt,bu=Math.tan;function wu(t){return 1<t?0:t<-1?iu:Math.acos(t)}function Tu(t){return 1<t?ru:t<-1?-ru:Math.asin(t)}function Au(t){return(t=xu(t/2))*t}function Mu(){}function ku(t,e){t&&Eu.hasOwnProperty(t.type)&&Eu[t.type](t,e)}var Su={Feature:function(t,e){ku(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)ku(n[i].geometry,e)}},Eu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Cu(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Cu(n[i],e,0)},Polygon:function(t,e){Du(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Du(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)ku(n[i],e)}};function Cu(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Du(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Cu(t[n],e,1);e.polygonEnd()}function Ru(t,e){t&&Su.hasOwnProperty(t.type)?Su[t.type](t,e):ku(t,e)}var Ou,Lu,Pu,zu,Nu,Iu,Fu,Bu,Xu,$u,Yu,ju,Gu,Hu,Vu,Uu,qu=new S,Wu=new S,Zu={point:Mu,lineStart:Mu,lineEnd:Mu,polygonStart:function(){qu=new S,Zu.lineStart=Ku,Zu.lineEnd=Ju},polygonEnd:function(){var t=+qu;Wu.add(t<0?ou+t:t),this.lineStart=this.lineEnd=this.point=Mu},sphere:function(){Wu.add(ou)}};function Ku(){Zu.point=Qu}function Ju(){tc(Ou,Lu)}function Qu(t,e){Zu.point=tc,Ou=t,Lu=e,Pu=t*=uu,zu=hu(e=(e*=uu)/2+au),Nu=xu(e)}function tc(t,e){var n=(t*=uu)-Pu,i=0<=n?1:-1,r=i*n,a=hu(e=(e*=uu)/2+au),o=xu(e),n=Nu*o,e=zu*a+n*hu(r),r=n*i*xu(r);qu.add(fu(r,e)),Pu=t,zu=a,Nu=o}function ec(t){return[fu(t[1],t[0]),Tu(t[2])]}function nc(t){var e=t[0],n=t[1],t=hu(n);return[t*hu(e),t*xu(e),xu(n)]}function ic(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function rc(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ac(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function oc(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function sc(t){var e=mu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var uc,cc,lc,fc,hc,dc,gc,pc,vc,yc,xc,_c,mc,bc,wc,Tc,Ac={point:Mc,lineStart:Sc,lineEnd:Ec,polygonStart:function(){Ac.point=Cc,Ac.lineStart=Dc,Ac.lineEnd=Rc,Hu=new S,Zu.polygonStart()},polygonEnd:function(){Zu.polygonEnd(),Ac.point=Mc,Ac.lineStart=Sc,Ac.lineEnd=Ec,qu<0?(Iu=-(Bu=180),Fu=-(Xu=90)):eu<Hu?Xu=90:Hu<-eu&&(Fu=-90),Uu[0]=Iu,Uu[1]=Bu},sphere:function(){Iu=-(Bu=180),Fu=-(Xu=90)}};function Mc(t,e){Vu.push(Uu=[Iu=t,Bu=t]),e<Fu&&(Fu=e),Xu<e&&(Xu=e)}function kc(t,e){var n,i,r,a,o,s=nc([t*uu,e*uu]);Gu?(r=rc(Gu,s),sc(n=rc([r[1],-r[0],0],r)),r=(n=ec(n))[0]*su*(i=0<(o=t-$u)?1:-1),(o=180<cu(o))^(i*$u<r&&r<i*t)?(a=n[1]*su,Xu<a&&(Xu=a)):o^(i*$u<(r=(r+360)%360-180)&&r<i*t)?(a=-n[1]*su)<Fu&&(Fu=a):(e<Fu&&(Fu=e),Xu<e&&(Xu=e)),o?t<$u?Oc(Iu,t)>Oc(Iu,Bu)&&(Bu=t):Oc(t,Bu)>Oc(Iu,Bu)&&(Iu=t):Iu<=Bu?(t<Iu&&(Iu=t),Bu<t&&(Bu=t)):$u<t?Oc(Iu,t)>Oc(Iu,Bu)&&(Bu=t):Oc(t,Bu)>Oc(Iu,Bu)&&(Iu=t)):Vu.push(Uu=[Iu=t,Bu=t]),e<Fu&&(Fu=e),Xu<e&&(Xu=e),Gu=s,$u=t}function Sc(){Ac.point=kc}function Ec(){Uu[0]=Iu,Uu[1]=Bu,Ac.point=Mc,Gu=null}function Cc(t,e){var n;Gu?Hu.add(180<cu(n=t-$u)?n+(0<n?360:-360):n):(Yu=t,ju=e),Zu.point(t,e),kc(t,e)}function Dc(){Zu.lineStart()}function Rc(){Cc(Yu,ju),Zu.lineEnd(),cu(Hu)>eu&&(Iu=-(Bu=180)),Uu[0]=Iu,Uu[1]=Bu,Gu=null}function Oc(t,e){return(e-=t)<0?e+360:e}function Lc(t,e){return t[0]-e[0]}function Pc(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var zc={sphere:Mu,point:Nc,lineStart:Fc,lineEnd:$c,polygonStart:function(){zc.lineStart=Yc,zc.lineEnd=jc},polygonEnd:function(){zc.lineStart=Fc,zc.lineEnd=$c}};function Nc(t,e){t*=uu;var n=hu(e*=uu);Ic(n*hu(t),n*xu(t),xu(e))}function Ic(t,e,n){lc+=(t-lc)/++uc,fc+=(e-fc)/uc,hc+=(n-hc)/uc}function Fc(){zc.point=Bc}function Bc(t,e){t*=uu;var n=hu(e*=uu);bc=n*hu(t),wc=n*xu(t),Tc=xu(e),zc.point=Xc,Ic(bc,wc,Tc)}function Xc(t,e){t*=uu;var n=hu(e*=uu),i=n*hu(t),n=n*xu(t),t=xu(e),e=fu(mu((e=wc*t-Tc*n)*e+(e=Tc*i-bc*t)*e+(e=bc*n-wc*i)*e),bc*i+wc*n+Tc*t);cc+=e,dc+=e*(bc+(bc=i)),gc+=e*(wc+(wc=n)),pc+=e*(Tc+(Tc=t)),Ic(bc,wc,Tc)}function $c(){zc.point=Nc}function Yc(){zc.point=Gc}function jc(){Hc(_c,mc),zc.point=Nc}function Gc(t,e){_c=t,mc=e,t*=uu,e*=uu,zc.point=Hc;var n=hu(e);bc=n*hu(t),wc=n*xu(t),Tc=xu(e),Ic(bc,wc,Tc)}function Hc(t,e){t*=uu;var n=hu(e*=uu),i=n*hu(t),r=n*xu(t),a=xu(e),o=wc*a-Tc*r,s=Tc*i-bc*a,n=bc*r-wc*i,t=pu(o,s,n),e=Tu(t),t=t&&-e/t;vc.add(t*o),yc.add(t*s),xc.add(t*n),cc+=e,dc+=e*(bc+(bc=i)),gc+=e*(wc+(wc=r)),pc+=e*(Tc+(Tc=a)),Ic(bc,wc,Tc)}function Vc(t){return function(){return t}}function Uc(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function qc(t,e){return[cu(t)>iu?t+Math.round(-t/ou)*ou:t,e]}function Wc(t,e,n){return(t%=ou)?e||n?Uc(Kc(t),Jc(e,n)):Kc(t):e||n?Jc(e,n):qc}function Zc(n){return function(t,e){return[iu<(t+=n)?t-ou:t<-iu?t+ou:t,e]}}function Kc(t){var e=Zc(t);return e.invert=Zc(-t),e}function Jc(t,e){var r=hu(t),a=xu(t),o=hu(e),s=xu(e);function n(t,e){var n=hu(e),i=hu(t)*n,t=xu(t)*n,n=xu(e),e=n*r+i*a;return[fu(t*o-e*s,i*r-n*a),Tu(e*o+t*s)]}return n.invert=function(t,e){var n=hu(e),i=hu(t)*n,t=xu(t)*n,n=xu(e),e=n*o-t*s;return[fu(t*o+n*s,i*r+e*a),Tu(e*r-i*a)]},n}function Qc(e){function t(t){return(t=e(t[0]*uu,t[1]*uu))[0]*=su,t[1]*=su,t}return e=Wc(e[0]*uu,e[1]*uu,2<e.length?e[2]*uu:0),t.invert=function(t){return(t=e.invert(t[0]*uu,t[1]*uu))[0]*=su,t[1]*=su,t},t}function tl(t,e,n,i,r,a){if(n){var o=hu(e),s=xu(e),u=i*n;null==r?(r=e+i*ou,a=e-u/2):(r=el(o,r),a=el(o,a),(0<i?r<a:a<r)&&(r+=i*ou));for(var c,l=r;0<i?a<l:l<a;l-=u)c=ec([o,-s*hu(l),-s*xu(l)]),t.point(c[0],c[1])}}function el(t,e){(e=nc(e))[0]-=t,sc(e);t=wu(-e[1]);return((-e[2]<0?-t:t)+ou-eu)%ou}function nl(){var i,e=[];return{point:function(t,e,n){i.push([t,e,n])},lineStart:function(){e.push(i=[])},lineEnd:Mu,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],i=null,t}}}function il(t,e){return cu(t[0]-e[0])<eu&&cu(t[1]-e[1])<eu}function rl(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function al(t,e,n,i,a){var o,r,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],r=t[e];if(il(i,r)){if(!i[2]&&!r[2]){for(a.lineStart(),o=0;o<e;++o)a.point((i=t[o])[0],i[1]);return void a.lineEnd()}r[0]+=2*eu}s.push(n=new rl(i,t,null,!0)),u.push(n.o=new rl(i,null,n,!1)),s.push(n=new rl(r,t,null,!1)),u.push(n.o=new rl(r,null,n,!0))}}),s.length){for(u.sort(e),ol(s),ol(u),o=0,r=u.length;o<r;++o)u[o].e=n=!n;for(var c,l,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;c=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,r=c.length;o<r;++o)a.point((l=c[o])[0],l[1]);else i(h.x,h.n.x,1,a);h=h.n}else{if(d)for(c=h.p.z,o=c.length-1;0<=o;--o)a.point((l=c[o])[0],l[1]);else i(h.x,h.p.x,-1,a);h=h.p}}while(c=(h=h.o).z,d=!d,!h.v);a.lineEnd()}}}function ol(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function sl(t){return cu(t[0])<=iu?t[0]:_u(t[0])*((cu(t[0])+iu)%ou-iu)}function ul(t,e){var n=sl(e),i=e[1],e=xu(i),r=[xu(n),-hu(n),0],a=0,o=0,s=new S;1===e?i=ru+eu:-1===e&&(i=-ru-eu);for(var u=0,c=t.length;u<c;++u)if(f=(l=t[u]).length)for(var l,f,h=l[f-1],d=sl(h),g=h[1]/2+au,p=xu(g),v=hu(g),y=0;y<f;++y,d=_,p=b,v=w,h=x){var x=l[y],_=sl(x),m=x[1]/2+au,b=xu(m),w=hu(m),T=_-d,A=0<=T?1:-1,M=A*T,k=iu<M,m=p*b;s.add(fu(m*A*xu(M),v*w+m*hu(M))),a+=k?T+A*ou:T,k^n<=d^n<=_&&(sc(M=rc(nc(h),nc(x))),sc(A=rc(r,M)),((A=(k^0<=T?-1:1)*Tu(A[2]))<i||i===A&&(M[0]||M[1]))&&(o+=k^0<=T?1:-1))}return(a<-eu||a<eu&&s<-nu)^1&o}function cl(v,y,x,_){return function(s){var u,c,l,n=y(s),f=nl(),h=y(f),d=!1,e={point:i,lineStart:r,lineEnd:a,polygonStart:function(){e.point=g,e.lineStart=o,e.lineEnd=p,c=[],u=[]},polygonEnd:function(){e.point=i,e.lineStart=r,e.lineEnd=a,c=Q(c);var t=ul(u,_);c.length?(d||(s.polygonStart(),d=!0),al(c,fl,t,x,s)):t&&(d||(s.polygonStart(),d=!0),s.lineStart(),x(null,null,1,s),s.lineEnd()),d&&(s.polygonEnd(),d=!1),c=u=null},sphere:function(){s.polygonStart(),s.lineStart(),x(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function i(t,e){v(t,e)&&s.point(t,e)}function t(t,e){n.point(t,e)}function r(){e.point=t,n.lineStart()}function a(){e.point=i,n.lineEnd()}function g(t,e){l.push([t,e]),h.point(t,e)}function o(){h.lineStart(),l=[]}function p(){g(l[0][0],l[0][1]),h.lineEnd();var t,e,n,i,r=h.clean(),a=f.result(),o=a.length;if(l.pop(),u.push(l),l=null,o)if(1&r){if(0<(e=(n=a[0]).length-1)){for(d||(s.polygonStart(),d=!0),s.lineStart(),t=0;t<e;++t)s.point((i=n[t])[0],i[1]);s.lineEnd()}}else 1<o&&2&r&&a.push(a.pop().concat(a.shift())),c.push(a.filter(ll))}return e}}function ll(t){return 1<t.length}function fl(t,e){return((t=t.x)[0]<0?t[1]-ru-eu:ru-t[1])-((e=e.x)[0]<0?e[1]-ru-eu:ru-e[1])}qc.invert=qc;var hl=cl(function(){return 1},function(c){var l,f=NaN,h=NaN,d=NaN;return{lineStart:function(){c.lineStart(),l=1},point:function(t,e){var n,i,r,a,o,s=0<t?iu:-iu,u=cu(t-f);cu(u-iu)<eu?(c.point(f,h=0<(h+e)/2?ru:-ru),c.point(d,h),c.lineEnd(),c.lineStart(),c.point(s,h),c.point(t,h),l=0):d!==s&&iu<=u&&(cu(f-d)<eu&&(f-=d*eu),cu(t-s)<eu&&(t-=s*eu),i=h,a=e,o=xu((n=f)-(r=t)),h=cu(o)>eu?lu((xu(i)*(u=hu(a))*xu(r)-xu(a)*(r=hu(i))*xu(n))/(r*u*o)):(i+a)/2,c.point(d,h),c.lineEnd(),c.lineStart(),c.point(s,h),l=0),c.point(f=t,h=e),d=s},lineEnd:function(){c.lineEnd(),f=h=NaN},clean:function(){return 2-l}}},function(t,e,n,i){var r;null==t?(r=n*ru,i.point(-iu,r),i.point(0,r),i.point(iu,r),i.point(iu,0),i.point(iu,-r),i.point(0,-r),i.point(-iu,-r),i.point(-iu,0),i.point(-iu,r)):cu(t[0]-e[0])>eu?(t=t[0]<e[0]?iu:-iu,r=n*t/2,i.point(-t,r),i.point(0,r),i.point(t,r)):i.point(e[0],e[1])},[-iu,-ru]);function dl(r){var d=hu(r),a=6*uu,h=0<d,g=cu(d)>eu;function p(t,e){return hu(t)*hu(e)>d}function v(t,e,n){var i=[1,0,0],r=rc(nc(t),nc(e)),a=ic(r,r),o=r[0],s=a-o*o;if(!s)return!n&&t;var u=rc(i,r),c=oc(i,d*a/s);ac(c,oc(r,-d*o/s));var l=u,f=ic(c,l),i=ic(l,l),a=f*f-i*(ic(c,c)-1);if(!(a<0)){r=mu(a),o=oc(l,(-f-r)/i);if(ac(o,c),o=ec(o),!n)return o;var h,s=t[0],u=e[0],a=t[1],n=e[1];u<s&&(h=s,s=u,u=h);t=u-s,e=cu(t-iu)<eu;if(!e&&n<a&&(h=a,a=n,n=h),e||t<eu?e?0<a+n^o[1]<(cu(o[0]-s)<eu?a:n):a<=o[1]&&o[1]<=n:iu<t^(s<=o[0]&&o[0]<=u)){i=oc(l,(-f+r)/i);return ac(i,c),[o,ec(i)]}}}function y(t,e){var n=h?r:iu-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}return cl(p,function(o){var s,u,c,l,f;return{lineStart:function(){l=c=!1,f=1},point:function(t,e){var n,i,r=[t,e],a=p(t,e),e=h?a?0:y(t,e):a?y(t+(t<0?iu:-iu),e):0;!s&&(l=c=a)&&o.lineStart(),a!==c&&((n=v(s,r))&&!il(s,n)&&!il(r,n)||(r[2]=1)),a!==c?(f=0,a?(o.lineStart(),n=v(r,s),o.point(n[0],n[1])):(n=v(s,r),o.point(n[0],n[1],2),o.lineEnd()),s=n):g&&s&&h^a&&(e&u||!(i=v(r,s,!0))||(f=0,h?(o.lineStart(),o.point(i[0][0],i[0][1]),o.point(i[1][0],i[1][1]),o.lineEnd()):(o.point(i[1][0],i[1][1]),o.lineEnd(),o.lineStart(),o.point(i[0][0],i[0][1],3)))),!a||s&&il(s,r)||o.point(r[0],r[1]),s=r,c=a,u=e},lineEnd:function(){c&&o.lineEnd(),s=null},clean:function(){return f|(l&&c)<<1}}},function(t,e,n,i){tl(i,r,a,n,t,e)},h?[0,-r]:[-iu,r-iu])}var gl,pl,vl,yl,xl=1e9,_l=-xl;function ml(y,x,_,m){function b(t,e){return y<=t&&t<=_&&x<=e&&e<=m}function w(t,e,n,i){var r=0,a=0;if(null==t||(r=o(t,n))!==(a=o(e,n))||s(t,e)<0^0<n)for(;i.point(0===r||3===r?y:_,1<r?m:x),(r=(r+n+4)%4)!==a;);else i.point(e[0],e[1])}function o(t,e){return cu(t[0]-y)<eu?0<e?0:3:cu(t[0]-_)<eu?0<e?2:1:cu(t[1]-x)<eu?0<e?1:0:0<e?3:2}function T(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(i){var r,f,a,o,s,u,c,l,h,d,g,p=i,t=nl(),e={point:n,lineStart:function(){e.point=v,f&&f.push(a=[]);d=!0,h=!1,c=l=NaN},lineEnd:function(){r&&(v(o,s),u&&h&&t.rejoin(),r.push(t.result()));e.point=n,h&&p.lineEnd()},polygonStart:function(){p=t,r=[],f=[],g=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=f.length;e<n;++e)for(var i,r,a=f[e],o=1,s=a.length,u=a[0],c=u[0],l=u[1];o<s;++o)i=c,r=l,u=a[o],c=u[0],l=u[1],r<=m?m<l&&(l-r)*(y-i)<(c-i)*(m-r)&&++t:l<=m&&(c-i)*(m-r)<(l-r)*(y-i)&&--t;return t}(),e=g&&t,n=(r=Q(r)).length;(e||n)&&(i.polygonStart(),e&&(i.lineStart(),w(null,null,1,i),i.lineEnd()),n&&al(r,T,t,w,i),i.polygonEnd());p=i,r=f=a=null}};function n(t,e){b(t,e)&&p.point(t,e)}function v(t,e){var n,i,r=b(t,e);f&&a.push([t,e]),d?(o=t,s=e,d=!1,(u=r)&&(p.lineStart(),p.point(t,e))):r&&h?p.point(t,e):!function(t,e,n,i,r,a){var o=t[0],s=t[1],u=0,c=1,l=e[0]-o,f=e[1]-s,n=n-o;if(l||!(0<n)){if(n/=l,l<0){if(n<u)return;n<c&&(c=n)}else if(0<l){if(c<n)return;u<n&&(u=n)}if(n=r-o,l||!(n<0)){if(n/=l,l<0){if(c<n)return;u<n&&(u=n)}else if(0<l){if(n<u)return;n<c&&(c=n)}if(n=i-s,f||!(0<n)){if(n/=f,f<0){if(n<u)return;n<c&&(c=n)}else if(0<f){if(c<n)return;u<n&&(u=n)}if(n=a-s,f||!(n<0)){if(n/=f,f<0){if(c<n)return;u<n&&(u=n)}else if(0<f){if(n<u)return;n<c&&(c=n)}return 0<u&&(t[0]=o+u*l,t[1]=s+u*f),c<1&&(e[0]=o+c*l,e[1]=s+c*f),1}}}}}(n=[c=Math.max(_l,Math.min(xl,c)),l=Math.max(_l,Math.min(xl,l))],i=[t=Math.max(_l,Math.min(xl,t)),e=Math.max(_l,Math.min(xl,e))],y,x,_,m)?r&&(p.lineStart(),p.point(t,e),g=!1):(h||(p.lineStart(),p.point(n[0],n[1])),p.point(i[0],i[1]),r||p.lineEnd(),g=!1),c=t,l=e,h=r}return e}}var bl={sphere:Mu,point:Mu,lineStart:function(){bl.point=Tl,bl.lineEnd=wl},lineEnd:Mu,polygonStart:Mu,polygonEnd:Mu};function wl(){bl.point=bl.lineEnd=Mu}function Tl(t,e){pl=t*=uu,vl=xu(e*=uu),yl=hu(e),bl.point=Al}function Al(t,e){t*=uu;var n=xu(e*=uu),i=hu(e),r=cu(t-pl),a=hu(r),e=i*xu(r),r=yl*n-vl*i*a,a=vl*n+yl*i*a;gl.add(fu(mu(e*e+r*r),a)),pl=t,vl=n,yl=i}function Ml(t){return gl=new S,Ru(t,bl),+gl}var kl=[null,null],Sl={type:"LineString",coordinates:kl};function El(t,e){return kl[0]=t,kl[1]=e,Ml(Sl)}var Cl={Feature:function(t,e){return Rl(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(Rl(n[i].geometry,e))return!0;return!1}},Dl={Sphere:function(){return!0},Point:function(t,e){return Ol(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ol(n[i],e))return!0;return!1},LineString:function(t,e){return Ll(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ll(n[i],e))return!0;return!1},Polygon:function(t,e){return Pl(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Pl(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(Rl(n[i],e))return!0;return!1}};function Rl(t,e){return!(!t||!Dl.hasOwnProperty(t.type))&&Dl[t.type](t,e)}function Ol(t,e){return 0===El(t,e)}function Ll(t,e){for(var n,i,r,a=0,o=t.length;a<o;a++){if(0===(i=El(t[a],e)))return!0;if(0<a&&0<(r=El(t[a],t[a-1]))&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<nu*r)return!0;n=i}return!1}function Pl(t,e){return!!ul(t.map(zl),Nl(e))}function zl(t){return(t=t.map(Nl)).pop(),t}function Nl(t){return[t[0]*uu,t[1]*uu]}function Il(t,e,n){var i=et(t,e-eu,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function Fl(t,e,n){var i=et(t,e-eu,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function Bl(){var e,n,i,r,a,o,s,u,c,l,f,h,d=10,g=d,p=90,v=360,y=2.5;function x(){return{type:"MultiLineString",coordinates:t()}}function t(){return et(du(r/p)*p,i,p).map(f).concat(et(du(u/v)*v,s,v).map(h)).concat(et(du(n/d)*d,e,d).filter(function(t){return cu(t%p)>eu}).map(c)).concat(et(du(o/g)*g,a,g).filter(function(t){return cu(t%v)>eu}).map(l))}return x.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},x.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(s).slice(1),f(i).reverse().slice(1),h(u).reverse().slice(1))]}},x.extent=function(t){return arguments.length?x.extentMajor(t).extentMinor(t):x.extentMinor()},x.extentMajor=function(t){return arguments.length?(r=+t[0][0],i=+t[1][0],u=+t[0][1],s=+t[1][1],i<r&&(t=r,r=i,i=t),s<u&&(t=u,u=s,s=t),x.precision(y)):[[r,u],[i,s]]},x.extentMinor=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],e<n&&(t=n,n=e,e=t),a<o&&(t=o,o=a,a=t),x.precision(y)):[[n,o],[e,a]]},x.step=function(t){return arguments.length?x.stepMajor(t).stepMinor(t):x.stepMinor()},x.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],x):[p,v]},x.stepMinor=function(t){return arguments.length?(d=+t[0],g=+t[1],x):[d,g]},x.precision=function(t){return arguments.length?(y=+t,c=Il(o,a,90),l=Fl(n,e,y),f=Il(u,s,90),h=Fl(r,i,y),x):y},x.extentMajor([[-180,-90+eu],[180,90-eu]]).extentMinor([[-180,-80-eu],[180,80+eu]])}var Xl,$l,Yl,jl,Gl=t=>t,Hl=new S,Vl=new S,Ul={point:Mu,lineStart:Mu,lineEnd:Mu,polygonStart:function(){Ul.lineStart=ql,Ul.lineEnd=Kl},polygonEnd:function(){Ul.lineStart=Ul.lineEnd=Ul.point=Mu,Hl.add(cu(Vl)),Vl=new S},result:function(){var t=Hl/2;return Hl=new S,t}};function ql(){Ul.point=Wl}function Wl(t,e){Ul.point=Zl,Xl=Yl=t,$l=jl=e}function Zl(t,e){Vl.add(jl*t-Yl*e),Yl=t,jl=e}function Kl(){Zl(Xl,$l)}var Jl=Ul,Ql=1/0,tf=Ql,ef=-Ql,nf=ef;var rf,af,of,sf,uf={point:function(t,e){t<Ql&&(Ql=t);ef<t&&(ef=t);e<tf&&(tf=e);nf<e&&(nf=e)},lineStart:Mu,lineEnd:Mu,polygonStart:Mu,polygonEnd:Mu,result:function(){var t=[[Ql,tf],[ef,nf]];return ef=nf=-(tf=Ql=1/0),t}},cf=0,lf=0,ff=0,hf=0,df=0,gf=0,pf=0,vf=0,yf=0,xf={point:_f,lineStart:mf,lineEnd:Tf,polygonStart:function(){xf.lineStart=Af,xf.lineEnd=Mf},polygonEnd:function(){xf.point=_f,xf.lineStart=mf,xf.lineEnd=Tf},result:function(){var t=yf?[pf/yf,vf/yf]:gf?[hf/gf,df/gf]:ff?[cf/ff,lf/ff]:[NaN,NaN];return cf=lf=ff=hf=df=gf=pf=vf=yf=0,t}};function _f(t,e){cf+=t,lf+=e,++ff}function mf(){xf.point=bf}function bf(t,e){xf.point=wf,_f(of=t,sf=e)}function wf(t,e){var n=t-of,i=e-sf,i=mu(n*n+i*i);hf+=i*(of+t)/2,df+=i*(sf+e)/2,gf+=i,_f(of=t,sf=e)}function Tf(){xf.point=_f}function Af(){xf.point=kf}function Mf(){Sf(rf,af)}function kf(t,e){xf.point=Sf,_f(rf=of=t,af=sf=e)}function Sf(t,e){var n=t-of,i=e-sf,i=mu(n*n+i*i);hf+=i*(of+t)/2,df+=i*(sf+e)/2,gf+=i,pf+=(i=sf*t-of*e)*(of+t),vf+=i*(sf+e),yf+=3*i,_f(of=t,sf=e)}var Ef=xf;function Cf(t){this._context=t}Cf.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,ou)}},result:Mu};var Df,Rf,Of,Lf,Pf,zf=new S,Nf={point:Mu,lineStart:function(){Nf.point=If},lineEnd:function(){Df&&Ff(Rf,Of),Nf.point=Mu},polygonStart:function(){Df=!0},polygonEnd:function(){Df=null},result:function(){var t=+zf;return zf=new S,t}};function If(t,e){Nf.point=Ff,Rf=Lf=t,Of=Pf=e}function Ff(t,e){Lf-=t,Pf-=e,zf.add(mu(Lf*Lf+Pf*Pf)),Lf=t,Pf=e}var Bf=Nf;function Xf(){this._string=[]}function $f(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Yf(i){return function(t){var e,n=new jf;for(e in i)n[e]=i[e];return n.stream=t,n}}function jf(){}function Gf(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),Ru(n,t.stream(uf)),e(uf.result()),null!=i&&t.clipExtent(i),t}function Hf(r,a,t){return Gf(r,function(t){var e=a[1][0]-a[0][0],n=a[1][1]-a[0][1],i=Math.min(e/(t[1][0]-t[0][0]),n/(t[1][1]-t[0][1])),e=+a[0][0]+(e-i*(t[1][0]+t[0][0]))/2,t=+a[0][1]+(n-i*(t[1][1]+t[0][1]))/2;r.scale(150*i).translate([e,t])},t)}function Vf(t,e,n){return Hf(t,[[0,0],e],n)}function Uf(i,r,t){return Gf(i,function(t){var e=+r,n=e/(t[1][0]-t[0][0]),e=(e-n*(t[1][0]+t[0][0]))/2,t=-n*t[0][1];i.scale(150*n).translate([e,t])},t)}function qf(r,a,t){return Gf(r,function(t){var e=+a,n=e/(t[1][1]-t[0][1]),i=-n*t[0][0],t=(e-n*(t[1][1]+t[0][1]))/2;r.scale(150*n).translate([i,t])},t)}Xf.prototype={_radius:4.5,_circle:$f(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=$f(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},jf.prototype={constructor:jf,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Wf=16,Zf=hu(30*uu);function Kf(t,e){return+e?(S=t,E=e,function(i){var n,r,a,o,s,u,c,l,f,h,d,g,p={point:t,lineStart:e,lineEnd:y,polygonStart:function(){i.polygonStart(),p.lineStart=x},polygonEnd:function(){i.polygonEnd(),p.lineStart=e}};function t(t,e){t=S(t,e),i.point(t[0],t[1])}function e(){l=NaN,p.point=v,i.lineStart()}function v(t,e){var n=nc([t,e]),e=S(t,e);C(l,f,c,h,d,g,l=e[0],f=e[1],c=t,h=n[0],d=n[1],g=n[2],Wf,i),i.point(l,f)}function y(){p.point=t,i.lineEnd()}function x(){e(),p.point=_,p.lineEnd=m}function _(t,e){v(n=t,e),r=l,a=f,o=h,s=d,u=g,p.point=v}function m(){C(l,f,c,h,d,g,r,a,n,o,s,u,Wf,i),p.lineEnd=y,y()}return p}):(n=t,Yf({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}}));var n,S,E;function C(t,e,n,i,r,a,o,s,u,c,l,f,h,d){var g,p,v,y,x,_,m,b,w,T,A=o-t,M=s-e,k=A*A+M*M;4*E<k&&h--&&(v=a+f,w=Tu(v/=y=mu((g=i+c)*g+(p=r+l)*p+v*v)),x=cu(cu(v)-1)<eu||cu(n-u)<eu?(n+u)/2:fu(p,g),_=(T=S(x,w))[0],m=T[1],(E<(T=M*(b=_-t)-A*(w=m-e))*T/k||.3<cu((A*b+M*w)/k-.5)||i*c+r*l+a*f<Zf)&&(C(t,e,n,i,r,a,_,m,x,g/=y,p/=y,v,h,d),d.point(_,m),C(_,m,x,g,p,v,o,s,u,c,l,f,h,d)))}}var Jf=Yf({point:function(t,e){this.stream.point(t*uu,e*uu)}});function Qf(t,n,i,r,a,e){if(!e)return s=t,u=n,c=i,l=r,f=a,o.invert=function(t,e){return[(t-u)/s*l,(c-e)/s*f]},o;function o(t,e){return[u+s*(t*=l),c-s*(e*=f)]}var s,u,c,l,f,h=hu(e),e=xu(e),d=h*t,g=e*t,p=h/t,v=e/t,y=(e*i-h*n)/t,x=(e*n+h*i)/t;function _(t,e){return[d*(t*=r)-g*(e*=a)+n,i-g*t-d*e]}return _.invert=function(t,e){return[r*(p*t-v*e+y),a*(x-v*t-p*e)]},_}function th(t){return eh(function(){return t})()}function eh(t){var e,i,n,r,a,o,s,u,c,l,f=150,h=480,d=250,g=0,p=0,v=0,y=0,x=0,_=0,m=1,b=1,w=null,T=hl,A=null,M=Gl,k=.5;function S(t){return u(t[0]*uu,t[1]*uu)}function E(t){return(t=u.invert(t[0],t[1]))&&[t[0]*su,t[1]*su]}function C(){var t=Qf(f,0,0,m,b,_).apply(null,e(g,p)),t=Qf(f,h-t[0],d-t[1],m,b,_);return i=Wc(v,y,x),s=Uc(e,t),u=Uc(i,s),o=Kf(s,k),D()}function D(){return c=l=null,S}return S.stream=function(t){return c&&l===t?c:c=Jf((n=i,Yf({point:function(t,e){e=n(t,e);return this.stream.point(e[0],e[1])}})(T(o(M(l=t))))));var n},S.preclip=function(t){return arguments.length?(T=t,w=void 0,D()):T},S.postclip=function(t){return arguments.length?(M=t,A=n=r=a=null,D()):M},S.clipAngle=function(t){return arguments.length?(T=+t?dl(w=t*uu):(w=null,hl),D()):w*su},S.clipExtent=function(t){return arguments.length?(M=null==t?(A=n=r=a=null,Gl):ml(A=+t[0][0],n=+t[0][1],r=+t[1][0],a=+t[1][1]),D()):null==A?null:[[A,n],[r,a]]},S.scale=function(t){return arguments.length?(f=+t,C()):f},S.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],C()):[h,d]},S.center=function(t){return arguments.length?(g=t[0]%360*uu,p=t[1]%360*uu,C()):[g*su,p*su]},S.rotate=function(t){return arguments.length?(v=t[0]%360*uu,y=t[1]%360*uu,x=2<t.length?t[2]%360*uu:0,C()):[v*su,y*su,x*su]},S.angle=function(t){return arguments.length?(_=t%360*uu,C()):_*su},S.reflectX=function(t){return arguments.length?(m=t?-1:1,C()):m<0},S.reflectY=function(t){return arguments.length?(b=t?-1:1,C()):b<0},S.precision=function(t){return arguments.length?(o=Kf(s,k=t*t),D()):mu(k)},S.fitExtent=function(t,e){return Hf(S,t,e)},S.fitSize=function(t,e){return Vf(S,t,e)},S.fitWidth=function(t,e){return Uf(S,t,e)},S.fitHeight=function(t,e){return qf(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&E,C()}}function nh(t){var e=0,n=iu/3,i=eh(t),t=i(e,n);return t.parallels=function(t){return arguments.length?i(e=t[0]*uu,n=t[1]*uu):[e*su,n*su]},t}function ih(t,e){var n,i=xu(t),r=(i+xu(e))/2;if(cu(r)<eu)return n=hu(t),a.invert=function(t,e){return[t/n,Tu(e*n)]},a;function a(t,e){return[t*n,xu(e)/n]}var o=1+i*(2*r-i),s=mu(o)/r;function u(t,e){e=mu(o-2*r*xu(e))/r;return[e*xu(t*=r),s-e*hu(t)]}return u.invert=function(t,e){var n=s-e,e=fu(t,cu(n))*_u(n);return n*r<0&&(e-=iu*_u(t)*_u(n)),[e/r,Tu((o-(t*t+n*n)*r*r)/(2*r))]},u}function rh(){return nh(ih).scale(155.424).center([0,33.6442])}function ah(){return rh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function oh(r){return function(t,e){var n=hu(t),i=hu(e),n=r(n*i);return n===1/0?[2,0]:[n*i*xu(t),n*xu(e)]}}function sh(a){return function(t,e){var n=mu(t*t+e*e),i=a(n),r=xu(i),i=hu(i);return[fu(t*r,n*i),Tu(n&&e*r/n)]}}var uh=oh(function(t){return mu(2/(1+t))});uh.invert=sh(function(t){return 2*Tu(t/2)});var ch=oh(function(t){return(t=wu(t))&&t/xu(t)});function lh(t,e){return[t,vu(bu((ru+e)/2))]}function fh(n){var i,r,a,o=th(n),e=o.center,s=o.scale,u=o.translate,c=o.clipExtent,l=null;function f(){var t=iu*s(),e=o(Qc(o.rotate()).invert([0,0]));return c(null==l?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:n===lh?[[Math.max(e[0]-t,l),i],[Math.min(e[0]+t,r),a]]:[[l,Math.max(e[1]-t,i)],[r,Math.min(e[1]+t,a)]])}return o.scale=function(t){return arguments.length?(s(t),f()):s()},o.translate=function(t){return arguments.length?(u(t),f()):u()},o.center=function(t){return arguments.length?(e(t),f()):e()},o.clipExtent=function(t){return arguments.length?(null==t?l=i=r=a=null:(l=+t[0][0],i=+t[0][1],r=+t[1][0],a=+t[1][1]),f()):null==l?null:[[l,i],[r,a]]},f()}function hh(t){return bu((ru+t)/2)}function dh(t,e){var n=hu(t),r=t===e?xu(t):vu(n/hu(e))/vu(hh(e)/hh(t)),a=n*yu(hh(t),r)/r;return r?(i.invert=function(t,e){var n=a-e,i=_u(r)*mu(t*t+n*n),e=fu(t,cu(n))*_u(n);return n*r<0&&(e-=iu*_u(t)*_u(n)),[e/r,2*lu(yu(a/i,1/r))-ru]},i):lh;function i(t,e){0<a?e<-ru+eu&&(e=-ru+eu):ru-eu<e&&(e=ru-eu);e=a/yu(hh(e),r);return[e*xu(r*t),a-e*hu(r*t)]}}function gh(t,e){return[t,e]}function ph(t,e){var n=hu(t),i=t===e?xu(t):(n-hu(e))/(e-t),r=n/i+t;return cu(i)<eu?gh:(a.invert=function(t,e){var n=r-e,e=fu(t,cu(n))*_u(n);return n*i<0&&(e-=iu*_u(t)*_u(n)),[e/i,r-_u(i)*mu(t*t+n*n)]},a);function a(t,e){e=r-e,t*=i;return[e*xu(t),r-e*hu(t)]}}ch.invert=sh(function(t){return t}),lh.invert=function(t,e){return[t,2*lu(gu(e))-ru]},gh.invert=gh;var vh=1.340264,yh=-.081106,xh=893e-6,_h=.003796,mh=mu(3)/2;function bh(t,e){var n=Tu(mh*xu(e)),i=n*n,e=i*i*i;return[t*hu(n)/(mh*(vh+3*yh*i+e*(7*xh+9*_h*i))),n*(vh+yh*i+e*(xh+_h*i))]}function wh(t,e){var n=hu(e),i=hu(t)*n;return[n*xu(t)/i,xu(e)/i]}function Th(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function Ah(t,e){return[hu(e)*xu(t),xu(e)]}function Mh(t,e){var n=hu(e),i=1+hu(t)*n;return[n*xu(t)/i,xu(e)/i]}function kh(t,e){return[vu(bu((ru+e)/2)),-t]}function Sh(t,e){return t.parent===e.parent?1:2}function Eh(t,e){return t+e.x}function Ch(t,e){return Math.max(t,e.y)}function Dh(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;0<=--i;)e+=n[i].value;else e=1;t.value=e}bh.invert=function(t,e){for(var n,i=e,r=i*i,a=r*r*r,o=0;o<12&&(a=(r=(i-=n=(i*(vh+yh*r+a*(xh+_h*r))-e)/(vh+3*yh*r+a*(7*xh+9*_h*r)))*i)*r*r,!(cu(n)<nu));++o);return[mh*t*(vh+3*yh*r+a*(7*xh+9*_h*r))/hu(i),Tu(xu(i)/mh)]},wh.invert=sh(lu),Th.invert=function(t,e){var n=e,i=25;do{var r=n*n,a=r*r}while(n-=a=(n*(1.007226+r*(.015085+a*(.028874*r-.044475-.005916*a)))-e)/(1.007226+r*(.045255+a*(.259866*r-.311325-.005916*11*a))),cu(a)>eu&&0<--i);return[t/(.8707+(r=n*n)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),n]},Ah.invert=sh(Tu),Mh.invert=sh(function(t){return 2*lu(t)}),kh.invert=function(t,e){return[-e,2*lu(gu(t))-ru]};function Rh(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Lh)):void 0===e&&(e=Oh);for(var n,i,r,a,o,t=new Nh(t),s=[t];n=s.pop();)if((r=e(n.data))&&(o=(r=Array.from(r)).length))for(n.children=r,a=o-1;0<=a;--a)s.push(i=r[a]=new Nh(r[a])),i.parent=n,i.depth=n.depth+1;return t.eachBefore(zh)}function Oh(t){return t.children}function Lh(t){return Array.isArray(t)?t[1]:null}function Ph(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function zh(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function Nh(t){this.data=t,this.depth=this.height=0,this.parent=null}function Ih(t){for(var e,n,i=0,r=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(Array.from(t))).length,a=[];i<r;)e=t[i],n&&Bh(n,e)?++i:(n=function(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return $h(t[0],t[1]);case 3:return Yh(t[0],t[1],t[2])}}(a=function(t,e){var n,i;if(Xh(e,t))return[e];for(n=0;n<t.length;++n)if(Fh(e,t[n])&&Xh($h(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Fh($h(t[n],t[i]),e)&&Fh($h(t[n],e),t[i])&&Fh($h(t[i],e),t[n])&&Xh(Yh(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}(a,e)),i=0);return n}function Fh(t,e){var n=t.r-e.r,i=e.x-t.x,t=e.y-t.y;return n<0||n*n<i*i+t*t}function Bh(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),i=e.x-t.x,t=e.y-t.y;return 0<n&&i*i+t*t<n*n}function Xh(t,e){for(var n=0;n<e.length;++n)if(!Bh(t,e[n]))return;return 1}function $h(t,e){var n=t.x,i=t.y,r=t.r,a=e.x,o=e.y,s=e.r,u=a-n,c=o-i,t=s-r,e=Math.sqrt(u*u+c*c);return{x:(n+a+u/e*t)/2,y:(i+o+c/e*t)/2,r:(e+r+s)/2}}function Yh(t,e,n){var i=t.x,r=t.y,a=t.r,o=e.x,s=e.y,u=e.r,c=n.x,l=n.y,f=n.r,h=i-o,d=i-c,g=r-s,p=r-l,t=u-a,e=f-a,n=i*i+r*r-a*a,u=n-o*o-s*s+u*u,c=n-c*c-l*l+f*f,l=d*g-h*p,f=(g*c-p*u)/(2*l)-i,g=(p*t-g*e)/l,c=(d*u-h*c)/(2*l)-r,d=(h*e-d*t)/l,t=g*g+d*d-1,l=2*(a+f*g+c*d),a=f*f+c*c-a*a,l=-(t?(l+Math.sqrt(l*l-4*t*a))/(2*t):a/l);return{x:i+f+g*l,y:r+c+d*l,r:l}}function jh(t,e,n){var i,r,a,o,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(r=e.r+n.r,o=t.r+n.r,(o*=o)<(r*=r)?(i=(c+o-r)/(2*c),a=Math.sqrt(Math.max(0,o/c-i*i)),n.x=t.x-i*s-a*u,n.y=t.y-i*u+a*s):(i=(c+r-o)/(2*c),a=Math.sqrt(Math.max(0,r/c-i*i)),n.x=e.x+i*s-a*u,n.y=e.y+i*u+a*s)):(n.x=e.x+n.r,n.y=e.y)}function Gh(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,t=e.y-t.y;return 0<n&&i*i+t*t<n*n}function Hh(t){var e=t._,n=t.next._,i=e.r+n.r,t=(e.x*n.r+n.x*e.r)/i,i=(e.y*n.r+n.y*e.r)/i;return t*t+i*i}function Vh(t){this._=t,this.next=null,this.previous=null}function Uh(t){if(!(r=(t="object"==typeof(e=t)&&"length"in e?e:Array.from(e)).length))return 0;var e,n,i,r,a,o,s,u,c,l,f,h=t[0];if(h.x=0,h.y=0,!(1<r))return h.r;if(n=t[1],h.x=-n.r,n.x=h.r,n.y=0,!(2<r))return h.r+n.r;jh(n,h,i=t[2]),h=new Vh(h),n=new Vh(n),i=new Vh(i),((h.next=i.previous=n).next=h.previous=i).next=n.previous=h;t:for(s=3;s<r;++s){jh(h._,n._,i=t[s]),i=new Vh(i),u=n.next,c=h.previous,l=n._.r,f=h._.r;do{if(l<=f){if(Gh(u._,i._)){(h.next=n=u).previous=h,--s;continue t}l+=u._.r,u=u.next}else{if(Gh(c._,i._)){((h=c).next=n).previous=h,--s;continue t}f+=c._.r,c=c.previous}}while(u!==c.next);for(i.previous=h,i.next=n,h.next=n.previous=n=i,a=Hh(h);(i=i.next)!==n;)(o=Hh(i))<a&&(h=i,a=o);n=h.next}for(h=[n._],i=n;(i=i.next)!==n;)h.push(i._);for(i=Ih(h),s=0;s<r;++s)(h=t[s]).x-=i.x,h.y-=i.y;return i.r}function qh(t){return null==t?null:Wh(t)}function Wh(t){if("function"!=typeof t)throw new Error;return t}function Zh(){return 0}function Kh(t){return function(){return t}}function Jh(t){return Math.sqrt(t.value)}function Qh(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function td(o,s){return function(t){if(e=t.children){var e,n,i,r=e.length,a=o(t)*s||0;if(a)for(n=0;n<r;++n)e[n].r+=a;if(i=Uh(e),a)for(n=0;n<r;++n)e[n].r-=a;t.r=i+a}}}function ed(n){return function(t){var e=t.parent;t.r*=n,e&&(t.x=e.x+n*t.x,t.y=e.y+n*t.y)}}function nd(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function id(t,e,n,i,r){for(var a,o=t.children,s=-1,u=o.length,c=t.value&&(i-e)/t.value;++s<u;)(a=o[s]).y0=n,a.y1=r,a.x0=e,a.x1=e+=a.value*c}Nh.prototype=Rh.prototype={constructor:Nh,count:function(){return this.eachAfter(Dh)},each:function(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this},eachAfter:function(t,e){for(var n,i,r,a=this,o=[a],s=[],u=-1;a=o.pop();)if(s.push(a),n=a.children)for(i=0,r=n.length;i<r;++i)o.push(n[i]);for(;a=s.pop();)t.call(e,a,++u,this);return this},eachBefore:function(t,e){for(var n,i,r,a=[this],o=-1;n=a.pop();)if(t.call(e,n,++o,this),i=n.children)for(r=i.length-1;0<=r;--r)a.push(i[r]);return this},find:function(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i},sum:function(r){return this.eachAfter(function(t){for(var e=+r(t.data)||0,n=t.children,i=n&&n.length;0<=--i;)e+=n[i].value;t.value=e})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;t=n.pop(),e=i.pop();for(;t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n},copy:function(){return Rh(this).eachBefore(Ph)},[Symbol.iterator]:function*(){var t,e,n,i,r,a=[this];do{for(e=a.reverse(),a=[];t=e.pop();)if(yield t,n=t.children)for(i=0,r=n.length;i<r;++i)a.push(n[i])}while(a.length)}};var rd={depth:-1},ad={},od={};function sd(t){return t.id}function ud(t){return t.parentId}function cd(t){let e=t.length;if(e<2)return"";for(;1<--e&&!ld(t,e););return t.slice(0,e)}function ld(e,n){if("/"===e[n]){let t=0;for(;0<n&&"\\"===e[--n];)++t;if(0==(1&t))return 1}}function fd(t,e){return t.parent===e.parent?1:2}function hd(t){var e=t.children;return e?e[0]:t.t}function dd(t){var e=t.children;return e?e[e.length-1]:t.t}function gd(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function pd(t,e,n,i,r){for(var a,o=t.children,s=-1,u=o.length,c=t.value&&(r-n)/t.value;++s<u;)(a=o[s]).x0=e,a.x1=i,a.y0=n,a.y1=n+=a.value*c}gd.prototype=Object.create(Nh.prototype);var vd=(1+Math.sqrt(5))/2;function yd(t,e,n,i,r,a){for(var o,s,u,c,l,f,h,d,g,p,v,y=[],x=e.children,_=0,m=0,b=x.length,w=e.value;_<b;){for(u=r-n,c=a-i;l=x[m++].value,!l&&m<b;);for(v=(f=h=l)*l*(p=Math.max(c/u,u/c)/(w*t)),g=Math.max(h/v,v/f);m<b;++m){if(l+=s=x[m].value,s<f&&(f=s),h<s&&(h=s),v=l*l*p,g<(d=Math.max(h/v,v/f))){l-=s;break}g=d}y.push(o={value:l,dice:u<c,children:x.slice(_,m)}),o.dice?id(o,n,i,r,w?i+=c*l/w:a):pd(o,n,i,w?n+=u*l/w:r,a),w-=l,_=m}return y}var xd=function e(a){function t(t,e,n,i,r){yd(a,t,e,n,i,r)}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(vd);var _d=function e(d){function t(t,e,n,i,r){if((a=t._squarify)&&a.ratio===d)for(var a,o,s,u,c,l=-1,f=a.length,h=t.value;++l<f;){for(s=(o=a[l]).children,u=o.value=0,c=s.length;u<c;++u)o.value+=s[u].value;o.dice?id(o,e,n,i,h?n+=(r-n)*o.value/h:r):pd(o,e,n,h?e+=(i-e)*o.value/h:i,r),h-=o.value}else t._squarify=a=yd(d,t,e,n,i,r),a.ratio=d}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(vd);function md(t,e){return t[0]-e[0]||t[1]-e[1]}function bd(t){const e=t.length,n=[0,1];let i=2,r;for(r=2;r<e;++r){for(;1<i&&(a=t[n[i-2]],o=t[n[i-1]],s=t[r],(o[0]-a[0])*(s[1]-a[1])-(o[1]-a[1])*(s[0]-a[0])<=0);)--i;n[i++]=r}var a,o,s;return n.slice(0,i)}var wd=Math.random,Td=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(wd),Ad=function t(n){function e(t,e){return arguments.length<2&&(e=t,t=0),t=Math.floor(t),e=Math.floor(e)-t,function(){return Math.floor(n()*e+t)}}return e.source=t,e}(wd),Md=function t(a){function e(e,n){var i,r;return e=null==e?0:+e,n=null==n?1:+n,function(){var t;if(null!=i)t=i,i=null;else for(;i=2*a()-1,t=2*a()-1,r=i*i+t*t,!r||1<r;);return e+n*t*Math.sqrt(-2*Math.log(r)/r)}}return e.source=t,e}(wd),kd=function t(e){var n=Md.source(e);function i(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return i.source=t,i}(wd),Sd=function t(i){function e(n){return(n=+n)<=0?()=>0:function(){for(var t=0,e=n;1<e;--e)t+=i();return t+e*i()}}return e.source=t,e}(wd),Ed=function t(n){var i=Sd.source(n);function e(t){if(0==(t=+t))return n;var e=i(t);return function(){return e()/t}}return e.source=t,e}(wd),Cd=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(wd),Dd=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(wd),Rd=function t(e){function n(t){if((t=+t)<0||1<t)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(wd),Od=function t(e){function n(t){if((t=+t)<0||1<t)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(wd),Ld=function t(s){var u=Md.source(s)();function e(t,i){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(i=null==i?1:+i,1===t)return()=>-Math.log1p(-s())*i;var r=(t<1?t+1:t)-1/3,a=1/(3*Math.sqrt(r)),o=t<1?()=>Math.pow(s(),1/t):()=>1;return function(){do{do{var t=u(),e=1+a*t}while(e<=0);e*=e*e;var n=1-s()}while(1-.0331*t*t*t*t<=n&&Math.log(n)>=.5*t*t+r*(1-e+Math.log(e)));return r*e*o()*i}}return e.source=t,e}(wd),Pd=function t(e){var r=Ld.source(e);function n(t,e){var n=r(t),i=r(e);return function(){var t=n();return 0===t?0:t/(t+i())}}return n.source=t,n}(wd),zd=function t(e){var f=Od.source(e),h=Pd.source(e);function n(c,l){return c=+c,1<=(l=+l)?()=>c:l<=0?()=>0:function(){for(var t=0,e=c,n=l;16<e*n&&16<e*(1-n);){var i=Math.floor((e+1)*n),r=h(i,e-i+1)();r<=n?(t+=i,e-=i,n=(n-r)/(1-r)):(e=i-1,n/=r)}for(var a=n<.5,o=f(a?n:1-n),s=o(),u=0;s<=e;++u)s+=o();return t+(a?u:e-u)}}return n.source=t,n}(wd),Nd=function t(r){function e(e,t,n){var i=0==(e=+e)?t=>-Math.log(t):(e=1/e,t=>Math.pow(t,e));return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*i(-Math.log1p(-r()))}}return e.source=t,e}(wd),Id=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){return t+e*Math.tan(Math.PI*n())}}return e.source=t,e}(wd),Fd=function t(i){function e(e,n){return e=null==e?0:+e,n=null==n?1:+n,function(){var t=i();return e+n*Math.log(t/(1-t))}}return e.source=t,e}(wd),Bd=function t(s){var u=Ld.source(s),c=zd.source(s);function e(o){return function(){for(var t=0,e=o;16<e;){var n=Math.floor(.875*e),i=u(n)();if(e<i)return t+c(n-1,e/i)();t+=n,e-=i}for(var r=-Math.log1p(-s()),a=0;r<=e;++a)r-=Math.log1p(-s());return t+a}}return e.source=t,e}(wd);const Xd=1/4294967296;function $d(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Yd(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const jd=Symbol("implicit");function Gd(){var n=new g,i=[],r=[],a=jd;function o(t){let e=n.get(t);if(void 0===e){if(a!==jd)return a;n.set(t,e=i.push(t)-1)}return r[e%r.length]}return o.domain=function(t){if(!arguments.length)return i.slice();i=[],n=new g;for(const e of t)n.has(e)||n.set(e,i.push(e)-1);return o},o.range=function(t){return arguments.length?(r=Array.from(t),o):r.slice()},o.unknown=function(t){return arguments.length?(a=t,o):a},o.copy=function(){return Gd(i,r).unknown(a)},$d.apply(o,arguments),o}function Hd(){var r,a,t=Gd().unknown(void 0),o=t.domain,s=t.range,u=0,c=1,l=!1,f=0,h=0,d=.5;function e(){var t=o().length,e=c<u,n=e?c:u,i=e?u:c;r=(i-n)/Math.max(1,t-f+2*h),l&&(r=Math.floor(r)),n+=(i-n-r*(t-f))*d,a=r*(1-f),l&&(n=Math.round(n),a=Math.round(a));t=et(t).map(function(t){return n+r*t});return s(e?t.reverse():t)}return delete t.unknown,t.domain=function(t){return arguments.length?(o(t),e()):o()},t.range=function(t){return arguments.length?([u,c]=t,u=+u,c=+c,e()):[u,c]},t.rangeRound=function(t){return[u,c]=t,u=+u,c=+c,l=!0,e()},t.bandwidth=function(){return a},t.step=function(){return r},t.round=function(t){return arguments.length?(l=!!t,e()):l},t.padding=function(t){return arguments.length?(f=Math.min(1,h=+t),e()):f},t.paddingInner=function(t){return arguments.length?(f=Math.min(1,t),e()):f},t.paddingOuter=function(t){return arguments.length?(h=+t,e()):h},t.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},t.copy=function(){return Hd(o(),[u,c]).round(l).paddingInner(f).paddingOuter(h).align(d)},$d.apply(e(),arguments)}function Vd(t){return+t}var Ud=[0,1];function qd(t){return t}function Wd(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function Zd(t,e,n){var i=t[0],t=t[1],r=e[0],e=e[1],r=t<i?(i=Wd(t,i),n(e,r)):(i=Wd(i,t),n(r,e));return function(t){return r(i(t))}}function Kd(n,t,e){var i=Math.min(n.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=Wd(n[o],n[o+1]),a[o]=e(t[o],t[o+1]);return function(t){var e=v(n,t,1,i)-1;return a[e](r[e](t))}}function Jd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Qd(){var n,i,e,r,a,o,s=Ud,u=Ud,c=oi,l=qd;function f(){var e,n,t,i=Math.min(s.length,u.length);return l!==qd&&(e=s[0],(n=s[i-1])<e&&(t=e,e=n,n=t),l=function(t){return Math.max(e,Math.min(n,t))}),r=2<i?Kd:Zd,a=o=null,h}function h(t){return null==t||isNaN(t=+t)?e:(a=a||r(s.map(n),u,c))(n(l(t)))}return h.invert=function(t){return l(i((o=o||r(u,s.map(n),ei))(t)))},h.domain=function(t){return arguments.length?(s=Array.from(t,Vd),f()):s.slice()},h.range=function(t){return arguments.length?(u=Array.from(t),f()):u.slice()},h.rangeRound=function(t){return u=Array.from(t),c=si,f()},h.clamp=function(t){return arguments.length?(l=!!t||qd,f()):l!==qd},h.interpolate=function(t){return arguments.length?(c=t,f()):c},h.unknown=function(t){return arguments.length?(e=t,h):e},function(t,e){return n=t,i=e,f()}}function tg(){return Qd()(qd,qd)}function eg(t,e,n,i){var r,a=Y(t,e,n);switch((i=Ys(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=Qs(a,o))||(i.precision=r),s.formatPrefix(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=tu(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=Js(a))||(i.precision=r-2*("%"===i.type))}return s.format(i)}function ng(c){var l=c.domain;return c.ticks=function(t){var e=l();return X(e[0],e[e.length-1],null==t?10:t)},c.tickFormat=function(t,e){var n=l();return eg(n[0],n[n.length-1],null==t?10:t,e)},c.nice=function(t){null==t&&(t=10);var e,n,i=l(),r=0,a=i.length-1,o=i[r],s=i[a],u=10;for(s<o&&(n=o,o=s,s=n,n=r,r=a,a=n);0<u--;){if((n=$(o,s,t))===e)return i[r]=o,i[a]=s,l(i);if(0<n)o=Math.floor(o/n)*n,s=Math.ceil(s/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,s=Math.floor(s*n)/n}e=n}return c},c}function ig(t,e){var n,i=0,r=(t=t.slice()).length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function rg(t){return Math.log(t)}function ag(t){return Math.exp(t)}function og(t){return-Math.log(-t)}function sg(t){return-Math.exp(-t)}function ug(t){return isFinite(t)?+("1e"+t):t<0?0:t}function cg(n){return(t,e)=>-n(-t,e)}function lg(t){const r=t(rg,ag),c=r.domain;let l=10,f,h;function e(){var e,n;return f=(n=l)===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),t=>Math.log(t)/n),h=10===(e=l)?ug:e===Math.E?Math.exp:t=>Math.pow(e,t),c()[0]<0?(f=cg(f),h=cg(h),t(og,sg)):t(rg,ag),r}return r.base=function(t){return arguments.length?(l=+t,e()):l},r.domain=function(t){return arguments.length?(c(t),e()):c()},r.ticks=t=>{var e=c();let n=e[0],i=e[e.length-1];e=i<n;e&&([n,i]=[i,n]);let r=f(n),a=f(i),o,s;t=null==t?10:+t;let u=[];if(!(l%1)&&a-r<t){if(r=Math.floor(r),a=Math.ceil(a),0<n){for(;r<=a;++r)for(o=1;o<l;++o)if(s=r<0?o/h(-r):o*h(r),!(s<n)){if(s>i)break;u.push(s)}}else for(;r<=a;++r)for(o=l-1;1<=o;--o)if(s=0<r?o/h(-r):o*h(r),!(s<n)){if(s>i)break;u.push(s)}2*u.length<t&&(u=X(n,i,t))}else u=X(r,a,Math.min(a-r,t)).map(h);return e?u.reverse():u},r.tickFormat=(t,n)=>{if(null==t&&(t=10),"function"!=typeof(n=null==n?10===l?"s":",":n)&&(l%1||null!=(n=Ys(n)).precision||(n.trim=!0),n=s.format(n)),t===1/0)return n;const i=Math.max(1,l*t/r.ticks().length);return t=>{let e=t/h(Math.round(f(t)));return e*l<l-.5&&(e*=l),e<=i?n(t):""}},r.nice=()=>c(ig(c(),{floor:t=>h(Math.floor(f(t))),ceil:t=>h(Math.ceil(f(t)))})),r}function fg(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function hg(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function dg(e){var n=1,t=e(fg(n),hg(n));return t.constant=function(t){return arguments.length?e(fg(n=+t),hg(n)):n},ng(t)}function gg(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function pg(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vg(t){return t<0?-t*t:t*t}function yg(e){var t=e(qd,qd),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(qd,qd):.5===n?e(pg,vg):e(gg(n),gg(1/n)):n},ng(t)}function xg(){var t=yg(Qd());return t.copy=function(){return Jd(t,xg()).exponent(t.exponent())},$d.apply(t,arguments),t}function _g(t){return Math.sign(t)*t*t}var mg=new Date,bg=new Date;function wg(a,o,n,i){function s(t){return a(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return a(t=new Date(+t)),t},s.ceil=function(t){return a(t=new Date(t-1)),o(t,1),a(t),t},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(t,e,n){var i,r=[];if(t=s.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return r;for(;r.push(i=new Date(+t)),o(t,n),a(t),i<t&&t<e;);return r},s.filter=function(n){return wg(function(t){if(t<=t)for(;a(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!n(t););else for(;0<=--e;)for(;o(t,1),!n(t););})},n&&(s.count=function(t,e){return mg.setTime(+t),bg.setTime(+e),a(mg),a(bg),Math.floor(n(mg,bg))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?s.filter(i?function(t){return i(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var Tg=wg(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Tg.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?wg(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):Tg:null};var Ag=Tg,Mg=Tg.range;const kg=1e3,Sg=6e4,Eg=36e5,Cg=864e5,Dg=7*Cg,Rg=(Cg,365*Cg);var Og=wg(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*kg)},function(t,e){return(e-t)/kg},function(t){return t.getUTCSeconds()}),Lg=Og,Pg=Og.range,zg=wg(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*kg)},function(t,e){t.setTime(+t+e*Sg)},function(t,e){return(e-t)/Sg},function(t){return t.getMinutes()}),Ng=zg,Ig=zg.range,Fg=wg(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*kg-t.getMinutes()*Sg)},function(t,e){t.setTime(+t+e*Eg)},function(t,e){return(e-t)/Eg},function(t){return t.getHours()}),Bg=Fg,Xg=Fg.range,$g=wg(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Sg)/Cg,t=>t.getDate()-1),Yg=$g,jg=$g.range;function Gg(e){return wg(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Sg)/Dg})}var Hg=Gg(0),Vg=Gg(1),Ug=Gg(2),qg=Gg(3),Wg=Gg(4),Zg=Gg(5),Kg=Gg(6),Jg=Hg.range,Qg=Vg.range,tp=Ug.range,ep=qg.range,np=Wg.range,ip=Zg.range,rp=Kg.range,ap=wg(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),op=ap,sp=ap.range,up=wg(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});up.every=function(n){return isFinite(n=Math.floor(n))&&0<n?wg(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var cp=up,lp=up.range,fp=wg(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Sg)},function(t,e){return(e-t)/Sg},function(t){return t.getUTCMinutes()}),hp=fp,dp=fp.range,gp=wg(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Eg)},function(t,e){return(e-t)/Eg},function(t){return t.getUTCHours()}),pp=gp,vp=gp.range,yp=wg(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Cg},function(t){return t.getUTCDate()-1}),xp=yp,_p=yp.range;function mp(e){return wg(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Dg})}var bp=mp(0),wp=mp(1),Tp=mp(2),Ap=mp(3),Mp=mp(4),kp=mp(5),Sp=mp(6),Ep=bp.range,Cp=wp.range,Dp=Tp.range,Rp=Ap.range,Op=Mp.range,Lp=kp.range,Pp=Sp.range,zp=wg(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Np=zp,Ip=zp.range,Fp=wg(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Fp.every=function(n){return isFinite(n=Math.floor(n))&&0<n?wg(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var Bp=Fp,Xp=Fp.range;function $p(s,t,e,n,i,r){const u=[[Lg,1,kg],[Lg,5,5e3],[Lg,15,15e3],[Lg,30,3e4],[r,1,Sg],[r,5,3e5],[r,15,9e5],[r,30,18e5],[i,1,Eg],[i,3,3*Eg],[i,6,6*Eg],[i,12,432e5],[n,1,Cg],[n,2,2*Cg],[e,1,Dg],[t,1,2592e6],[t,3,7776e6],[s,1,Rg]];function o(t,e,n){var i=Math.abs(e-t)/n,r=c(([,,t])=>t).right(u,i);if(r===u.length)return s.every(Y(t/Rg,e/Rg,n));if(0===r)return Ag.every(Math.max(Y(t,e,n),1));const[a,o]=u[i/u[r-1][2]<u[r][2]/i?r-1:r];return a.every(o)}return[function(t,e,n){var i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:o(t,e,n),a=r?r.range(t,+e+1):[];return i?a.reverse():a},o]}const[Yp,jp]=$p(Bp,Np,bp,xp,pp,hp),[Gp,Hp]=$p(cp,op,Hg,Yg,Bg,Ng);function Vp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Up(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function qp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Wp(t){var i=t.dateTime,r=t.date,a=t.time,e=t.periods,n=t.days,o=t.shortDays,s=t.months,u=t.shortMonths,c=iv(e),l=rv(e),f=iv(n),h=rv(n),d=iv(o),g=rv(o),p=iv(s),v=rv(s),y=iv(u),x=rv(u),_={a:function(t){return o[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Mv,e:Mv,f:Dv,g:$v,G:jv,H:kv,I:Sv,j:Ev,L:Cv,m:Rv,M:Ov,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:hy,s:dy,S:Lv,u:Pv,U:zv,V:Iv,w:Fv,W:Bv,x:null,X:null,y:Xv,Y:Yv,Z:Gv,"%":fy},m={a:function(t){return o[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Hv,e:Hv,f:Zv,g:sy,G:cy,H:Vv,I:Uv,j:qv,L:Wv,m:Kv,M:Jv,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:hy,s:dy,S:Qv,u:ty,U:ey,V:iy,w:ry,W:ay,x:null,X:null,y:oy,Y:uy,Z:ly,"%":fy},b={a:function(t,e,n){e=d.exec(e.slice(n));return e?(t.w=g.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){e=f.exec(e.slice(n));return e?(t.w=h.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){e=y.exec(e.slice(n));return e?(t.m=x.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){e=p.exec(e.slice(n));return e?(t.m=v.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return A(t,i,e,n)},d:pv,e:pv,f:bv,g:fv,G:lv,H:yv,I:yv,j:vv,L:mv,m:gv,M:xv,p:function(t,e,n){e=c.exec(e.slice(n));return e?(t.p=l.get(e[0].toLowerCase()),n+e[0].length):-1},q:dv,Q:Tv,s:Av,S:_v,u:ov,U:sv,V:uv,w:av,W:cv,x:function(t,e,n){return A(t,r,e,n)},X:function(t,e,n){return A(t,a,e,n)},y:fv,Y:lv,Z:hv,"%":wv};function w(u,c){return function(t){var e,n,i,r=[],a=-1,o=0,s=u.length;for(t instanceof Date||(t=new Date(+t));++a<s;)37===u.charCodeAt(a)&&(r.push(u.slice(o,a)),null!=(n=Kp[e=u.charAt(++a)])?e=u.charAt(++a):n="e"===e?" ":"0",(i=c[e])&&(e=i(t,n)),r.push(e),o=a+1);return r.push(u.slice(o,a)),r.join("")}}function T(r,a){return function(t){var e,n,i=qp(1900,void 0,1);if(A(i,r,t+="",0)!=t.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(!a||"Z"in i||(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||53<i.V)return null;"w"in i||(i.w=1),"Z"in i?(e=4<(n=(e=Up(qp(i.y,0,1))).getUTCDay())||0===n?wp.ceil(e):wp(e),e=xp.offset(e,7*(i.V-1)),i.y=e.getUTCFullYear(),i.m=e.getUTCMonth(),i.d=e.getUTCDate()+(i.w+6)%7):(e=4<(n=(e=Vp(qp(i.y,0,1))).getDay())||0===n?Vg.ceil(e):Vg(e),e=Yg.offset(e,7*(i.V-1)),i.y=e.getFullYear(),i.m=e.getMonth(),i.d=e.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),n="Z"in i?Up(qp(i.y,0,1)).getUTCDay():Vp(qp(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(n+5)%7:i.w+7*i.U-(n+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Up(i)):Vp(i)}}function A(t,e,n,i){for(var r,a,o=0,s=e.length,u=n.length;o<s;){if(u<=i)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(a=b[r in Kp?e.charAt(o++):r])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return _.x=w(r,_),_.X=w(a,_),_.c=w(i,_),m.x=w(r,m),m.X=w(a,m),m.c=w(i,m),{format:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=T(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",m);return e.toString=function(){return t},e},utcParse:function(t){var e=T(t+="",!0);return e.toString=function(){return t},e}}}var Zp,Kp={"-":"",_:" ",0:"0"},Jp=/^\s*\d+/,Qp=/^%/,tv=/[\\^$*+?|[\]().{}]/g;function ev(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",t=r.length;return i+(t<n?new Array(n-t+1).join(e)+r:r)}function nv(t){return t.replace(tv,"\\$&")}function iv(t){return new RegExp("^(?:"+t.map(nv).join("|")+")","i")}function rv(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function av(t,e,n){e=Jp.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function ov(t,e,n){e=Jp.exec(e.slice(n,n+1));return e?(t.u=+e[0],n+e[0].length):-1}function sv(t,e,n){e=Jp.exec(e.slice(n,n+2));return e?(t.U=+e[0],n+e[0].length):-1}function uv(t,e,n){e=Jp.exec(e.slice(n,n+2));return e?(t.V=+e[0],n+e[0].length):-1}function cv(t,e,n){e=Jp.exec(e.slice(n,n+2));return e?(t.W=+e[0],n+e[0].length):-1}function lv(t,e,n){e=Jp.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function fv(t,e,n){e=Jp.exec(e.slice(n,n+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function hv(t,e,n){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function dv(t,e,n){e=Jp.exec(e.slice(n,n+1));return e?(t.q=3*e[0]-3,n+e[0].length):-1}function gv(t,e,n){e=Jp.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function pv(t,e,n){e=Jp.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function vv(t,e,n){e=Jp.exec(e.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function yv(t,e,n){e=Jp.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function xv(t,e,n){e=Jp.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function _v(t,e,n){e=Jp.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function mv(t,e,n){e=Jp.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function bv(t,e,n){e=Jp.exec(e.slice(n,n+6));return e?(t.L=Math.floor(e[0]/1e3),n+e[0].length):-1}function wv(t,e,n){e=Qp.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function Tv(t,e,n){e=Jp.exec(e.slice(n));return e?(t.Q=+e[0],n+e[0].length):-1}function Av(t,e,n){e=Jp.exec(e.slice(n));return e?(t.s=+e[0],n+e[0].length):-1}function Mv(t,e){return ev(t.getDate(),e,2)}function kv(t,e){return ev(t.getHours(),e,2)}function Sv(t,e){return ev(t.getHours()%12||12,e,2)}function Ev(t,e){return ev(1+Yg.count(cp(t),t),e,3)}function Cv(t,e){return ev(t.getMilliseconds(),e,3)}function Dv(t,e){return Cv(t,e)+"000"}function Rv(t,e){return ev(t.getMonth()+1,e,2)}function Ov(t,e){return ev(t.getMinutes(),e,2)}function Lv(t,e){return ev(t.getSeconds(),e,2)}function Pv(t){t=t.getDay();return 0===t?7:t}function zv(t,e){return ev(Hg.count(cp(t)-1,t),e,2)}function Nv(t){var e=t.getDay();return 4<=e||0===e?Wg(t):Wg.ceil(t)}function Iv(t,e){return t=Nv(t),ev(Wg.count(cp(t),t)+(4===cp(t).getDay()),e,2)}function Fv(t){return t.getDay()}function Bv(t,e){return ev(Vg.count(cp(t)-1,t),e,2)}function Xv(t,e){return ev(t.getFullYear()%100,e,2)}function $v(t,e){return ev((t=Nv(t)).getFullYear()%100,e,2)}function Yv(t,e){return ev(t.getFullYear()%1e4,e,4)}function jv(t,e){var n=t.getDay();return ev((t=4<=n||0===n?Wg(t):Wg.ceil(t)).getFullYear()%1e4,e,4)}function Gv(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+ev(t/60|0,"0",2)+ev(t%60,"0",2)}function Hv(t,e){return ev(t.getUTCDate(),e,2)}function Vv(t,e){return ev(t.getUTCHours(),e,2)}function Uv(t,e){return ev(t.getUTCHours()%12||12,e,2)}function qv(t,e){return ev(1+xp.count(Bp(t),t),e,3)}function Wv(t,e){return ev(t.getUTCMilliseconds(),e,3)}function Zv(t,e){return Wv(t,e)+"000"}function Kv(t,e){return ev(t.getUTCMonth()+1,e,2)}function Jv(t,e){return ev(t.getUTCMinutes(),e,2)}function Qv(t,e){return ev(t.getUTCSeconds(),e,2)}function ty(t){t=t.getUTCDay();return 0===t?7:t}function ey(t,e){return ev(bp.count(Bp(t)-1,t),e,2)}function ny(t){var e=t.getUTCDay();return 4<=e||0===e?Mp(t):Mp.ceil(t)}function iy(t,e){return t=ny(t),ev(Mp.count(Bp(t),t)+(4===Bp(t).getUTCDay()),e,2)}function ry(t){return t.getUTCDay()}function ay(t,e){return ev(wp.count(Bp(t)-1,t),e,2)}function oy(t,e){return ev(t.getUTCFullYear()%100,e,2)}function sy(t,e){return ev((t=ny(t)).getUTCFullYear()%100,e,2)}function uy(t,e){return ev(t.getUTCFullYear()%1e4,e,4)}function cy(t,e){var n=t.getUTCDay();return ev((t=4<=n||0===n?Mp(t):Mp.ceil(t)).getUTCFullYear()%1e4,e,4)}function ly(){return"+0000"}function fy(){return"%"}function hy(t){return+t}function dy(t){return Math.floor(+t/1e3)}function gy(t){return Zp=Wp(t),s.timeFormat=Zp.format,s.timeParse=Zp.parse,s.utcFormat=Zp.utcFormat,s.utcParse=Zp.utcParse,Zp}s.timeFormat=void 0,s.timeParse=void 0,s.utcFormat=void 0,s.utcParse=void 0,gy({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var py="%Y-%m-%dT%H:%M:%S.%LZ";var vy=Date.prototype.toISOString?function(t){return t.toISOString()}:s.utcFormat(py);var yy=+new Date("2000-01-01T00:00:00.000Z")?function(t){return t=new Date(t),isNaN(t)?null:t}:s.utcParse(py);function xy(t){return new Date(t)}function _y(t){return t instanceof Date?+t:+new Date(+t)}function my(n,i,e,r,a,o,s,u,c,l){var f=tg(),h=f.invert,d=f.domain,g=l(".%L"),p=l(":%S"),v=l("%I:%M"),y=l("%I %p"),x=l("%a %d"),_=l("%b %d"),m=l("%B"),b=l("%Y");function w(t){return(c(t)<t?g:u(t)<t?p:s(t)<t?v:o(t)<t?y:r(t)<t?a(t)<t?x:_:e(t)<t?m:b)(t)}return f.invert=function(t){return new Date(h(t))},f.domain=function(t){return arguments.length?d(Array.from(t,_y)):d().map(xy)},f.ticks=function(t){var e=d();return n(e[0],e[e.length-1],null==t?10:t)},f.tickFormat=function(t,e){return null==e?w:l(e)},f.nice=function(t){var e=d();return(t=!t||"function"!=typeof t.range?i(e[0],e[e.length-1],null==t?10:t):t)?d(ig(e,t)):f},f.copy=function(){return Jd(f,my(n,i,e,r,a,o,s,u,c,l))},f}function by(){var e,n,i,r,a,o=0,s=1,u=qd,c=!1;function l(t){return null==t||isNaN(t=+t)?a:u(0===i?.5:(t=(r(t)-e)*i,c?Math.max(0,Math.min(1,t)):t))}function t(n){return function(t){var e;return arguments.length?([e,t]=t,u=n(e,t),l):[u(0),u(1)]}}return l.domain=function(t){return arguments.length?([o,s]=t,e=r(o=+o),n=r(s=+s),i=e===n?0:1/(n-e),l):[o,s]},l.clamp=function(t){return arguments.length?(c=!!t,l):c},l.interpolator=function(t){return arguments.length?(u=t,l):u},l.range=t(oi),l.rangeRound=t(si),l.unknown=function(t){return arguments.length?(a=t,l):a},function(t){return e=(r=t)(o),n=t(s),i=e===n?0:1/(n-e),l}}function wy(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Ty(){var t=yg(by());return t.copy=function(){return wy(t,Ty()).exponent(t.exponent())},Yd.apply(t,arguments)}function Ay(){var e,n,i,r,a,o,s,u=0,c=.5,l=1,f=1,h=qd,d=!1;function g(t){return isNaN(t=+t)?s:(t=.5+((t=+o(t))-n)*(f*t<f*n?r:a),h(d?Math.max(0,Math.min(1,t)):t))}function t(i){return function(t){var e,n;return arguments.length?([e,n,t]=t,h=ki(i,[e,n,t]),g):[h(0),h(.5),h(1)]}}return g.domain=function(t){return arguments.length?([u,c,l]=t,e=o(u=+u),n=o(c=+c),i=o(l=+l),r=e===n?0:.5/(n-e),a=n===i?0:.5/(i-n),f=n<e?-1:1,g):[u,c,l]},g.clamp=function(t){return arguments.length?(d=!!t,g):d},g.interpolator=function(t){return arguments.length?(h=t,g):h},g.range=t(oi),g.rangeRound=t(si),g.unknown=function(t){return arguments.length?(s=t,g):s},function(t){return e=(o=t)(u),n=t(c),i=t(l),r=e===n?0:.5/(n-e),a=n===i?0:.5/(i-n),f=n<e?-1:1,g}}function My(){var t=yg(Ay());return t.copy=function(){return wy(t,My()).exponent(t.exponent())},Yd.apply(t,arguments)}function ky(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}var Sy=ky("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ey=ky("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Cy=ky("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Dy=ky("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ry=ky("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Oy=ky("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Ly=ky("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Py=ky("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),zy=ky("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Ny=ky("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Iy=t=>Wn(t[t.length-1]),Fy=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ky),By=Iy(Fy),Xy=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ky),$y=Iy(Xy),Yy=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ky),jy=Iy(Yy),Gy=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ky),Hy=Iy(Gy),Vy=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ky),Uy=Iy(Vy),qy=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ky),Wy=Iy(qy),Zy=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ky),Ky=Iy(Zy),Jy=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ky),Qy=Iy(Jy),tx=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ky),ex=Iy(tx),nx=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ky),ix=Iy(nx),rx=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ky),ax=Iy(rx),ox=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ky),sx=Iy(ox),ux=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ky),cx=Iy(ux),lx=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ky),fx=Iy(lx),hx=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ky),dx=Iy(hx),gx=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ky),px=Iy(gx),vx=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ky),yx=Iy(vx),xx=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ky),_x=Iy(xx),mx=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ky),bx=Iy(mx),wx=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ky),Tx=Iy(wx),Ax=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ky),Mx=Iy(Ax),kx=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ky),Sx=Iy(kx),Ex=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ky),Cx=Iy(Ex),Dx=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ky),Rx=Iy(Dx),Ox=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ky),Lx=Iy(Ox),Px=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ky),zx=Iy(Px),Nx=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ky),Ix=Iy(Nx);var Fx=Mi(In(300,.5,0),In(-240,.5,1)),Bx=Mi(In(-100,.75,.35),In(80,1.5,.8)),t=Mi(In(260,.75,.35),In(80,1.5,.8)),Xx=In();var $x=Qe(),Yx=Math.PI/3,jx=2*Math.PI/3;function Gx(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}Ne=Gx(ky("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Fe=Gx(ky("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ie=Gx(ky("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),xr=Gx(ky("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Hx(t){return function(){return t}}const Vx=Math.abs,Ux=Math.atan2,qx=Math.cos,Wx=Math.max,Zx=Math.min,Kx=Math.sin,Jx=Math.sqrt,Qx=1e-12,t_=Math.PI,e_=t_/2,n_=2*t_;function i_(t){return 1<=t?e_:t<=-1?-e_:Math.asin(t)}function r_(t){return t.innerRadius}function a_(t){return t.outerRadius}function o_(t){return t.startAngle}function s_(t){return t.endAngle}function u_(t){return t&&t.padAngle}function c_(t,e,n,i,r,a,o){var s=t-n,u=e-i,c=(o?a:-a)/Jx(s*s+u*u),l=c*u,f=-c*s,h=t+l,d=e+f,o=n+l,u=i+f,c=(h+o)/2,s=(d+u)/2,t=o-h,e=u-d,n=t*t+e*e,i=r-a,a=h*u-o*d,h=(e<0?-1:1)*Jx(Wx(0,i*i*n-a*a)),u=(a*e-t*h)/n,o=(-a*t-e*h)/n,d=(a*e+t*h)/n,e=(-a*t+e*h)/n,h=u-c,n=o-s,c=d-c,s=e-s;return c*c+s*s<h*h+n*n&&(u=d,o=e),{cx:u,cy:o,x01:-l,y01:-f,x11:u*(r/i-1),y11:o*(r/i-1)}}var l_=Array.prototype.slice;function f_(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function h_(t){this._context=t}function d_(t){return new h_(t)}function g_(t){return t[0]}function p_(t){return t[1]}function v_(o,s){var u=Hx(!0),c=null,l=d_,f=null;function e(t){var e,n,i,r=(t=f_(t)).length,a=!1;for(null==c&&(f=l(i=Fa())),e=0;e<=r;++e)!(e<r&&u(n=t[e],e,t))===a&&((a=!a)?f.lineStart():f.lineEnd()),a&&f.point(+o(n,e,t),+s(n,e,t));if(i)return f=null,i+""||null}return o="function"==typeof o?o:void 0===o?g_:Hx(o),s="function"==typeof s?s:void 0===s?p_:Hx(s),e.x=function(t){return arguments.length?(o="function"==typeof t?t:Hx(+t),e):o},e.y=function(t){return arguments.length?(s="function"==typeof t?t:Hx(+t),e):s},e.defined=function(t){return arguments.length?(u="function"==typeof t?t:Hx(!!t),e):u},e.curve=function(t){return arguments.length?(l=t,null!=c&&(f=l(c)),e):l},e.context=function(t){return arguments.length?(null==t?c=f=null:f=l(c=t),e):c},e}function y_(l,f,h){var d=null,g=Hx(!0),p=null,v=d_,y=null;function e(t){var e,n,i,r,a,o=(t=f_(t)).length,s=!1,u=new Array(o),c=new Array(o);for(null==p&&(y=v(a=Fa())),e=0;e<=o;++e){if(!(e<o&&g(r=t[e],e,t))===s)if(s=!s)n=e,y.areaStart(),y.lineStart();else{for(y.lineEnd(),y.lineStart(),i=e-1;n<=i;--i)y.point(u[i],c[i]);y.lineEnd(),y.areaEnd()}s&&(u[e]=+l(r,e,t),c[e]=+f(r,e,t),y.point(d?+d(r,e,t):u[e],h?+h(r,e,t):c[e]))}if(a)return y=null,a+""||null}function t(){return v_().defined(g).curve(v).context(p)}return l="function"==typeof l?l:void 0===l?g_:Hx(+l),f="function"==typeof f?f:Hx(void 0===f?0:+f),h="function"==typeof h?h:void 0===h?p_:Hx(+h),e.x=function(t){return arguments.length?(l="function"==typeof t?t:Hx(+t),d=null,e):l},e.x0=function(t){return arguments.length?(l="function"==typeof t?t:Hx(+t),e):l},e.x1=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:Hx(+t),e):d},e.y=function(t){return arguments.length?(f="function"==typeof t?t:Hx(+t),h=null,e):f},e.y0=function(t){return arguments.length?(f="function"==typeof t?t:Hx(+t),e):f},e.y1=function(t){return arguments.length?(h=null==t?null:"function"==typeof t?t:Hx(+t),e):h},e.lineX0=e.lineY0=function(){return t().x(l).y(f)},e.lineY1=function(){return t().x(l).y(h)},e.lineX1=function(){return t().x(d).y(f)},e.defined=function(t){return arguments.length?(g="function"==typeof t?t:Hx(!!t),e):g},e.curve=function(t){return arguments.length?(v=t,null!=p&&(y=v(p)),e):v},e.context=function(t){return arguments.length?(null==t?p=y=null:y=v(p=t),e):p},e}function x_(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function __(t){return t}h_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var m_=w_(d_);function b_(t){this._curve=t}function w_(e){function t(t){return new b_(e(t))}return t._curve=e,t}function T_(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(w_(t)):e()._curve},t}function A_(){return T_(v_().curve(m_))}function M_(){var t=y_().curve(m_),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return T_(n())},delete t.lineX0,t.lineEndAngle=function(){return T_(i())},delete t.lineX1,t.lineInnerRadius=function(){return T_(r())},delete t.lineY0,t.lineOuterRadius=function(){return T_(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(w_(t)):e()._curve},t}function k_(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}b_.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class S_{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class E_{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){var n,i,r;t=+t,e=+e,0==this._point++?(this._x0=t,this._y0=e):(n=k_(this._x0,this._y0),i=k_(this._x0,this._y0=(this._y0+e)/2),r=k_(t,this._y0),e=k_(t,e),this._context.moveTo(...n),this._context.bezierCurveTo(...i,...r,...e))}}function C_(t){return new S_(t,!0)}function D_(t){return new S_(t,!1)}function R_(t){return new E_(t)}function O_(t){return t.source}function L_(t){return t.target}function P_(r){let a=O_,o=L_,s=g_,u=p_,c=null,l=null;function e(){let t;const e=l_.call(arguments);var n=a.apply(this,e),i=o.apply(this,e);if(null==c&&(l=r(t=Fa())),l.lineStart(),e[0]=n,l.point(+s.apply(this,e),+u.apply(this,e)),e[0]=i,l.point(+s.apply(this,e),+u.apply(this,e)),l.lineEnd(),t)return l=null,t+""||null}return e.source=function(t){return arguments.length?(a=t,e):a},e.target=function(t){return arguments.length?(o=t,e):o},e.x=function(t){return arguments.length?(s="function"==typeof t?t:Hx(+t),e):s},e.y=function(t){return arguments.length?(u="function"==typeof t?t:Hx(+t),e):u},e.context=function(t){return arguments.length?(null==t?c=l=null:l=r(c=t),e):c},e}const z_=Jx(3);var $r={draw(t,e){var n=.59436*Jx(e+Zx(e/28,.75)),i=n/2,e=i*z_;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-e,-i),t.lineTo(e,i),t.moveTo(-e,i),t.lineTo(e,-i)}},N_={draw(t,e){e=Jx(e/t_);t.moveTo(e,0),t.arc(0,0,e,0,n_)}},ka={draw(t,e){e=Jx(e/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}};const I_=Jx(1/3),F_=2*I_;so={draw(t,e){var n=Jx(e/F_),e=n*I_;t.moveTo(0,-n),t.lineTo(e,0),t.lineTo(0,n),t.lineTo(-e,0),t.closePath()}},jo={draw(t,e){e=.62625*Jx(e);t.moveTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.lineTo(-e,0),t.closePath()}},Ko={draw(t,e){e=.87559*Jx(e-Zx(e/7,2));t.moveTo(-e,0),t.lineTo(e,0),t.moveTo(0,e),t.lineTo(0,-e)}},Ms={draw(t,e){var n=Jx(e),e=-n/2;t.rect(e,e,n,n)}},vd={draw(t,e){e=.4431*Jx(e);t.moveTo(e,e),t.lineTo(e,-e),t.lineTo(-e,-e),t.lineTo(-e,e),t.closePath()}};wd=Kx(t_/10)/Kx(7*t_/10);const B_=Kx(n_/10)*wd,X_=-qx(n_/10)*wd;Og={draw(e,t){var n=Jx(.8908130915292852*t),i=B_*n,r=X_*n;e.moveTo(0,-n),e.lineTo(i,r);for(let t=1;t<5;++t){var a=n_*t/5,o=qx(a),a=Kx(a);e.lineTo(a*n,-o*n),e.lineTo(o*i-a*r,a*i+o*r)}e.closePath()}};const $_=Jx(3);zg={draw(t,e){e=-Jx(e/(3*$_));t.moveTo(0,2*e),t.lineTo(-$_*e,-e),t.lineTo($_*e,-e),t.closePath()}};const Y_=Jx(3);Fg={draw(t,e){var n=.6824*Jx(e),i=n/2,e=n*Y_/2;t.moveTo(0,-n),t.lineTo(e,i),t.lineTo(-e,i),t.closePath()}};const j_=-.5,G_=Jx(3)/2,H_=1/Jx(12),V_=3*(H_/2+1);$g={draw(t,e){var n=Jx(e/V_),i=n/2,r=n*H_,a=i,o=n*H_+n,e=-a,n=o;t.moveTo(i,r),t.lineTo(a,o),t.lineTo(e,n),t.lineTo(j_*i-G_*r,G_*i+j_*r),t.lineTo(j_*a-G_*o,G_*a+j_*o),t.lineTo(j_*e-G_*n,G_*e+j_*n),t.lineTo(j_*i+G_*r,j_*r-G_*i),t.lineTo(j_*a+G_*o,j_*o-G_*a),t.lineTo(j_*e+G_*n,j_*n-G_*e),t.closePath()}},ap={draw(t,e){e=.6189*Jx(e-Zx(e/6,1.7));t.moveTo(-e,-e),t.lineTo(e,e),t.moveTo(-e,e),t.lineTo(e,-e)}},up=[N_,ka,so,Ms,Og,zg,$g],fp=[N_,Ko,ap,Fg,$r,vd,jo];function U_(){}function q_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function W_(t){this._context=t}function Z_(t){this._context=t}function K_(t){this._context=t}function J_(t,e){this._basis=new W_(t),this._beta=e}W_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:q_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:q_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Z_.prototype={areaStart:U_,areaEnd:U_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:q_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},K_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:q_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},J_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(0<n)for(var i,r=t[0],a=e[0],o=t[n]-r,s=e[n]-a,u=-1;++u<=n;)this._basis.point(this._beta*t[u]+(1-this._beta)*(r+(i=u/n)*o),this._beta*e[u]+(1-this._beta)*(a+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};gp=function e(n){function t(t){return 1===n?new W_(t):new J_(t,n)}return t.beta=function(t){return e(+t)},t}(.85);function Q_(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function tm(t,e){this._context=t,this._k=(1-e)/6}tm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Q_(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Q_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};yp=function e(n){function t(t){return new tm(t,n)}return t.tension=function(t){return e(+t)},t}(0);function em(t,e){this._context=t,this._k=(1-e)/6}em.prototype={areaStart:U_,areaEnd:U_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Q_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};zp=function e(n){function t(t){return new em(t,n)}return t.tension=function(t){return e(+t)},t}(0);function nm(t,e){this._context=t,this._k=(1-e)/6}nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Q_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};Fp=function e(n){function t(t){return new nm(t,n)}return t.tension=function(t){return e(+t)},t}(0);function im(t,e,n){var i,r,a=t._x1,o=t._y1,s=t._x2,u=t._y2;t._l01_a>Qx&&(i=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,r=3*t._l01_a*(t._l01_a+t._l12_a),a=(a*i-t._x0*t._l12_2a+t._x2*t._l01_2a)/r,o=(o*i-t._y0*t._l12_2a+t._y2*t._l01_2a)/r),t._l23_a>Qx&&(i=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,r=3*t._l23_a*(t._l23_a+t._l12_a),s=(s*i+t._x1*t._l23_2a-e*t._l12_2a)/r,u=(u*i+t._y1*t._l23_2a-n*t._l12_2a)/r),t._context.bezierCurveTo(a,o,s,u,t._x2,t._y2)}function rm(t,e){this._context=t,this._alpha=e}rm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n,i;switch(t=+t,e=+e,this._point&&(n=this._x2-t,i=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:im(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};py=function e(n){function t(t){return n?new rm(t,n):new tm(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function am(t,e){this._context=t,this._alpha=e}am.prototype={areaStart:U_,areaEnd:U_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){var n,i;switch(t=+t,e=+e,this._point&&(n=this._x2-t,i=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))),this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:im(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};Iy=function e(n){function t(t){return n?new am(t,n):new em(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function om(t,e){this._context=t,this._alpha=e}om.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n,i;switch(t=+t,e=+e,this._point&&(n=this._x2-t,i=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))),this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:im(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};wd=function e(n){function t(t){return n?new om(t,n):new nm(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function sm(t){this._context=t}function um(t){return t<0?-1:1}function cm(t,e,n){var i=t._x1-t._x0,r=e-t._x1,e=(t._y1-t._y0)/(i||r<0&&-0),t=(n-t._y1)/(r||i<0&&-0),r=(e*r+t*i)/(i+r);return(um(e)+um(t))*Math.min(Math.abs(e),Math.abs(t),.5*Math.abs(r))||0}function lm(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function fm(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function hm(t){this._context=t}function dm(t){this._context=new gm(t)}function gm(t){this._context=t}function pm(t){this._context=t}function vm(t){var e,n,i=t.length-1,r=new Array(i),a=new Array(i),o=new Array(i);for(a[r[0]=0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,a[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/a[i-1],e=i-2;0<=e;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function ym(t,e){this._context=t,this._t=e}function xm(t,e){if(1<(r=t.length))for(var n,i,r,a=1,o=t[e[0]],s=o.length;a<r;++a)for(i=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function _m(t){for(var e=t.length,n=new Array(e);0<=--e;)n[e]=e;return n}function mm(t,e){return t[e]}function bm(t){const e=[];return e.key=t,e}function wm(t){var n=t.map(Tm);return _m(t).sort(function(t,e){return n[t]-n[e]})}function Tm(t){for(var e,n=-1,i=0,r=t.length,a=-1/0;++n<r;)(e=+t[n][1])>a&&(a=e,i=n);return i}function Am(t){var n=t.map(Mm);return _m(t).sort(function(t,e){return n[t]-n[e]})}function Mm(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}sm.prototype={areaStart:U_,areaEnd:U_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},hm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fm(this,this._t0,lm(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,fm(this,lm(this,n=cm(this,t,e)),n);break;default:fm(this,this._t0,n=cm(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(dm.prototype=Object.create(hm.prototype)).point=function(t,e){hm.prototype.point.call(this,e,t)},gm.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}},pm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=vm(t),r=vm(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:var n;this._t<=0?(this._context.lineTo(this._x,e),this._context.lineTo(t,e)):(n=this._x*(1-this._t)+t*this._t,this._context.lineTo(n,this._y),this._context.lineTo(n,e))}this._x=t,this._y=e}};var km=t=>()=>t;function Sm(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Em(t,e,n){this.k=t,this.x=e,this.y=n}Em.prototype={constructor:Em,scale:function(t){return 1===t?this:new Em(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Em(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Cm=new Em(1,0,0);function Dm(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Cm;return t.__zoom}function Rm(t){t.stopImmediatePropagation()}function Om(t){t.preventDefault(),t.stopImmediatePropagation()}function Lm(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Pm(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function zm(){return this.__zoom||Cm}function Nm(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Im(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fm(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],n=t.invertY(e[1][1])-n[1][1];return t.translate(i<r?(i+r)/2:Math.min(0,i)||Math.max(0,r),a<n?(a+n)/2:Math.min(0,a)||Math.max(0,n))}Dm.prototype=Em.prototype,s.Adder=S,s.Delaunay=class r{static from(t,e=function(t){return t[0]},n=function(t){return t[1]},i){return new r("length"in t?function(e,n,i,r){const a=e.length,o=new Float64Array(2*a);for(let t=0;t<a;++t){var s=e[t];o[2*t]=n.call(r,s,t,e),o[2*t+1]=i.call(r,s,t,e)}return o}(t,e,n,i):Float64Array.from(function*(t,e,n,i){let r=0;for(const a of t)yield e.call(i,a,r,t),yield n.call(i,a,r,t),++r}(t,e,n,i)))}constructor(t){this._delaunator=new Ao(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&2<t.hull.length&&function(t){var{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){var i=2*e[t],r=2*e[t+1],a=2*e[t+2];if(1e-10<(n[a]-n[i])*(n[1+r]-n[1+i])-(n[r]-n[i])*(n[1+a]-n[1+i]))return}return 1}(t)){this.collinear=Int32Array.from({length:n.length/2},(t,e)=>e).sort((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]);var e=this.collinear[0],i=this.collinear[this.collinear.length-1],i=[n[2*e],n[2*e+1],n[2*i],n[2*i+1]],r=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let t=0,e=n.length/2;t<e;++t)a=n[2*t],o=n[2*t+1],s=r,s=[a+Math.sin(a+o)*s,o+Math.cos(a-o)*s],n[2*t]=s[0],n[2*t+1]=s[1];this._delaunator=new Ao(n)}else delete this.collinear;var a,o,s,u=this.halfedges=this._delaunator.halfedges,c=this.hull=this._delaunator.hull,l=this.triangles=this._delaunator.triangles;const f=this.inedges.fill(-1),h=this._hullIndex.fill(-1);for(let t=0,e=u.length;t<e;++t){var d=l[t%3==2?t-2:t+1];-1!==u[t]&&-1!==f[d]||(f[d]=t)}for(let t=0,e=c.length;t<e;++t)h[c[t]]=t;c.length<=2&&0<c.length&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=c[0],f[c[0]]=1,2===c.length&&(f[c[1]]=0,this.triangles[1]=c[1],this.triangles[2]=c[1]))}voronoi(t){return new Do(this,t)}*neighbors(n){const{inedges:t,hull:i,_hullIndex:r,halfedges:a,triangles:o,collinear:e}=this;if(e){var s=e.indexOf(n);return 0<s&&(yield e[s-1]),void(s<e.length-1&&(yield e[s+1]))}var u=t[n];if(-1!==u){let t=u,e;do{if(yield e=o[t],t=t%3==2?t-2:t+1,o[t]!==n)return;if(t=a[t],-1===t){var c=i[(r[n]+1)%i.length];return void(c!==e&&(yield c))}}while(t!==u)}}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;var i=n;let r;for(;0<=(r=this._step(n,t,e))&&r!==n&&r!==i;)n=r;return r}_step(t,e,n){var{inedges:i,hull:r,_hullIndex:a,halfedges:o,triangles:s,points:u}=this;if(-1===i[t]||!u.length)return(t+1)%(u.length>>1);let c=t,l=Oo(e-u[2*t],2)+Oo(n-u[2*t+1],2);var f=i[t];let h=f;do{var d=s[h],g=Oo(e-u[2*d],2)+Oo(n-u[2*d+1],2);if(g<l&&(l=g,c=d),h=h%3==2?h-2:h+1,s[h]!==t)break;if(h=o[h],-1===h){if(h=r[(a[t]+1)%r.length],h!==d&&Oo(e-u[2*h],2)+Oo(n-u[2*h+1],2)<l)return h;break}}while(h!==f);return c}render(n){const t=null==n?n=new Eo:void 0;var{points:i,halfedges:r,triangles:a}=this;for(let t=0,e=r.length;t<e;++t){var o,s=r[t];s<t||(o=2*a[t],s=2*a[s],n.moveTo(i[o],i[1+o]),n.lineTo(i[s],i[1+s]))}return this.renderHull(n),t&&t.value()}renderPoints(n,i){void 0!==i||n&&"function"==typeof n.moveTo||(i=n,n=null),i=null==i?2:+i;const t=null==n?n=new Eo:void 0;var{points:r}=this;for(let t=0,e=r.length;t<e;t+=2){var a=r[t],o=r[t+1];n.moveTo(a+i,o),n.arc(a,o,i,0,Ro)}return t&&t.value()}renderHull(e){const t=null==e?e=new Eo:void 0;var{hull:n,points:i}=this;const r=2*n[0],a=n.length;e.moveTo(i[r],i[r+1]);for(let t=1;t<a;++t){const r=2*n[t];e.lineTo(i[r],i[1+r])}return e.closePath(),t&&t.value()}hullPolygon(){const t=new Co;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new Eo:void 0;var{points:i,triangles:r}=this,a=2*r[t*=3],o=2*r[t+1],t=2*r[t+2];return e.moveTo(i[a],i[1+a]),e.lineTo(i[o],i[1+o]),e.lineTo(i[t],i[1+t]),e.closePath(),n&&n.value()}*trianglePolygons(){var{triangles:n}=this;for(let t=0,e=n.length/3;t<e;++t)yield this.trianglePolygon(t)}trianglePolygon(t){const e=new Co;return this.renderTriangle(t,e),e.value()}},s.FormatSpecifier=js,s.InternMap=g,s.InternSet=p,s.Node=Nh,s.Voronoi=Do,s.ZoomTransform=Em,s.active=function(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>Zi&&n.name===e)return new vr([[t]],Zr,e,+i);return null},s.arc=function(){var E=r_,C=a_,D=Hx(0),R=null,O=o_,L=s_,P=u_,z=null;function e(){var t,e,n,i,r,a,o,s,u,c,l,f,h,d,g,p,v,y,x,_,m,b,w=+E.apply(this,arguments),T=+C.apply(this,arguments),A=O.apply(this,arguments)-e_,M=L.apply(this,arguments)-e_,k=Vx(M-A),S=A<M;if(z=z||(t=Fa()),T<w&&(l=T,T=w,w=l),T>Qx?k>n_-Qx?(z.moveTo(T*qx(A),T*Kx(A)),z.arc(0,0,T,A,M,!S),w>Qx&&(z.moveTo(w*qx(M),w*Kx(M)),z.arc(0,0,w,M,A,S))):(i=e=A,r=n=M,o=a=k,f=(h=P.apply(this,arguments)/2)>Qx&&(R?+R.apply(this,arguments):Jx(w*w+T*T)),b=m=s=Zx(Vx(T-w)/2,+D.apply(this,arguments)),f>Qx&&(d=i_(f/w*Kx(h)),x=i_(f/T*Kx(h)),(a-=2*d)>Qx?(i+=d*=S?1:-1,r-=d):(a=0,i=r=(A+M)/2),(o-=2*x)>Qx?(e+=x*=S?1:-1,n-=x):(o=0,e=n=(A+M)/2)),l=T*qx(e),f=T*Kx(e),h=w*qx(r),d=w*Kx(r),s>Qx&&(g=T*qx(n),p=T*Kx(n),v=w*qx(i),y=w*Kx(i),k<t_&&(_=function(t,e,n,i,r,a,o,s){var u=n-t,n=i-e,i=o-r;if(!((s=(o=s-a)*u-i*n)*s<Qx))return[t+(s=(i*(e-a)-o*(t-r))/s)*u,e+s*n]}(l,f,v,y,g,p,h,d))&&(x=l-_[0],A=f-_[1],M=g-_[0],k=p-_[1],k=1/Kx((1<(k=(x*M+A*k)/(Jx(x*x+A*A)*Jx(M*M+k*k)))?0:k<-1?t_:Math.acos(k))/2),_=Jx(_[0]*_[0]+_[1]*_[1]),m=Zx(s,(w-_)/(k-1)),b=Zx(s,(T-_)/(1+k)))),o>Qx?b>Qx?(u=c_(v,y,l,f,T,b,S),c=c_(g,p,h,d,T,b,S),z.moveTo(u.cx+u.x01,u.cy+u.y01),b<s?z.arc(u.cx,u.cy,b,Ux(u.y01,u.x01),Ux(c.y01,c.x01),!S):(z.arc(u.cx,u.cy,b,Ux(u.y01,u.x01),Ux(u.y11,u.x11),!S),z.arc(0,0,T,Ux(u.cy+u.y11,u.cx+u.x11),Ux(c.cy+c.y11,c.cx+c.x11),!S),z.arc(c.cx,c.cy,b,Ux(c.y11,c.x11),Ux(c.y01,c.x01),!S))):(z.moveTo(l,f),z.arc(0,0,T,e,n,!S)):z.moveTo(l,f),w>Qx&&a>Qx?m>Qx?(u=c_(h,d,g,p,w,-m,S),c=c_(l,f,v,y,w,-m,S),z.lineTo(u.cx+u.x01,u.cy+u.y01),m<s?z.arc(u.cx,u.cy,m,Ux(u.y01,u.x01),Ux(c.y01,c.x01),!S):(z.arc(u.cx,u.cy,m,Ux(u.y01,u.x01),Ux(u.y11,u.x11),!S),z.arc(0,0,w,Ux(u.cy+u.y11,u.cx+u.x11),Ux(c.cy+c.y11,c.cx+c.x11),S),z.arc(c.cx,c.cy,m,Ux(c.y11,c.x11),Ux(c.y01,c.x01),!S))):z.arc(0,0,w,r,i,S):z.lineTo(h,d)):z.moveTo(0,0),z.closePath(),t)return z=null,t+""||null}return e.centroid=function(){var t=(+E.apply(this,arguments)+ +C.apply(this,arguments))/2,e=(+O.apply(this,arguments)+ +L.apply(this,arguments))/2-t_/2;return[qx(e)*t,Kx(e)*t]},e.innerRadius=function(t){return arguments.length?(E="function"==typeof t?t:Hx(+t),e):E},e.outerRadius=function(t){return arguments.length?(C="function"==typeof t?t:Hx(+t),e):C},e.cornerRadius=function(t){return arguments.length?(D="function"==typeof t?t:Hx(+t),e):D},e.padRadius=function(t){return arguments.length?(R=null==t?null:"function"==typeof t?t:Hx(+t),e):R},e.startAngle=function(t){return arguments.length?(O="function"==typeof t?t:Hx(+t),e):O},e.endAngle=function(t){return arguments.length?(L="function"==typeof t?t:Hx(+t),e):L},e.padAngle=function(t){return arguments.length?(P="function"==typeof t?t:Hx(+t),e):P},e.context=function(t){return arguments.length?(z=null==t?null:t,e):z},e},s.area=y_,s.areaRadial=M_,s.ascending=u,s.autoType=function(t){for(var e in t){var n,i,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;as&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;t[e]=r}return t},s.axisBottom=function(t){return bt(dt,t)},s.axisLeft=function(t){return bt(gt,t)},s.axisRight=function(t){return bt(ht,t)},s.axisTop=function(t){return bt(ft,t)},s.bin=H,s.bisect=v,s.bisectCenter=i,s.bisectLeft=n,s.bisectRight=e,s.bisector=c,s.blob=function(t,e){return fetch(t,e).then(os)},s.brush=function(){return wa(fa)},s.brushSelection=function(t){return(t=t.__brush)?t.dim.output(t.selection):null},s.brushX=function(){return wa(ca)},s.brushY=function(){return wa(la)},s.buffer=function(t,e){return fetch(t,e).then(ss)},s.chord=function(){return Oa(!1,!1)},s.chordDirected=function(){return Oa(!0,!1)},s.chordTranspose=function(){return Oa(!1,!0)},s.cluster=function(){var s=Sh,u=1,c=1,l=!1;function e(e){var i,r=0;e.eachAfter(function(t){var e,n=t.children;n?(t.x=(e=n).reduce(Eh,0)/e.length,t.y=1+n.reduce(Ch,0)):(t.x=i?r+=s(t,i):0,t.y=0,i=t)});var t=function(t){for(var e;e=t.children;)t=e[0];return t}(e),n=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(e),a=t.x-s(t,n)/2,o=n.x+s(n,t)/2;return e.eachAfter(l?function(t){t.x=(t.x-e.x)*u,t.y=(e.y-t.y)*c}:function(t){t.x=(t.x-a)/(o-a)*u,t.y=(1-(e.y?t.y/e.y:1))*c})}return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(l=!1,u=+t[0],c=+t[1],e):l?null:[u,c]},e.nodeSize=function(t){return arguments.length?(l=!0,u=+t[0],c=+t[1],e):l?[u,c]:null},e},s.color=We,s.contourDensity=function(){var s=ro,u=ao,c=oo,n=960,i=500,r=20,l=2,f=3*r,h=n+2*f>>l,d=i+2*f>>l,g=Ka(20);function e(t){var a=new Float32Array(h*d),e=new Float32Array(h*d),o=Math.pow(2,-l);t.forEach(function(t,e,n){var i=(s(t,e,n)+f)*o,r=(u(t,e,n)+f)*o,t=+c(t,e,n);0<=i&&i<h&&0<=r&&r<d&&(e=Math.floor(i),n=Math.floor(r),a[e+n*h]+=(1-(i=i-e-.5))*(1-(r=r-n-.5))*t,a[e+1+n*h]+=i*(1-r)*t,a[e+1+(n+1)*h]+=i*r*t,a[e+(n+1)*h]+=(1-i)*r*t)}),no({width:h,height:d,data:a},{width:h,height:d,data:e},r>>l),io({width:h,height:d,data:e},{width:h,height:d,data:a},r>>l),no({width:h,height:d,data:a},{width:h,height:d,data:e},r>>l),io({width:h,height:d,data:e},{width:h,height:d,data:a},r>>l),no({width:h,height:d,data:a},{width:h,height:d,data:e},r>>l),io({width:h,height:d,data:e},{width:h,height:d,data:a},r>>l);t=g(a);return Array.isArray(t)||(t=Y(0,e=V(a),t),(t=et(0,Math.floor(e/t)*t,t)).shift()),eo().thresholds(t).size([h,d])(a).map(p)}function p(t){return t.value*=Math.pow(2,-2*l),t.coordinates.forEach(a),t}function a(t){t.forEach(o)}function o(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,l)-f,t[1]=t[1]*Math.pow(2,l)-f}function y(){return h=n+2*(f=3*r)>>l,d=i+2*f>>l,e}return e.x=function(t){return arguments.length?(s="function"==typeof t?t:Ka(+t),e):s},e.y=function(t){return arguments.length?(u="function"==typeof t?t:Ka(+t),e):u},e.weight=function(t){return arguments.length?(c="function"==typeof t?t:Ka(+t),e):c},e.size=function(t){if(!arguments.length)return[n,i];var e=+t[0],t=+t[1];if(!(0<=e&&0<=t))throw new Error("invalid size");return n=e,i=t,y()},e.cellSize=function(t){if(!arguments.length)return 1<<l;if(!(1<=(t=+t)))throw new Error("invalid cell size");return l=Math.floor(Math.log(t)/Math.LN2),y()},e.thresholds=function(t){return arguments.length?(g="function"==typeof t?t:Array.isArray(t)?Ka(Wa.call(t)):Ka(t),e):g},e.bandwidth=function(t){if(!arguments.length)return Math.sqrt(r*(r+1));if(!(0<=(t=+t)))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*t*t+1)-1)/2),y()},e},s.contours=eo,s.count=r,s.create=function(t){return ge(Ct(t).call(document.documentElement))},s.creator=Ct,s.cross=function(...n){var e,i="function"==typeof n[n.length-1]&&(e=n.pop(),t=>e(...t));const r=(n=n.map(h)).map(l);var a=n.length-1;const o=new Array(1+a).fill(0),s=[];if(a<0||r.some(f))return s;for(;;){s.push(o.map((t,e)=>n[e][t]));let t=a;for(;++o[t]===r[t];){if(0===t)return i?s.map(i):s;o[t--]=0}}},s.csv=fs,s.csvFormat=Vo,s.csvFormatBody=Uo,s.csvFormatRow=Wo,s.csvFormatRows=qo,s.csvFormatValue=Zo,s.csvParse=Go,s.csvParseRows=Ho,s.cubehelix=In,s.cumsum=function(e,n){var i=0,r=0;return Float64Array.from(e,void 0===n?t=>i+=+t||0:t=>i+=+n(t,r++,e)||0)},s.curveBasis=function(t){return new W_(t)},s.curveBasisClosed=function(t){return new Z_(t)},s.curveBasisOpen=function(t){return new K_(t)},s.curveBumpX=C_,s.curveBumpY=D_,s.curveBundle=gp,s.curveCardinal=yp,s.curveCardinalClosed=zp,s.curveCardinalOpen=Fp,s.curveCatmullRom=py,s.curveCatmullRomClosed=Iy,s.curveCatmullRomOpen=wd,s.curveLinear=d_,s.curveLinearClosed=function(t){return new sm(t)},s.curveMonotoneX=function(t){return new hm(t)},s.curveMonotoneY=function(t){return new dm(t)},s.curveNatural=function(t){return new pm(t)},s.curveStep=function(t){return new ym(t,.5)},s.curveStepAfter=function(t){return new ym(t,1)},s.curveStepBefore=function(t){return new ym(t,0)},s.descending=function(t,e){return null==t||null==e?NaN:e<t?-1:t<e?1:t<=e?0:NaN},s.deviation=d,s.difference=function(t,...e){t=new p(t);for(const n of e)for(const i of n)t.delete(i);return t},s.disjoint=function(t,e){const n=e[Symbol.iterator](),i=new p;for(const o of t){if(i.has(o))return!1;for(var r,a;({value:r,done:a}=n.next())&&!a;){if(Object.is(o,r))return!1;i.add(r)}}return!0},s.dispatch=Tt,s.drag=function(){var i,r,a,o,s=Ee,u=Ce,n=De,e=Re,p={},v=Tt("start","drag","end"),y=0,c=0;function x(t){t.on("mousedown.drag",l).filter(e).on("touchstart.drag",d).on("touchmove.drag",g,me).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(t,e){o||!s.call(this,t,e)||(e=m(this,u.call(this,t,e),t,e,"mouse"))&&(ge(t.view).on("mousemove.drag",f,be).on("mouseup.drag",h,be),Ae(t.view),we(t),a=!1,i=t.clientX,r=t.clientY,e("start",t))}function f(t){var e,n;Te(t),a||(e=t.clientX-i,n=t.clientY-r,a=c<e*e+n*n),p.mouse("drag",t)}function h(t){ge(t.view).on("mousemove.drag mouseup.drag",null),Me(t.view,a),Te(t),p.mouse("end",t)}function d(t,e){if(s.call(this,t,e))for(var n,i=t.changedTouches,r=u.call(this,t,e),a=i.length,o=0;o<a;++o)(n=m(this,r,t,e,i[o].identifier,i[o]))&&(we(t),n("start",t,i[o]))}function g(t){for(var e,n=t.changedTouches,i=n.length,r=0;r<i;++r)(e=p[n[r].identifier])&&(Te(t),e("drag",t,n[r]))}function _(t){var e,n,i=t.changedTouches,r=i.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<r;++e)(n=p[i[e].identifier])&&(we(t),n("end",t,i[e]))}function m(o,s,t,u,c,e){var l,f,h,d=v.copy(),g=_e(e||t,s);if(null!=(h=n.call(o,new Se("beforestart",{sourceEvent:t,target:x,identifier:c,active:y,x:g[0],y:g[1],dx:0,dy:0,dispatch:d}),u)))return l=h.x-g[0]||0,f=h.y-g[1]||0,function t(e,n,i){var r,a=g;switch(e){case"start":p[c]=t,r=y++;break;case"end":delete p[c],--y;case"drag":g=_e(i||n,s),r=y}d.call(e,o,new Se(e,{sourceEvent:n,subject:h,target:x,identifier:c,active:r,x:g[0]+l,y:g[1]+f,dx:g[0]-a[0],dy:g[1]-a[1],dispatch:d}),u)}}return x.filter=function(t){return arguments.length?(s="function"==typeof t?t:ke(!!t),x):s},x.container=function(t){return arguments.length?(u="function"==typeof t?t:ke(t),x):u},x.subject=function(t){return arguments.length?(n="function"==typeof t?t:ke(t),x):n},x.touchable=function(t){return arguments.length?(e="function"==typeof t?t:ke(!!t),x):e},x.on=function(){var t=v.on.apply(v,arguments);return t===v?x:t},x.clickDistance=function(t){return arguments.length?(c=(t=+t)*t,x):Math.sqrt(c)},x},s.dragDisable=Ae,s.dragEnable=Me,s.dsv=function(t,e,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=Yo(t);return cs(e,n).then(function(t){return r.parse(t,i)})},s.dsvFormat=Yo,s.easeBack=Gr,s.easeBackIn=Yr,s.easeBackInOut=Gr,s.easeBackOut=jr,s.easeBounce=Xr,s.easeBounceIn=function(t){return 1-Xr(1-t)},s.easeBounceInOut=function(t){return((t*=2)<=1?1-Xr(1-t):Xr(t-1)+1)/2},s.easeBounceOut=Xr,s.easeCircle=Cr,s.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},s.easeCircleInOut=Cr,s.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},s.easeCubic=mr,s.easeCubicIn=function(t){return t*t*t},s.easeCubicInOut=mr,s.easeCubicOut=function(t){return--t*t*t+1},s.easeElastic=Ur,s.easeElasticIn=Vr,s.easeElasticInOut=qr,s.easeElasticOut=Ur,s.easeExp=Er,s.easeExpIn=function(t){return Sr(1-+t)},s.easeExpInOut=Er,s.easeExpOut=function(t){return 1-Sr(t)},s.easeLinear=t=>+t,s.easePoly=Tr,s.easePolyIn=br,s.easePolyInOut=Tr,s.easePolyOut=wr,s.easeQuad=_r,s.easeQuadIn=function(t){return t*t},s.easeQuadInOut=_r,s.easeQuadOut=function(t){return t*(2-t)},s.easeSin=kr,s.easeSinIn=function(t){return 1==+t?1:1-Math.cos(t*Mr)},s.easeSinInOut=kr,s.easeSinOut=function(t){return Math.sin(t*Mr)},s.every=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(!e(i,++n,t))return!1;return!0},s.extent=y,s.fcumsum=function(e,n){const i=new S;let r=-1;return Float64Array.from(e,void 0===n?t=>i.add(+t||0):t=>i.add(+n(t,++r,e)||0))},s.filter=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let i=-1;for(const r of t)e(r,++i,t)&&n.push(r);return n},s.flatGroup=function(t,...e){return M(A(t,...e),e)},s.flatRollup=function(t,e,...n){return M(E(t,e,...n),n)},s.forceCenter=function(a,o){var s,u=1;function e(){for(var t,e=s.length,n=0,i=0,r=0;r<e;++r)n+=(t=s[r]).x,i+=t.y;for(n=(n/e-a)*u,i=(i/e-o)*u,r=0;r<e;++r)(t=s[r]).x-=n,t.y-=i}return null==a&&(a=0),null==o&&(o=0),e.initialize=function(t){s=t},e.x=function(t){return arguments.length?(a=+t,e):a},e.y=function(t){return arguments.length?(o=+t,e):o},e.strength=function(t){return arguments.length?(u=+t,e):u},e},s.forceCollide=function(i){var a,o,h,d=1,g=1;function e(){for(var t,e,s,u,c,l,f,n=a.length,i=0;i<g;++i)for(e=ws(a,Es,Cs).visitAfter(p),t=0;t<n;++t)s=a[t],l=o[s.index],f=l*l,u=s.x+s.vx,c=s.y+s.vy,e.visit(r);function r(t,e,n,i,r){var a=t.data,o=t.r,t=l+o;if(!a)return u+t<e||i<u-t||c+t<n||r<c-t;a.index>s.index&&((r=(i=u-a.x-a.vx)*i+(n=c-a.y-a.vy)*n)<t*t&&(0===i&&(r+=(i=Ss(h))*i),0===n&&(r+=(n=Ss(h))*n),r=(t-(r=Math.sqrt(r)))/r*d,s.vx+=(i*=r)*(t=(o*=o)/(f+o)),s.vy+=(n*=r)*t,a.vx-=i*(t=1-t),a.vy-=n*t))}}function p(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function n(){if(a){var t,e,n=a.length;for(o=new Array(n),t=0;t<n;++t)e=a[t],o[e.index]=+i(e,t,a)}}return"function"!=typeof i&&(i=ks(null==i?1:+i)),e.initialize=function(t,e){a=t,h=e,n()},e.iterations=function(t){return arguments.length?(g=+t,e):g},e.strength=function(t){return arguments.length?(d=+t,e):d},e.radius=function(t){return arguments.length?(i="function"==typeof t?t:ks(+t),n(),e):i},e},s.forceLink=function(c){var l,f,a,o,h,d,s=Ds,n=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},i=ks(30),g=1;function e(t){for(var e=0,n=c.length;e<g;++e)for(var i,r,a,o,s,u=0;u<n;++u)i=(s=c[u]).source,a=(r=s.target).x+r.vx-i.x-i.vx||Ss(d),o=r.y+r.vy-i.y-i.vy||Ss(d),a*=s=((s=Math.sqrt(a*a+o*o))-f[u])/s*t*l[u],o*=s,r.vx-=a*(s=h[u]),r.vy-=o*s,i.vx+=a*(s=1-s),i.vy+=o*s}function r(){if(a){var t,e=a.length,n=c.length,i=new Map(a.map((t,e)=>[s(t,e,a),t])),r=0;for(o=new Array(e);r<n;++r)(t=c[r]).index=r,"object"!=typeof t.source&&(t.source=Rs(i,t.source)),"object"!=typeof t.target&&(t.target=Rs(i,t.target)),o[t.source.index]=(o[t.source.index]||0)+1,o[t.target.index]=(o[t.target.index]||0)+1;for(r=0,h=new Array(n);r<n;++r)t=c[r],h[r]=o[t.source.index]/(o[t.source.index]+o[t.target.index]);l=new Array(n),u(),f=new Array(n),p()}}function u(){if(a)for(var t=0,e=c.length;t<e;++t)l[t]=+n(c[t],t,c)}function p(){if(a)for(var t=0,e=c.length;t<e;++t)f[t]=+i(c[t],t,c)}return null==c&&(c=[]),e.initialize=function(t,e){a=t,d=e,r()},e.links=function(t){return arguments.length?(c=t,r(),e):c},e.id=function(t){return arguments.length?(s=t,e):s},e.iterations=function(t){return arguments.length?(g=+t,e):g},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:ks(+t),u(),e):n},e.distance=function(t){return arguments.length?(i="function"==typeof t?t:ks(+t),p(),e):i},e},s.forceManyBody=function(){var r,u,c,l,f,i=ks(-30),h=1,d=1/0,g=.81;function e(t){var e,n=r.length,i=ws(r,zs,Ns).visitAfter(a);for(l=t,e=0;e<n;++e)u=r[e],i.visit(o)}function n(){if(r){var t,e,n=r.length;for(f=new Array(n),t=0;t<n;++t)e=r[t],f[e.index]=+i(e,t,r)}}function a(t){var e,n,i,r,a,o=0,s=0;if(t.length){for(i=r=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(o+=e.value,s+=n,i+=n*e.x,r+=n*e.y);t.x=i/s,t.y=r/s}else for(e=t,e.x=e.data.x,e.y=e.data.y;o+=f[e.data.index],e=e.next;);t.value=o}function o(t,e,n,i){if(!t.value)return!0;var r=t.x-u.x,a=t.y-u.y,o=i-e,s=r*r+a*a;if(o*o/g<s)return s<d&&(0===r&&(s+=(r=Ss(c))*r),0===a&&(s+=(a=Ss(c))*a),s<h&&(s=Math.sqrt(h*s)),u.vx+=r*t.value*l/s,u.vy+=a*t.value*l/s),!0;if(!(t.length||d<=s))for(t.data===u&&!t.next||(0===r&&(s+=(r=Ss(c))*r),0===a&&(s+=(a=Ss(c))*a),s<h&&(s=Math.sqrt(h*s)));t.data!==u&&(o=f[t.data.index]*l/s,u.vx+=r*o,u.vy+=a*o),t=t.next;);}return e.initialize=function(t,e){r=t,c=e,n()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:ks(+t),n(),e):i},e.distanceMin=function(t){return arguments.length?(h=t*t,e):Math.sqrt(h)},e.distanceMax=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)},e.theta=function(t){return arguments.length?(g=t*t,e):Math.sqrt(g)},e},s.forceRadial=function(n,s,u){var c,l,f,i=ks(.1);function e(t){for(var e=0,n=c.length;e<n;++e){var i=c[e],r=i.x-s||1e-6,a=i.y-u||1e-6,o=Math.sqrt(r*r+a*a),o=(f[e]-o)*l[e]*t/o;i.vx+=r*o,i.vy+=a*o}}function r(){if(c){var t,e=c.length;for(l=new Array(e),f=new Array(e),t=0;t<e;++t)f[t]=+n(c[t],t,c),l[t]=isNaN(f[t])?0:+i(c[t],t,c)}}return"function"!=typeof n&&(n=ks(+n)),null==s&&(s=0),null==u&&(u=0),e.initialize=function(t){c=t,r()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:ks(+t),r(),e):i},e.radius=function(t){return arguments.length?(n="function"==typeof t?t:ks(+t),r(),e):n},e.x=function(t){return arguments.length?(s=+t,e):s},e.y=function(t){return arguments.length?(u=+t,e):u},e},s.forceSimulation=function(u){var a,o=1,e=.001,s=1-Math.pow(e,1/300),c=0,l=.6,f=new Map,t=$i(r),n=Tt("tick","end"),i=function(){let t=1;return()=>(t=(Os*t+Ls)%Ps)/Ps}();function r(){h(),n.call("tick",a),o<e&&(t.stop(),n.call("end",a))}function h(t){var e,n,i=u.length;void 0===t&&(t=1);for(var r=0;r<t;++r)for(o+=(c-o)*s,f.forEach(function(t){t(o)}),e=0;e<i;++e)null==(n=u[e]).fx?n.x+=n.vx*=l:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=l:(n.y=n.fy,n.vy=0);return a}function d(){for(var t,e,n,i=0,r=u.length;i<r;++i)(n=u[i]).index=i,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),(isNaN(n.x)||isNaN(n.y))&&(t=10*Math.sqrt(.5+i),e=i*Is,n.x=t*Math.cos(e),n.y=t*Math.sin(e)),(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}function g(t){return t.initialize&&t.initialize(u,i),t}return null==u&&(u=[]),d(),a={tick:h,restart:function(){return t.restart(r),a},stop:function(){return t.stop(),a},nodes:function(t){return arguments.length?(u=t,d(),f.forEach(g),a):u},alpha:function(t){return arguments.length?(o=+t,a):o},alphaMin:function(t){return arguments.length?(e=+t,a):e},alphaDecay:function(t){return arguments.length?(s=+t,a):+s},alphaTarget:function(t){return arguments.length?(c=+t,a):c},velocityDecay:function(t){return arguments.length?(l=1-t,a):1-l},randomSource:function(t){return arguments.length?(i=t,f.forEach(g),a):i},force:function(t,e){return 1<arguments.length?(null==e?f.delete(t):f.set(t,g(e)),a):f.get(t)},find:function(t,e,n){var i,r,a,o=0,s=u.length;for(null==n?n=1/0:n*=n,o=0;o<s;++o)(i=(i=t-(r=u[o]).x)*i+(i=e-r.y)*i)<n&&(a=r,n=i);return a},on:function(t,e){return 1<arguments.length?(n.on(t,e),a):n.on(t)}}},s.forceX=function(n){var r,a,o,i=ks(.1);function e(t){for(var e,n=0,i=r.length;n<i;++n)(e=r[n]).vx+=(o[n]-e.x)*a[n]*t}function s(){if(r){var t,e=r.length;for(a=new Array(e),o=new Array(e),t=0;t<e;++t)a[t]=isNaN(o[t]=+n(r[t],t,r))?0:+i(r[t],t,r)}}return"function"!=typeof n&&(n=ks(null==n?0:+n)),e.initialize=function(t){r=t,s()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:ks(+t),s(),e):i},e.x=function(t){return arguments.length?(n="function"==typeof t?t:ks(+t),s(),e):n},e},s.forceY=function(n){var r,a,o,i=ks(.1);function e(t){for(var e,n=0,i=r.length;n<i;++n)(e=r[n]).vy+=(o[n]-e.y)*a[n]*t}function s(){if(r){var t,e=r.length;for(a=new Array(e),o=new Array(e),t=0;t<e;++t)a[t]=isNaN(o[t]=+n(r[t],t,r))?0:+i(r[t],t,r)}}return"function"!=typeof n&&(n=ks(null==n?0:+n)),e.initialize=function(t){r=t,s()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:ks(+t),s(),e):i},e.y=function(t){return arguments.length?(n="function"==typeof t?t:ks(+t),s(),e):n},e},s.formatDefaultLocale=Ks,s.formatLocale=Zs,s.formatSpecifier=Ys,s.fsum=function(e,n){const i=new S;if(void 0===n)for(var t of e)(t=+t)&&i.add(t);else{let t=-1;for(var r of e)(r=+n(r,++t,e))&&i.add(r)}return+i},s.geoAlbers=ah,s.geoAlbersUsa=function(){var e,n,r,a,o,i,s=ah(),u=rh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=rh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){i=[t,e]}};function f(t){var e=t[0],t=t[1];return i=null,r.point(e,t),i||(a.point(e,t),i)||(o.point(e,t),i)}function h(){return e=n=null,f}return f.invert=function(t){var e=s.scale(),n=s.translate(),i=(t[0]-n[0])/e,e=(t[1]-n[1])/e;return(.12<=e&&e<.234&&-.425<=i&&i<-.214?u:.166<=e&&e<.234&&-.214<=i&&i<-.115?c:s).invert(t)},f.stream=function(t){return e&&n===t?e:(i=[s.stream(n=t),u.stream(t),c.stream(t)],r=i.length,e={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},f.precision=function(t){return arguments.length?(s.precision(t),u.precision(t),c.precision(t),h()):s.precision()},f.scale=function(t){return arguments.length?(s.scale(t),u.scale(.35*t),c.scale(t),f.translate(s.translate())):s.scale()},f.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),n=+t[0],i=+t[1];return r=s.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(l),a=u.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+eu,i+.12*e+eu],[n-.214*e-eu,i+.234*e-eu]]).stream(l),o=c.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+eu,i+.166*e+eu],[n-.115*e-eu,i+.234*e-eu]]).stream(l),h()},f.fitExtent=function(t,e){return Hf(f,t,e)},f.fitSize=function(t,e){return Vf(f,t,e)},f.fitWidth=function(t,e){return Uf(f,t,e)},f.fitHeight=function(t,e){return qf(f,t,e)},f.scale(1070)},s.geoArea=function(t){return Wu=new S,Ru(t,Zu),2*Wu},s.geoAzimuthalEqualArea=function(){return th(uh).scale(124.75).clipAngle(179.999)},s.geoAzimuthalEqualAreaRaw=uh,s.geoAzimuthalEquidistant=function(){return th(ch).scale(79.4188).clipAngle(179.999)},s.geoAzimuthalEquidistantRaw=ch,s.geoBounds=function(t){var e,n,i,r,a,o,s;if(Xu=Bu=-(Iu=Fu=1/0),Vu=[],Ru(t,Ac),n=Vu.length){for(Vu.sort(Lc),e=1,a=[i=Vu[0]];e<n;++e)Pc(i,(r=Vu[e])[0])||Pc(i,r[1])?(Oc(i[0],r[1])>Oc(i[0],i[1])&&(i[1]=r[1]),Oc(r[0],i[1])>Oc(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-1/0,e=0,i=a[n=a.length-1];e<=n;i=r,++e)r=a[e],(s=Oc(i[1],r[0]))>o&&(o=s,Iu=r[0],Bu=i[1])}return Vu=Uu=null,Iu===1/0||Fu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Iu,Fu],[Bu,Xu]]},s.geoCentroid=function(t){uc=cc=lc=fc=hc=dc=gc=pc=0,vc=new S,yc=new S,xc=new S,Ru(t,zc);var e=+vc,n=+yc,i=+xc;return(t=pu(e,n,i))<nu&&(e=dc,n=gc,i=pc,cc<eu&&(e=lc,n=fc,i=hc),(t=pu(e,n,i))<nu)?[NaN,NaN]:[fu(n,e)*su,Tu(i/t)*su]},s.geoCircle=function(){var i,r,a=Vc([0,0]),o=Vc(90),s=Vc(6),u={point:function(t,e){i.push(t=r(t,e)),t[0]*=su,t[1]*=su}};function e(){var t=a.apply(this,arguments),e=o.apply(this,arguments)*uu,n=s.apply(this,arguments)*uu;return i=[],r=Wc(-t[0]*uu,-t[1]*uu,0).invert,tl(u,e,n,1),t={type:"Polygon",coordinates:[i]},i=r=null,t}return e.center=function(t){return arguments.length?(a="function"==typeof t?t:Vc([+t[0],+t[1]]),e):a},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:Vc(+t),e):o},e.precision=function(t){return arguments.length?(s="function"==typeof t?t:Vc(+t),e):s},e},s.geoClipAntimeridian=hl,s.geoClipCircle=dl,s.geoClipExtent=function(){var e,n,i,r=0,a=0,o=960,s=500;return i={stream:function(t){return e&&n===t?e:e=ml(r,a,o,s)(n=t)},extent:function(t){return arguments.length?(r=+t[0][0],a=+t[0][1],o=+t[1][0],s=+t[1][1],e=n=null,i):[[r,a],[o,s]]}}},s.geoClipRectangle=ml,s.geoConicConformal=function(){return nh(dh).scale(109.5).parallels([30,30])},s.geoConicConformalRaw=dh,s.geoConicEqualArea=rh,s.geoConicEqualAreaRaw=ih,s.geoConicEquidistant=function(){return nh(ph).scale(131.154).center([0,13.9389])},s.geoConicEquidistantRaw=ph,s.geoContains=function(t,e){return(t&&Cl.hasOwnProperty(t.type)?Cl[t.type]:Rl)(t,e)},s.geoDistance=El,s.geoEqualEarth=function(){return th(bh).scale(177.158)},s.geoEqualEarthRaw=bh,s.geoEquirectangular=function(){return th(gh).scale(152.63)},s.geoEquirectangularRaw=gh,s.geoGnomonic=function(){return th(wh).scale(144.049).clipAngle(60)},s.geoGnomonicRaw=wh,s.geoGraticule=Bl,s.geoGraticule10=function(){return Bl()()},s.geoIdentity=function(){var i,r,e,n,a,o,s,u=1,c=0,l=0,f=1,h=1,d=0,g=null,p=1,v=1,y=Yf({point:function(t,e){e=m([t,e]);this.stream.point(e[0],e[1])}}),x=Gl;function _(){return p=u*f,v=u*h,o=s=null,m}function m(t){var e=t[0]*p,n=t[1]*v;return d&&(t=n*i-e*r,e=e*i+n*r,n=t),[e+c,n+l]}return m.invert=function(t){var e=t[0]-c,n=t[1]-l;return d&&(t=n*i+e*r,e=e*i-n*r,n=t),[e/p,n/v]},m.stream=function(t){return o&&s===t?o:o=y(x(s=t))},m.postclip=function(t){return arguments.length?(x=t,g=e=n=a=null,_()):x},m.clipExtent=function(t){return arguments.length?(x=null==t?(g=e=n=a=null,Gl):ml(g=+t[0][0],e=+t[0][1],n=+t[1][0],a=+t[1][1]),_()):null==g?null:[[g,e],[n,a]]},m.scale=function(t){return arguments.length?(u=+t,_()):u},m.translate=function(t){return arguments.length?(c=+t[0],l=+t[1],_()):[c,l]},m.angle=function(t){return arguments.length?(r=xu(d=t%360*uu),i=hu(d),_()):d*su},m.reflectX=function(t){return arguments.length?(f=t?-1:1,_()):f<0},m.reflectY=function(t){return arguments.length?(h=t?-1:1,_()):h<0},m.fitExtent=function(t,e){return Hf(m,t,e)},m.fitSize=function(t,e){return Vf(m,t,e)},m.fitWidth=function(t,e){return Uf(m,t,e)},m.fitHeight=function(t,e){return qf(m,t,e)},m},s.geoInterpolate=function(t,e){var n=t[0]*uu,i=t[1]*uu,r=e[0]*uu,a=e[1]*uu,t=hu(i),o=xu(i),e=hu(a),s=xu(a),u=t*hu(n),c=t*xu(n),l=e*hu(r),f=e*xu(r),h=2*Tu(mu(Au(a-i)+t*e*Au(r-n))),d=xu(h);return(r=h?function(t){var e=xu(t*=h)/d,n=xu(h-t)/d,i=n*u+e*l,t=n*c+e*f,e=n*o+e*s;return[fu(t,i)*su,fu(e,mu(i*i+t*t))*su]}:function(){return[n*su,i*su]}).distance=h,r},s.geoLength=Ml,s.geoMercator=function(){return fh(lh).scale(961/ou)},s.geoMercatorRaw=lh,s.geoNaturalEarth1=function(){return th(Th).scale(175.295)},s.geoNaturalEarth1Raw=Th,s.geoOrthographic=function(){return th(Ah).scale(249.5).clipAngle(90+eu)},s.geoOrthographicRaw=Ah,s.geoPath=function(e,n){var i,r,a=4.5;function o(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),Ru(t,i(r))),r.result()}return o.area=function(t){return Ru(t,i(Jl)),Jl.result()},o.measure=function(t){return Ru(t,i(Bf)),Bf.result()},o.bounds=function(t){return Ru(t,i(uf)),uf.result()},o.centroid=function(t){return Ru(t,i(Ef)),Ef.result()},o.projection=function(t){return arguments.length?(i=null==t?(e=null,Gl):(e=t).stream,o):e},o.context=function(t){return arguments.length?(r=null==t?(n=null,new Xf):new Cf(n=t),"function"!=typeof a&&r.pointRadius(a),o):n},o.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),o):a},o.projection(e).context(n)},s.geoProjection=th,s.geoProjectionMutator=eh,s.geoRotation=Qc,s.geoStereographic=function(){return th(Mh).scale(250).clipAngle(142)},s.geoStereographicRaw=Mh,s.geoStream=Ru,s.geoTransform=function(t){return{stream:Yf(t)}},s.geoTransverseMercator=function(){var t=fh(kh),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},s.geoTransverseMercatorRaw=kh,s.gray=function(t,e){return new bn(t,0,0,null==e?1:e)},s.greatest=function(e,n=u){let i,r=!1;if(1===n.length){let t;for(const o of e){var a=n(o);(r?0<u(a,t):0===u(a,a))&&(i=o,t=a,r=!0)}}else for(const t of e)(r?0<n(t,i):0===n(t,t))&&(i=t,r=!0);return i},s.greatestIndex=function(t,e=u){if(1===e.length)return J(t,e);let n,i=-1,r=-1;for(const a of t)++r,(i<0?0===e(a,a):0<e(a,n))&&(n=a,i=r);return i},s.group=T,s.groupSort=function(t,r,e){return(2!==r.length?O(k(t,r,e),([t,e],[n,i])=>u(e,i)||u(t,n)):O(T(t,e),([t,e],[n,i])=>r(e,i)||u(t,n))).map(([t])=>t)},s.groups=A,s.hcl=Sn,s.hierarchy=Rh,s.histogram=H,s.hsl=sn,s.html=vs,s.image=function(r,a){return new Promise(function(t,e){var n,i=new Image;for(n in a)i[n]=a[n];i.onerror=e,i.onload=function(){t(i)},i.src=r})},s.index=function(t,...e){return D(t,w,C,e)},s.indexes=function(t,...e){return D(t,Array.from,C,e)},s.interpolate=oi,s.interpolateArray=function(t,e){return(Jn(e)?Kn:Qn)(t,e)},s.interpolateBasis=Xn,s.interpolateBasisClosed=$n,s.interpolateBlues=Sx,s.interpolateBrBG=By,s.interpolateBuGn=ix,s.interpolateBuPu=ax,s.interpolateCividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},s.interpolateCool=t,s.interpolateCubehelix=Ai,s.interpolateCubehelixDefault=Fx,s.interpolateCubehelixLong=Mi,s.interpolateDate=ti,s.interpolateDiscrete=function(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}},s.interpolateGnBu=sx,s.interpolateGreens=Cx,s.interpolateGreys=Rx,s.interpolateHcl=bi,s.interpolateHclLong=wi,s.interpolateHsl=xi,s.interpolateHslLong=_i,s.interpolateHue=function(t,e){var n=Gn(+t,+e);return function(t){t=n(t);return t-360*Math.floor(t/360)}},s.interpolateInferno=Ie,s.interpolateLab=function(e,t){var n=Vn((e=mn(e)).l,(t=mn(t)).l),i=Vn(e.a,t.a),r=Vn(e.b,t.b),a=Vn(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=i(t),e.b=r(t),e.opacity=a(t),e+""}},s.interpolateMagma=Fe,s.interpolateNumber=ei,s.interpolateNumberArray=Kn,s.interpolateObject=ni,s.interpolateOrRd=cx,s.interpolateOranges=Ix,s.interpolatePRGn=$y,s.interpolatePiYG=jy,s.interpolatePlasma=xr,s.interpolatePuBu=dx,s.interpolatePuBuGn=fx,s.interpolatePuOr=Hy,s.interpolatePuRd=px,s.interpolatePurples=Lx,s.interpolateRainbow=function(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Xx.h=360*t-100,Xx.s=1.5-1.5*e,Xx.l=.8-.9*e,Xx+""},s.interpolateRdBu=Uy,s.interpolateRdGy=Wy,s.interpolateRdPu=yx,s.interpolateRdYlBu=Ky,s.interpolateRdYlGn=Qy,s.interpolateReds=zx,s.interpolateRgb=Un,s.interpolateRgbBasis=Wn,s.interpolateRgbBasisClosed=Zn,s.interpolateRound=si,s.interpolateSinebow=function(t){var e;return t=(.5-t)*Math.PI,$x.r=255*(e=Math.sin(t))*e,$x.g=255*(e=Math.sin(t+Yx))*e,$x.b=255*(e=Math.sin(t+jx))*e,$x+""},s.interpolateSpectral=ex,s.interpolateString=ai,s.interpolateTransformCss=di,s.interpolateTransformSvg=gi,s.interpolateTurbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},s.interpolateViridis=Ne,s.interpolateWarm=Bx,s.interpolateYlGn=bx,s.interpolateYlGnBu=_x,s.interpolateYlOrBr=Tx,s.interpolateYlOrRd=Mx,s.interpolateZoom=vi,s.interrupt=or,s.intersection=function(t,...e){t=new p(t),e=e.map(st);t:for(const n of t)for(const i of e)if(!i.has(n)){t.delete(n);continue t}return t},s.interval=function(t,e,n){var a=new Xi,o=e;return null==e||(a._restart=a.restart,a.restart=function(n,i,r){i=+i,r=null==r?Fi():+r,a._restart(function t(e){e+=o,a._restart(t,o+=i,r),n(e)},i,r)}),a.restart(t,e,n),a},s.isoFormat=vy,s.isoParse=yy,s.json=function(t,e){return fetch(t,e).then(ds)},s.lab=mn,s.lch=function(t,e,n,i){return 1===arguments.length?kn(t):new En(n,e,t,null==i?1:i)},s.least=function(e,n=u){let i,r=!1;if(1===n.length){let t;for(const o of e){var a=n(o);(r?u(a,t)<0:0===u(a,a))&&(i=o,t=a,r=!0)}}else for(const t of e)(r?n(t,i)<0:0===n(t,t))&&(i=t,r=!0);return i},s.leastIndex=nt,s.line=v_,s.lineRadial=A_,s.link=P_,s.linkHorizontal=function(){return P_(C_)},s.linkRadial=function(){const t=P_(R_);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},s.linkVertical=function(){return P_(D_)},s.local=ve,s.map=function(n,i){if("function"!=typeof n[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof i)throw new TypeError("mapper is not a function");return Array.from(n,(t,e)=>i(t,e,n))},s.matcher=zt,s.max=V,s.maxIndex=J,s.mean=function(e,n){let i=0,r=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(++i,r+=t);else{let t=-1;for(var a of e)null!=(a=n(a,++t,e))&&(a=+a)>=a&&(++i,r+=a)}if(i)return r/i},s.median=function(t,e){return Z(t,.5,e)},s.merge=Q,s.min=U,s.minIndex=tt,s.mode=function(e,n){const i=new g;if(void 0===n)for(var t of e)null!=t&&t>=t&&i.set(t,(i.get(t)||0)+1);else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&r>=r&&i.set(r,(i.get(r)||0)+1)}let a,o=0;for(var[s,u]of i)u>o&&(o=u,a=s);return a},s.namespace=Et,s.namespaces=St,s.nice=j,s.now=Fi,s.pack=function(){var e=null,n=1,i=1,r=Zh;function a(t){return t.x=n/2,t.y=i/2,e?t.eachBefore(Qh(e)).eachAfter(td(r,.5)).eachBefore(ed(1)):t.eachBefore(Qh(Jh)).eachAfter(td(Zh,1)).eachAfter(td(r,t.r/Math.min(n,i))).eachBefore(ed(Math.min(n,i)/(2*t.r))),t}return a.radius=function(t){return arguments.length?(e=qh(t),a):e},a.size=function(t){return arguments.length?(n=+t[0],i=+t[1],a):[n,i]},a.padding=function(t){return arguments.length?(r="function"==typeof t?t:Kh(+t),a):r},a},s.packEnclose=Ih,s.packSiblings=function(t){return Uh(t),t},s.pairs=function(t,e=function(t,e){return[t,e]}){const n=[];let i,r=!1;for(const a of t)r&&n.push(e(i,a)),i=a,r=!0;return n},s.partition=function(){var n=1,i=1,s=0,r=!1;function e(t){var a,o,e=t.height+1;return t.x0=t.y0=s,t.x1=n,t.y1=i/e,t.eachBefore((a=i,o=e,function(t){t.children&&id(t,t.x0,a*(t.depth+1)/o,t.x1,a*(t.depth+2)/o);var e=t.x0,n=t.y0,i=t.x1-s,r=t.y1-s;i<e&&(e=i=(e+i)/2),r<n&&(n=r=(n+r)/2),t.x0=e,t.y0=n,t.x1=i,t.y1=r})),r&&t.eachBefore(nd),t}return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(n=+t[0],i=+t[1],e):[n,i]},e.padding=function(t){return arguments.length?(s=+t,e):s},e},s.path=Fa,s.permute=R,s.pie=function(){var d=__,g=x_,p=null,v=Hx(0),y=Hx(n_),x=Hx(0);function e(n){for(var t,e,i,r=(n=f_(n)).length,a=0,o=new Array(r),s=new Array(r),u=+v.apply(this,arguments),c=Math.min(n_,Math.max(-n_,y.apply(this,arguments)-u)),l=Math.min(Math.abs(c)/r,x.apply(this,arguments)),f=l*(c<0?-1:1),h=0;h<r;++h)0<(i=s[o[h]=h]=+d(n[h],h,n))&&(a+=i);for(null!=g?o.sort(function(t,e){return g(s[t],s[e])}):null!=p&&o.sort(function(t,e){return p(n[t],n[e])}),h=0,t=a?(c-r*f)/a:0;h<r;++h,u=e)e=o[h],i=s[e],s[e]={data:n[e],index:h,value:i,startAngle:u,endAngle:e=u+(0<i?i*t:0)+f,padAngle:l};return s}return e.value=function(t){return arguments.length?(d="function"==typeof t?t:Hx(+t),e):d},e.sortValues=function(t){return arguments.length?(g=t,p=null,e):g},e.sort=function(t){return arguments.length?(p=t,g=null,e):p},e.startAngle=function(t){return arguments.length?(v="function"==typeof t?t:Hx(+t),e):v},e.endAngle=function(t){return arguments.length?(y="function"==typeof t?t:Hx(+t),e):y},e.padAngle=function(t){return arguments.length?(x="function"==typeof t?t:Hx(+t),e):x},e},s.piecewise=ki,s.pointRadial=k_,s.pointer=_e,s.pointers=function(t,e){return t.target&&(t=xe(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,t=>_e(t,e))},s.polygonArea=function(t){for(var e,n=-1,i=t.length,r=t[i-1],a=0;++n<i;)e=r,r=t[n],a+=e[1]*r[0]-e[0]*r[1];return a/2},s.polygonCentroid=function(t){for(var e,n,i=-1,r=t.length,a=0,o=0,s=t[r-1],u=0;++i<r;)e=s,s=t[i],u+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(u*=3),o/u]},s.polygonContains=function(t,e){for(var n,i,r=t.length,a=t[r-1],o=e[0],s=e[1],u=a[0],c=a[1],l=!1,f=0;f<r;++f)n=(a=t[f])[0],s<(i=a[1])!=s<c&&o<(u-n)*(s-i)/(c-i)+n&&(l=!l),u=n,c=i;return l},s.polygonHull=function(t){if((e=t.length)<3)return null;for(var e,n=new Array(e),i=new Array(e),r=0;r<e;++r)n[r]=[+t[r][0],+t[r][1],r];for(n.sort(md),r=0;r<e;++r)i[r]=[n[r][0],-n[r][1]];var a=bd(n),o=bd(i),s=o[0]===a[0],u=o[o.length-1]===a[a.length-1],c=[];for(r=a.length-1;0<=r;--r)c.push(t[n[a[r]][2]]);for(r=+s;r<o.length-u;++r)c.push(t[n[o[r]][2]]);return c},s.polygonLength=function(t){for(var e,n,i=-1,r=t.length,a=t[r-1],o=a[0],s=a[1],u=0;++i<r;)e=o,n=s,e-=o=(a=t[i])[0],n-=s=a[1],u+=Math.hypot(e,n);return u},s.precisionFixed=Js,s.precisionPrefix=Qs,s.precisionRound=tu,s.quadtree=ws,s.quantile=Z,s.quantileSorted=K,s.quantize=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},s.quickselect=q,s.radialArea=M_,s.radialLine=A_,s.randomBates=Ed,s.randomBernoulli=Rd,s.randomBeta=Pd,s.randomBinomial=zd,s.randomCauchy=Id,s.randomExponential=Cd,s.randomGamma=Ld,s.randomGeometric=Od,s.randomInt=Ad,s.randomIrwinHall=Sd,s.randomLcg=function(t=Math.random()){let e=0|(0<=t&&t<1?t/Xd:Math.abs(t));return()=>(e=1664525*e+1013904223|0,Xd*(e>>>0))},s.randomLogNormal=kd,s.randomLogistic=Fd,s.randomNormal=Md,s.randomPareto=Dd,s.randomPoisson=Bd,s.randomUniform=Td,s.randomWeibull=Nd,s.range=et,s.rank=function(t,n=u){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let i=Array.from(t);const r=new Float64Array(i.length);2!==n.length&&(i=i.map(n),n=u);const a=(t,e)=>n(i[t],i[e]);let o,s;return Uint32Array.from(i,(t,e)=>e).sort(n===u?(t,e)=>P(i[t],i[e]):L(a)).forEach((t,e)=>{var n=a(t,void 0===o?t:o);0<=n?((void 0===o||0<n)&&(o=t,s=e),r[t]=s):r[t]=NaN}),r},s.reduce=function(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const i=t[Symbol.iterator]();let r,a,o=-1;if(arguments.length<3){if({done:r,value:n}=i.next(),r)return;++o}for(;{done:r,value:a}=i.next(),!r;)n=e(n,a,++o,t);return n},s.reverse=function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},s.rgb=Qe,s.ribbon=function(){return qa()},s.ribbonArrow=function(){return qa(Ua)},s.rollup=k,s.rollups=E,s.scaleBand=Hd,s.scaleDiverging=function t(){var e=ng(Ay()(qd));return e.copy=function(){return wy(e,t())},Yd.apply(e,arguments)},s.scaleDivergingLog=function t(){var e=lg(Ay()).domain([.1,1,10]);return e.copy=function(){return wy(e,t()).base(e.base())},Yd.apply(e,arguments)},s.scaleDivergingPow=My,s.scaleDivergingSqrt=function(){return My.apply(null,arguments).exponent(.5)},s.scaleDivergingSymlog=function t(){var e=dg(Ay());return e.copy=function(){return wy(e,t()).constant(e.constant())},Yd.apply(e,arguments)},s.scaleIdentity=function t(e){var n;function i(t){return null==t||isNaN(t=+t)?n:t}return(i.invert=i).domain=i.range=function(t){return arguments.length?(e=Array.from(t,Vd),i):e.slice()},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,Vd):[0,1],ng(i)},s.scaleImplicit=jd,s.scaleLinear=function t(){var e=tg();return e.copy=function(){return Jd(e,t())},$d.apply(e,arguments),ng(e)},s.scaleLog=function t(){const e=lg(Qd()).domain([1,10]);return e.copy=()=>Jd(e,t()).base(e.base()),$d.apply(e,arguments),e},s.scaleOrdinal=Gd,s.scalePoint=function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(Hd.apply(null,arguments).paddingInner(1))},s.scalePow=xg,s.scaleQuantile=function t(){var e,n=[],i=[],r=[];function a(){var t=0,e=Math.max(1,i.length);for(r=new Array(e-1);++t<e;)r[t-1]=K(n,t/e);return o}function o(t){return null==t||isNaN(t=+t)?e:i[v(r,t)]}return o.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]},o.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(u),a()},o.range=function(t){return arguments.length?(i=Array.from(t),a()):i.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return t().domain(n).range(i).unknown(e)},$d.apply(o,arguments)},s.scaleQuantize=function t(){var e,n=0,i=1,r=1,a=[.5],o=[0,1];function s(t){return null!=t&&t<=t?o[v(a,t,0,r)]:e}function u(){var t=-1;for(a=new Array(r);++t<r;)a[t]=((t+1)*i-(t-r)*n)/(r+1);return s}return s.domain=function(t){return arguments.length?([n,i]=t,n=+n,i=+i,u()):[n,i]},s.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,u()):o.slice()},s.invertExtent=function(t){return(t=o.indexOf(t))<0?[NaN,NaN]:t<1?[n,a[0]]:r<=t?[a[r-1],i]:[a[t-1],a[t]]},s.unknown=function(t){return arguments.length&&(e=t),s},s.thresholds=function(){return a.slice()},s.copy=function(){return t().domain([n,i]).range(o).unknown(e)},$d.apply(ng(s),arguments)},s.scaleRadial=function t(){var e,n=tg(),i=[0,1],r=!1;function a(t){return t=n(t),t=Math.sign(t)*Math.sqrt(Math.abs(t)),isNaN(t)?e:r?Math.round(t):t}return a.invert=function(t){return n.invert(_g(t))},a.domain=function(t){return arguments.length?(n.domain(t),a):n.domain()},a.range=function(t){return arguments.length?(n.range((i=Array.from(t,Vd)).map(_g)),a):i.slice()},a.rangeRound=function(t){return a.range(t).round(!0)},a.round=function(t){return arguments.length?(r=!!t,a):r},a.clamp=function(t){return arguments.length?(n.clamp(t),a):n.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t(n.domain(),i).round(r).clamp(n.clamp()).unknown(e)},$d.apply(a,arguments),ng(a)},s.scaleSequential=function t(){var e=ng(by()(qd));return e.copy=function(){return wy(e,t())},Yd.apply(e,arguments)},s.scaleSequentialLog=function t(){var e=lg(by()).domain([1,10]);return e.copy=function(){return wy(e,t()).base(e.base())},Yd.apply(e,arguments)},s.scaleSequentialPow=Ty,s.scaleSequentialQuantile=function t(){var i=[],n=qd;function r(t){if(null!=t&&!isNaN(t=+t))return n((v(i,t,1)-1)/(i.length-1))}return r.domain=function(t){if(!arguments.length)return i.slice();i=[];for(var e of t)null==e||isNaN(e=+e)||i.push(e);return i.sort(u),r},r.interpolator=function(t){return arguments.length?(n=t,r):n},r.range=function(){return i.map((t,e)=>n(e/(i.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(t,e)=>Z(i,e/n))},r.copy=function(){return t(n).domain(i)},Yd.apply(r,arguments)},s.scaleSequentialSqrt=function(){return Ty.apply(null,arguments).exponent(.5)},s.scaleSequentialSymlog=function t(){var e=dg(by());return e.copy=function(){return wy(e,t()).constant(e.constant())},Yd.apply(e,arguments)},s.scaleSqrt=function(){return xg.apply(null,arguments).exponent(.5)},s.scaleSymlog=function t(){var e=dg(Qd());return e.copy=function(){return Jd(e,t()).constant(e.constant())},$d.apply(e,arguments)},s.scaleThreshold=function t(){var e,n=[.5],i=[0,1],r=1;function a(t){return null!=t&&t<=t?i[v(n,t,0,r)]:e}return a.domain=function(t){return arguments.length?(n=Array.from(t),r=Math.min(n.length,i.length-1),a):n.slice()},a.range=function(t){return arguments.length?(i=Array.from(t),r=Math.min(n.length,i.length-1),a):i.slice()},a.invertExtent=function(t){return t=i.indexOf(t),[n[t-1],n[t]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(n).range(i).unknown(e)},$d.apply(a,arguments)},s.scaleTime=function(){return $d.apply(my(Gp,Hp,cp,op,Hg,Yg,Bg,Ng,Lg,s.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},s.scaleUtc=function(){return $d.apply(my(Yp,jp,Bp,Np,bp,xp,pp,hp,Lg,s.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},s.scan=function(t,e){return(e=nt(t,e))<0?void 0:e},s.schemeAccent=Ey,s.schemeBlues=kx,s.schemeBrBG=Fy,s.schemeBuGn=nx,s.schemeBuPu=rx,s.schemeCategory10=Sy,s.schemeDark2=Cy,s.schemeGnBu=ox,s.schemeGreens=Ex,s.schemeGreys=Dx,s.schemeOrRd=ux,s.schemeOranges=Nx,s.schemePRGn=Xy,s.schemePaired=Dy,s.schemePastel1=Ry,s.schemePastel2=Oy,s.schemePiYG=Yy,s.schemePuBu=hx,s.schemePuBuGn=lx,s.schemePuOr=Gy,s.schemePuRd=gx,s.schemePurples=Ox,s.schemeRdBu=Vy,s.schemeRdGy=qy,s.schemeRdPu=vx,s.schemeRdYlBu=Zy,s.schemeRdYlGn=Jy,s.schemeReds=Px,s.schemeSet1=Ly,s.schemeSet2=Py,s.schemeSet3=zy,s.schemeSpectral=tx,s.schemeTableau10=Ny,s.schemeYlGn=mx,s.schemeYlGnBu=xx,s.schemeYlOrBr=wx,s.schemeYlOrRd=Ax,s.select=ge,s.selectAll=function(t){return"string"==typeof t?new he([document.querySelectorAll(t)],[document.documentElement]):new he([Ot(t)],fe)},s.selection=de,s.selector=Rt,s.selectorAll=Pt,s.shuffle=it,s.shuffler=rt,s.some=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(e(i,++n,t))return!0;return!1},s.sort=O,s.stack=function(){var s=Hx([]),u=_m,c=xm,l=mm;function e(t){var e,n,i=Array.from(s.apply(this,arguments),bm),r=i.length,a=-1;for(const o of t)for(e=0,++a;e<r;++e)(i[e][a]=[0,+l(o,i[e].key,a,t)]).data=o;for(e=0,n=f_(u(i));e<r;++e)i[n[e]].index=e;return c(i,n),i}return e.keys=function(t){return arguments.length?(s="function"==typeof t?t:Hx(Array.from(t)),e):s},e.value=function(t){return arguments.length?(l="function"==typeof t?t:Hx(+t),e):l},e.order=function(t){return arguments.length?(u=null==t?_m:"function"==typeof t?t:Hx(Array.from(t)),e):u},e.offset=function(t){return arguments.length?(c=null==t?xm:t,e):c},e},s.stackOffsetDiverging=function(t,e){if(0<(s=t.length))for(var n,i,r,a,o,s,u=0,c=t[e[0]].length;u<c;++u)for(n=a=o=0;n<s;++n)0<(r=(i=t[e[n]][u])[1]-i[0])?(i[0]=a,i[1]=a+=r):r<0?(i[1]=o,i[0]=o+=r):(i[0]=0,i[1]=r)},s.stackOffsetExpand=function(t,e){if(0<(i=t.length)){for(var n,i,r,a=0,o=t[0].length;a<o;++a){for(r=n=0;n<i;++n)r+=t[n][a][1]||0;if(r)for(n=0;n<i;++n)t[n][a][1]/=r}xm(t,e)}},s.stackOffsetNone=xm,s.stackOffsetSilhouette=function(t,e){if(0<(n=t.length)){for(var n,i=0,r=t[e[0]],a=r.length;i<a;++i){for(var o=0,s=0;o<n;++o)s+=t[o][i][1]||0;r[i][1]+=r[i][0]=-s/2}xm(t,e)}},s.stackOffsetWiggle=function(t,e){if(0<(r=t.length)&&0<(i=(n=t[e[0]]).length)){for(var n,i,r,a=0,o=1;o<i;++o){for(var s=0,u=0,c=0;s<r;++s){for(var l=t[e[s]],f=l[o][1]||0,h=(f-(l[o-1][1]||0))/2,d=0;d<s;++d){var g=t[e[d]];h+=(g[o][1]||0)-(g[o-1][1]||0)}u+=f,c+=h*f}n[o-1][1]+=n[o-1][0]=a,u&&(a-=c/u)}n[o-1][1]+=n[o-1][0]=a,xm(t,e)}},s.stackOrderAppearance=wm,s.stackOrderAscending=Am,s.stackOrderDescending=function(t){return Am(t).reverse()},s.stackOrderInsideOut=function(t){for(var e,n=t.length,i=t.map(Mm),r=wm(t),a=0,o=0,s=[],u=[],c=0;c<n;++c)e=r[c],a<o?(a+=i[e],s.push(e)):(o+=i[e],u.push(e));return u.reverse().concat(s)},s.stackOrderNone=_m,s.stackOrderReverse=function(t){return _m(t).reverse()},s.stratify=function(){var v,y=sd,x=ud;function e(n){var e,t,i,r,a,o,s,u,c=Array.from(n),l=y,f=x,h=new Map;if(null!=v){const d=c.map((t,e)=>function(t){var e=(t=`${t}`).length;ld(t,e-1)&&!ld(t,e-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:`/${t}`}(v(t,e,n))),g=d.map(cd),p=new Set(d).add("");for(const i of g)p.has(i)||(p.add(i),d.push(i),g.push(cd(i)),c.push(od));l=(t,e)=>d[e],f=(t,e)=>g[e]}for(i=0,e=c.length;i<e;++i)t=c[i],o=c[i]=new Nh(t),null!=(s=l(t,i,n))&&(s+="")&&(u=o.id=s,h.set(u,h.has(u)?ad:o)),null!=(s=f(t,i,n))&&(s+="")&&(o.parent=s);for(i=0;i<e;++i)if(s=(o=c[i]).parent){if(!(a=h.get(s)))throw new Error("missing: "+s);if(a===ad)throw new Error("ambiguous: "+s);a.children?a.children.push(o):a.children=[o],o.parent=a}else{if(r)throw new Error("multiple roots");r=o}if(!r)throw new Error("no root");if(null!=v){for(;r.data===od&&1===r.children.length;)r=r.children[0],--e;for(let t=c.length-1;0<=t&&(o=c[t]).data===od;--t)o.data=null}if(r.parent=rd,r.eachBefore(function(t){t.depth=t.parent.depth+1,--e}).eachBefore(zh),r.parent=null,0<e)throw new Error("cycle");return r}return e.id=function(t){return arguments.length?(y=qh(t),e):y},e.parentId=function(t){return arguments.length?(x=qh(t),e):x},e.path=function(t){return arguments.length?(v=qh(t),e):v},e},s.style=qt,s.subset=function(t,e){return ut(e,t)},s.sum=function(e,n){let i=0;if(void 0===n)for(var t of e)(t=+t)&&(i+=t);else{let t=-1;for(var r of e)(r=+n(r,++t,e))&&(i+=r)}return i},s.superset=ut,s.svg=ys,s.symbol=function(e,n){let i=null;function r(){let t;if(i=i||(t=Fa()),e.apply(this,arguments).draw(i,+n.apply(this,arguments)),t)return i=null,t+""||null}return e="function"==typeof e?e:Hx(e||N_),n="function"==typeof n?n:Hx(void 0===n?64:+n),r.type=function(t){return arguments.length?(e="function"==typeof t?t:Hx(t),r):e},r.size=function(t){return arguments.length?(n="function"==typeof t?t:Hx(+t),r):n},r.context=function(t){return arguments.length?(i=null==t?null:t,r):i},r},s.symbolAsterisk=$r,s.symbolCircle=N_,s.symbolCross=ka,s.symbolDiamond=so,s.symbolDiamond2=jo,s.symbolPlus=Ko,s.symbolSquare=Ms,s.symbolSquare2=vd,s.symbolStar=Og,s.symbolTriangle=zg,s.symbolTriangle2=Fg,s.symbolWye=$g,s.symbolX=ap,s.symbols=up,s.symbolsFill=up,s.symbolsStroke=fp,s.text=cs,s.thresholdFreedmanDiaconis=function(t,e,n){return Math.ceil((n-e)/(2*(Z(t,.75)-Z(t,.25))*Math.pow(r(t),-1/3)))},s.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*d(t)*Math.pow(r(t),-1/3)))},s.thresholdSturges=G,s.tickFormat=eg,s.tickIncrement=$,s.tickStep=Y,s.ticks=X,s.timeDay=Yg,s.timeDays=jg,s.timeFormatDefaultLocale=gy,s.timeFormatLocale=Wp,s.timeFriday=Zg,s.timeFridays=ip,s.timeHour=Bg,s.timeHours=Xg,s.timeInterval=wg,s.timeMillisecond=Ag,s.timeMilliseconds=Mg,s.timeMinute=Ng,s.timeMinutes=Ig,s.timeMonday=Vg,s.timeMondays=Qg,s.timeMonth=op,s.timeMonths=sp,s.timeSaturday=Kg,s.timeSaturdays=rp,s.timeSecond=Lg,s.timeSeconds=Pg,s.timeSunday=Hg,s.timeSundays=Jg,s.timeThursday=Wg,s.timeThursdays=np,s.timeTickInterval=Hp,s.timeTicks=Gp,s.timeTuesday=Ug,s.timeTuesdays=tp,s.timeWednesday=qg,s.timeWednesdays=ep,s.timeWeek=Hg,s.timeWeeks=Jg,s.timeYear=cp,s.timeYears=lp,s.timeout=Vi,s.timer=$i,s.timerFlush=Yi,s.transition=yr,s.transpose=at,s.tree=function(){var h=fd,u=1,c=1,l=null;function e(t){var e,n,i,r,a,o,s=function(t){for(var e,n,i,r,a,o=[t=new gd(t,0)];e=o.pop();)if(i=e._.children)for(e.children=new Array(a=i.length),r=a-1;0<=r;--r)o.push(n=e.children[r]=new gd(i[r],r)),n.parent=e;return(t.parent=new gd(null,0)).children=[t],t}(t);return s.eachAfter(f),s.parent.m=-s.z,s.eachBefore(d),l?t.eachBefore(g):((i=n=e=t).eachBefore(function(t){t.x<e.x&&(e=t),t.x>n.x&&(n=t),t.depth>i.depth&&(i=t)}),s=e===n?1:h(e,n)/2,r=s-e.x,a=u/(n.x+s+r),o=c/(i.depth||1),t.eachBefore(function(t){t.x=(t.x+r)*a,t.y=t.depth*o})),t}function f(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;e?(function(t){for(var e,n=0,i=0,r=t.children,a=r.length;0<=--a;)(e=r[a]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t),e=(e[0].z+e[e.length-1].z)/2,i?(t.z=i.z+h(t._,i._),t.m=t.z-e):t.z=e):i&&(t.z=i.z+h(t._,i._)),t.parent.A=function(t,e,n){if(e){for(var i,r=t,a=t,o=e,s=r.parent.children[0],u=r.m,c=a.m,l=o.m,f=s.m;o=dd(o),r=hd(r),o&&r;)s=hd(s),(a=dd(a)).a=t,0<(i=o.z+l-r.z-u+h(o._,r._))&&(function(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}(function(t,e,n){return t.a.parent===e.parent?t.a:n}(o,t,n),t,i),u+=i,c+=i),l+=o.m,u+=r.m,f+=s.m,c+=a.m;o&&!dd(a)&&(a.t=o,a.m+=l-c),r&&!hd(s)&&(s.t=r,s.m+=u-f,n=t)}return n}(t,i,t.parent.A||n[0])}function d(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function g(t){t.x*=u,t.y=t.depth*c}return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(l=!1,u=+t[0],c=+t[1],e):l?null:[u,c]},e.nodeSize=function(t){return arguments.length?(l=!0,u=+t[0],c=+t[1],e):l?[u,c]:null},e},s.treemap=function(){var o=xd,e=!1,n=1,i=1,s=[0],u=Zh,c=Zh,l=Zh,f=Zh,h=Zh;function r(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(a),s=[0],e&&t.eachBefore(nd),t}function a(t){var e=s[t.depth],n=t.x0+e,i=t.y0+e,r=t.x1-e,a=t.y1-e;r<n&&(n=r=(n+r)/2),a<i&&(i=a=(i+a)/2),t.x0=n,t.y0=i,t.x1=r,t.y1=a,t.children&&(e=s[t.depth+1]=u(t)/2,n+=h(t)-e,i+=c(t)-e,(r-=l(t)-e)<n&&(n=r=(n+r)/2),(a-=f(t)-e)<i&&(i=a=(i+a)/2),o(t,n,i,r,a))}return r.round=function(t){return arguments.length?(e=!!t,r):e},r.size=function(t){return arguments.length?(n=+t[0],i=+t[1],r):[n,i]},r.tile=function(t){return arguments.length?(o=Wh(t),r):o},r.padding=function(t){return arguments.length?r.paddingInner(t).paddingOuter(t):r.paddingInner()},r.paddingInner=function(t){return arguments.length?(u="function"==typeof t?t:Kh(+t),r):u},r.paddingOuter=function(t){return arguments.length?r.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):r.paddingTop()},r.paddingTop=function(t){return arguments.length?(c="function"==typeof t?t:Kh(+t),r):c},r.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:Kh(+t),r):l},r.paddingBottom=function(t){return arguments.length?(f="function"==typeof t?t:Kh(+t),r):f},r.paddingLeft=function(t){return arguments.length?(h="function"==typeof t?t:Kh(+t),r):h},r},s.treemapBinary=function(t,e,n,i,r){var a,o,p=t.children,s=p.length,v=new Array(s+1);for(v[0]=o=a=0;a<s;++a)v[a+1]=o+=p[a].value;!function t(e,n,i,r,a,o,s){if(n-1<=e){var u=p[e];return u.x0=r,u.y0=a,u.x1=o,void(u.y1=s)}var c=v[e],l=i/2+c,f=e+1,h=n-1;for(;f<h;){var d=f+h>>>1;v[d]<l?f=1+d:h=d}l-v[f-1]<v[f]-l&&e+1<f&&--f;var g=v[f]-c,u=i-g;s-a<o-r?(t(e,f,g,r,a,c=i?(r*u+o*g)/i:o,s),t(f,n,u,c,a,o,s)):(t(e,f,g,r,a,o,i=i?(a*u+s*g)/i:s),t(f,n,u,r,i,o,s))}(0,s,t.value,e,n,i,r)},s.treemapDice=id,s.treemapResquarify=_d,s.treemapSlice=pd,s.treemapSliceDice=function(t,e,n,i,r){(1&t.depth?pd:id)(t,e,n,i,r)},s.treemapSquarify=xd,s.tsv=hs,s.tsvFormat=ts,s.tsvFormatBody=es,s.tsvFormatRow=is,s.tsvFormatRows=ns,s.tsvFormatValue=rs,s.tsvParse=Jo,s.tsvParseRows=Qo,s.union=function(...t){const e=new p;for(const n of t)for(const i of n)e.add(i);return e},s.utcDay=xp,s.utcDays=_p,s.utcFriday=kp,s.utcFridays=Lp,s.utcHour=pp,s.utcHours=vp,s.utcMillisecond=Ag,s.utcMilliseconds=Mg,s.utcMinute=hp,s.utcMinutes=dp,s.utcMonday=wp,s.utcMondays=Cp,s.utcMonth=Np,s.utcMonths=Ip,s.utcSaturday=Sp,s.utcSaturdays=Pp,s.utcSecond=Lg,s.utcSeconds=Pg,s.utcSunday=bp,s.utcSundays=Ep,s.utcThursday=Mp,s.utcThursdays=Op,s.utcTickInterval=jp,s.utcTicks=Yp,s.utcTuesday=Tp,s.utcTuesdays=Dp,s.utcWednesday=Ap,s.utcWednesdays=Rp,s.utcWeek=bp,s.utcWeeks=Ep,s.utcYear=Bp,s.utcYears=Xp,s.variance=o,s.version="7.3.0",s.window=Ut,s.xml=ps,s.zip=function(){return at(arguments)},s.zoom=function(){var c,l,s,f=Lm,h=Pm,d=Fm,a=Nm,e=Im,o=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],u=250,p=vi,n=Tt("start","zoom","end"),v=500,y=150,x=0,_=10;function m(t){t.property("__zoom",zm).on("wheel.zoom",r,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",S).filter(e).on("touchstart.zoom",E).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(t,e){return(e=Math.max(o[0],Math.min(o[1],e)))===t.k?t:new Em(e,t.x,t.y)}function w(t,e,n){var i=e[0]-n[0]*t.k,n=e[1]-n[1]*t.k;return i===t.x&&n===t.y?t:new Em(t.k,i,n)}function T(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function A(t,n,u,c){t.on("start.zoom",function(){M(this,arguments).event(c).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(c).end()}).tween("zoom",function(){var t=arguments,i=M(this,t).event(c),e=h.apply(this,t),r=null==u?T(e):"function"==typeof u?u.apply(this,t):u,a=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),e=this.__zoom,o="function"==typeof n?n.apply(this,t):n,s=p(e.invert(r).concat(a/e.k),o.invert(r).concat(a/o.k));return function(t){var e,n;t=1===t?o:(e=s(t),new Em(n=a/e[2],r[0]-e[0]*n,r[1]-e[1]*n)),i.zoom(null,t)}})}function M(t,e,n){return!n&&t.__zooming||new i(t,e)}function i(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=h.apply(t,e),this.taps=0}function r(t,...e){if(f.apply(this,arguments)){var n=M(this,e).event(t),i=this.__zoom,r=Math.max(o[0],Math.min(o[1],i.k*Math.pow(2,a.apply(this,arguments)))),e=_e(t);if(n.wheel)n.mouse[0][0]===e[0]&&n.mouse[0][1]===e[1]||(n.mouse[1]=i.invert(n.mouse[0]=e)),clearTimeout(n.wheel);else{if(i.k===r)return;n.mouse=[e,i.invert(e)],or(this),n.start()}Om(t),n.wheel=setTimeout(function(){n.wheel=null,n.end()},y),n.zoom("mouse",d(w(b(i,r),n.mouse[0],n.mouse[1]),n.extent,g))}}function k(t,...e){var i,r,n,a,o;!s&&f.apply(this,arguments)&&(i=t.currentTarget,r=M(this,e,!0).event(t),n=ge(t.view).on("mousemove.zoom",function(t){{var e,n;Om(t),r.moved||(e=t.clientX-a,n=t.clientY-o,r.moved=x<e*e+n*n)}r.event(t).zoom("mouse",d(w(r.that.__zoom,r.mouse[0]=_e(t,i),r.mouse[1]),r.extent,g))},!0).on("mouseup.zoom",function(t){n.on("mousemove.zoom mouseup.zoom",null),Me(t.view,r.moved),Om(t),r.event(t).end()},!0),e=_e(t,i),a=t.clientX,o=t.clientY,Ae(t.view),Rm(t),r.mouse=[e,this.__zoom.invert(e)],or(this),r.start())}function S(t,...e){var n,i,r,a;f.apply(this,arguments)&&(n=this.__zoom,i=_e(t.changedTouches?t.changedTouches[0]:t,this),r=n.invert(i),a=n.k*(t.shiftKey?.5:2),e=d(w(b(n,a),i,r),h.apply(this,e),g),Om(t),0<u?ge(this).transition().duration(u).call(A,e,i,t):ge(this).call(m.transform,e,i,t))}function E(t,...e){if(f.apply(this,arguments)){var n,i,r,a,o=t.touches,s=o.length,u=M(this,e,t.changedTouches.length===s).event(t);for(Rm(t),i=0;i<s;++i)a=[a=_e(r=o[i],this),this.__zoom.invert(a),r.identifier],u.touch0?u.touch1||u.touch0[2]===a[2]||(u.touch1=a,u.taps=0):(u.touch0=a,n=!0,u.taps=1+!!c);c=c&&clearTimeout(c),n&&(u.taps<2&&(l=a[0],c=setTimeout(function(){c=null},v)),or(this),u.start())}}function C(t,...e){if(this.__zooming){var n,i=M(this,e).event(t),r=t.changedTouches,a=r.length;for(Om(t),n=0;n<a;++n)f=_e(l=r[n],this),i.touch0&&i.touch0[2]===l.identifier?i.touch0[0]=f:i.touch1&&i.touch1[2]===l.identifier&&(i.touch1[0]=f);if(l=i.that.__zoom,i.touch1)var o=i.touch0[0],s=i.touch0[1],u=i.touch1[0],c=i.touch1[1],e=(e=u[0]-o[0])*e+(e=u[1]-o[1])*e,t=(t=c[0]-s[0])*t+(t=c[1]-s[1])*t,l=b(l,Math.sqrt(e/t)),f=[(o[0]+u[0])/2,(o[1]+u[1])/2],c=[(s[0]+c[0])/2,(s[1]+c[1])/2];else{if(!i.touch0)return;f=i.touch0[0],c=i.touch0[1]}i.zoom("touch",d(w(l,f,c),i.extent,g))}}function D(t,...e){if(this.__zooming){var n,i,r=M(this,e).event(t),a=t.changedTouches,o=a.length;for(Rm(t),s&&clearTimeout(s),s=setTimeout(function(){s=null},v),n=0;n<o;++n)i=a[n],r.touch0&&r.touch0[2]===i.identifier?delete r.touch0:r.touch1&&r.touch1[2]===i.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):(r.end(),2===r.taps&&(i=_e(i,this),Math.hypot(l[0]-i[0],l[1]-i[1])<_&&((t=ge(this).on("dblclick.zoom"))&&t.apply(this,arguments))))}}return m.transform=function(t,e,n,i){var r=t.selection?t.selection():t;r.property("__zoom",zm),t!==r?A(t,e,n,i):r.interrupt().each(function(){M(this,arguments).event(i).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},m.scaleBy=function(t,e,n,i){m.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n,i)},m.scaleTo=function(t,a,o,e){m.transform(t,function(){var t=h.apply(this,arguments),e=this.__zoom,n=null==o?T(t):"function"==typeof o?o.apply(this,arguments):o,i=e.invert(n),r="function"==typeof a?a.apply(this,arguments):a;return d(w(b(e,r),n,i),t,g)},o,e)},m.translateBy=function(t,e,n,i){m.transform(t,function(){return d(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),h.apply(this,arguments),g)},null,i)},m.translateTo=function(t,i,r,a,e){m.transform(t,function(){var t=h.apply(this,arguments),e=this.__zoom,n=null==a?T(t):"function"==typeof a?a.apply(this,arguments):a;return d(Cm.translate(n[0],n[1]).scale(e.k).translate("function"==typeof i?-i.apply(this,arguments):-i,"function"==typeof r?-r.apply(this,arguments):-r),t,g)},a,e)},i.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=ge(this.that).datum();n.call(t,this.that,new Sm(t,{sourceEvent:this.sourceEvent,target:m,type:t,transform:this.that.__zoom,dispatch:n}),e)}},m.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:km(+t),m):a},m.filter=function(t){return arguments.length?(f="function"==typeof t?t:km(!!t),m):f},m.touchable=function(t){return arguments.length?(e="function"==typeof t?t:km(!!t),m):e},m.extent=function(t){return arguments.length?(h="function"==typeof t?t:km([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):h},m.scaleExtent=function(t){return arguments.length?(o[0]=+t[0],o[1]=+t[1],m):[o[0],o[1]]},m.translateExtent=function(t){return arguments.length?(g[0][0]=+t[0][0],g[1][0]=+t[1][0],g[0][1]=+t[0][1],g[1][1]=+t[1][1],m):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},m.constrain=function(t){return arguments.length?(d=t,m):d},m.duration=function(t){return arguments.length?(u=+t,m):u},m.interpolate=function(t){return arguments.length?(p=t,m):p},m.on=function(){var t=n.on.apply(n,arguments);return t===n?m:t},m.clickDistance=function(t){return arguments.length?(x=(t=+t)*t,m):Math.sqrt(x)},m.tapDistance=function(t){return arguments.length?(_=+t,m):_},m},s.zoomIdentity=Cm,s.zoomTransform=Dm,Object.defineProperty(s,"__esModule",{value:!0})}),function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom"));else if("function"==typeof define&&define.amd)define(["d3-axis","d3-brush","d3-drag","d3-dsv","d3-ease","d3-interpolate","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","d3-zoom"],e);else{var n,i="object"==typeof exports?e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,function(e,r,a,o,s,u,c,l,f,h,d,g){return function(){"use strict";var n=[,,function(t){t.exports=l},function(t){t.exports=r},function(t){t.exports=h},function(t){t.exports=o},function(t){t.exports=c},function(t){t.exports=a},function(t){t.exports=d},function(t){t.exports=f},function(t){t.exports=e},function(t){t.exports=s},function(t){t.exports=u},function(t){t.exports=g}],i={};function Rn(t){var e=i[t];if(void 0!==e)return e.exports;e=i[t]={exports:{}};return n[t](e,e.exports,Rn),e.exports}Rn.d=function(t,e){for(var n in e)Rn.o(e,n)&&!Rn.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},Rn.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},Rn.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var On={};return function(){Rn.r(On),Rn.d(On,{bb:function(){return Dn},default:function(){return Dn}});var e={};Rn.r(e),Rn.d(e,{area:function(){return Ke},areaLineRange:function(){return Je},areaSpline:function(){return Qe},areaSplineRange:function(){return tn},areaStep:function(){return en},bar:function(){return ln},bubble:function(){return fn},candlestick:function(){return hn},donut:function(){return on},gauge:function(){return sn},line:function(){return nn},pie:function(){return un},radar:function(){return cn},scatter:function(){return dn},spline:function(){return rn},step:function(){return an}});var n={};Rn.r(n),Rn.d(n,{selection:function(){return kn},subchart:function(){return Sn},zoom:function(){return En}});var s=Rn(4),O=Rn(2),u="object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis||"object"==typeof global&&null!==global&&global.Object===Object&&global||"object"==typeof self&&null!==self&&self.Object===Object&&self||Function("return this")();u.requestIdleCallback=u.requestIdleCallback||function(t){return setTimeout(t,1)},u.cancelIdleCallback=u.cancelIdleCallback||function(t){return clearTimeout(t)};var L=null==u?void 0:u.document,M={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step"},o={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine"},k={Area:[M.AREA,M.AREA_SPLINE,M.AREA_SPLINE_RANGE,M.AREA_LINE_RANGE,M.AREA_STEP],AreaRange:[M.AREA_SPLINE_RANGE,M.AREA_LINE_RANGE],Arc:[M.PIE,M.DONUT,M.GAUGE,M.RADAR],Line:[M.LINE,M.SPLINE,M.AREA,M.AREA_SPLINE,M.AREA_SPLINE_RANGE,M.AREA_LINE_RANGE,M.STEP,M.AREA_STEP],Step:[M.STEP,M.AREA_STEP],Spline:[M.SPLINE,M.AREA_SPLINE,M.AREA_SPLINE_RANGE]};function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=Rn(3),P={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",chartCircles:"bb-chart-circles",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",main:"bb-main",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",subchart:"bb-subchart",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",valueDown:"bb-value-down",valueUp:"bb-value-up",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridFocus:"bb-ygrid-focus",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_",TextOverlapping:"text-overlapping"};function r(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function a(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function z(t){return t||0===t}function N(t){return void 0===t}function I(t){return void 0!==t}function h(t){return"boolean"==typeof t}function l(t){return 10*Math.ceil(t/10)}function f(t){return Math.ceil(t)+.5}function S(t){return t[1]-t[0]}function d(t){return"object"==typeof t}function g(t){return N(t)||null===t||p(t)&&0===t.length||d(t)&&!(t instanceof Date)&&0===Object.keys(t).length||B(t)&&isNaN(t)}var F=function(t){return"function"==typeof t},p=function(t){return"string"==typeof t},B=function(t){return"number"==typeof t},X=function(t){return!g(t)},$=function(t){return Array.isArray(t)},Y=function(t){return t&&!(null!=t&&t.nodeType)&&d(t)&&!$(t)};function v(t,e,n){return I(t[e])?t[e]:n}function y(t,e){for(var n=F(t),i=arguments.length,r=Array(2<i?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];return n&&t.call.apply(t,[e].concat(r)),n}function x(t,i){function e(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];--r||i.apply.apply(i,[this].concat(e))}var r=0;"duration"in t?t.each(function(){return++r}).on("end",e):(++r,t.call(e))}function j(t){return p(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function _(n,t,i,e){var r,a;void 0===i&&(i=[-1,1]),void 0===e&&(e=!1),n&&p(t)&&(-1===t.indexOf("\n")?n.text(t):(r=[n.text(),t].map(function(t){return t.replace(/[\s\n]/g,"")}))[0]!==r[1]&&(t=t.split("\n"),a=e?t.length-1:1,n.html(""),t.forEach(function(t,e){n.append("tspan").attr("x",0).attr("dy",(0===e?i[0]*a:i[1])+"em").text(t)})))}function m(t){var e=t.getBBox(),n=e.x,i=e.y,t=e.width,e=e.height;return[{x:n,y:i+e},{x:n,y:i},{x:n+t,y:i},{x:n+t,y:i+e}]}function b(t,e){var n=t&&(null==(n=t.touches||t.sourceEvent&&t.sourceEvent.touches)?void 0:n[0]);return(0,O.pointer)(n||t,e).map(function(t){return isNaN(t)?0:t})}function w(t){var e,n=t.event,t=t.$el,t=t.subchart.main||t.main;return n&&"brush"===n.type?e=n.selection:t&&(e=t.select("."+P.brush).node())&&(e=(0,c.brushSelection)(e)),e}function T(t){return!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width")?t.rect=t.getBoundingClientRect():t.rect}function A(t){void 0===t&&(t=!0);var e=Math.random();return t?e+"":e}function E(t){t=w(t);return!t||t[0]===t[1]}function C(e,t){for(var n in void 0===e&&(e={}),$(t)&&t.forEach(function(t){return C(e,t)}),t)/^\d+$/.test(n)||n in e||(e[n]=t[n]);return e}function D(t){return t.charAt(0).toUpperCase()+t.slice(1)}var R=function(t){return[].slice.call(t)};function G(t){t=t?t.transform:null,t=t&&t.baseVal;return t&&t.numberOfItems?t.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function H(t){var e=t[0]instanceof Date,t=(e?t.map(Number):t).filter(function(t,e,n){return n.indexOf(t)===e});return e?t.map(function(t){return new Date(t)}):t}function V(t){return t&&t.length?t.reduce(function(t,e){return t.concat(e)}):[]}function U(n){for(var t=arguments.length,e=Array(1<t?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];if(!e.length||1===e.length&&!e[0])return n;var r=e.shift();return Y(n)&&Y(r)&&Object.keys(r).forEach(function(t){var e=r[t];Y(e)?(n[t]||(n[t]={}),n[t]=U(n[t],e)):n[t]=$(e)?e.concat():e}),U.apply(void 0,[n].concat(e))}function q(t,e){var n;return void 0===e&&(e=!0),t[0]instanceof Date?n=e?function(t,e){return t-e}:function(t,e){return e-t}:e&&!t.every(isNaN)?n=function(t,e){return t-e}:e||(n=function(t,e){return(e<t?-1:t<e&&1)||t===e&&0}),t.concat().sort(n)}function W(t,e){e=e.filter(function(t){return X(t)});return e.length?B(e[0])?e=Math[t].apply(Math,e):e[0]instanceof Date&&(e=q(e,"min"===t)[0]):e=void 0,e}function Z(t,e,n){void 0===n&&(n=1);for(var i=[],r=0|Math.max(0,Math.ceil((e-t)/n)),a=t;a<r;a++)i.push(t+a*n);return i}var K={mouse:function(){function r(){return{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}}try{return new MouseEvent("t"),function(t,e,n){void 0===n&&(n=r()),t.dispatchEvent(new MouseEvent(e,n))}}catch(t){return function(t,e,n){void 0===n&&(n=r());var i=L.createEvent("MouseEvent");i.initMouseEvent(e,n.bubbles,n.cancelable,u,0,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}}(),touch:function(t,e,n){n=new Touch(U({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[n],targetTouches:[],changedTouches:[n]}))}};function J(t,e){var n,i=t;for(n in e)i=i.replace(new RegExp("{="+n+"}","g"),e[n]);return i}function Q(t){var e,n;return t instanceof Date?n=t:p(t)?(e=this.config,n=this.format.dataTime(e.data_xFormat)(t)):B(t)&&!isNaN(t)&&(n=new Date(+t)),n&&!isNaN(+n)||console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),n}function tt(){return!L.hidden}function et(t){var e,n=t,t=n.config,i="";if(g(t.data_type||t.data_types)&&!n[o.LINE])i="line";else for(var r in o){var a=M[r];if(n.hasType(a)&&!n[o[r]]){i=a;break}}i&&function(t,e){var n,i="[billboard.js]";null!=(n=u.console)&&n.error&&(console.error(" "+i+" "+t,"background:red;color:white;display:block;font-size:15px",e),console.info("%c","font-size:15px","https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality"));throw Error(i+" "+t.replace(/\%c([a-z-]+)/i,"'$1' ")+" "+e)}("Please, make sure if %c"+i.split(e=void 0===e?"-":e).map(function(t,e){return e?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}).join(""),"module has been imported and specified correctly.")}var nt={element:function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null}},state:function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}},it=function(){function t(){var e=this;Object.keys(nt).forEach(function(t){e[t]=new nt[t]})}return t.prototype.getStore=function(t){return this[t]},t}(),rt={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},at={data_x:void 0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},ot={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},st={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},ut={legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1},ct={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},lt={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null};function ft(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function ht(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?ft(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var dt=function(){function t(){return function(){for(var i=function(t){if(Y(t)&&t.constructor){var e,n=new t.constructor;for(e in t)n[e]=i(t[e]);return n}return t},t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map(function(t){return i(t)}).reduce(function(t,e){return a(a({},t),e)})}(rt,at,ot,st,ut,ct,lt,t.data)}return t.setOptions=function(t){this.data=t.reduce(function(t,e){return ht(ht({},t),e)},this.data)},t}();dt.data={};var gt="$baseLength",pt="__colorPattern__",vt="$dataMinMax",yt="$dataTotalSum",t="$totalPerIndex",xt="legendItemTextBox",_t="$radarPoints",mt="setOverOut",bt="callOverOutForTouch",wt="textRect",Tt=function(){function t(){this.cache={}}var e=t.prototype;return e.add=function(t,e,n){return this.cache[t]=(n=void 0===n?!1:n)?this.cloneTarget(e):e,this.cache[t]},e.remove=function(t){var e=this;R(t).forEach(function(t){return delete e.cache[t]})},e.get=function(t,e){if(e=void 0===e?!1:e){for(var n,i=[],r=0;n=t[r];r++)n in this.cache&&i.push(this.cloneTarget(this.cache[n]));return i}e=this.cache[t];return z(e)?e:null},e.reset=function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)},e.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},t}(),At=u.setTimeout,Mt=u.clearTimeout;function kt(){function t(t,r){var a;!function t(){for(var e,n=0,i=0;e=o[i];i++)if(!0===e||null!=e.empty&&e.empty())n++;else try{e.transition()}catch(t){n++}a&&Mt(a),n===o.length?null!=r&&r():a=At(t,50)}()}var o=[];return t.add=function(t){$(t)?o=o.concat(t):o.push(t)},t}var St=Rn(5),Et={convertData:function(n,t){var i;if(n.bindto?(i={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(t){var e="data_"+t;e in n&&(i[t]=n[e])})):i=n,i.url&&t)this.convertUrlToData(i.url,i.mimeType,i.headers,i.keys,t);else if(i.json)i=this.convertJsonToData(i.json,i.keys);else if(i.rows)i=this.convertRowsToData(i.rows);else if(i.columns)i=this.convertColumnsToData(i.columns);else if(n.bindto)throw Error("url or json or rows or columns is required.");return $(i)&&i},convertUrlToData:function(e,n,i,r,a){var o=this;void 0===n&&(n="csv");var s=new XMLHttpRequest;s.open("GET",e),i&&Object.keys(i).forEach(function(t){s.setRequestHeader(t,i[t])}),s.onreadystatechange=function(){if(4===s.readyState){if(200!==s.status)throw new Error(e+": Something went wrong loading!");var t=s.responseText;t&&a.call(o,o["convert"+D(n)+"ToData"]("json"===n?JSON.parse(t):t,r))}},s.send()},convertCsvTsvToData:function(t,e){var n,i=t.rows(e);return 1===i.length?(n=[{}],i[0].forEach(function(t){n[0][t]=null})):n=t.parse(e),n},convertCsvToData:function(t){return this.convertCsvTsvToData({rows:St.csvParseRows,parse:St.csvParse},t)},convertTsvToData:function(t){return this.convertCsvTsvToData({rows:St.tsvParseRows,parse:St.tsvParse},t)},convertJsonToData:function(n,t){var i,r=this,e=this.config,a=[],o=$(n)?((o=t||e.data_keys).x?(i=o.value.concat(o.x),e.data_x=o.x):i=o.value,a.push(i),n.forEach(function(e){var t=i.map(function(t){t=r.findValueInJson(e,t);return t=N(t)?null:t});a.push(t)}),this.convertRowsToData(a)):(Object.keys(n).forEach(function(t){var e=n[t].concat();e.unshift(t),a.push(e)}),this.convertColumnsToData(a));return o},findValueInJson:function(t,e){if(void 0!==t[e])return t[e];var e=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),n=t;return e.some(function(t){return!(n=n&&t in n?n[t]:void 0)}),n},convertRowsToData:function(t){var r=t[0],e=[];return t.forEach(function(t,n){var i;0<n&&(i={},t.forEach(function(t,e){if(N(t))throw new Error("Source data is missing a component at ("+n+", "+e+")!");i[r[e]]=t}),e.push(i))}),e},convertColumnsToData:function(t){var r=[];return t.forEach(function(t,n){var i=t[0];t.forEach(function(t,e){if(0<e){if(N(r[e-1])&&(r[e-1]={}),N(t))throw new Error("Source data is missing a component at ("+n+", "+e+")!");r[e-1][i]=t}})}),r},convertDataToTargets:function(t,i){var r=this,h=this,e=h.axis,d=h.config,g=h.state,n=!1,a=!1,p=!1;e&&(n=e.isCategorized(),a=e.isTimeSeries(),p=e.isCustomX());var o,s=Object.keys(t[0]||{}),e=s.length?s.filter(h.isNotX,h):[],u=s.length?s.filter(h.isX,h):[];e.forEach(function(n){var e=r.getXKey(n);p||a?0<=u.indexOf(e)?o=(i&&h.data.xs[n]||[]).concat(t.map(function(t){return t[e]}).filter(z).map(function(t,e){return h.generateTargetX(t,n,e)})):d.data_x?o=r.getOtherTargetXs():X(d.data_xs)&&(o=h.getXValuesOfXKey(e,h.data.targets)):o=t.map(function(t,e){return e}),o&&(r.data.xs[n]=o)}),e.forEach(function(t){if(!r.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')});e=e.map(function(r,a){var o=d.data_idConverter.bind(h.api)(r),s=h.getXKey(r),u=p&&n,c=u&&t.map(function(t){return t.x}).every(function(t){return-1<d.axis_x_categories.indexOf(t)}),l=t.__append__,f=null===s&&l?h.api.data.values(r).length:0;return{id:o,id_org:r,values:t.map(function(t,e){var n,i=t[s],t=null===(t=t[r])||isNaN(t)||Y(t)?$(t)||Y(t)?t:null:+t;return!u&&!g.hasRadar||0!==a||N(i)?n=h.generateTargetX(i,r,f+e):(c||0!==a||0!==e||l||(d.axis_x_categories=[]),-1===(n=d.axis_x_categories.indexOf(i))&&(n=d.axis_x_categories.length,d.axis_x_categories.push(i))),{x:n=N(t)||h.data.xs[r].length<=e?void 0:n,value:t,id:o}}).filter(function(t){return I(t.x)})}});return e.forEach(function(t){d.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),t.values.forEach(function(t,e){return t.index=e}),h.data.xs[t.id].sort(function(t,e){return t-e})}),g.hasNegativeValue=h.hasNegativeValueInTargets(e),g.hasPositiveValue=h.hasPositiveValueInTargets(e),d.data_type&&h.setTargetType(h.mapToIds(e).filter(function(t){return!(t in d.data_types)}),d.data_type),e.forEach(function(t){return h.cache.add(t.id_org,t,!0)}),e}},Ct={isX:function(t){var e,n,i,r=this.config,a=r.data_x&&t===r.data_x,t=X(r.data_xs)&&(e=r.data_xs,n=t,i=!1,Object.keys(e).forEach(function(t){return e[t]===n&&(i=!0)}),i);return a||t},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!(!t.data_stack_normalize||!t.data_groups.length)},isGrouped:function(e){var t=this.config.data_groups;return e?t.some(function(t){return 0<=t.indexOf(e)&&1<t.length}):0<t.length},getXKey:function(t){var e=this.config;return e.data_x||(X(e.data_xs)?e.data_xs[t]:null)},getXValuesOfXKey:function(e,t){var n,i=this;return(t&&X(t)?i.mapToIds(t):[]).forEach(function(t){i.getXKey(t)===e&&(n=i.data.xs[t])}),n},getIndexByX:function(t,e){return e?e.indexOf(p(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){return t in this.data.xs&&this.data.xs[t]&&z(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(e){var n=this.config;Object.keys(e).forEach(function(t){n.data_xs[t]=e[t]})},isMultipleX:function(){return X(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e=this.config;return t&&(e=e.data_names[t.id],t.name=void 0!==e?e:t.id),t},getAllValuesOnIndex:function(e,t){void 0===t&&(t=!1);var n=this,i=n.filterTargetsToShow(n.data.targets).map(function(t){return n.addName(n.getValueOnIndex(t.values,e))});return i=t?i.filter(function(t){return t&&"value"in t&&z(t.value)}):i},getValueOnIndex:function(t,e){t=t.filter(function(t){return t.index===e});return t.length?t[0]:null},updateTargetX:function(t,i){var r=this;t.forEach(function(n){n.values.forEach(function(t,e){t.x=r.generateTargetX(i[e],n.id,e)}),r.data.xs[n.id]=i})},updateTargetXs:function(t,e){var n=this;t.forEach(function(t){e[t.id]&&n.updateTargetX([t],e[t.id])})},generateTargetX:function(t,e,n){var i=this.axis,r=(null==i||!i.isCategorized())&&t||n;return null!=i&&i.isTimeSeries()?r=Q.bind(this)(t||this.getXValue(e,n)):null==i||!i.isCustomX()||null!=i&&i.isCategorized()||(r=z(t)?+t:this.getXValue(e,n)),r},updateXs:function(t){t.length&&(this.axis.xs=t.map(function(t){return t.x}))},getPrevX:function(t){t=this.axis.xs[t-1];return I(t)?t:null},getNextX:function(t){t=this.axis.xs[t+1];return I(t)?t:null},getBaseValue:function(t){var e=this.state.hasAxis,n=t.value;return n&&e&&(this.isAreaRangeType(t)?n=this.getRangedData(t,"mid"):this.isBubbleZType(t)&&(n=this.getBubbleZData(n,"y"))),n},getMinMaxValue:function(t){var n,i,r=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return t.values})).forEach(function(t,e){t=t.map(r).filter(B);n=Math.min.apply(Math,[e?n:1/0].concat(t)),i=Math.max.apply(Math,[e?i:-1/0].concat(t))}),{min:n,max:i}},getMinMaxData:function(){var t,n,i,r,a=this,e=vt,o=a.cache.get(e);return o||(t=a.data.targets.map(function(t){return t.values}),n=a.getMinMaxValue(t),i=[],r=[],t.forEach(function(t){var e=a.getFilteredDataByValue(t,n.min),t=a.getFilteredDataByValue(t,n.max);e.length&&(i=i.concat(e)),t.length&&(r=r.concat(t))}),a.cache.add(e,o={min:i,max:r})),o},getTotalPerIndex:function(){var n=this.cache.get(t);return this.isStackNormalized()&&!n&&(n=[],this.data.targets.forEach(function(t){t.values.forEach(function(t,e){n[e]||(n[e]=0),n[e]+=B(t.value)?t.value:0})})),n},getTotalDataSum:function(t){var e,n=yt,i=this.cache.get(n);return B(i)||(e=V(this.data.targets.map(function(t){return t.values})).map(function(t){return t.value}).reduce(function(t,e){return t+e}),this.cache.add(n,i=e)),t&&(i-=this.getHiddenTotalDataSum()),i},getHiddenTotalDataSum:function(){var t=this.api,e=this.state.hiddenTargetIds,n=0;return n=e.length?t.data.values.bind(t)(e).reduce(function(t,e){return t+e}):n},getFilteredDataByValue:function(t,e){var n=this;return t.filter(function(t){return n.getBaseValue(t)===e})},getMaxDataCount:function(){return Math.max.apply(Math,this.data.targets.map(function(t){return t.values.length}))},getMaxDataCountTarget:function(){var t=this.filterTargetsToShow()||[],e=t.length;return 1<e?t=q(H(t=t.map(function(t){return t.values}).reduce(function(t,e){return t.concat(e)}).map(function(t){return t.x}))).map(function(t,e){return{x:t,index:e}}):e&&(t=t[0].values),t},mapToIds:function(t){return t.map(function(t){return t.id})},mapToTargetIds:function(t){return t?$(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var n,i=this.mapToIds(t),r=0;n=i[r];r++)if(n===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return(t||e.data.targets).filter(function(t){return e.isTargetToShow(t.id)})},mapTargetsToUniqueXs:function(t){var e=this.axis,n=[];return null!=t&&t.length&&(n=H(V(t.map(function(t){return t.values.map(function(t){return+t.x})}))),n=null!=e&&e.isTimeSeries()?n.map(function(t){return new Date(+t)}):n.map(Number)),q(n)},addTargetIds:function(e,t){var n=this.state;($(t)?t:[t]).forEach(function(t){n[e].indexOf(t)<0&&n[e].push(t)})},removeTargetIds:function(e,t){var n=this.state;($(t)?t:[t]).forEach(function(t){t=n[e].indexOf(t);0<=t&&n[e].splice(t,1)})},addHiddenTargetIds:function(t){this.addTargetIds("hiddenTargetIds",t)},removeHiddenTargetIds:function(t){this.removeTargetIds("hiddenTargetIds",t)},addHiddenLegendIds:function(t){this.addTargetIds("hiddenLegendIds",t)},removeHiddenLegendIds:function(t){this.removeTargetIds("hiddenLegendIds",t)},getValuesAsIdKeyed:function(t){var i=this,r=i.state.hasAxis,e={},a=i.isMultipleX(),o=a?i.mapTargetsToUniqueXs(t).map(function(t){return p(t)?t:+t}):null;return t.forEach(function(t){var n=[];t.values.filter(function(t){t=t.value;return z(t)||null===t}).forEach(function(t){var e=t.value;null!==e&&i.isCandlestickType(t)&&(e=$(e)?e.slice(0,4):[e.open,e.high,e.low,e.close]),$(e)?n.push.apply(n,e):Y(e)&&"high"in e?n.push.apply(n,Object.values(e)):i.isBubbleZType(t)?n.push(r&&i.getBubbleZData(e,"y")):a?n[i.getIndexByX(t.x,o)]=e:n.push(e)}),e[t.id]=n}),e},checkValueInTargets:function(t,e){for(var n=Object.keys(t),i=0;i<n.length;i++)for(var r=t[n[i]].values,a=0;a<r.length;a++)if(e(r[a].value))return!0;return!1},hasMultiTargets:function(){return 1<this.filterTargetsToShow().length},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return t<0})},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return 0<t})},orderTargets:function(t){var e=[].concat(t),t=this.getSortCompareFn();return t&&e.sort(t),e},getSortCompareFn:function(n){void 0===n&&(n=!1);var i,t,e=this.config.data_order,r=/asc/i.test(e),a=/desc/i.test(e);return r||a?(i=function(t,e){return t+Math.abs(e.value)},t=function(t,e){t="values"in t?t.values.reduce(i,0):t.value,e="values"in e?e.values.reduce(i,0):e.value;return n?r?t-e:e-t:r?e-t:t-e}):F(e)&&(t=e.bind(this.api)),t||null},filterByX:function(t,e){return V(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},filterRemoveNull:function(t){var e=this;return t.filter(function(t){return z(e.getBaseValue(t))})},filterByXDomain:function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},hasDataLabel:function(){var t=this.config.data_labels;return h(t)&&t||d(t)&&X(t)},getDataIndexFromEvent:function(t){var e=this.config,n=this.state,i=n.inputType,r=n.eventReceiver,n=r.coords,r=r.rect,e=e.axis_rotated,t="touch"===i&&t.changedTouches?t.changedTouches[0]:t;return function t(e,n,i,r,a){if(r<i)return-1;var o=Math.floor((i+r)/2),s=e[o],u=s.x,s=s.w,s=void 0===s?0:s;return a&&(u=e[o].y,s=e[o].h),u<=n&&n<=u+s?o:n<u?t(e,n,i,o-1,a):t(e,n,o+1,r,a)}(n,e?t.clientY-r.top:t.clientX-r.left,0,n.length-1,e)},getDataLabelLength:function(t,e,n){var i=this,r=[0,0];return i.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i.dataLabelFormat(t.id)(t)}).each(function(t,e){r[e]=1.3*this.getBoundingClientRect()[n]}).remove(),r},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){for(var n=t[e].x,i=[],r=e-1;0<=r&&n===t[r].x;r--)i.push(t[r]);for(r=e;r<t.length&&n===t[r].x;r++)i.push(t[r]);return i},findClosestFromTargets:function(t,e){var n=this,t=t.map(function(t){return n.findClosest(t.values,e)});return n.findClosest(t,e)},findClosest:function(t,n){var i,r=this,e=r.config,a=r.$el.main,t=t.filter(function(t){return t&&z(t.value)}),o=e.point_sensitivity;return t.filter(function(t){return r.isBarType(t.id)||r.isCandlestickType(t.id)}).forEach(function(t){var e=r.isBarType(t.id)?"."+P.chartBar+"."+P.target+r.getTargetSelectorSuffix(t.id)+" ."+P.bar+"-"+t.index:"."+P.chartCandlestick+"."+P.target+r.getTargetSelectorSuffix(t.id)+" ."+P.candlestick+"-"+t.index+" path";!i&&r.isWithinBar(a.select(e).node())&&(i=t)}),t.filter(function(t){return!r.isBarType(t.id)&&!r.isCandlestickType(t.id)}).forEach(function(t){var e=r.dist(t,n);e<o&&(o=e,i=t)}),i},dist:function(t,e){var n=this.config.axis_rotated,i=this.scale,r=n?1:0,a=n?0:1,n=this.circleY(t,t.index),t=(i.zoom||i.x)(t.x);return Math.sqrt(Math.pow(t-e[r],2)+Math.pow(n-e[a],2))},convertValuesToStep:function(t){var e=this.axis,n=this.config.line_step_type,i=!!e&&e.isCategorized(),r=$(t)?t.concat():[t];if(!i&&!/step\-(after|before)/.test(n))return t;var a=r[0],o=r[r.length-1],e=a.id,t=a.x;return r.unshift({x:--t,value:a.value,id:e}),i&&"step-after"===n&&r.unshift({x:--t,value:a.value,id:e}),t=o.x,r.push({x:++t,value:o.value,id:e}),i&&"step-before"===n&&r.push({x:++t,value:o.value,id:e}),r},convertValuesToRange:function(t){var t=$(t)?t.concat():[t],i=[];return t.forEach(function(t){var e=t.x,n=t.id;i.push({x:e,id:n,value:t.value[0]}),i.push({x:e,id:n,value:t.value[2]})}),i},updateDataAttributes:function(t,e){var n=this.config["data_"+t];return N(e)||(Object.keys(e).forEach(function(t){n[t]=e[t]}),this.redraw({withLegend:!0})),n},getRangedData:function(t,e,n){void 0===e&&(e=""),void 0===n&&(n="areaRange");t=null==t?void 0:t.value;if($(t)){n={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[n].indexOf(e);return 0<=n&&t?t[n]:void 0}return t&&t[e]},getRatio:function(t,e,n){void 0===n&&(n=!1);var i,r,a=this,o=a.config,s=a.state,u=a.api,c=0;return e&&u.data.shown().length&&(c=e.ratio||e.value,"arc"===t?c=a.pie.padAngle()()?e.value/a.getTotalDataSum(!0):(i=o.gauge_fullCircle?a.getArcLength():-2*a.getStartAngle(),i=a.hasType("gauge")?i:2*Math.PI,(e.endAngle-e.startAngle)/i):"index"===t?(i=u.data.values.bind(u),u=this.getTotalPerIndex(),!s.hiddenTargetIds.length||(r=i(s.hiddenTargetIds,!1)).length&&(r=r.reduce(function(t,n){return t.map(function(t,e){return(B(t)?t:0)+n[e]})}),u=u.map(function(t,e){return t-r[e]})),e.ratio=B(e.value)&&u&&0<u[e.index]?e.value/u[e.index]:0,c=e.ratio):"radar"===t?c=parseFloat(Math.max(e.value,0)+"")/s.current.dataMax*o.radar_size_ratio:"bar"===t&&(c=0===(a=a.getYScaleById.bind(a)(e.id).domain().reduce(function(t,e){return e-t}))?0:Math.abs(e.value)/a)),n&&c?100*c:c},updateDataIndexByX:function(t){var i=t.reduce(function(t,e,n){return t[+e.x]=n,t},{});this.data.targets.forEach(function(t){t.values.forEach(function(t,e){var n=i[+t.x];t.index=n=void 0===n?e:n})})},isBubbleZType:function(t){return this.isBubbleType(t)&&(Y(t.value)&&("z"in t.value||"y"in t.value)||$(t.value)&&2===t.value.length)},isBarRangeType:function(t){var e=t.value;return this.isBarType(t)&&$(e)&&2===e.length&&e.every(function(t){return B(t)})},getDataById:function(t){var e=this.cache.get(t)||this.api.data(t);return null!=(t=null==e?void 0:e[0])?t:e}},Dt={load:function(t,n){var i=this,r=n.append,a=t;a&&(n.filter&&(a=a.filter(n.filter)),(n.type||n.types)&&a.forEach(function(t){var e=(null==(e=n.types)?void 0:e[t.id])||n.type;i.setTargetType(t.id,e)}),i.data.targets.forEach(function(t){for(var e=0;e<a.length;e++)if(t.id===a[e].id){t.values=r?t.values.concat(a[e].values):a[e].values,a.splice(e,1);break}}),i.data.targets=i.data.targets.concat(a)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.updateTypesElements(),null!=(t=n.done)&&t.call(i.api)},loadFromArgs:function(e){var t,n=this;n.config&&(n.cache.reset(),t=e.data||n.convertData(e,function(t){return n.load(n.convertDataToTargets(t),e)}),e.append&&(t.__append__=!0),t&&n.load(n.convertDataToTargets(t),e))},unload:function(t,e){var n=this,i=n.state,r=n.$el,a=n.$T,e=e,t=t;n.cache.reset(),e=e||function(){},(t=t.filter(function(t){return n.hasTarget(n.data.targets,t)}))&&0!==t.length?(a(r.svg.selectAll(t.map(function(t){return n.selectorTarget(t)}))).style("opacity","0").remove().call(x,e),t.forEach(function(e){i.withoutFadeIn[e]=!1,r.legend&&r.legend.selectAll("."+P.legendItem+n.getTargetSelectorSuffix(e)).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})}),n.updateTypesElements()):e()}},Rt=Rn(7),Ot={selectRectForSingle:function(n,i,r){var a=this,t=a.config,e=a.$el.main,o=t.data_selection_enabled,s=t.data_selection_grouped,u=t.data_selection_isselectable,c=t.tooltip_grouped,t=a.getAllValuesOnIndex(r);c&&(a.showTooltip(t,n),null!=a.showGridFocus&&a.showGridFocus(t),!o||s)||e.selectAll("."+P.shape+"-"+r).each(function(){(0,O.select)(this).classed(P.EXPANDED,!0),o&&i.style("cursor",s?"pointer":null),c||(null!=a.hideGridFocus&&a.hideGridFocus(),a.hideTooltip(),s||a.setExpand(r))}).filter(function(t){return a.isWithinShape(this,t)}).call(function(t){var e=t.data();o&&(s||null!=u&&u.bind(a.api)(e))&&i.style("cursor","pointer"),c||(a.showTooltip(e,n),null!=a.showGridFocus&&a.showGridFocus(e),null!=a.unexpandCircles&&a.unexpandCircles(),t.each(function(t){return a.setExpand(r,t.id)}))})},setExpand:function(t,e,n){var i=this.config;this.$el.circle&&i.point_focus_expand_enabled&&this.expandCircles(t,e,n),this.expandBarTypeShapes(!0,t,e,n)},expandBarTypeShapes:function(e,n,i,r){void 0===e&&(e=!0);var a=this;["bar","candlestick"].filter(function(t){return a.$el[t]}).forEach(function(t){r&&a.$el[t].classed(P.EXPANDED,!1),a.getShapeByIndex(t,n,i).classed(P.EXPANDED,e)})},setOverOut:function(t,e){var n,i,r=this,a=r.config,o=r.state.hasRadar,s=r.$el.main,u=Y(e);!u&&-1===e||(n=a[t?"data_onover":"data_onout"].bind(r.api),a.color_onover&&r.setOverColor(t,e,u),u?n(e,s.select("."+P.arc+r.getTargetSelectorSuffix(e.id)).node()):a.tooltip_grouped?(t&&(a.point_focus_only&&o?r.showCircleFocus(r.getAllValuesOnIndex(e,!0)):r.setExpand(e,null,!0)),r.isMultipleX()||s.selectAll("."+P.shape+"-"+e).each(function(t){n(t,this)})):(i=r.cache.get(mt)||[],(e=s.selectAll("."+P.shape+"-"+e).filter(function(t){return r.isWithinShape(this,t)})).each(function(t){var e=this;0!==i.length&&!i.every(function(t){return t!==e})||(n(t,this),i.push(this))}),0<i.length&&e.empty()&&(n=a.data_onout.bind(r.api),i.forEach(function(t){return n((0,O.select)(t).datum(),t)}),i=[]),r.cache.add(mt,i)))},callOverOutForTouch:function(t){var e=this.cache.get(bt);(Y(t)&&e?t.id!==e.id:t!==e)&&((e||B(e))&&this.setOverOut(!1,e),(t||B(t))&&this.setOverOut(!0,t),this.cache.add(bt,t))},getDraggableSelection:function(){var e=this,t=e.config,n=e.state;return t.interaction_enabled&&t.data_selection_draggable&&e.drag?(0,Rt.drag)().on("drag",function(t){n.event=t,e.drag(b(t,this))}).on("start",function(t){n.event=t,e.dragstart(b(t,this))}).on("end",function(t){n.event=t,e.dragend()}):function(){}},dispatchEvent:function(t,n,e){var i=this.config,r=this.state,a=r.eventReceiver,o=r.hasAxis,s=r.hasRadar,u=this.$el,c=u.eventRect,l=u.arcs,f=u.radar,r=this.isMultipleX(),u=(s?f.axes.select("."+P.axis+"-"+n+" text"):c||l.selectAll("."+P.target+" path").filter(function(t,e){return e===n})).node(),f=u.getBoundingClientRect(),c=f.width,l=f.left,f=f.top;!o||s||r||(c=(a=a.coords[n]).w,l+=a.x,f+=a.y);c=l+(e?e[0]:0)+(r||i.axis_rotated?0:c/2),e=f+(e?e[1]:0);K[/^(mouse|click)/.test(t)?"mouse":"touch"](u,t,{screenX:c,screenY:e,clientX:c,clientY:e})},setDragStatus:function(t){this.state.dragging=t},unbindZoomEvent:function(){var t=this.$el,e=t.eventRect,t=t.zoomResetBtn;null!=e&&e.on(".zoom wheel.zoom .drag",null),null!=t&&t.on("click",null).style("display","none")},unbindAllEvents:function(){var t=this.$el,e=t.arcs,n=t.eventRect,i=t.legend,r=t.region,a=t.svg,t=this.brush;[a,n,null==r?void 0:r.list,null==t?void 0:t.getSelection(),null==e?void 0:e.selectAll("path"),null==i?void 0:i.selectAll("g")].forEach(function(t){return null==t?void 0:t.on("wheel click mouseover mousemove mouseout touchstart touchmove touchend touchstart.eventRect touchmove.eventRect touchend.eventRect .brush .drag .zoom wheel.zoom dblclick.zoom",null)}),null!=this.unbindZoomEvent&&this.unbindZoomEvent()}},Lt={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},getClass:function(e,n){var i=this,r=/s$/.test(e),a=/^(area|arc|line)s?$/.test(e),o=r?"id":"index";return function(t){t=t.data||t;return((n?i.generateClass(P[r?"shapes":"shape"],t[o]):"")+i.generateClass(P[e],t[a?"id":o])).trim()}},getChartClass:function(e){var n=this;return function(t){return P["chart"+e]+n.classTarget((t.data||t).id)}},generateExtraLineClass:function(){var n=this.config.line_classes||[],i=[];return function(t){var e,t=t.id||(null==(e=t.data)?void 0:e.id)||t;return i.indexOf(t)<0&&i.push(t),n[i.indexOf(t)%n.length]}},classRegion:function(t,e){return this.generateClass(P.region,e)+" "+("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],n="";return e&&(n=" "+P.target+"-"+e),this.generateClass(P.target,t)+n},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(0<=this.state.focusedTargetIds.indexOf(t.id)?P.focused:"")},classDefocused:function(t){return" "+(0<=this.state.defocusedTargetIds.indexOf(t.id)?P.defocused:"")},getTargetSelectorSuffix:function(t){return(t||0===t?"-"+t:"").replace(/([\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"-")},selectorTarget:function(t,e){e=e||"",t=this.getTargetSelectorSuffix(t);return e+"."+(P.target+t)+", "+e+"."+(P.circles+t)},selectorTargets:function(t,e){var n=this,t=t||[];return t.length?t.map(function(t){return n.selectorTarget(t,e)}):null},selectorLegend:function(t){return"."+(P.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return null!=t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null}},Pt=Rn(6),zt=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Nt={getColorFromCss:function(){var t,e,n=pt,i=L.body,r=i[n];return r||((t=L.createElement("span")).className=P.colorPattern,t.style.display="none",i.appendChild(t),e=u.getComputedStyle(t).backgroundImage,t.parentNode.removeChild(t),-1<e.indexOf(";")&&(r=e.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return t.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),i[n]=r)),r},generateColor:function(){var i,t,r=this,a=r.config,o=a.data_colors,s=a.data_color,u=[],c=X(a.color_pattern)?a.color_pattern:(0,Pt.scaleOrdinal)(r.getColorFromCss()||zt).range(),l=c;return F(a.color_tiles)&&(i=a.color_tiles.bind(r.api)(),c=(t=c.map(function(t,e){var n=t.replace(/[#\(\)\s,]/g,""),n=r.state.datetimeId+"-pattern-"+n+"-"+e;return function(t,e,n){t=(0,O.select)(t.cloneNode(!0));return t.attr("id",n).insert("rect",":first-child").attr("width",t.attr("width")).attr("height",t.attr("height")).style("fill",e),{id:n,node:t.node()}}(i[e%i.length],t,n)})).map(function(t){return"url(#"+t.id+")"}),r.patterns=t),function(t){var e,n=t.id||(null==(i=t.data)?void 0:i.id)||t,i=r.isTypeOf(n,["line","spline","step"])||!a.data_types[n];return F(o[n])?e=o[n].bind(r.api)(t):o[n]?e=o[n]:(u.indexOf(n)<0&&u.push(n),e=i?l[u.indexOf(n)%l.length]:c[u.indexOf(n)%c.length],o[n]=e),F(s)?s.bind(r.api)(e,t):e}},generateLevelColor:function(){var t=this.config,a=t.color_pattern,t=t.color_threshold,o="value"===t.unit,s=t.max||100,u=t.values&&t.values.length?t.values:[];return X(t)?function(t){for(var e=o?t:100*t/s,n=a[a.length-1],i=0,r=u.length;i<r;i++)if(e<=u[i]){n=a[i];break}return n}:null},generateDataLabelBackgroundColorFilter:function(){var n=this,i=n.$el,t=n.config,r=n.state,a=t.data_labels_backgroundColors;a&&(t=[],p(a)?t.push(""):Y(a)&&(t=Object.keys(a)),t.forEach(function(t){var e=r.datetimeId+"-labels-bg"+n.getTargetSelectorSuffix(t);i.defs.append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id",e).html('<feFlood flood-color="'+(""===t?a:a[t])+'" /><feComposite in="SourceGraphic"/>')}))},setOverColor:function(t,e){var n=this,i=n.config,r=n.$el.main,a=i.color_onover,t=t?a:n.color;Y(t)?t=function(t){t=t.id;return t in a?a[t]:n.color(t)}:p(t)?t=function(){return a}:F(a)&&(t=t.bind(n.api)),r.selectAll(Y(e)?"."+P.arc+n.getTargetSelectorSuffix(e.id):"."+P.shape+"-"+e).style("fill",t)}},It={getYDomainMinMax:function(t,e){var a,o=this.axis,n=this.config,s="min"===e,n=n.data_groups,u=this.mapToIds(t),c=this.getValuesAsIdKeyed(t);return 0<n.length&&(a=this["has"+(s?"Negative":"Positive")+"ValueInTargets"](t),n.forEach(function(t){var i,r,t=t.filter(function(t){return 0<=u.indexOf(t)});t.length&&(i=t[0],r=o.getId(i),a&&c[i]&&(c[i]=c[i].map(function(t){return(s?t<0:0<t)?t:0})),t.filter(function(t,e){return 0<e}).forEach(function(t){var n;c[t]&&(n=o.getId(t),c[t].forEach(function(t,e){t=+t;n!==r||a&&(s?0<t:t<0)||(c[i][e]+=t)}))}))})),W(e,Object.keys(c).map(function(t){return W(e,c[t])}))},isHiddenTargetWithYDomain:function(e){var n=this;return n.state.hiddenTargetIds.some(function(t){return n.axis.getId(t)===e})},getYDomain:function(t,e,n){var i=this,r=i.axis,a=i.config,o=i.scale,s="axis_"+e;if(i.isStackNormalized())return[0,100];var u=(null==o?void 0:o[e])&&"log"===o[e].type,c=t.filter(function(t){return r.getId(t.id)===e}),l=n?i.filterByXDomain(c,n):c;if(0===l.length)return i.isHiddenTargetWithYDomain(e)?o[e].domain():"y2"===e?o.y.domain():i.getYDomain(t,"y2",n);var f=a[s+"_min"],h=a[s+"_max"],d=a[s+"_center"],g=a[s+"_inverted"],p=i.hasDataLabel()&&a.axis_rotated,v=i.hasDataLabel()&&!a.axis_rotated,y=i.getYDomainMinMax(l,"min"),x=i.getYDomainMinMax(l,"max"),c=[M.BAR,M.BUBBLE,M.SCATTER].concat(k.Line).some(function(t){var e=-1<t.indexOf("area")?"area":t;return i.hasType(t,l)&&a[e+"_zerobased"]});y=z(f)?f:!z(h)||y<h?y:h-10,x=z(h)?h:!z(f)||f<x?x:f+10,(y=isNaN(y)?0:y)===(x=isNaN(x)?y:x)&&(y<0?x=0:y=0);t=0<=y&&0<=x,n=y<=0&&x<=0;(c=z(f)&&t||z(h)&&n?!1:c)&&(t&&(y=0),n&&(x=0));var _,m,b,w=Math.abs(x-y),T={top:.1*w,bottom:.1*w};I(d)&&(x=d+(h=Math.max(Math.abs(y),Math.abs(x))),y=d-h),p?(_=S(o.y.range()),m=i.getDataLabelLength(y,x,"width").map(function(t){return t/_}),["bottom","top"].forEach(function(t,e){T[t]+=w*(m[e]/(1-m[0]-m[1]))})):v&&(b=i.getDataLabelLength(y,x,"height"),["bottom","top"].forEach(function(t,e){T[t]+=i.convertPixelToScale("y",b[e],w)}));var T=i.getResettedPadding(T),A=a[s+"_padding"];X(A)&&["bottom","top"].forEach(function(t){T[t]=r.getPadding(A,t,T[t],w)}),c&&(t&&(T.bottom=y),n&&(T.top=-x));x=u?[y,x].map(function(t){return t<0?0:t}):[y-T.bottom,x+T.top];return g?x.reverse():x},getXDomainMinMax:function(t,e){var n,i=this.config["axis_x_"+e],r=W(e,t.map(function(t){return W(e,t.values.map(function(t){return t.x}))})),t=Y(i)?i.value:i,t=I(t)&&null!=(n=this.axis)&&n.isTimeSeries()?Q.bind(this)(t):t;return Y(i)&&i.fit&&("min"===e&&t<r||"max"===e&&r<t)&&(t=void 0),I(t)?t:r},getXDomainPadding:function(t,e){var n,i=this.axis,r=this.config.axis_x_padding,a=i.isTimeSeries()&&e,o=S(t);n=i.isCategorized()||a?0:this.hasType("bar")?1<(u=this.getMaxDataCount())?o/(u-1)/2:.5:this.getResettedPadding(.01*o);var s,t=B(r)?{left:r,right:r}:r,u=t.left,u=void 0===u?n:u,t=t.right,t=void 0===t?n:t;return"px"===r.unit?(s=Math.abs(o+.2*o),u=i.getPadding(r,"left",n,s),t=i.getPadding(r,"right",n,s)):(s=o+u+t,a&&s&&(u=u/s/(e=o/e/s),t=t/s/e)),{left:u,right:t}},getXDomain:function(t){var e=this.axis,n=this.scale.x,i=[this.getXDomainMinMax(t,"min"),this.getXDomainMinMax(t,"max")],r=i[0],a=void 0===r?0:r,o=i[1],t=void 0===o?0:o;return"log"!==n.type&&(r=e.isCategorized(),o=e.isTimeSeries(),n=this.getXDomainPadding(i),(e=i[0])-(i=i[1])!=0||r||(i=o?(e=new Date(.5*e.getTime()),new Date(1.5*i.getTime())):(e=0===e?1:.5*e,0===i?-1:1.5*i)),!e&&0!==e||(a=o?new Date(e.getTime()-n.left):e-n.left),!i&&0!==i||(t=o?new Date(i.getTime()+n.right):i+n.right)),[a,t]},updateXDomain:function(t,e,n,i,r){var a=this,o=a.config,s=a.org,u=a.scale,c=u.x,u=u.subX,o=o.zoom_enabled;return n&&(c.domain(r||q(a.getXDomain(t))),s.xDomain=c.domain(),o&&a.zoom.updateScaleExtent(),u.domain(c.domain()),null!=(t=a.brush)&&t.scale(u)),e&&(u=r||!a.brush||E(a)?s.xDomain:w(a).map(u.invert),c.domain(u),o&&a.zoom.updateScaleExtent()),i&&c.domain(a.trimXDomain(c.orgDomain())),c.domain()},trimXDomain:function(t){var e=this.getZoomDomain(),n=e[0],e=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),e<=t[1]&&(t[0]=+t[0]-(t[1]-e),t[1]=e),t},getZoomDomain:function(){var t=this.config,e=this.org.xDomain,n=e[0],e=e[1];return[n=I(t.zoom_x_min)?W("min",[n,t.zoom_x_min]):n,e=I(t.zoom_x_max)?W("max",[e,t.zoom_x_max]):e]},convertPixelToScale:function(t,e,n){var i=this.config,r=this.state,i=i.axis_rotated,i="x"===t?i?"height":"width":i?"width":"height";return n*(e/r[i])}};function Ft(t,e,n){var i=t.config,e="axis_"+e+"_tick_format";return(i[e]||t.defaultValueFormat)(n)}var Bt={yFormat:function(t){return Ft(this,"y",t)},y2Format:function(t){return Ft(this,"y2",t)},getDefaultValueFormat:function(){return this.hasArcType()&&!this.hasType("gauge")?this.defaultArcValueFormat:this.defaultValueFormat},defaultValueFormat:function(t){return z(t)?+t:""},defaultArcValueFormat:function(t,e){return(100*e).toFixed(1)+"%"},dataLabelFormat:function(t){function e(t){return z(t)?+t:""}var n=this.config.data_labels,i=e;return F(n.format)?i=n.format:d(n.format)&&(i=n.format[t]?!0===n.format[t]?e:n.format[t]:function(){return""}),i.bind(this.api)}},Xt={initLegend:function(){var t=this,e=t.config,n=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(n.legend=t.$el.svg.append("g").classed(P.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,n){var i=this,r=i.config,a=i.state,o=i.scale,s=i.$el,e=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};e.withTransition=v(e,"withTransition",!0),e.withTransitionForTransform=v(e,"withTransitionForTransform",!0),r.legend_contents_bindto&&r.legend_contents_template?i.updateLegendTemplate():i.updateLegendElement(t||i.mapToIds(i.data.targets),e,n),s.legend.selectAll("."+P.legendItem).classed(P.legendItemHidden,function(t){t=!i.isTargetToShow(t);return t&&(this.style.opacity=null),t}),i.updateScales(!1,!o.zoom),i.updateSvgSize(),i.transformAll(e.withTransitionForTransform,n),a.legendHasRendered=!0},updateLegendTemplate:function(){var n,i,r=this,t=r.config,e=r.$el,a=(0,O.select)(t.legend_contents_bindto),o=t.legend_contents_template;a.empty()||(t=r.mapToIds(r.data.targets),n=[],i="",t.forEach(function(t){var e=F(o)?o.bind(r.api)(t,r.color(t),r.api.data(t)[0].values):J(o,{COLOR:r.color(t),TITLE:t});e&&(n.push(t),i+=e)}),t=a.html(i).selectAll(function(){return this.childNodes}).data(n),r.setLegendItem(t),e.legend=a)},updateSizeForLegend:function(t){var e=this.config,n=this.state,i=n.isLegendTop,r=n.isLegendLeft,a=n.isLegendRight,o=n.isLegendInset,s=n.current,n=t.width,t=t.height,e={top:i?this.getCurrentPaddingTop()+e.legend_inset_y+5.5:s.height-t-this.getCurrentPaddingBottom()-e.legend_inset_y,left:r?this.getCurrentPaddingLeft()+e.legend_inset_x+.5:s.width-n-this.getCurrentPaddingRight()-e.legend_inset_x+.5};this.state.margin3={top:a?0:o?e.top:s.height-t,right:NaN,bottom:0,left:a?s.width-n:o?e.left:0}},transformLegend:function(t){var e=this.$el.legend;(0,this.$T)(e,t).attr("transform",this.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var n=this.$el.legend;n&&n.select("."+P.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){var t=this.state,e=t.current.width,n=t.isLegendRight,i=t.isLegendInset,r=t.legendItemWidth,t=t.legendStep;return this.config.legend_show?n||i?r*(t+1):e:0},getLegendHeight:function(){var t=this.state,e=t.current,n=t.isLegendRight,i=t.legendItemHeight,t=t.legendStep;return this.config.legend_show?n?e.height:Math.max(20,i)*(t+1):0},opacityForUnfocusedLegend:function(t){return t.classed(P.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var n=this,i=n.$el.legend,r=n.$T,a=n.mapToTargetIds(t);i&&r(i.selectAll("."+P.legendItem).filter(function(t){return 0<=a.indexOf(t)}).classed(P.legendItemFocused,e)).style("opacity",function(){return e?null:n.opacityForUnfocusedLegend.call(n,(0,O.select)(this))})},revertLegend:function(){var t=this.$el.legend,e=this.$T;t&&e(t.selectAll("."+P.legendItem).classed(P.legendItemFocused,!1)).style("opacity",null)},showLegend:function(t){var e=this.config,n=this.$el,i=this.$T;e.legend_show||(e.legend_show=!0,n.legend?n.legend.style("visibility",null):this.initLegend(),this.state.legendHasRendered||this.updateLegend()),this.removeHiddenLegendIds(t),i(n.legend.selectAll(this.selectorLegends(t)).style("visibility",null)).style("opacity",null)},hideLegend:function(t){var e=this.config,n=this.$el.legend;e.legend_show&&g(t)&&(e.legend_show=!1,n.style("visibility","hidden")),this.addHiddenLegendIds(t),n.selectAll(this.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var n,i=this.cache,r=this.state,a=xt;return t&&((n=!r.redrawing&&i.get(a)||{})[t]||(n[t]=this.getTextRect(e,P.legendItem),i.add(a,n)),n=n[t]),n},setLegendItem:function(t){var n=this,i=n.api,r=n.config,a=n.state,o="touch"===a.inputType,s=n.hasType("gauge");t.attr("class",function(t){var e=(0,O.select)(this);return(!e.empty()&&e.attr("class")||"")+n.generateClass(P.legendItem,t)}).style("visibility",function(t){return n.isLegendToShow(t)?null:"hidden"}),r.interaction_enabled&&(t.style("cursor","pointer").on("click",function(t,e){y(r.legend_item_onclick,i,e)||(t.altKey?(i.hide(),i.show(e)):(i.toggle(e),(0,O.select)(this).classed(P.legendItemFocused,!1))),o&&n.hideTooltip()}),o||t.on("mouseout",function(t,e){y(r.legend_item_onout,i,e)||((0,O.select)(this).classed(P.legendItemFocused,!1),s&&n.undoMarkOverlapped(n,"."+P.gaugeValue),n.api.revert())}).on("mouseover",function(t,e){y(r.legend_item_onover,i,e)||((0,O.select)(this).classed(P.legendItemFocused,!0),s&&n.markOverlapped(e,n,"."+P.gaugeValue),!a.transiting&&n.isTargetToShow(e)&&i.focus(e))}))},updateLegendElement:function(t,e){function n(t,e,n){function i(t,e){e||(r=(s-g-o)/2)<10&&(r=(s-o)/2,g=0,m++),_[t]=m,x[m]=c.isLegendInset?10:r,p[t]=g,g+=o}var r,a=n===w.length-1,a=(t=u.getLegendItemTextBox(e,t)).width+f+(a&&!b?0:10)+l.legend_padding,t=t.height+4,o=b?t:a,s=b?u.getLegendHeight():u.getLegendWidth();if(0===n&&(d=h=m=g=0),l.legend_show&&!u.isLegendToShow(e))return v[e]=0,y[e]=0,_[e]=0,p[e]=0;v[e]=a,y[e]=t,(!h||h<=a)&&(h=a),(!d||d<=t)&&(d=t),t=b?d:h,l.legend_equally?(Object.keys(v).forEach(function(t){return v[t]=h}),Object.keys(y).forEach(function(t){return y[t]=d}),(r=(s-t*w.length)/2)<10?(m=g=0,w.forEach(function(t){return i(t)})):i(e,!0)):i(e)}var i,u=this,l=u.config,c=u.state,r=u.$el.legend,a=u.$T,f=l.legend_item_tile_width+5,h=0,d=0,g=0,p={},v={},y={},x=[0],_={},m=0,b=c.isLegendRight||c.isLegendInset,w=t.filter(function(t){return!I(l.data_names[t])||null!==l.data_names[t]}),o=e.withTransition;c.isLegendInset&&(m=l.legend_inset_step||w.length,u.updateLegendStep(m));function s(t,e){return i(t,e)+4+l.legend_item_tile_width}function T(t,e){return i(t,e)}function A(t,e){return i(t,e)-2}function M(t,e){return i(t,e)-2+l.legend_item_tile_width}function k(t,e){return C(t,e)+9}function S(t,e){return C(t,e)-5}function E(t,e){return C(t,e)+4}var C=c.isLegendRight?(i=function(t){return h*_[t]},function(t){return x[_[t]]+p[t]}):c.isLegendInset?(i=function(t){return h*_[t]+10},function(t){return x[_[t]]+p[t]}):(i=function(t){return x[_[t]]+p[t]},function(t){return d*_[t]}),D=r.selectAll("."+P.legendItem).data(w).enter().append("g");u.setLegendItem(D),D.append("text").text(function(t){return I(l.data_names[t])?l.data_names[t]:t}).each(function(t,e){n(this,t,e)}).style("pointer-events","none").attr("x",b?s:-200).attr("y",b?-200:k),D.append("rect").attr("class",P.legendItemEvent).style("fill-opacity","0").attr("x",b?T:-200).attr("y",b?-200:S);var R,t=function(t){t=u.getDataById(t);return u.levelColor?u.levelColor(t.values[0].value):u.color(t)},e=l.legend_usePoint;e?(R=[],D.append(function(t){var e=X(l.point_pattern)?l.point_pattern:[l.point_type];-1===R.indexOf(t)&&R.push(t);e=e[R.indexOf(t)%e.length];return"rectangle"===e&&(e="rect"),L.createElementNS(O.namespaces.svg,"hasValidPointType"in u&&u.hasValidPointType(e)?e:"use")}).attr("class",P.legendItemPoint).style("fill",t).style("pointer-events","none").attr("href",function(t,e,n){e=n[e].nodeName.toLowerCase(),t=u.getTargetSelectorSuffix(t);return"use"===e?"#"+c.datetimeId+"-point"+t:void 0})):D.append("line").attr("class",P.legendItemTile).style("stroke",t).style("pointer-events","none").attr("x1",b?A:-200).attr("y1",b?-200:E).attr("x2",b?M:-200).attr("y2",b?-200:E).attr("stroke-width",l.legend_item_tile_height),D=r.select("."+P.legendBackground+" rect"),c.isLegendInset&&0<h&&0===D.size()&&(D=r.insert("g","."+P.legendItem).attr("class",P.legendBackground).append("rect")),a(r.selectAll("text").data(w).text(function(t){return I(l.data_names[t])?l.data_names[t]:t}).each(function(t,e){n(this,t,e)}),o).attr("x",s).attr("y",k),a(r.selectAll("rect."+P.legendItemEvent).data(w),o).attr("width",function(t){return v[t]}).attr("height",function(t){return y[t]}).attr("x",T).attr("y",S),e?a(r.selectAll("."+P.legendItemPoint).data(w),o).each(function(){var t,e,n,i,r=this.nodeName.toLowerCase(),a=l.point_r,o="x",s="y",u=2,c=2.5;"circle"===r?(o="cx",s="cy",e=a+(t=.2*a),u=2*a,c=-t):"rect"===r&&(i=n=2.5*a,c=3),(0,O.select)(this).attr(o,function(t){return A(t)+u}).attr(s,function(t){return E(t)-c}).attr("r",e).attr("width",n).attr("height",i)}):a(r.selectAll("line."+P.legendItemTile).data(w),o).style("stroke",t).attr("x1",A).attr("y1",E).attr("x2",M).attr("y2",E),D&&a(D,o).attr("height",u.getLegendHeight()-12).attr("width",h*(m+1)+10),u.updateLegendItemWidth(h),u.updateLegendItemHeight(d),u.updateLegendStep(m)}},$t=Rn(8),Yt={redraw:function(t){var e;void 0===t&&(t={});var n=this,i=n.config,r=n.state,a=n.$el,o=a.main;r.redrawing=!0;var s=n.filterTargetsToShow(n.data.targets),u=t.flow,c=t.initializing,l=n.getWithOption(t),f=l.Transition?i.transition_duration:0,h=l.TransitionForExit?f:0,d=l.TransitionForAxis?f:0,d=null==(e=n.axis)?void 0:e.generateTransitions(d);n.updateSizes(c),l.Legend&&i.legend_show?(t.withTransition=!!f,n.updateLegend(n.mapToIds(n.data.targets),t,d)):l.Dimension&&n.updateDimension(!0),n.hasArcType()&&!r.hasRadar||n.updateCircleY&&(n.circleY=n.updateCircleY()),r.hasAxis?(n.axis.redrawAxis(s,l,d,u,c),i.data_empty_label_text&&o.select("text."+P.text+"."+P.empty).attr("x",r.width/2).attr("y",r.height/2).text(i.data_empty_label_text).style("display",s.length?"none":null),n.hasGrid()&&n.updateGrid(),i.regions.length&&n.updateRegion(),["bar","candlestick","line","area"].forEach(function(t){var e=D(t);(/^(line|area)$/.test(t)&&n.hasTypeOf(e)||n.hasType(t))&&n["update"+e](l.TransitionForExit)}),a.text&&o.selectAll("."+P.selectedCircles).filter(n.isBarType.bind(n)).selectAll("circle").remove(),i.interaction_enabled&&!u&&l.EventRect&&(n.redrawEventRect(),null!=n.bindZoomEvent&&n.bindZoomEvent())):(a.arcs&&n.redrawArc(f,h,l.Transform),a.radar&&n.redrawRadar()),r.resizing||!n.hasPointType()&&!r.hasRadar||n.updateCircle(),n.hasDataLabel()&&!n.hasArcType(null,["radar"])&&n.updateText(),null!=n.redrawTitle&&n.redrawTitle(),c&&n.updateTypesElements(),n.generateRedrawList(s,u,f,l.Subchart),n.callPluginHook("$redraw",t,f)},generateRedrawList:function(t,e,n,i){var r=this,a=r.config,o=r.state,s=r.getDrawShape();o.hasAxis&&a.subchart_show&&r.redrawSubchart(i,n,s);var u,c=e&&r.generateFlow({targets:t,flow:e,duration:e.duration,shape:s,xv:r.xv.bind(r)}),t=(n||c)&&tt(),l=r.getRedrawList(s,e,c,t),e=function(){c&&c(),o.redrawing=!1,y(a.onrendered,r.api)};t&&l.length?(u=kt(),(0,$t.transition)().duration(n).each(function(){l.reduce(function(t,e){return t.concat(e)},[]).forEach(function(t){return u.add(t)})}).call(u,e)):o.transiting||e(),r.mapToIds(r.data.targets).forEach(function(t){o.withoutFadeIn[t]=!0})},getRedrawList:function(i,t,e,r){var a=this,n=a.config,o=a.state,s=o.hasAxis,u=o.hasRadar,c=a.$el.grid,l=i.pos,f=l.cx,h=l.cy,o=l.xForText,l=l.yForText,d=[];return s&&((n.grid_x_lines.length||n.grid_y_lines.length)&&d.push(a.redrawGrid(r)),n.regions.length&&d.push(a.redrawRegion(r)),Object.keys(i.type).forEach(function(t){var e=D(t),n=i.type[t];(/^(area|line)$/.test(t)&&a.hasTypeOf(e)||a.hasType(t))&&d.push(a["redraw"+e](n,r))}),!t&&c.main&&d.push(a.updateGridFocus())),a.hasArcType()&&!u||X(n.data_labels)&&!1!==n.data_labels&&d.push(a.redrawText(o,l,t,r)),!a.hasPointType()&&!u||n.point_focus_only||a.redrawCircle&&d.push(a.redrawCircle(f,h,r,e)),d},updateAndRedraw:function(t){var e,n=this.config,i=this.state;(t=void 0===t?{}:t).withTransition=v(t,"withTransition",!0),t.withTransform=v(t,"withTransform",!1),t.withLegend=v(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=v(t,"withTransitionForTransform",t.withTransition),t.withLegend&&n.legend_show||(i.hasAxis&&(e=this.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0)),this.updateScales(),this.updateSvgSize(),this.transformAll(t.withTransitionForTransform,e)),this.redraw(t,e)},redrawWithoutRescale:function(){this.redraw({withY:!1,withLegend:!0,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}};function jt(t,e,n){void 0===e&&(e=0),void 0===n&&(n=1);var i={linear:Pt.scaleLinear,log:Pt.scaleSymlog,_log:Pt.scaleLog,time:Pt.scaleTime,utc:Pt.scaleUtc}[t=void 0===t?"linear":t]();return i.type=t,/_?log/.test(t)&&i.clamp(!0),i.range([e,n])}var Gt={getXScale:function(t,e,n,i){e=this.scale.zoom||jt(this.axis.getAxisType("x"),t,e);return this.getCustomizedScale(n?e.domain(n):e,i)},getYScale:function(t,e,n,i){n=jt(this.axis.getAxisType(t),e,n);return i&&n.domain(i),n},getYScaleById:function(t,e){void 0===e&&(e=!1);t="y2"===this.axis.getId(t);return this.scale[e?t?"subY2":"subY":t?"y2":"y"]},getCustomizedScale:function(n,t){function e(t,e){return t=n(t)+a(),e?t:Math.ceil(t)}var i,r=this,a=t||function(){return r.axis.x.tickOffset()};for(i in n)e[i]=n[i];return e.orgDomain=function(){return n.domain()},e.orgScale=function(){return n},r.axis.isCategorized()&&(e.domain=function(t){return arguments.length?(n.domain(t),e):[(t=this.orgDomain())[0],t[1]+1]}),e},updateScales:function(t,e){void 0===e&&(e=!0);var n,i,r=this,a=r.axis,o=r.config,s=r.format,u=r.org,c=r.scale,l=r.state,f=l.width,h=l.height,d=l.width2,g=l.height2;l.hasAxis?(n=o.axis_rotated,l=r.getResettedPadding(1),g={x:n?l:0,y:n?0:h,subX:n?1:0,subY:n?0:g},d={x:n?h:f,y:n?f:l,subX:n?h:f,subY:n?d:1},i=e&&(null==(i=c.x)?void 0:i.orgDomain()),u=e&&u.xDomain,c.x=r.getXScale(g.x,d.x,i,function(){return a.x.tickOffset()}),c.subX=r.getXScale(g.x,d.x,u,function(t){return t%1?0:a.subX.tickOffset()}),s.xAxisTick=a.getXAxisTickFormat(),s.subXAxisTick=a.getXAxisTickFormat(!0),a.setAxis("x",c.x,o.axis_x_tick_outer,t),o.subchart_show&&a.setAxis("subX",c.subX,o.axis_x_tick_outer,t),c.y=r.getYScale("y",g.y,d.y,c.y?c.y.domain():o.axis_y_default),c.subY=r.getYScale("y",g.subY,d.subY,c.subY?c.subY.domain():o.axis_y_default),a.setAxis("y",c.y,o.axis_y_tick_outer,t),o.axis_y2_show&&(c.y2=r.getYScale("y2",g.y,d.y,c.y2?c.y2.domain():o.axis_y2_default),c.subY2=r.getYScale("y2",g.subY,d.subY,c.subY2?c.subY2.domain():o.axis_y2_default),a.setAxis("y2",c.y2,o.axis_y2_tick_outer,t))):null!=r.updateArc&&r.updateArc()},xx:function(t){var e=this.config,n=this.scale,i=n.x,n=n.zoom,i=e.zoom_enabled&&n?n:i;return t?i(z(t.x)?t.x:t):null},xv:function(t){var e=this.axis,n=this.config,i=this.scale,r=i.x,i=i.zoom,r=n.zoom_enabled&&i?i:r,t=this.getBaseValue(t);return e.isTimeSeries()?t=Q.call(this,t):e.isCategorized()&&p(t)&&(t=n.axis_x_categories.indexOf(t)),Math.ceil(r(t))},yv:function(t){var e=this.scale,n=e.y,e=e.y2,n=t.axis&&"y2"===t.axis?e:n;return Math.ceil(n(this.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},Ht=Rn(9),Vt={getDrawShape:function(){var t,i=this,e=i.config.axis_rotated,n=i.state.hasRadar,r={type:{},indices:{},pos:{}};return["bar","candlestick","line","area"].forEach(function(t){var e,n=D(/^(bubble|scatter)$/.test(t)?"line":t);(i.hasType(t)||i.hasTypeOf(n)||"line"===t&&(i.hasType("bubble")||i.hasType("scatter")))&&(e=i.getShapeIndices(i["is"+n+"Type"]),n=i["generateDraw"+n],r.indices[t]=e,r.type[t]=n?n.bind(i)(e,!1):void 0)}),i.hasArcType()&&!n||(t=n?i.radarCircleX:e?i.circleY:i.circleX,e=n?i.radarCircleY:e?i.circleX:i.circleY,r.pos={xForText:i.generateXYForText(r.indices,!0),yForText:i.generateXYForText(r.indices,!1),cx:(t||function(){}).bind(i),cy:(e||function(){}).bind(i)}),r},getShapeIndices:function(t){var s=this.config,u=s.data_xs,e=X(u),c={},l=e?{}:0;return e&&H(Object.keys(u).map(function(t){return u[t]})).forEach(function(t){l[t]=0,c[t]={}}),this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(var e,n=(t.id in u?u[t.id]:""),i=n?c[n]:c,r=0;e=s.data_groups[r];r++)if(!(e.indexOf(t.id)<0))for(var a,o=0;a=e[o];o++)if(a in i){i[t.id]=i[a];break}N(i[t.id])&&(i[t.id]=n?l[n]++:l++,i.__max__=(n?l[n]:l)-1)}),c},getIndices:function(t,e){var n=this.config,i=n.data_xs,r=n.bar_indices_removeNull,n=e.id,e=e.index;if(this.isBarType(n)&&r){var a={};return this.getAllValuesOnIndex(e,!0).forEach(function(t,e){a[t.id]=e,a.__max__=e}),a}return X(i)?t[i[n]]:t},getIndicesMax:function(e){return X(this.config.data_xs)?Object.keys(e).map(function(t){return e[t].__max__||0}).reduce(function(t,e){return t+e}):e.__max__},getShapeX:function(a,o,t){function s(t,e){return t+e}var u=this,e=u.config,n=u.scale,c=t?n.subX:n.zoom||n.x,l=e.bar_padding,f=d(a)&&(a._$total.length?a._$total.reduce(s)/2:0);return function(t){var e=u.getIndices(o,t,"getShapeX"),n=t.id in e?e[t.id]:0,i=(e.__max__||0)+1,r=0;return X(t.x)&&(e=c(t.x,!0),r=f?e-(a[t.id]||a._$width)+a._$total.slice(0,n+1).reduce(s)-f:e-(B(a)?a:a._$width)*(i/2-n)),a&&r&&1<i&&l&&(n&&(r+=l*n),2<i?r-=(i-1)*l/2:2===i&&(r-=l/2)),r}},getShapeY:function(n){var i=this,r=i.isStackNormalized();return function(t){var e=t.value;return B(t)?e=t:r?e=i.getRatio("index",t,!0):i.isBubbleZType(t)?e=i.getBubbleZData(t.value,"y"):i.isBarRangeType(t)&&(e=e[1]),i.getYScaleById(t.id,n)(e)}},getShapeYMin:function(t){var e=this.scale[this.axis.getId(t)].domain()[0];return!this.isGrouped(t)&&0<e?e:0},getShapeOffsetData:function(t){var r=this,e=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(t,r))),a=r.isStackNormalized(),t=e.map(function(t){var e=t.values,i={},n=(e=r.isStepType(t)?r.convertValuesToStep(e):e).reduce(function(t,e){var n=+e.x;return t[n]=e,i[n]=a?r.getRatio("index",e,!0):e.value,t},{});return{id:t.id,rowValues:e,rowValueMapByXValue:n,values:i}});return{indexMapByTargetId:e.reduce(function(t,e,n){return t[e.id]=n,t},{}),shapeOffsetTargets:t}},getShapeOffset:function(t,n,i){var h=this,t=h.getShapeOffsetData(t),d=t.shapeOffsetTargets,g=t.indexMapByTargetId;return function(t,r){var a=t.id,o=t.value,e=t.x,s=h.getIndices(n,t),u=h.getYScaleById(a,i);if(h.isBarRangeType(t))return u(o[0]);var c=u(h.getShapeYMin(a)),l=+e,f=c;return d.filter(function(t){return t.id!==a}).forEach(function(t){var e=t.id,n=t.rowValueMapByXValue,i=t.rowValues,t=t.values;s[e]===s[a]&&g[e]<g[a]&&(0<=(null==(i=!(i=i[r])||+i.x!=l?n[l]:i)?void 0:i.value)*o&&B(t[l])&&(f+=u(t[l])-c))}),f}},getBarW:function(t,e,i){function n(t){var e=t?r[c][t]:r[c],n=t?e.ratio:r[c+"_ratio"],t=t?e.max:r[c+"_max"],n=B(e)?e:i?l*n/i:0;return t&&t<n?t:n}var r=this.config,a=this.org,o=this.scale,s=this.getMaxDataCount(),u="bar"===t&&r.data_groups.length,c=t+"_width",l=o.zoom&&!this.axis.isCategorized()?a.xDomain.map(function(t){return o.zoom(t)}).reduce(function(t,e){return Math.abs(t)+e})/s:e.tickInterval(s),f=n();return!u&&d(r[c])&&(f={_$width:f,_$total:[]},this.filterTargetsToShow(this.data.targets).forEach(function(t){r[c][t.id]&&(f[t.id]=n(t.id),f._$total.push(f[t.id]||f._$width))})),f},getShapeByIndex:function(t,e,n){var i=this.$el,r=z(e)?"-"+e:"",a=i[t];return a=a&&!a.empty()?a.filter(function(t){return!n||t.id===n}).filter(function(t){return!z(e)||t.index===e}):(n?i.main.selectAll("."+P[t+"s"]+this.getTargetSelectorSuffix(n)):i.main).selectAll("."+P[t]+r)},isWithinShape:function(t,e){var n,i=this,r=(0,O.select)(t);return i.isTargetToShow(e.id)?null!=i.hasValidPointType&&i.hasValidPointType(t.nodeName)?n=i.isStepType(e)?i.isWithinStep(t,i.getYScaleById(e.id)(e.value)):i.isWithinCircle(t,i.isBubbleType(e)?1.5*i.pointSelectR(e):0):"path"===t.nodeName&&(n=!r.classed(P.bar)||i.isWithinBar(t)):n=!1,n},getInterpolate:function(t){t=this.getInterpolateType(t);return{basis:Ht.curveBasis,"basis-closed":Ht.curveBasisClosed,"basis-open":Ht.curveBasisOpen,bundle:Ht.curveBundle,cardinal:Ht.curveCardinal,"cardinal-closed":Ht.curveCardinalClosed,"cardinal-open":Ht.curveCardinalOpen,"catmull-rom":Ht.curveCatmullRom,"catmull-rom-closed":Ht.curveCatmullRomClosed,"catmull-rom-open":Ht.curveCatmullRomOpen,"monotone-x":Ht.curveMonotoneX,"monotone-y":Ht.curveMonotoneY,natural:Ht.curveNatural,"linear-closed":Ht.curveLinearClosed,linear:Ht.curveLinear,step:Ht.curveStep,"step-after":Ht.curveStepAfter,"step-before":Ht.curveStepBefore}[t]},getInterpolateType:function(t){var e=this.config,n=e.spline_interpolation_type,n=this.isInterpolationType(n)?n:"cardinal";return this.isSplineType(t)?n:this.isStepType(t)?e.line_step_type:"linear"},isWithinBar:function(t){var e=b(this.state.event,t),n=m(t),i=n[0],r=n[1],a=Math.min(i.x,r.x),n=Math.min(i.y,r.y),i=this.config.bar_sensitivity,r=t.getBBox(),t=r.width,r=r.height;return a-i<e[0]&&e[0]<a+t+i&&n-i<e[1]&&e[1]<n+r+i}},Ut={setContainerSize:function(){var t=this.state;t.current.width=this.getCurrentWidth(),t.current.height=this.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this.config,e=t.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var t=this.config,e=this.state.hasAxis,n=this.$el,i=e?t.axis_y2_axes.length:0,e=z(t.padding_top)?t.padding_top:0;return n.title&&n.title.node()&&(e+=this.getTitlePadding()),i&&t.axis_rotated&&(e+=this.getHorizontalAxisHeight("y2")*i),e},getCurrentPaddingBottom:function(){var t=this.config,e=this.state.hasAxis,n=t.axis_rotated?"y":"x",e=e?t["axis_"+n+"_axes"].length:0;return(z(t.padding_bottom)?t.padding_bottom:0)+(e?this.getHorizontalAxisHeight(n)*e:0)},getCurrentPaddingLeft:function(t){var e=this.config,n=this.state.hasAxis,i=e.axis_rotated,r=i?"x":"y",a=n?e["axis_"+r+"_axes"].length:0,t=n?this.getAxisWidthByAxisId(r,t):0,e=z(e.padding_left)?e.padding_left:n&&i?e.axis_x_show?Math.max(l(t),40):1:!n||e.axis_y_show&&!e.axis_y_inner?l(t):this.axis.getAxisLabelPosition("y").isOuter?30:1;return e+t*a},getCurrentPaddingRight:function(t){void 0===t&&(t=!1);var e=this.config,n=this.state.hasAxis,i=this.state.isLegendRight?this.getLegendWidth()+20:0,r=n?e.axis_y2_axes.length:0,n=n?this.getAxisWidthByAxisId("y2"):0,t=t?this.axis.getXAxisTickTextY2Overflow(10):0,t=z(e.padding_right)?e.padding_right+1:this.axis&&e.axis_rotated?10+i:!this.axis||e.axis_y2_show&&!e.axis_y2_inner?Math.max(l(n)+i,t):Math.max(2+i+(this.axis.getAxisLabelPosition("y2").isOuter?20:0),t);return t+n*r},getParentRectValue:function(t){for(var e="offset"+D(t),n=this.$el.chart.node(),i=0;i<30&&n&&"BODY"!==n.tagName;){try{i=n.getBoundingClientRect()[t]}catch(t){e in n&&(i=n[e])}n=n.parentNode}var r=L.body[e];return i=r<i?r:i},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height"),e=0;return e=t?/px$/.test(t)?parseInt(t,10):this.getParentRectValue("height"):e},getSvgLeft:function(t){var e=this.config,n=this.$el,i=e.axis_rotated||!e.axis_rotated&&!e.axis_y_inner,e=e.axis_rotated?P.axisX:P.axisY,e=n.main.select("."+e).node(),i=e&&i?e.getBoundingClientRect():{right:0},e=n.chart.node().getBoundingClientRect(),n=this.hasArcType(),t=i.right-e.left-(n?0:this.getCurrentPaddingLeft(t));return 0<t?t:0},updateDimension:function(t){var e,n=this.config,i=this.state.hasAxis,r=this.$el;i&&!t&&this.axis.x&&n.axis_rotated&&null!=(e=this.axis.subX)&&e.create(r.axis.subX),this.updateScales(t),this.updateSvgSize(),this.transformAll(!1)},updateSvgSize:function(){var t=this.state,e=t.clip,n=t.current,i=t.hasAxis,r=t.width,a=t.height,t=this.$el.svg;t.attr("width",n.width).attr("height",n.height),i&&(n={width:0,height:0},(i=t.select("."+P.brush+" .overlay")).size()&&(n.width=+i.attr("width"),n.height=+i.attr("height")),t.selectAll(["#"+e.id,"#"+e.idGrid]).select("rect").attr("width",r).attr("height",a),t.select("#"+e.idXAxis).select("rect").call(this.setXAxisClipPath.bind(this)),t.select("#"+e.idYAxis).select("rect").call(this.setYAxisClipPath.bind(this)),e.idSubchart&&t.select("#"+e.idSubchart).select("rect").attr("width",r).attr("height",n.height))},getResettedPadding:function(e){var n=this.config,t=B(e),i=t?0:{};return!1===n.padding?t||Object.keys(e).forEach(function(t){i[t]=g(n.data_labels)||!1===n.data_labels||"top"!==t?0:e[t]}):i=e,i},updateSizes:function(t){var e=this,n=e.config,i=e.state,r=e.$el.legend,a=n.axis_rotated,o=e.hasArcType();t||e.setContainerSize();var s={width:r?e.getLegendWidth():0,height:r?e.getLegendHeight():0};!o&&n.axis_x_show&&n.axis_x_tick_autorotate&&e.updateXAxisTickClip();var u=i.isLegendRight||i.isLegendInset?0:s.height,c=a||o?0:e.getHorizontalAxisHeight("x"),t=n.subchart_axis_x_show&&n.subchart_axis_x_tick_text_show?c:30,r=n.subchart_show&&!o?n.subchart_size_height+t:0;i.margin=!o&&a?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(!0),bottom:e.getHorizontalAxisHeight("y")+u+e.getCurrentPaddingBottom(),left:r+(o?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(!0),bottom:c+r+u+e.getCurrentPaddingBottom(),left:o?0:e.getCurrentPaddingLeft()},i.margin=e.getResettedPadding(i.margin),i.margin2=a?{top:i.margin.top,right:NaN,bottom:20+u,left:e.state.rotatedPadding.left}:{top:i.current.height-r-u,right:NaN,bottom:t+u,left:i.margin.left},i.margin3={top:0,right:NaN,bottom:0,left:0},null!=e.updateSizeForLegend&&e.updateSizeForLegend(s),i.width=i.current.width-i.margin.left-i.margin.right,i.height=i.current.height-i.margin.top-i.margin.bottom,i.width<0&&(i.width=0),i.height<0&&(i.height=0),i.width2=a?i.margin.left-i.rotatedPadding.left-i.rotatedPadding.right:i.width,i.height2=a?i.height:i.current.height-i.margin2.top-i.margin2.bottom,i.width2<0&&(i.width2=0),i.height2<0&&(i.height2=0);u=e.hasType("gauge"),a=n.legend_show&&i.isLegendRight;i.arcWidth=i.width-(a?s.width+10:0),i.arcHeight=i.height-(a&&!u?0:10),u&&!n.gauge_fullCircle&&(i.arcHeight+=i.height-e.getPaddingBottomForGauge()),null!=e.updateRadius&&e.updateRadius(),i.isLegendRight&&o&&(i.margin3.left=i.arcWidth/2+1.1*i.radiusExpanded)}},qt={opacityForText:function(t){return(!this.isBarType(t)||this.meetsLabelThreshold(Math.abs(this.getRatio("bar",t)),"bar"))&&this.hasDataLabel?null:"0"},initText:function(){this.$el.main.select("."+P.chart).append("g").attr("class",P.chartTexts)},updateTargetsForText:function(t){var e=this.getChartClass("Text"),n=this.getClass("texts","id"),i=this.classFocus.bind(this);this.$el.main.select("."+P.chartTexts).selectAll("."+P.chartText).data(t).attr("class",function(t){return e(t)+i(t)}).enter().append("g").style("opacity","0").attr("class",e).style("pointer-events","none").append("g").attr("class",n)},updateText:function(){var o=this,t=o.$el,e=o.$T,n=o.config,i=o.getClass("text","index"),r=t.main.selectAll("."+P.texts).selectAll("."+P.text).data(o.labelishData.bind(o));e(r.exit()).style("fill-opacity","0").remove(),t.text=r.enter().append("text").merge(r).attr("class",i).attr("text-anchor",function(t){var e=t.value<0;return o.isCandlestickType(t)&&(e=!(null!=(t=o.getCandlestickData(t))&&t._isUp)),n.axis_rotated?e?"end":"start":"middle"}).style("fill",o.updateTextColor.bind(o)).style("fill-opacity","0").each(function(t,e,n){var i,r=(0,O.select)(this),a=t.value;o.isBubbleZType(t)?a=o.getBubbleZData(a,"z"):!o.isCandlestickType(t)||(i=o.getCandlestickData(t))&&(a=i.close),a=o.dataLabelFormat(t.id)(a,t.id,e,n),B(a)?this.textContent=a:_(r,a)})},updateTextColor:function(t){var e,n=this.config,i=n.data_labels_colors,r=this.isArcType(t)&&!this.isRadarType(t)?null:this.color(t);return p(i)?e=i:Y(i)?e=i[(t.data||t).id]:F(i)&&(e=i.bind(this.api)(r,t)),this.isCandlestickType(t)&&!F(i)&&(null!=(i=this.getCandlestickData(t))&&i._isUp||(n=n.candlestick_color_down,e=Y(n)?n[t.id]:n)),e||r},updateTextBacgroundColor:function(t){var e=this.$el,n=this.config.data_labels_backgroundColors,i="";return(p(n)||Y(n))&&(t=p(n)?"":this.getTargetSelectorSuffix(("id"in t?t:t.data).id),(t=e.defs.select(["filter[id*='labels-bg","']"].join(t))).size()&&(i="url(#"+t.attr("id")+")")),i||null},redrawText:function(r,a,t,o){var s=this.$T,u=A(!0);return this.$el.text.style("fill",this.updateTextColor.bind(this)).attr("filter",this.updateTextBacgroundColor.bind(this)).style("fill-opacity",t?0:this.opacityForText.bind(this)).each(function(t,e){var n=s(this,!(!o||!this.getAttribute("x")),u),i=r.bind(this)(t,e),e=a.bind(this)(t,e);this.childElementCount?n.attr("transform","translate("+i+" "+e+")"):n.attr("x",i).attr("y",e)}),!0},getTextRect:function(t,e){var n=t.node?t.node():t,i=(n=!/text/i.test(n.tagName)?n.querySelector("text"):n).textContent,t=wt+"-"+i.replace(/\W/g,"_"),r=this.cache.get(t);return r||(this.$el.svg.append("text").style("visibility","hidden").style("font",(0,O.select)(n).style("font")).classed(e,!0).text(i).call(function(t){r=T(t.node())}).remove(),this.cache.add(t,r)),r},generateXYForText:function(e,t){var i=this,n=Object.keys(e),r={},a=t?i.getXForText:i.getYForText;return i.hasType("radar")&&n.push("radar"),n.forEach(function(t){r[t]=i["generateGet"+D(t)+"Points"](e[t],!1)}),function(t,e){var n=(i.isAreaType(t)?"area":i.isBarType(t)&&"bar")||i.isCandlestickType(t)&&"candlestick"||i.isRadarType(t)&&"radar"||"line";return a.call(i,r[n](t,e),t,this)}},getCenteredTextPos:function(t,e,n){var i=this.config,r=i.axis_rotated;if(i.data_labels.centered&&this.isBarType(t)){n=T(n),t=0<=t.value;if(r){r=(t?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+n.width/2;return t?-r-3:2+r}n=(t?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+n.height/2;return t?n:-n-2}return 0},getTextPos:function(t,e){var n=this.config.data_labels_position;return(t in n?n[t]:n)[e]||0},getXForText:function(t,e,n){var i,r=this.config,a=this.state,o=r.axis_rotated,s=t[0][0];return this.isCandlestickType(e)?o?s=null!=(r=this.getCandlestickData(e))&&r._isUp?t[2][2]+4:t[2][1]-4:s+=(t[1][0]-s)/2:s=o?(i=this.isBarType(e)?4:6,t[2][1]+i*(e.value<0?-1:1)):this.hasType("bar")?(t[2][0]+t[0][0])/2:s,null===e.value&&(s>a.width?(i=T(n).width,s=a.width-i):s<0&&(s=4)),o&&(s+=this.getCenteredTextPos(e,t,n)),s+this.getTextPos(e.id,"x")},getYForText:function(t,e,n){var i,r=this,a=r.config,o=r.state,s=a.axis_rotated,u=a.point_r,c=T(n),l=e.value,f=3;return r.isCandlestickType(e)?(l=r.getCandlestickData(e),s?(i=t[0][0],i+=(t[1][0]-i)/2+f):i=l&&l._isUp?t[2][2]-f:t[2][1]+4*f):s?i=(t[0][0]+t[2][0]+.6*c.height)/2:(i=t[2][1],B(u)&&5<u&&(r.isLineType(e)||r.isScatterType(e))&&(f+=a.point_r/2.3),l<0||0===l&&!o.hasPositiveValue&&o.hasNegativeValue?i+=c.height+(r.isBarType(e)?-f:f):(l=2*-f,r.isBarType(e)?l=-f:r.isBubbleType(e)&&(l=f),i+=l)),null!==e.value||s||(i<(c=c.height)?i=c:i>o.height&&(i=o.height-4)),s||(i+=r.getCenteredTextPos(e,t,n)),i+r.getTextPos(e.id,"y")},markOverlapped:function(e,t,n){function i(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}var t=t.$el.arcs.selectAll(n),n=t.filter(function(t){return t.data.id!==e}),r=t.filter(function(t){return t.data.id===e}),a=G(r.node());r.node()&&n.each(function(){var t=G(this),e=(0,O.select)(this),n=i(a.e,a.f)>i(t.e,t.f)?r:e,n=Math.ceil(Math.abs(a.e-t.e))<Math.ceil(n.node().getComputedTextLength()),t=Math.ceil(Math.abs(a.f-t.f))<parseInt(r.style("font-size"),10);e.classed(P.TextOverlapping,n&&t)})},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each(function(){(0,O.selectAll)([this,this.previousSibling]).classed(P.TextOverlapping,!1)})},meetsLabelThreshold:function(t,e){return(this.config[e+"_label_threshold"]||0)<=(t=void 0===t?0:t)}};function Wt(t,e){void 0===t&&(t="left");var n=B(e),n=-1<t.indexOf("center")?n?e/2:"middle":-1<t.indexOf("right")?n?e:"end":n?0:"start";return n}var Zt={initTitle:function(){var t=this.config,e=this.$el;t.title_text&&(e.title=e.svg.append("g"),_(e.title.append("text").style("text-anchor",Wt(t.title_position)).attr("class",P.title),t.title_text,[.3,1.5]))},redrawTitle:function(){var t,e=this.config,n=this.state.current,i=this.$el.title;i&&(t=this.yForTitle.call(this),/g/i.test(i.node().tagName)?i.attr("transform","translate("+Wt(e.title_position,n.width)+", "+t+")"):i.attr("x",this.xForTitle.call(this)).attr("y",t))},xForTitle:function(){var t,e=this.config,n=this.state.current,i=e.title_position||"left",r=this.getTextRect(this.$el.title,P.title).width;return/(right|center)/.test(i)?(t=n.width-r,0<=i.indexOf("right")?t=n.width-r-e.title_padding.right:0<=i.indexOf("center")&&(t=(n.width-r)/2)):t=e.title_padding.left||0,t},yForTitle:function(){return(this.config.title_padding.top||0)+this.getTextRect(this.$el.title,P.title).height},getTitlePadding:function(){return this.yForTitle()+(this.config.title_padding.bottom||0)}},Kt={initTooltip:function(){var t=this.config,e=this.$el;e.tooltip=(0,O.select)(t.tooltip_contents.bindto),e.tooltip.empty()&&(e.tooltip=e.chart.append("div").attr("class",P.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),this.bindTooltipResizePos()},initShowTooltip:function(){var n=this,i=n.config,t=n.$el,e=n.state,r=e.hasAxis,e=e.hasRadar;if(i.tooltip_init_show){var a=!(r&&e);if(null!=(e=n.axis)&&e.isTimeSeries()&&p(i.tooltip_init_x)){var o,s,u=n.data.targets[0];for(i.tooltip_init_x=Q.call(n,i.tooltip_init_x),o=0;(s=u.values[o])&&s.x-i.tooltip_init_x!=0;o++);i.tooltip_init_x=o}e=n.data.targets.map(function(t){var e=a?0:i.tooltip_init_x;return n.addName(t.values[e])});a&&(e=[e[i.tooltip_init_x]]),t.tooltip.html(n.getTooltipHTML(e,null==(e=n.axis)?void 0:e.getXAxisTickFormat(),n.getDefaultValueFormat(),n.color)),i.tooltip_contents.bindto||t.tooltip.style("top",i.tooltip_init_position.top).style("left",i.tooltip_init_position.left).style("display",null)}},getTooltipHTML:function(){var t=this.api,e=this.config;return F(e.tooltip_contents)?e.tooltip_contents.bind(t).apply(void 0,arguments):this.getTooltipContent.apply(this,arguments)},getTooltipContent:function(t,e,n,i){function r(t){return o.axis&&o.isBubbleZType(t)?o.getBubbleZData(t.value,"z"):o.getBaseValue(t)}var a,o=this,s=o.api,u=o.config,c=o.state,l=["title","name","value"].map(function(t){t=u["tooltip_format_"+t];return F(t)?t.bind(s):t}),f=l[0],h=l[1],d=l[2],f=f||e,h=h||function(t){return t},d=d||(o.isStackNormalized()?function(t,e){return(100*e).toFixed(2)+"%"}:n),g=u.tooltip_order,p=o.levelColor?function(t){return o.levelColor(t.value)}:function(t){return i(t)},v=u.tooltip_contents,y=v.template,x=o.mapToTargetIds();null===g&&u.data_groups.length?(a=o.orderTargets(o.data.targets).map(function(t){return t.id}).reverse(),t.sort(function(t,e){var n=t?t.value:null,i=e?e.value:null;return 0<n&&0<i&&(n=t.id?a.indexOf(t.id):null,i=e.id?a.indexOf(e.id):null),n-i})):/^(asc|desc)$/.test(g)?t.sort(function(t,e){t=t?r(t):null,e=e?r(e):null;return"asc"===g?t-e:e-t}):F(g)&&t.sort(g.bind(s));for(var _,m,b,w,T,A,M,k,S,E,C=o.getTooltipContentTemplate(y),D=t.length,R=0;R<D;R++)(E=t[R])&&(r(E)||0===r(E))&&(N(b)&&(m=(c.hasAxis||c.hasRadar)&&j(f?f(E.x):E.x),b=J(C[0],{CLASS_TOOLTIP:P.tooltip,TITLE:z(m)?y?m:'<tr><th colspan="2">'+m+"</th></tr>":""})),!E.ratio&&o.$el.arcs&&(E.ratio=o.getRatio("arc",o.$el.arcs.select("path."+P.arc+"-"+E.id).data()[0])),_=[E.ratio,E.id,E.index,t],w=j(d.apply(void 0,[r(E)].concat(_))),o.isAreaRangeType(E)?(A=(T=["high","low"].map(function(t){return j(d.apply(void 0,[o.getRangedData(E,t)].concat(_)))}))[0],M=T[1],w="<b>Mid:</b> "+w+" <b>High:</b> "+A+" <b>Low:</b> "+M):o.isCandlestickType(E)?(T=(k=["open","high","low","close","volume"].map(function(t){return j(d.apply(void 0,[o.getRangedData(E,t,"candlestick")].concat(_)))}))[0],A=k[1],M=k[2],S=k[3],k=k[4],w="<b>Open:</b> "+T+" <b>High:</b> "+A+" <b>Low:</b> "+M+" <b>Close:</b> "+S+(k?" <b>Volume:</b> "+k:"")):o.isBarRangeType(E)&&(k=(S=E.value)[0],S=S[1],w=d(k)+" ~ "+d(S)),void 0!==w&&function(){if(null===E.name)return;var e,t=j(h.apply(void 0,[E.name].concat(_))),n=p(E),i={CLASS_TOOLTIP_NAME:P.tooltipName+o.getTargetSelectorSuffix(E.id),COLOR:y||!o.patterns?n:'<svg><rect style="fill:'+n+'" width="10" height="10"></rect></svg>',NAME:t,VALUE:w};y&&Y(v.text)&&(e=x.indexOf(E.id),Object.keys(v.text).forEach(function(t){i[t]=v.text[t][e]})),b+=J(C[1],i)}());return b+"</table>"},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+'{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>').replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(t,e,n,i){var r=this,a=r.config,o=r.scale,s=r.state,u=s.width,c=s.height,l=s.current,f=s.isLegendRight,h=s.inputType,d=s.event,g=r.hasType("gauge")&&!a.gauge_fullCircle,p=r.getSvgLeft(!0),v=p+l.width-r.getCurrentPaddingRight(),s=r.getCurrentPaddingLeft(!0),d=b(d,i),i=d[0],d=d[1];r.hasArcType()?"touch"===h||r.hasType("radar")||(d+=g?c:c/2,i+=(u-(f?r.getLegendWidth():0))/2):(t=o.x(t[0].x),a.axis_rotated?(d=t+20,i+=p+100,v-=p):(d-=5,i=p+s+20+(r.scale.zoom?i:t))),v<i+e+15&&(i-=e+s),d+n>l.height&&(d-=g?3*n:n+30);var y={top:d,left:i};return Object.keys(y).forEach(function(t){y[t]<0&&(y[t]=0)}),y},showTooltip:function(t,e){var n,i,r,a,o,s,u=this,c=u.config,l=u.scale,f=u.state,h=u.$el.tooltip,d=c.tooltip_contents.bindto,g=t.filter(function(t){return t&&z(u.getBaseValue(t))});h&&0!==g.length&&c.tooltip_show&&(i=void 0===(r=(a=(n=h.datum())||{}).width)?0:r,r=void 0===(o=a.height)?0:o,a=JSON.stringify(t),n&&n.current===a||(o=t.concat().sort()[0].index,y(c.tooltip_onshow,u.api,t),h.html(u.getTooltipHTML(t,u.axis?u.axis.getXAxisTickFormat():u.categoryName.bind(u),u.getDefaultValueFormat(),u.color)).style("display",null).style("visibility",null).datum(n={index:o,current:a,width:i=h.property("offsetWidth"),height:r=h.property("offsetHeight")}),y(c.tooltip_onshown,u.api,t),u._handleLinkedCharts(!0,o)),d||(c=(null==(d=c.tooltip_position)?void 0:d.bind(u.api))||u.tooltipPosition.bind(u),d={x:(d=b(f.event,e))[0],y:d[1]},t=null==(t=t.filter(Boolean))?void 0:t.shift(),l.x&&t&&"x"in t&&(d.xAxis=l.x(t.x)),s=c(g,i,r,e,d),["top","left"].forEach(function(t){var e=s[t];h.style(t,e+"px"),"left"!==t||n.xPosInPercent||(n.xPosInPercent=e/f.current.width*100)})))},bindTooltipResizePos:function(){var t=this.resizeFunction,i=this.state,r=this.$el.tooltip;t.add(function(){var t,e,n;"block"===r.style("display")&&(t=i.current,n=(e=r.datum()).width,e=e.xPosInPercent,e=t.width/100*e,(n=t.width-(e+n))<0&&(e+=n),r.style("left",e+"px"))})},hideTooltip:function(t){var e=this.api,n=this.config,i=this.$el.tooltip;!i||"none"===i.style("display")||n.tooltip_doNotHide&&!t||(t=JSON.parse(i.datum().current),y(n.tooltip_onhide,e,t),i.style("display","none").style("visibility","hidden").datum(null),y(n.tooltip_onhidden,e,t))},_handleLinkedCharts:function(a,o){var s,e=this,t=e.charts,n=e.config,i=e.state.event;null!=i&&i.isTrusted&&n.tooltip_linked&&1<t.length&&(s=n.tooltip_linked_name,t.filter(function(t){return t!==e.api}).forEach(function(t){var e=t.internal,n=e.config,i=e.$el,r=n.tooltip_linked,e=n.tooltip_linked_name,n=L.body.contains(i.chart.node());if(r&&s===e&&n){i=i.tooltip.data()[0],i=o!==(null==i?void 0:i.index);try{t.tooltip[a&&i?"show":"hide"]({index:o})}catch(t){}}}))}},Jt={getTranslate:function(t,e){var n,i,r=this.config,a=this.state,o=r.axis_rotated,r=0;return(e=void 0===e?0:e)&&/^(x|y2?)$/.test(t)&&(r=this.getAxisSize(t)*e),"main"===t?(n=f(a.margin.left),i=f(a.margin.top)):"context"===t?(n=f(a.margin2.left),i=f(a.margin2.top)):"legend"===t?(n=a.margin3.left,i=a.margin3.top):"x"===t?(n=o?-r:0,i=o?0:a.height+r):"y"===t?(n=o?0:-r,i=o?a.height+r:0):"y2"===t?(n=o?0:a.width+r,i=o?1-r:0):"subX"===t?(n=0,i=o?0:a.height2):"arc"===t?(n=a.arcWidth/2,i=a.arcHeight/2):"radar"===t&&(t=this.getRadarSize()[0],n=a.width/2-t,i=f(a.margin.top)),"translate("+n+", "+i+")"},transformMain:function(t,e){var n=this.$el.main,i=this.$T,r=null!=e&&e.axisX?e.axisX:i(n.select("."+P.axisX),t),a=null!=e&&e.axisY?e.axisY:i(n.select("."+P.axisY),t),e=null!=e&&e.axisY2?e.axisY2:i(n.select("."+P.axisY2),t);i(n,t).attr("transform",this.getTranslate("main")),r.attr("transform",this.getTranslate("x")),a.attr("transform",this.getTranslate("y")),e.attr("transform",this.getTranslate("y2")),n.select("."+P.chartArcs).attr("transform",this.getTranslate("arc"))},transformAll:function(t,e){var n=this.config,i=this.state.hasAxis,r=this.$el;this.transformMain(t,e),i&&n.subchart_show&&this.transformContext(t,e),r.legend&&this.transformLegend(t)}},Qt={setTargetType:function(t,e){var n=this.config,i=this.state.withoutFadeIn;this.mapToTargetIds(t).forEach(function(t){i[t]=e===n.data_types[t],n.data_types[t]=e}),t||(n.data_type=e)},updateTypesElements:function(){var i=this,r=i.state.current;Object.keys(M).forEach(function(t){var e=M[t],n=i.hasType(e,null,!0),t=r.types.indexOf(e);-1===t&&n?r.types.push(e):-1<t&&!n&&r.types.splice(t,1)}),i.setChartElements()},hasType:function(e,t,n){var i=this.config,r=this.state.current,a=i.data_types,t=t||this.data.targets,o=!1;return!(n=void 0===n?!1:n)&&-1<(null==(r=r.types)?void 0:r.indexOf(e))?o=!0:null!=t&&t.length?t.forEach(function(t){t=a[t.id];t!==e&&(t||"line"!==e)||(o=!0)}):Object.keys(a).length?Object.keys(a).forEach(function(t){a[t]===e&&(o=!0)}):o=i.data_type===e,o},hasTypeOf:function(t,e,n){var i=this;return void 0===n&&(n=[]),t in k&&!k[t].filter(function(t){return-1===n.indexOf(t)}).every(function(t){return!i.hasType(t,e)})},isTypeOf:function(t,e){t=p(t)?t:t.id,t=this.config.data_types[t]||this.config.data_type;return $(e)?0<=e.indexOf(t):t===e},hasPointType:function(){return this.hasTypeOf("Line")||this.hasType("bubble")||this.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){t=p(t)?t:t.id;return!this.config.data_types[t]||this.isTypeOf(t,k.Line)},isStepType:function(t){return this.isTypeOf(t,k.Step)},isSplineType:function(t){return this.isTypeOf(t,k.Spline)},isAreaType:function(t){return this.isTypeOf(t,k.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,k.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,n=e.point_pattern;return"circle"===(null==t?void 0:t.tagName)||"circle"===e.point_type&&(!n||$(n)&&0===n.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isRadarType(t)?t.values.filter(function(t){return B(t.value)||!!t.value}):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return 0<=["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)}},te=function(){function t(t){this.api=void 0,this.config=void 0,this.cache=void 0,this.$el=void 0,this.state=void 0,this.charts=void 0,this.data={xs:{},targets:[]},this.axis=void 0,this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.color=void 0,this.patterns=void 0,this.levelColor=void 0,this.point=void 0,this.brush=void 0,this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};this.api=t,this.config=new dt,this.cache=new Tt;t=new it;this.$el=t.getStore("element"),this.state=t.getStore("state"),this.$T=this.$T.bind(this)}var e=t.prototype;return e.$T=function(t,e,n){var i=this.config,r=this.state,a=i.transition_duration,i=i.subchart_show,t=t;return t&&("tagName"in t&&(t=(0,O.select)(t)),t=(!1!==e&&a||e)&&(!r.zooming||r.dragging)&&!r.resizing&&r.rendered&&!i?t.transition(n).duration(a):t),t},e.beforeInit=function(){this.callPluginHook("$beforeInit"),y(this.config.onbeforeinit,this.api)},e.afterInit=function(){this.callPluginHook("$afterInit"),y(this.config.onafterinit,this.api)},e.init=function(){var t=this.config,e=this.state,n=this.$el;et(this),e.hasAxis=!this.hasArcType(),e.hasRadar=!e.hasAxis&&this.hasType("radar"),!1===t.padding&&(t.axis_x_show=!1,t.axis_y_show=!1,t.axis_y2_show=!1,t.subchart_show=!1),this.initParams();e={element:t.bindto,classname:"bb"};Y(t.bindto)&&(e.element=t.bindto.element||"#chart",e.classname=t.bindto.classname||e.classname),n.chart=F(e.element.node)?t.bindto.element:(0,O.select)(e.element||[]),n.chart.empty()&&(n.chart=(0,O.select)(L.body.appendChild(L.createElement("div")))),n.chart.html("").classed(e.classname,!0).style("position","relative"),this.initToRender()},e.initToRender=function(t){function n(){return"none"===a.style("display")||"hidden"===a.style("visibility")}var i=this,e=i.config,r=i.state,a=i.$el.chart,o=e.render.lazy||n(),s=u.MutationObserver;o&&s&&!1!==e.render.observe&&!t&&new s(function(t,e){n()||(e.disconnect(),r.rendered||i.initToRender(!0))}).observe(a.node(),{attributes:!0,attributeFilter:["class","style"]}),o&&!t||((e=i.convertData(e,i.initWithData))&&i.initWithData(e),i.afterInit())},e.initParams=function(){var i,t,r=this,e=r.config,a=r.format,n=r.state,o=e.axis_rotated;n.datetimeId="bb-"+ +new Date,r.color=r.generateColor(),r.levelColor=r.generateLevelColor(),r.hasPointType()&&(r.point=r.generatePoint()),n.hasAxis&&(r.initClip(),a.extraLineClasses=r.generateExtraLineClass(),a.dataTime=e.data_xLocaltime?s.timeParse:s.utcParse,a.axisTime=e.axis_x_localtime?s.timeFormat:s.utcFormat,i=r.config.zoom_enabled&&"drag"===r.config.zoom_type,a.defaultAxisTime=function(t){var e=r.scale,n=e.x,e=e.zoom,e=i?e:e&&n.orgDomain().toString()!==e.domain().toString(),e=(t.getMilliseconds()?".%L":t.getSeconds()&&".:%S")||t.getMinutes()&&"%I:%M"||t.getHours()&&"%I %p"||1!==t.getDate()&&"%b %d"||e&&1===t.getDate()&&"%b'%y"||t.getMonth()&&"%-m/%-d"||"%Y";return a.axisTime(e)(t)}),n.isLegendRight="right"===e.legend_position,n.isLegendInset="inset"===e.legend_position,n.isLegendTop="top-left"===e.legend_inset_anchor||"top-right"===e.legend_inset_anchor,n.isLegendLeft="top-left"===e.legend_inset_anchor||"bottom-left"===e.legend_inset_anchor,n.rotatedPadding.top=r.getResettedPadding(n.rotatedPadding.top),n.rotatedPadding.right=o&&!e.axis_x_show?0:30,n.inputType=(t=e.interaction_inputType_mouse,o=e.interaction_inputType_touch,n=!1,/Mobi/.test(u.navigator.userAgent)&&o&&(e=u.navigator&&"maxTouchPoints"in u.navigator&&0<u.navigator.maxTouchPoints,o="ontouchmove"in u||u.DocumentTouch&&L instanceof u.DocumentTouch,n=e||o),(!(!t||n)&&"onmouseover"in u?"mouse":n&&"touch")||null)},e.initWithData=function(t){var e=this,n=e.config,i=e.scale,r=e.state,a=e.$el,o=e.org,s=r.hasAxis,u=n.interaction_enabled;s&&(e.axis=e.getAxisInstance(),n.zoom_enabled&&e.initZoom()),e.data.xs={},e.data.targets=e.convertDataToTargets(t),n.data_filter&&(e.data.targets=e.data.targets.filter(n.data_filter.bind(e.api))),n.data_hide&&e.addHiddenTargetIds(!0===n.data_hide?e.mapToIds(e.data.targets):n.data_hide),n.legend_hide&&e.addHiddenLegendIds(!0===n.legend_hide?e.mapToIds(e.data.targets):n.legend_hide),e.updateSizes(),e.updateScales(!0);var c=i.x,l=i.y,f=i.y2,h=i.subX,t=i.subY,i=i.subY2;c&&(c.domain(q(e.getXDomain(e.data.targets))),h.domain(c.domain()),o.xDomain=c.domain()),l&&(l.domain(e.getYDomain(e.data.targets,"y")),t.domain(l.domain())),f&&(f.domain(e.getYDomain(e.data.targets,"y2")),i&&i.domain(f.domain())),a.svg=a.chart.append("svg").style("overflow","hidden").style("display","block"),u&&r.inputType&&(d="touch"===r.inputType,a.svg.on(d?"touchstart":"mouseenter",function(){return y(n.onover,e.api)}).on(d?"touchend":"mouseleave",function(){return y(n.onout,e.api)})),n.svg_classname&&a.svg.attr("class",n.svg_classname);var d=F(n.color_tiles)&&e.patterns;(s||d||n.data_labels_backgroundColors)&&(a.defs=a.svg.append("defs"),s&&["id","idXAxis","idYAxis","idGrid"].forEach(function(t){e.appendClip(a.defs,r.clip[t])}),e.generateDataLabelBackgroundColorFilter(),d&&e.patterns.forEach(function(t){return a.defs.append(function(){return t.node})})),e.updateSvgSize(),e.bindResize();var g,d=a.svg.append("g").classed(P.main,!0).attr("transform",e.getTranslate("main"));a.main=d,n.subchart_show&&e.initSubchart(),n.tooltip_show&&e.initTooltip(),n.title_text&&e.initTitle(),n.legend_show&&e.initLegend(),n.data_empty_label_text&&d.append("text").attr("class",P.text+" "+P.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),s&&(n.regions.length&&e.initRegion(),n.clipPath||e.axis.init()),d.append("g").attr("class",P.chart).attr("clip-path",r.clip.path),e.callPluginHook("$init"),s&&(u&&null!=e.initEventRect&&e.initEventRect(),e.initGrid(),n.clipPath&&null!=(g=e.axis)&&g.init()),e.initChartElements(),e.updateTargets(e.data.targets),e.updateDimension(),y(n.oninit,e.api),e.setBackground(),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),(n.data_onmin||n.data_onmax)&&(g=e.getMinMaxData(),y(n.data_onmin,e.api,g.min),y(n.data_onmax,e.api,g.max)),n.tooltip_show&&e.initShowTooltip(),r.rendered=!0},e.initChartElements=function(){var n=this,t=n.state,e=t.hasAxis,t=t.hasRadar,i=[];e?["bar","bubble","candlestick","line"].forEach(function(t){var e=D(t);("line"===t&&n.hasTypeOf(e)||n.hasType(t))&&i.push(e)}):(t||i.push("Arc","Pie"),n.hasType("gauge")?i.push("Gauge"):t&&i.push("Radar")),i.forEach(function(t){n["init"+t]()}),X(n.config.data_labels)&&!n.hasArcType(null,["radar"])&&n.initText()},e.setChartElements=function(){var t=this.$el,e=t.chart,n=t.svg,i=t.defs,r=t.main,a=t.tooltip,o=t.legend,s=t.title,u=t.grid,c=t.arcs,l=t.circle,f=t.bar,h=t.candlestick,d=t.line,g=t.area,t=t.text;this.api.$={chart:e,svg:n,defs:i,main:r,tooltip:a,legend:o,title:s,grid:u,arc:c,circles:l,bar:{bars:f},candlestick:h,line:{lines:d,areas:g},text:{texts:t}}},e.setBackground=function(){var t=this.config.background,e=this.state,n=this.$el.svg;X(t)&&(n=n.select("g").insert(t.imgUrl?"image":"rect",":first-child"),t.imgUrl?n.attr("href",t.imgUrl):t.color&&n.style("fill",t.color).attr("clip-path",e.clip.path),n.attr("class",t.class||null).attr("width","100%").attr("height","100%"))},e.updateTargets=function(n){var i=this,t=i.state,e=t.hasAxis,t=t.hasRadar;i.updateTargetsForText(n),e?(["bar","candlestick","line"].forEach(function(t){var e=D(t);("line"===t&&i.hasTypeOf(e)||i.hasType(t))&&i["updateTargetsFor"+e](n.filter(i["is"+e+"Type"].bind(i)))}),i.updateTargetsForSubchart&&i.updateTargetsForSubchart(n)):i.hasArcType(n)&&(t?i.updateTargetsForRadar(n.filter(i.isRadarType.bind(i))):i.updateTargetsForArc(n.filter(i.isArcType.bind(i)))),(i.hasType("bubble")||i.hasType("scatter"))&&null!=i.updateTargetForCircle&&i.updateTargetForCircle(),i.showTargets()},e.showTargets=function(){var e=this,t=e.$el.svg;(0,e.$T)(t.selectAll("."+P.target).filter(function(t){return e.isTargetToShow(t.id)})).style("opacity",null)},e.getWithOption=function(n){var i={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(i).forEach(function(t){var e=i[t];p(e)&&(e=i[e]),i[t]=v(n,"with"+t,e)}),i},e.initialOpacity=function(t){var e=this.state.withoutFadeIn;return null!==this.getBaseValue(t)&&e[t.id]?null:"0"},e.bindResize=function(){var t,e,n,i=this,r=i.config,a=i.state,o=(e=[],(n=function(){n.clear(),t=At(function(){e.forEach(function(t){return t()})},200)}).clear=function(){t&&(Mt(t),t=null)},n.add=function(t){return e.push(t)},n.remove=function(t){return e.splice(e.indexOf(t),1)},n),s=[];s.push(function(){return y(r.onresize,i,i.api)}),r.resize_auto&&s.push(function(){a.resizing=!0,i.api.flush(!1)}),s.push(function(){y(r.onresized,i,i.api),a.resizing=!1}),s.forEach(function(t){return o.add(t)}),i.resizeFunction=o,u.addEventListener("resize",i.resizeFunction=o)},e.callPluginHook=function(e){for(var n=this,t=arguments.length,i=Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.config.plugins.forEach(function(t){"$beforeInit"===e&&(t.$$=n).api.plugins.push(t),t[e].apply(t,i)})},t}();C(te.prototype,[Et,Ct,Dt,{categoryName:function(t){var e=this.config.axis_x_categories;return t<(null==e?void 0:e.length)?e[t]:t}},Lt,Nt,It,Ot,Bt,Xt,Yt,Gt,Vt,Ut,qt,Zt,Kt,Jt,Qt]);Dt={resize:function(t){var e=this.internal,n=e.config,i=e.state;i.rendered&&(n.size_width=t?t.width:null,n.size_height=t?t.height:null,i.resizing=!0,this.flush(!1,!0),e.resizeFunction())},flush:function(t){var e,n=this.internal,i=n.state,r=n.$el.zoomResetBtn;i.rendered?(i.resizing?null!=(e=n.brush)&&e.updateResize():null!=(e=n.axis)&&e.setOrient(),null!=r&&r.style("display","none"),n.scale.zoom=null,t?n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):n.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!i.resizing&&n.brush&&(n.brush.getSelection().call(n.brush.move),n.unselectRect())):n.initToRender(!0)},destroy:function(){var e=this,n=this.internal,t=n.$el,i=t.chart,t=t.svg;if(X(n))for(var r in n.callPluginHook("$willDestroy"),n.charts.splice(n.charts.indexOf(this),1),n.unbindAllEvents(),t.select("*").interrupt(),n.resizeFunction.clear(),u.removeEventListener("resize",n.resizeFunction),i.classed("bb",!1).style("position",null).selectChildren().remove(),Object.keys(this).forEach(function(t){"internal"===t&&Object.keys(n).forEach(function(t){n[t]=null}),e[t]=null,delete e[t]}),this)this[r]=function(){};return null},config:function(t,e,n){var i,r=this.internal.config,t=null==t?void 0:t.replace(/\./g,"_");return t in r&&(I(e)?(i=r[t]=e,n&&this.flush()):i=r[t]),i}};function ee(t){var e=this.internal.data.targets;if(N(t))return e;var n=$(t)?t:[t];return e.filter(function(e){return n.some(function(t){return t===e.id})})}C(ee,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,e){void 0===e&&(e=!0);var n=null;return t&&(t=this.data(t),$(t)&&(n=[],t.forEach(function(t){t=t.values.map(function(t){return t.value});e?n=n.concat(t):n.push(t)}))),n},names:function(t){return this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});function ne(t,e,n){var i,r=e||n,a=r.width,o=r.height,s=new XMLSerializer,u=t.cloneNode(!0),t=(r=R(L.styleSheets),i=[],r.forEach(function(e){try{e.cssRules&&e.cssRules.length&&(i=i.concat(R(e.cssRules)))}catch(t){console.error("Error while reading rules from "+e.href+": "+t.toString())}}),i.filter(function(t){return t.cssText}).map(function(t){return t.cssText}));u.setAttribute("xmlns",O.namespaces.xhtml);r=s.serializeToString(u),u=L.createElement("style");u.appendChild(L.createTextNode(t.join("\n")));u=s.serializeToString(u),r=('<svg xmlns="'+O.namespaces.svg+'" width="'+a+'" height="'+o+'" \n\t\tviewBox="0 0 '+n.width+" "+n.height+'" \n\t\tpreserveAspectRatio="'+(!1===(null==e?void 0:e.preserveAspectRatio)?"none":"xMinYMid meet")+'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t'+u+"\n\t\t\t\t"+r.replace(/(url\()[^#]+/g,"$1")+"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,"+btoa(encodeURIComponent(r).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(+("0x"+e))}))}function ie(t,e,n){var i=this,r=this.internal,a=r.mapToTargetIds(e),o=r.state.hiddenTargetIds.map(function(t){return-1<a.indexOf(t)&&t}).filter(Boolean);r.state.toggling=!0,r[(t?"remove":"add")+"HiddenTargetIds"](a);var s=r.$el.svg.selectAll(r.selectorTargets(a)),u=t?null:"0";t&&o.length&&(s.style("display",null),y(r.config.data_onshown,this,o)),r.$T(s).style("opacity",u,"important").call(x,function(){t||0!==o.length||(s.style("display","none"),y(r.config.data_onhidden,i,a)),s.style("opacity",u)}),n.withLegend&&r[(t?"show":"hide")+"Legend"](a),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.state.toggling=!1}var re=function t(e){this.plugins=[],this.internal=void 0;var n=new te(this);this.internal=n,function a(o,s,u){Object.keys(o).forEach(function(t){var e=F(o[t]),n=s!==u,i=X(o[t]),r=i&&0<Object.keys(o[t]).length;s[t]=e&&(!n&&r||n)?o[t].bind(u):i&&!e?{}:o[t],r&&a(o[t],s[t],u)})}(t.prototype,this,this),function(e){var n,i,r,a=this.config,o=function(){var t=i.shift();return t&&n&&d(n)&&t in n?(n=n[t],o()):t?void 0:n};Object.keys(a).forEach(function(t){n=e,i=t.split("_"),r=o(),I(r)&&(a[t]=r)})}.call(n,e),n.beforeInit(),n.init()};function ae(t,e,n){var i=t.config,r="axis_y_"+e,a="axis_y2_"+e;I(n)&&(d(n)?(z(n.x)&&(i["axis_x_"+e]=n.x),z(n.y)&&(i[r]=n.y),z(n.y2)&&(i[a]=n.y2)):(i[r]=n,i[a]=n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function oe(t,e){t=t.config;return{x:t["axis_x_"+e],y:t["axis_y_"+e],y2:t["axis_y2_"+e]}}C(re.prototype,[Dt,{color:function(t){return this.internal.color(t)}},{data:ee},{export:function(t,n){var i,r=this,e=this.internal,a=e.state,e=e.$el.chart,a=a.current,o=a.width,s=a.height,u=U({width:o,height:s,preserveAspectRatio:!0,mimeType:"image/png"},t),e=ne(e.node(),u,{width:o,height:s});return n&&F(n)&&((i=new Image).crossOrigin="Anonymous",i.onload=function(){var t=L.createElement("canvas"),e=t.getContext("2d");t.width=u.width||o,t.height=u.height||s,e.drawImage(i,0,0),n.bind(r)(t.toDataURL(u.mimeType))},i.src=e),e}},{focus:function(t){var e=this.internal,n=e.state,i=e.mapToTargetIds(t),r=e.$el.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),r.classed(P.focused,!0).classed(P.defocused,!1),e.hasArcType()&&!n.hasRadar&&(e.expandArc(i),e.hasType("gauge")&&e.markOverlapped(t,e,"."+P.gaugeValue)),e.toggleFocusLegend(i,!0),n.focusedTargetIds=i,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return i.indexOf(t)<0})},defocus:function(t){var e=this.internal,n=e.state,i=e.mapToTargetIds(t);e.$el.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e))).classed(P.focused,!1).classed(P.defocused,!0),e.hasArcType()&&(e.unexpandArc(i),e.hasType("gauge")&&e.undoMarkOverlapped(e,"."+P.gaugeValue)),e.toggleFocusLegend(i,!1),n.focusedTargetIds=n.focusedTargetIds.filter(function(t){return i.indexOf(t)<0}),n.defocusedTargetIds=i},revert:function(t){var e=this.internal,n=e.config,i=e.state,r=e.$el,t=e.mapToTargetIds(t);r.svg.selectAll(e.selectorTargets(t)).classed(P.focused,!1).classed(P.defocused,!1),e.hasArcType()&&e.unexpandArc(t),n.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),r.legend.selectAll(e.selectorLegends(t)).filter(function(){return(0,O.select)(this).classed(P.legendItemFocused)}).classed(P.legendItemFocused,!1)),i.focusedTargetIds=[],i.defocusedTargetIds=[]}},{legend:{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}}},{load:function(e){var t=this.internal,n=t.config;e.xs&&t.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){n.data_classes[t]=e.classes[t]}),"categories"in e&&t.axis.isCategorized()&&(n.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){n.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){n.data_colors[t]=e.colors[t]}),"unload"in e&&!1!==e.unload?t.unload(t.mapToTargetIds(!0===e.unload?null:e.unload),function(){u.requestIdleCallback(function(){return t.loadFromArgs(e)})}):t.loadFromArgs(e)},unload:function(t){var e=this,n=this.internal,i=t||{};$(i)?i={ids:i}:p(i)&&(i={ids:[i]});var r=n.mapToTargetIds(i.ids);n.unload(r,function(){n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.cache.remove(r),i.done&&i.done.call(e)})}},{show:function(t,e){ie.call(this,!0,t,e=void 0===e?{}:e)},hide:function(t,e){ie.call(this,!1,t,e=void 0===e?{}:e)},toggle:function(t,e){var n=this;void 0===e&&(e={});var i=this.internal,r={show:[],hide:[]};i.mapToTargetIds(t).forEach(function(t){return r[i.isTargetToShow(t)?"hide":"show"].push(t)}),r.show.length&&this.show(r.show,e),r.hide.length&&setTimeout(function(){return n.hide(r.hide,e)},0)}},{tooltip:{show:function(t){var e,n,i,r,a=this.internal,o=a.config,s=a.state.inputType;t.mouse&&(n=t.mouse),t.data?(i=t.data,r=a.getYScaleById(i.id)(i.value),a.isMultipleX()?n=[a.scale.x(i.x),r]:(o.tooltip_grouped||(n=[0,r]),e=z(i.index)?i.index:a.getIndexByX(i.x))):I(t.x)?e=a.getIndexByX(t.x):I(t.index)&&(e=t.index),("mouse"===s?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){a.dispatchEvent(t,e,n)})},hide:function(){var e,n=this.internal,t=n.state.inputType,i=n.$el.tooltip,i=null==i?void 0:i.datum();i&&(e=JSON.parse(i.current)[0].index,("mouse"===t?["mouseout"]:["touchend"]).forEach(function(t){n.dispatchEvent(t,e)})),"touch"===t&&n.callOverOutForTouch(),n.hideTooltip(!0),n.hideGridFocus(),null!=n.unexpandCircles&&n.unexpandCircles(),n.expandBarTypeShapes(!1)}}}]);Lt={axis:{labels:function(e){var n,i=this.internal;return e&&(Object.keys(e).forEach(function(t){i.axis.setLabelText(t,e[t])}),i.axis.updateLabels()),["x","y","y2"].forEach(function(t){var e=i.axis.getLabelText(t);e&&((n=n||{})[t]=e)}),n},min:function(t){var e=this.internal;return z(t)?ae(e,"min",t):oe(e,"min")},max:function(t){var e=this.internal;return arguments.length?ae(e,"max",t):oe(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};I(t.max)&&e.max(t.max),I(t.min)&&e.min(t.min)}}};function se(t){var e=this.internal,n=e.config;return t&&(n.grid_x_lines=t,e.redrawWithoutRescale()),n.grid_x_lines}C(se,{add:function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!0)}});Nt={xgrids:se};function ue(t){var e=this.internal,n=e.config;return t&&(n.grid_y_lines=t,e.redrawWithoutRescale()),n.grid_y_lines}C(ue,{add:function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!1)}});It={ygrids:ue},Ot={groups:function(t){var e=this.internal,n=e.config;return N(t)||(n.data_groups=t,e.redraw()),n.data_groups}};function ce(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),t):n.regions}C(ce,{add:function(t){var e=this.internal,n=e.config;return t&&(n.regions=n.regions.concat(t),e.redrawWithoutRescale()),n.regions},remove:function(t){var e=this.internal,n=e.config,i=e.$T,t=t||{},r=v(t,"classes",[P.region]),e=e.$el.main.select("."+P.regions).selectAll(r.map(function(t){return"."+t}));return i(e).style("opacity","0").remove(),e=n.regions,Object.keys(t).length?(e=e.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){0<=r.indexOf(t)&&(e=!0)}),!e)}),n.regions=e):n.regions=[],e}});function le(t){return z(t.position)||"end"}function fe(t){return"start"===t.position?4:"middle"===t.position?0:-4}var Bt={regions:ce},Xt={x:function(t){var e=this.internal,n=e.axis,i=e.data,n=n.isCustomX()&&n.isCategorized();return $(t)&&(n?this.categories(t):(e.updateTargetX(i.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),n?this.categories():i.xs},xs:function(t){var e=this.internal;return Y(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},Yt={flow:function(t){var e,n,i,r,a,o,s,u,c,l=this.internal,f=0,h=0;(t.json||t.rows||t.columns)&&(c=l.convertData(t)),!l.state.redrawing&&c&&tt()&&(r=[],a=l.getMaxDataCount(),o=l.convertDataToTargets(c,!0),s=l.axis.isTimeSeries(),l.data.targets.forEach(function(t){for(var e=!1,n=0;n<o.length;n++)if(t.id===o[n].id){e=!0,t.values[t.values.length-1]&&(h=t.values[t.values.length-1].index+1),f=o[n].values.length;for(var i=0;i<f;i++)o[n].values[i].index=h+i,s||(o[n].values[i].x=h+i);t.values=t.values.concat(o[n].values),o.splice(n,1);break}e||r.push(t.id)}),l.data.targets.forEach(function(t){for(var e=0;e<r.length;e++)if(t.id===r[e]){h=t.values[t.values.length-1].index+1;for(var n=0;n<f;n++)t.values.push({id:t.id,index:h+n,x:s?l.getOtherTargetX(h+n):h+n,value:null})}}),l.data.targets.length&&o.forEach(function(t){for(var e=[],n=l.data.targets[0].values[0].index;n<h;n++)e.push({id:t.id,index:n,x:s?l.getOtherTargetX(n):n,value:null});t.values.forEach(function(t){t.index+=h,s||(t.x+=h)}),t.values=e.concat(t.values)}),l.data.targets=l.data.targets.concat(o),c=(u=l.data.targets[0]).values[0],I(t.to)?(f=0,i=s?Q.call(l,t.to):t.to,u.values.forEach(function(t){t.x<i&&f++})):I(t.length)&&(f=t.length),a?1===a&&s&&(n=(u.values[u.values.length-1].x-c.x)/2,e=[new Date(+c.x-n),new Date(+c.x+n)]):(n=s?1<u.values.length?u.values[u.values.length-1].x-c.x:c.x-l.getXDomain(l.data.targets)[0]:1,e=[c.x-n,c.x]),e&&l.updateXDomain(null,!0,!0,!1,e),l.updateTargets(l.data.targets),l.redraw({flow:{index:c.index,length:f,duration:z(t.duration)?t.duration:l.config.transition_duration,done:t.done,orgDataCount:a},withLegend:!0,withTransition:1<a,withTrimXDomain:!1,withUpdateXAxis:!0}))}},he=Rn(10),de=function(){function t(t){this.owner=void 0,this.config=void 0,this.scale=void 0;var e=jt(),n=t.config,i=t.params;this.owner=t,this.config=n,this.scale=e,!n.noTransition&&i.config.transition_duration||(n.withoutTransition=!0),n.range=this.scaleExtent((i.orgXScale||e).range())}t.getSizeFor1Char=function(t){var r={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){try{var e=t.node().getBBox(),n=e.width,i=e.height;n&&i&&(r.w=n,r.h=i)}catch(t){}finally{t.text("")}}),this.getSizeFor1Char=function(){return r},r};var e=t.prototype;return e.getTickTransformSetter=function(t){var e=this.config,n="x"===t?function(t){return"translate("+(t+e.tickOffset)+",0)"}:function(t){return"translate(0,"+t+")"};return function(t,e){t.attr("transform",function(t){return n(Math.ceil(e(t)))})}},e.scaleExtent=function(t){var e=t[0],t=t[t.length-1];return e<t?[e,t]:[t,e]},e.generateTicks=function(t,e){var n=this.owner.params.tickStepSize,i=t.domain(),r=i[0],a=i[1],o=[];if(e&&n)for(var s=Math.round(r);s<=a;)o.push(s),s+=n;else if(t.ticks){e=this.config.tickArguments;if("log"!==t.type||e)o=t.ticks.apply(t,this.config.tickArguments||[]);else{for(var u=jt("_log").domain([0<r?r:1,a]).range(t.range()),o=u.ticks(),c=a.toFixed().length;15<o.length;c--)o=u.ticks(c);o.splice(0,1,r),o.splice(o.length-1,1,a)}o=o.map(function(t){return p(t)&&B(t)&&!isNaN(t)&&Math.round(10*t)/10||t})}else{for(var l=Math.ceil(r);l<a;l++)o.push(l);0<o.length&&0<o[0]&&o.unshift(o[0]-(o[1]-o[0]))}return o},e.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},e.textFormatted=function(t){var e=this.config.tickFormat,t=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,t=e?e(t):t;return I(t)?t:""},e.transitionise=function(t){var e=this.config,n=t;if(e.withoutTransition)n=t.interrupt();else if(e.transition||!this.owner.params.noTransition)try{n=t.transition(e.transition)}catch(t){}return n},t}(),ge=function(){function t(t){void 0===t&&(t={}),this.helper=void 0,this.config=void 0,this.params=void 0,this.g=void 0;var e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.config=e,this.params=t,this.helper=new de(this)}var e=t.prototype;return e.create=function(t){var h=this,d=this.config,g=this.helper,p=this.params,v=g.scale,y=d.orient,x=this.splitTickText.bind(this),_=/^(left|right)$/.test(y),m=/^(top|bottom)$/.test(y),b=g.getTickTransformSetter(m?"x":"y"),w=b===g.axisX?"y":"x",T=/^(top|left)$/.test(y)?-1:1,A=p.tickTextRotate;this.config.range=v.rangeExtent?v.rangeExtent():g.scaleExtent((p.orgXScale||v).range());var M,k=d.innerTickSize,S=d.tickLength,E=d.range,e=p.id,C=e&&/^(x|y|y2)$/.test(e)?p.config["axis_"+e+"_tick_text_position"]:{x:0,y:0},n="subX"===e?"subchart_axis_x":"axis_"+e,e=p.config[n+"_show"],D=!!e&&p.config[n+"_tick_show"],R=!!e&&p.config[n+"_tick_text_show"];t.each(function(){var t=(0,O.select)(this),e=this.__chart__||v,n=g.copyScale();M=t,this.__chart__=n,d.tickOffset=p.isCategory?Math.ceil((n(1)-n(0))/2):0;var i,r,a,o,s,u,c,l,f=t.selectAll(".domain").data([0]);f.enter().append("path").attr("class","domain").merge(f).attr("d",function(){var t=d.outerTickSize*T;return m?"M"+E[0]+","+t+"V0H"+E[1]+"V"+t:"M"+t+","+E[0]+"H0V"+E[1]+"H"+t}),(D||R)&&(i=d.tickValues||g.generateTicks(n,_),r=(o=t.selectAll(".tick").data(i,n)).enter().insert("g",".domain").attr("class","tick"),a=o.exit().remove(),o=r.merge(o),D&&r.append("line"),R&&r.append("text"),s=de.getSizeFor1Char(o),u=[],(f=o.select("text").selectAll("tspan").data(function(t,e){t=p.tickMultiline?x(t,n,i,_,s.w):$(g.textFormatted(t))?g.textFormatted(t).concat():[g.textFormatted(t)];return u[e]=t.length,t.map(function(t){return{index:e,splitted:t}})})).exit().remove(),(f=f.enter().append("tspan").merge(f).text(function(t){return t.splitted})).attr("x",m?0:S*T).attr("dx",(t=0,(t=/(top|bottom)/.test(y)&&A?8*Math.sin(Math.PI*(A/180))*("top"===y?-1:1):t)+(C.x||0))).attr("dy",function(t,e){var n=0;return"top"!==y&&(n=s.h,0===e&&(n=_?-((u[t.index]-1)*(s.h/2)-3):0===C.y?".71em":0)),B(n)&&C.y?n+C.y:n||".71em"}),f=o.select("line"),t=o.select("text"),r.select("line").attr(w+"2",k*T),r.select("text").attr(w,S*T),h.setTickLineTextPosition(f,t),p.tickTitle&&((f=t.select("title")).empty()?t.append("title"):f).text(function(t){return p.tickTitle[t]}),n.bandwidth?(l=(c=n).bandwidth()/2,n=e=function(t){return c(t)+l}):e.bandwidth?e=n:b(a,n),o=p.owner.state.flowing?g.transitionise(o):p.owner.$T(o),b(r,e),b(o.style("opacity",null),n))}),this.g=M},e.getTickXY=function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e},e.getTickSize=function(t){var e=this.helper.scale,n=this.config,i=n.innerTickSize,r=n.range,n=e(t)+(n.tickCentered?0:n.tickOffset);return r[0]<n&&n<r[1]?i:0},e.setTickLineTextPosition=function(t,e){function n(t){var e=["start","end"];return"top"===u&&e.reverse(),t?e[0<t?0:1]:"middle"}function i(t){return t?"rotate("+t+")":null}function r(t){return t?11.5-2.5*(t/("bottom"===u?15:23))*(0<t?1:-1):c}var a=this.getTickXY(),o=this.config,s=o.innerTickSize,u=o.orient,c=o.tickLength,l=o.tickOffset,f=this.params.tickTextRotate;switch(u){case"bottom":t.attr("x1",a.x).attr("x2",a.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",r(f)).style("text-anchor",n(f)).attr("transform",i(f));break;case"top":t.attr("x2",0).attr("y2",-s),e.attr("x",0).attr("y",2*-r(f)).style("text-anchor",n(f)).attr("transform",i(f));break;case"left":t.attr("x2",-s).attr("y1",a.y).attr("y2",a.y),e.attr("x",-c).attr("y",l).style("text-anchor","end");break;case"right":t.attr("x2",s).attr("y2",0),e.attr("x",c).attr("y",0).style("text-anchor","start")}},e.splitTickText=function(t,e,n,i,o){var r=this.params,a=this.helper.textFormatted(t),t=p(a)&&-1<a.indexOf("\n")?a.split("\n"):[];if(t.length)return t;if($(a))return a;var s=r.tickWidth;return(!s||s<=0)&&(s=i?95:r.isCategory?Math.ceil(e(n[1])-e(n[0]))-12:110),function t(e,n){for(var i,r,a=1;a<n.length;a++)if(" "===n.charAt(a)&&(i=a),r=n.substr(0,a+1),r=o*r.length,s<r)return t(e.concat(n.substr(0,i||a)),n.slice(i?i+1:a));return e.concat(n)}(t,a+"")},e.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},e.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient},e.tickFormat=function(t){var e=this.config;return arguments.length?(e.tickFormat=t,this):e.tickFormat},e.tickCentered=function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered},e.tickOffset=function(){return this.config.tickOffset},e.tickInterval=function(t){var e,i=this,n=this.config,r=n.outerTickSize,a=n.tickOffset,n=n.tickValues;return(e=this.params.isCategory?2*a:(e=(this.g.select("path.domain").node().getTotalLength()-2*r)/(t||this.g.selectAll("line").size()),n=n?n.map(function(t,e,n){e+=1;return e<n.length?i.helper.scale(n[e])-i.helper.scale(t):null}).filter(Boolean):[],Math.min.apply(Math,n.concat([e]))))===1/0?0:e},e.ticks=function(){for(var t=this.config,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.length?(t.tickArguments=R(n),this):t.tickArguments},e.tickCulling=function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling},e.tickValues=function(t){var e=this,n=this.config;if(F(t))n.tickValues=function(){return t(e.helper.scale.domain())};else{if(!arguments.length)return n.tickValues;n.tickValues=t}return this},e.setTransition=function(t){return this.config.transition=t,this},t}(),Gt={getAxisInstance:function(){return this.axis||new pe(this)}},pe=function(){function t(t){this.owner=void 0,this.x=void 0,this.subX=void 0,this.y=void 0,this.y2=void 0,this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}var e=t.prototype;return e.getAxisClassName=function(t){return P.axis+" "+P["axis"+D(t)]},e.isHorizontal=function(t,e){t=t.config.axis_rotated;return e?t:!t},e.isCategorized=function(){var t=this.owner,e=t.config,t=t.state;return 0<=e.axis_x_type.indexOf("category")||t.hasRadar},e.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||X(t.data_xs))},e.isTimeSeries=function(t){return"timeseries"===this.owner.config["axis_"+(t=void 0===t?"x":t)+"_type"]},e.isLog=function(t){return"log"===this.owner.config["axis_"+(t=void 0===t?"x":t)+"_type"]},e.isTimeSeriesY=function(){return this.isTimeSeries("y")},e.getAxisType=function(t){var e="linear";return this.isTimeSeries(t=void 0===t?"x":t)?e=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(e="log"),e},e.init=function(){var i=this,r=this.owner,a=r.config,t=r.$el,o=t.main,s=t.axis,u=r.state.clip,c=a.axis_rotated,t=["x","y"];a.axis_y2_show&&t.push("y2"),t.forEach(function(e){var t=i.getAxisClassName(e),n=P["axis"+e.toUpperCase()+"Label"];s[e]=o.append("g").attr("class",t).attr("clip-path",function(){var t=null;return"x"===e?t=u.pathXAxis:"y"===e&&(t=u.pathYAxis),t}).attr("transform",r.getTranslate(e)).style("visibility",a["axis_"+e+"_show"]?null:"hidden"),s[e].append("text").attr("class",n).attr("transform",["rotate(-90)",null]["x"===e?+!c:+c]).style("text-anchor",function(){return i.textAnchorForAxisLabel(e)}),i.generateAxes(e)})},e.setOrient=function(){var t=this.owner.config,e=t.axis_rotated,n=t.axis_y_inner,t=t.axis_y2_inner;this.orient={x:e?"left":"bottom",y:e?n?"top":"bottom":n?"right":"left",y2:e?t?"bottom":"top":t?"left":"right",subX:e?"left":"bottom"}},e.generateAxes=function(i){var r,a=this.owner,t=a.config,o=[],e=t["axis_"+i+"_axes"],t=t.axis_rotated;"x"===i?r=t?he.axisLeft:he.axisBottom:"y"===i?r=t?he.axisBottom:he.axisLeft:"y2"===i&&(r=t?he.axisTop:he.axisRight),e.length&&e.forEach(function(t){var e=t.tick||{},n=a.scale[i].copy();t.domain&&n.domain(t.domain),o.push(r(n).ticks(e.count).tickFormat(F(e.format)?e.format.bind(a.api):function(t){return t}).tickValues(e.values).tickSizeOuter(!1===e.outer?0:6))}),this.axesList[i]=o},e.updateAxes=function(){var c=this,l=this.owner,f=l.config,h=l.$el.main;Object.keys(this.axesList).forEach(function(a){var o=f["axis_"+a+"_axes"],s=l.scale[a].copy(),u=s.range();c.axesList[a].forEach(function(t,e){var n=t.scale().range();u.every(function(t,e){return t===n[e]})||t.scale().range(u);var i=c.getAxisClassName(a)+"-"+(e+1),r=h.select("."+i.replace(/\s/,"."));r.empty()?r=h.append("g").attr("class",i).style("visibility",f["axis_"+a+"_show"]?null:"hidden").call(t):(o[e].domain&&s.domain(o[e].domain),l.$T(r).call(t.scale(s))),r.attr("transform",l.getTranslate(a,e+1))})})},e.setAxis=function(t,e,n,i){var r=this.owner;"subX"!==t&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,e,n,!("x"!==t||!(r.scale.zoom||r.config.subchart_show||r.state.resizing))||i)},e.getAxis=function(t,e,n,i,r){var a,o=this.owner,s=o.config,u=/^(x|subX)$/.test(t),c=u?"x":t,l=u&&this.isCategorized(),f=this.orient[t],r=r?0:o.getAxisTickRotate(c);u?a="subX"===t?o.format.subXAxisTick:o.format.xAxisTick:(h=s["axis_"+t+"_tick_format"],F(h)&&(a=h.bind(o.api)));var h=this.tick[c],r=U({outerTick:n,noTransition:i,config:s,id:t,tickTextRotate:r,owner:o},u&&{isCategory:l,tickMultiline:s.axis_x_tick_multiline,tickWidth:s.axis_x_tick_width,tickTitle:l&&s.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});u||(r.tickStepSize=s["axis_"+c+"_tick_stepSize"]);var d,f=new ge(r).scale(u&&o.scale.zoom||e).orient(f);u&&this.isTimeSeries()&&h&&!F(h)?(d=Q.bind(o),h=h.map(function(t){return d(t)})):!u&&this.isTimeSeriesY()&&(f.ticks(s.axis_y_tick_time_value),h=null),h&&f.tickValues(h),f.tickFormat(a||!u&&o.isStackNormalized()&&function(t){return t+"%"}),l&&(f.tickCentered(s.axis_x_tick_centered),g(s.axis_x_tick_culling)&&(s.axis_x_tick_culling=!1));c=s["axis_"+c+"_tick_count"];return c&&f.ticks(c),f},e.updateXAxisTickValues=function(t,e){var n,i=this.owner,r=i.config,a=r.axis_x_tick_fit,r=r.axis_x_tick_count;return(a||r&&a)&&(n=i.mapTargetsToUniqueXs(t),this.isCategorized()&&r>n.length&&(r=n.length),n=this.generateTickValues(n,r,this.isTimeSeries())),e?e.tickValues(n):this.x&&(this.x.tickValues(n),null!=(e=this.subX)&&e.tickValues(n)),n},e.getId=function(t){var e=this.owner,n=e.config,e=e.scale,t=n.data_axes[t];return t=!t||!e[t]?"y":t},e.getXAxisTickFormat=function(t){var e,n=this.owner,i=n.config,r=n.format,a=t&&i.subchart_axis_x_tick_format||i.axis_x_tick_format,i=this.isTimeSeries(),o=this.isCategorized();return a?F(a)?e=a.bind(n.api):i&&(e=function(t){return t?r.axisTime(a)(t):""}):e=i?r.defaultAxisTime:o?n.categoryName:function(t){return t<0?t.toFixed(0):t},F(e)?function(t){return e.apply(n,o?[t,n.categoryName(t)]:[t])}:e},e.getTickValues=function(t){var e=this.owner,n=e.config["axis_"+t+"_tick_values"],t=e[t+"Axis"];return(F(n)?n.call(e.api):n)||(t?t.tickValues():void 0)},e.getLabelOptionByAxisId=function(t){return this.owner.config["axis_"+t+"_label"]},e.getLabelText=function(t){t=this.getLabelOptionByAxisId(t);return p(t)?t:t?t.text:null},e.setLabelText=function(t,e){var n=this.owner.config,i=this.getLabelOptionByAxisId(t);p(i)?n["axis_"+t+"_label"]=e:i&&(i.text=e)},e.getLabelPosition=function(t,e){var n=this.owner.config.axis_rotated,t=this.getLabelOptionByAxisId(t),i=d(t)&&t.position?t.position:e[+!n],n=function(t){return!!~i.indexOf(t)};return{isInner:n("inner"),isOuter:n("outer"),isLeft:n("left"),isCenter:n("center"),isRight:n("right"),isTop:n("top"),isMiddle:n("middle"),isBottom:n("bottom")}},e.getAxisLabelPosition=function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])},e.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},e.xForAxisLabel=function(t){var e=this.owner,n=e.state,i=n.width,r=n.height,a=this.getAxisLabelPosition(t),n=a.isMiddle?-r/2:0;return this.isHorizontal(e,"x"!==t)?n=a.isLeft?0:a.isCenter?i/2:i:a.isBottom&&(n=-r),n},e.dxForAxisLabel=function(t){var e=this.owner,n=this.getAxisLabelPosition(t),i=n.isBottom?"0.5em":"0";return this.isHorizontal(e,"x"!==t)?i=n.isLeft?"0.5em":n.isRight?"-0.5em":"0":n.isTop&&(i="-0.5em"),i},e.textAnchorForAxisLabel=function(t){var e=this.owner,n=this.getAxisLabelPosition(t),i=n.isMiddle?"middle":"end";return this.isHorizontal(e,"x"!==t)?i=n.isLeft?"start":n.isCenter?"middle":"end":n.isBottom&&(i="start"),i},e.dyForAxisLabel=function(t){var e,n=this.owner,i=n.config,r=i.axis_rotated,a=this.getAxisLabelPosition(t).isInner,o=i["axis_"+t+"_tick_rotate"]?n.getHorizontalAxisHeight(t):0,s=this.getMaxTickWidth(t);return e="x"===t?(n=i.axis_x_height,r?a?"1.2em":-25-s:a?"-0.5em":n?n-10:o?o-10:"3em"):(e={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],r?a?e[0]:o?o*("y2"===t?-1:1)-e[1]:e[2]:a?e[3]:(e[4]+(i["axis_"+t+"_inner"]?0:s+e[4]))*("y"===t?-1:1))},e.getMaxTickWidth=function(t,e){var n=this.owner,i=n.config,r=n.state.current,a=n.$el,o=a.svg,s=a.chart,u=r.maxTickWidths[t],c=0;if(e||!i["axis_"+t+"_show"]||0===n.filterTargetsToShow().length)return u.size;if(o){var l=/^y2?$/.test(t),a=n.filterTargetsToShow(n.data.targets),r=n.scale[t].copy().domain(n["get"+(l?"Y":"X")+"Domain"](a,t)),e=r.domain(),o=e[0]===e[1]&&e.every(function(t){return 0<t}),n=$(u.domain)&&u.domain[0]===u.domain[1]&&u.domain.every(function(t){return 0<t});if(o||n)return u.size;u.domain=e,l||u.ticks.splice(0);n=this.getAxis(t,r,!1,!1,!0),r=i["axis_"+t+"_tick_count"];!i["axis_"+t+"_tick_values"]&&r&&n.tickValues(this.generateTickValues(e,r,l?this.isTimeSeriesY():this.isTimeSeries())),l||this.updateXAxisTickValues(a,n);s=s.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");n.create(s),s.selectAll("text").each(function(t,e){var n=this.getBoundingClientRect().width;c=Math.max(c,n),l||(u.ticks[e]=n)}),s.remove()}return 0<c&&(u.size=c),u.size},e.getXAxisTickTextY2Overflow=function(t){var e=this.owner,n=e.axis,i=e.config,r=e.state,a=e.getAxisTickRotate("x");if((n.isCategorized()||n.isTimeSeries())&&i.axis_x_tick_fit&&!i.axis_x_tick_culling&&!i.axis_x_tick_multiline&&0<a&&a<90){e=r.current.width-e.getCurrentPaddingLeft(),a=this.getXAxisTickMaxOverflow(a,e-t),t=Math.max(0,a)+t;return Math.min(t,e/2)}return 0},e.getXAxisTickMaxOverflow=function(t,e){for(var n=this.owner,i=n.axis,r=n.config,a=n.state,o=i.isTimeSeries(),s=a.current.maxTickWidths.x.ticks,u=s.length,i=a.axis.x.padding,c=i.left,l=i.right,f=0,h=u-(o&&r.axis_x_tick_fit?.5:0),d=0;d<u;d++){var g=d+1,p=Math.cos(Math.PI*t/180)*s[d],v=g-(o?1:.5)+c;v<=0||(v=(e-p)/v,f=Math.max(f,p-v/2-((h-g)*v+l*v)))}a=n.filterTargetsToShow(n.data.targets),i=0;return!o&&r.axis_x_tick_count<=a.length&&a[0].values.length&&(n=jt(n.axis.getAxisType("x"),0,e-f).domain([-1*c,n.getXDomainMax(n.data.targets)+1+l]),i=Math.ceil((n(1)-n(0))/2)),f+i},e.updateLabels=function(n){var i=this,t=this.owner,e=t.$el.main,r=t.$T,a={x:e.select("."+P.axisX+" ."+P.axisXLabel),y:e.select("."+P.axisY+" ."+P.axisYLabel),y2:e.select("."+P.axisY2+" ."+P.axisY2Label)};Object.keys(a).filter(function(t){return!a[t].empty()}).forEach(function(t){var e=a[t];r(e,n).attr("x",function(){return i.xForAxisLabel(t)}).attr("dx",function(){return i.dxForAxisLabel(t)}).attr("dy",function(){return i.dyForAxisLabel(t)}).text(function(){return i.getLabelText(t)})})},e.getPadding=function(t,e,n,i){t=B(t)?t:t[e];return z(t)?this.owner.convertPixelToScale(/(bottom|top)/.test(e)?"y":"x",t,i):n},e.generateTickValues=function(t,e,n){var i=t;if(e){e=F(e)?e():e;if(1===e)i=[t[0]];else if(2===e)i=[t[0],t[t.length-1]];else if(2<e){for(var r,a=this.isCategorized(),o=e-2,s=t[0],u=t[t.length-1],i=[s],c=0;c<o;c++)r=+s+(u-s)/(1+o)*(c+1),i.push(n?new Date(r):a?Math.round(r):r);i.push(u)}}return i=!n?i.sort(function(t,e){return t-e}):i},e.generateTransitions=function(e){var t=this.owner,n=t.$el.axis,i=t.$T,t=["x","y","y2","subX"].map(function(t){return i(n[t],e)});return{axisX:t[0],axisY:t[1],axisY2:t[2],axisSubX:t[3]}},e.redraw=function(i,t,r){var a=this,e=this.owner,o=e.config,s=e.$el,u=t?"0":null;["x","y","y2","subX"].forEach(function(t){var e=a[t],n=s.axis[t];e&&n&&(r||o.transition_duration||(e.config.withoutTransition=!0),n.style("opacity",u),e.create(i["axis"+D(t)]))}),this.updateAxes()},e.redrawAxis=function(r,t,e,n,i){var a,o=this,s=this.owner,u=s.config,c=s.scale,l=s.$el,f=!!c.zoom;!f&&this.isCategorized()&&0===r.length&&c.x.domain([0,l.axis.x.selectAll(".tick").size()]),c.x&&r.length?(f||s.updateXDomain(r,t.UpdateXDomain,t.UpdateOrgXDomain,t.TrimXDomain),u.axis_x_tick_values||this.updateXAxisTickValues(r)):this.x&&(this.x.tickValues([]),null!=(f=this.subX)&&f.tickValues([])),u.zoom_rescale&&!n&&(a=c.x.orgDomain()),["y","y2"].forEach(function(t){var e,n,i=c[t];i&&(e=u["axis_"+t+"_tick_values"],n=u["axis_"+t+"_tick_count"],i.domain(s.getYDomain(r,t,a)),!e&&n&&(t=s.axis[t],i=i.domain(),t.tickValues(o.generateTickValues(i,i.every(function(t){return 0===t})?1:n,o.isTimeSeriesY()))))}),this.redraw(e,s.hasArcType(),i),this.updateLabels(t.Transition),(t.UpdateXDomain||t.UpdateXAxis||t.Y)&&r.length&&this.setCulling(),t.Y&&(null!=(t=c.subY)&&t.domain(s.getYDomain(r,"y")),null!=(t=c.subY2)&&t.domain(s.getYDomain(r,"y2")))},e.setCulling=function(){var t=this.owner,l=t.config,e=t.state,f=e.clip,h=e.current,d=t.$el;["subX","x","y","y2"].forEach(function(t){var e=d.axis[t],n="axis_"+("subX"===t?"x":t)+"_tick_culling",i=l[n];if(e&&i){var r,e=e.selectAll(".tick"),a=q(e.data()),o=a.length,s=l[n+"_max"],u=l[n+"_lines"];if(o){for(var c=1;c<o;c++)if(o/c<s){r=c;break}e.each(function(t){a.indexOf(t)%r&&((u?this.querySelector("text"):this).style.display="none")})}else e.style("display",null);"x"===t&&(t=h.maxTickWidths.x.clipPath?f.pathXAxisTickTexts:null,d.svg.selectAll("."+P.axisX+" .tick text").attr("clip-path",t))}})},t}(),Vt={initEventRect:function(){this.$el.main.select("."+P.chart).append("g").attr("class",P.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t=this,e=t.config,n=t.state,i=t.$el,r=t.isMultipleX();i.eventRect?t.updateEventRect(i.eventRect,!0):(e=t.$el.main.select("."+P.eventRects).style("cursor",e.zoom_enabled&&"drag"!==e.zoom_type?e.axis_rotated?"ns-resize":"ew-resize":null).classed(P.eventRectsMultiple,r).classed(P.eventRectsSingle,!r).selectAll("."+P.eventRect).data([0]).enter().append("rect"),t.updateEventRect(e),r?t.generateEventRectsForMultipleXs(e):t.generateEventRectsForSingleX(e),e.call(t.getDraggableSelection()),i.eventRect=e,"touch"!==t.state.inputType||i.svg.on("touchstart.eventRect")||t.hasArcType()||t.bindTouchOnEventRect(r)),r||(r=t.getMaxDataCountTarget(),t.updateDataIndexByX(r),t.updateXs(r),null!=t.updatePointClass&&t.updatePointClass(!0),n.eventReceiver.data=r),t.updateEventRectData()},bindTouchOnEventRect:function(i){function r(){o.unselectRect(),o.callOverOutForTouch()}var a,o=this,s=o.config,u=o.state,t=o.$el,c=t.eventRect,e=t.svg,t=s.interaction_inputType_touch.preventDefault,l=h(t)&&t||!1,f=!isNaN(t)&&t||null;c.on("touchstart",function(t){u.event=t,o.updateEventRect()}).on("touchstart.eventRect touchmove.eventRect",function(t){var e,n;u.event=t,!c.empty()&&c.classed(P.eventRect)?u.dragging||u.flowing||o.hasArcType()||1<t.touches.length||(n=(e=t).type,t=e.changedTouches[0]["client"+(s.axis_rotated?"Y":"X")],"touchstart"===n?l?e.preventDefault():null!==f&&(a=t):"touchmove"===n&&(l||!0===a||null!==f&&Math.abs(a-t)>=f)&&(a=!0,e.preventDefault()),t=c.node(),i?o.selectRectForMultipleXs(t):(e=o.getDataIndexFromEvent(u.event),o.callOverOutForTouch(e),-1===e?o.unselectRect():o.selectRectForSingle(t,c,e))):r()},!0).on("touchend.eventRect",function(t){u.event=t,!c.empty()&&c.classed(P.eventRect)&&(o.hasArcType()||!o.toggleShape||u.cancelClick)&&u.cancelClick&&(u.cancelClick=!1)},!0),e.on("touchstart",function(t){t=(u.event=t).target;t&&t!==c.node()&&r()})},updateEventRect:function(t,e){void 0===e&&(e=!1);var n=this.state,i=this.$el,r=n.eventReceiver,a=n.width,o=n.height,s=n.rendered,n=n.resizing,i=t||i.eventRect;s&&!n&&!e||(i.attr("x",0).attr("y",0).attr("width",a).attr("height",o),s||i.attr("class",P.eventRect)),r&&(r.rect=i.node().getBoundingClientRect())},updateEventRectData:function(){function n(t,e){return F(t)?t(e):t}var i,r,a,o,e,s=this,t=s.config,u=s.scale,c=s.state,l=u.zoom||u.x,f=t.axis_rotated,h=s.isMultipleX()?(r=i=0,a=c.width,c.height):(t=s.axis.isCategorized()?(e=s.getEventRectWidth(),function(t){return l(t.x)-e/2}):(o=function(t){t=t.index;return{prev:s.getPrevX(t),next:s.getNextX(t)}},e=function(t){var n=o(t),i=l.domain();return null===n.prev&&null===n.next?f?c.height:c.width:(Object.keys(n).forEach(function(t,e){n[t]=null!=(t=n[t])?t:i[e]}),Math.max(0,(l(n.next)-l(n.prev))/2))},function(t){var e=o(t),t=t.x;return null===e.prev&&null===e.next?0:(null===e.prev&&(e.prev=l.domain()[0]),(l(t)+l(e.prev))/2)}),i=f?0:t,r=f?t:0,a=f?c.width:e,f?e:c.height),d=c.eventReceiver;d.coords.splice(d.data.length),d.data.forEach(function(t,e){d.coords[e]={x:n(i,t),y:n(r,t),w:n(a,t),h:n(h,t)}})},selectRectForMultipleXs:function(t){var e,n,i=this,r=i.config,a=i.state,o=i.filterTargetsToShow(i.data.targets);a.dragging||i.hasArcType(o)||(e=b(a.event,t),n=i.findClosestFromTargets(o,e),!a.mouseover||n&&n.id===a.mouseover.id||(r.data_onout.call(i.api,a.mouseover),a.mouseover=void 0),n?(o=(i.isBubbleType(n)||i.isScatterType(n)||!r.tooltip_grouped?[n]:i.filterByX(o,n.x)).map(function(t){return i.addName(t)}),i.showTooltip(o,t),i.setExpand(n.index,n.id,!0),i.showGridFocus(o),(i.isBarType(n.id)||i.dist(n,e)<r.point_sensitivity)&&(i.$el.svg.select("."+P.eventRect).style("cursor","pointer"),a.mouseover||(r.data_onover.call(i.api,n),a.mouseover=n))):i.unselectRect())},unselectRect:function(){var t=this.config,e=this.$el,n=e.circle,e=e.tooltip;this.$el.svg.select("."+P.eventRect).style("cursor",null),this.hideGridFocus(),e&&(this.hideTooltip(),this._handleLinkedCharts(!1)),n&&!t.point_focus_only&&this.unexpandCircles(),this.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(t){var a=this,o=a.config,s=a.state,u=s.eventReceiver,c=t.style("cursor",o.data_selection_enabled&&o.data_selection_grouped?"pointer":null).on("click",function(t){s.event=t;var e=u.currentIdx,e=u.data[-1===e?a.getDataIndexFromEvent(t):e];a.clickHandlerForSingleX.bind(this)(e,a)});return"mouse"===s.inputType&&c.on("mouseover",function(t){s.event=t,a.updateEventRect()}).on("mousemove",function(t){var e,n,i,r=function(t){t=t?a.getDataIndexFromEvent(t):u.currentIdx;return-1<t?u.data[t]:null}(t);s.event=t,r&&(e=r.index,n=o.line_step_type,o.line_step_tooltipMatch&&a.hasType("step")&&/^step\-(before|after)$/.test(n)&&(i=a.scale.zoom||a.scale.x,r=a.axis.xs[e],t=i.invert(b(t,this)[0]),"step-after"===n&&t<r?--e:"step-before"===n&&r<t&&(e+=1)),s.dragging||s.flowing||a.hasArcType()||o.tooltip_grouped&&e===u.currentIdx||(e!==u.currentIdx&&(a.setOverOut(!1,u.currentIdx),u.currentIdx=e),-1===e?a.unselectRect():a.selectRectForSingle(this,c,e),a.setOverOut(-1!==e,e)))}).on("mouseout",function(t){s.event=t,o&&!a.hasArcType()&&-1!==u.currentIdx&&(a.unselectRect(),a.setOverOut(!1,u.currentIdx),u.currentIdx=-1)}),c},clickHandlerForSingleX:function(t,e){var n,i=e,r=i.config,a=i.state,e=i.$el.main;!t||i.hasArcType()||a.cancelClick?a.cancelClick&&(a.cancelClick=!1):(n=t.index,e.selectAll("."+P.shape+"-"+n).each(function(t){(r.data_selection_grouped||i.isWithinShape(this,t))&&(null!=i.toggleShape&&i.toggleShape(this,t,n),r.data_onclick.bind(i.api)(t,this))}))},generateEventRectsForMultipleXs:function(t){var e=this,n=e.state;t.on("click",function(t){n.event=t,e.clickHandlerForMultipleXS.bind(this)(e)}),"mouse"===n.inputType&&t.on("mouseover mousemove",function(t){n.event=t,e.selectRectForMultipleXs(this)}).on("mouseout",function(t){n.event=t,e.config&&!e.hasArcType()&&e.unselectRect()})},clickHandlerForMultipleXS:function(t){var e,n=t,i=n.config,r=n.state,t=n.filterTargetsToShow(n.data.targets);n.hasArcType(t)||(r=b(r.event,this),(e=n.findClosestFromTargets(t,r))&&(n.isBarType(e.id)||n.dist(e,r)<i.point_sensitivity)&&n.$el.main.selectAll("."+P.shapes+n.getTargetSelectorSuffix(e.id)).selectAll("."+P.shape+"-"+e.index).each(function(){(i.data_selection_grouped||n.isWithinShape(this,e))&&(null!=n.toggleShape&&n.toggleShape(this,e,e.index),i.data_onclick.bind(n.api)(e,this))}))}},ve=Rn(11),Ut={generateFlow:function(t){var n=this,r=n.data,a=n.state,o=n.$el;return function(){var e=t.flow.length;a.flowing=!0,r.targets.forEach(function(t){t.values.splice(0,e)}),n.updateXGrid&&n.updateXGrid(!0);var i={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(t){var e=t.split("."),n=o[e[0]];null!=(n=n&&1<e.length?n[e[1]]:n)&&n.size()&&(i[t]=n)}),n.hideGridFocus(),n.setFlowList(i,t)}},setFlowList:function(e,t){var n,i=this,r=t.flow,a=t.targets,o=r.duration,s=void 0===o?t.duration:o,u=r.index,o=r.length,r=r.orgDataCount,c=i.getFlowTransform(a,r,u,o),o=kt();o.add(Object.keys(e).map(function(t){return n=e[t].transition().ease(ve.easeLinear).duration(s),n="axis.x"===t?n.call(function(t){i.axis.x.setTransition(t).create(t)}):("region.list"===t?n.filter(i.isRegionOnX):n).attr("transform",c)})),n.call(o,function(){i.cleanUpFlow(e,t)})},cleanUpFlow:function(n,t){var i=this,r=i.config,a=i.state,o=i.$el.svg,s=r.axis_rotated,e=t.flow,u=t.shape,c=t.xv,t=u.pos,l=t.cx,f=t.cy,h=t.xForText,d=t.yForText,t=e.done,t=void 0===t?function(){}:t,g=e.length;g&&(["circle","text","shape","eventRect"].forEach(function(t){for(var e=[],n=0;n<g;n++)e.push("."+P[t]+"-"+n);o.selectAll("."+P[t+"s"]).selectAll(e).remove()}),o.select("."+P.xgrid).remove()),Object.keys(n).forEach(function(t){var e=n[t];"axis.x"!==t&&e.attr("transform",null),"grid.x"===t?e.attr(a.xgridAttr):"gridLines.x"===t?e.attr("x1",s?0:c).attr("x2",s?a.width:c):"gridLines.x"===t?(e.select("line").attr("x1",s?0:c).attr("x2",s?a.width:c),e.select("text").attr("x",s?a.width:0).attr("y",c)):/^(area|bar|line)$/.test(t)?e.attr("d",u.type[t]):"text"===t?e.attr("x",h).attr("y",d).style("fill-opacity",i.opacityForText.bind(i)):"circle"===t?i.isCirclePoint()?e.attr("cx",l).attr("cy",f):e.attr("x",function(t){return l(t)-r.point_r}).attr("y",function(t){return f(t)-r.point_r}).attr("cx",l).attr("cy",f):"region.list"===t&&e.select("rect").filter(i.isRegionOnX).attr("x",i.regionX.bind(i)).attr("width",i.regionWidth.bind(i))}),r.interaction_enabled&&i.redrawEventRect(),t.call(i.api),a.flowing=!1},getFlowTransform:function(t,e,n,i){var r=this.data,a=this.scale.x,o=r.targets[0].values,r=this.getValueOnIndex(o,n),n=this.getValueOnIndex(o,n+i),i=a.domain(),t=this.updateXDomain(t,!0,!0),n=e?1===e||(null==r?void 0:r.x)===(null==n?void 0:n.x)||this.axis.isTimeSeries()?a(i[0])-a(t[0]):a(r.x)-a(n.x):1!==o.length?a(i[0])-a(t[0]):this.axis.isTimeSeries()?(r=this.getValueOnIndex(o,0),n=this.getValueOnIndex(o,o.length-1),a(r.x)-a(n.x)):S(t)/2;return"translate("+n+",0) scale("+S(i)/S(t)+",1)"}},qt={initClip:function(){var t=this.state.clip;t.id=this.state.datetimeId+"-clip",t.idXAxis=t.id+"-xaxis",t.idYAxis=t.id+"-yaxis",t.idGrid=t.id+"-grid",t.path=this.getClipPath(t.id),t.pathXAxis=this.getClipPath(t.idXAxis),t.pathYAxis=this.getClipPath(t.idYAxis),t.pathGrid=this.getClipPath(t.idGrid)},getClipPath:function(t){var e=this.config;return!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t)?null:"url("+(!!u.navigator&&0<=u.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":L.URL.split("#")[0])+"#"+t+")"},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this.config,n=this.state,i=n.margin,r=n.width,a=n.height,o=e.axis_rotated,s=Math.max(30,i.left)-(o?0:20),n=o?-(1+s):-(s-1),e=-Math.max(15,i.top),s=o?i.left+20:r+10+s,i=(o?i.top+a+10:i.bottom)+20;t.attr("x",n).attr("y",e).attr("width",s).attr("height",i)},setYAxisClipPath:function(t){var e=this.config,n=this.state,i=n.margin,r=n.width,a=n.height,o=e.axis_rotated,s=Math.max(30,i.left)-(o?20:0),n=e.axis_y_inner,e=-(o?20:i.top),r=(o?r+15+s:i.left+20)+(n?20:0),a=(o?i.bottom:i.top+a)+10;t.attr("x",n?-1:o?-(1+s):-(s-1)).attr("y",e).attr("width",r).attr("height",a)},updateXAxisTickClip:function(){var t=this,e=t.config,n=t.state,i=n.clip,r=n.xAxisHeight,a=t.$el.defs,o=t.getHorizontalAxisHeight("x");a&&!i.idXAxisTickTexts&&(n=i.id+"-xaxisticktexts",t.appendClip(a,n),i.pathXAxisTickTexts=t.getClipPath(i.idXAxisTickTexts),i.idXAxisTickTexts=n),!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&o!==r&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=o},setXAxisTickClipWidth:function(){var t=this.config,e=this.state.current.maxTickWidths,n=this.getAxisTickRotate("x");!t.axis_x_tick_multiline&&n?(n=Math.sin(Math.PI/180*Math.abs(n)),e.x.clipPath=(this.getHorizontalAxisHeight("x")-20)/n):e.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this.state,e=t.clip,n=t.current,t=this.$el.svg;t&&t.select("#"+e.idXAxisTickTexts+" rect").attr("width",n.maxTickWidths.x.clipPath).attr("height",30)}};function ye(n,i,r){return function(t){var e=n?0:i;return"start"===t.position?e=n?-r:0:"middle"===t.position&&(e=(n?-r:i)/2),e}}function xe(t,e){"grid"===e&&t.each(function(){var e=(0,O.select)(this);["x1","x2","y1","y2"].forEach(function(t){return e.attr(t,Math.ceil(+e.attr(t)))})})}Zt={hasGrid:function(){var e=this.config;return["x","y"].some(function(t){return e["grid_"+t+"_show"]||e["grid_"+t+"_lines"].length})},initGrid:function(){this.hasGrid()&&this.initGridLines(),this.initFocusGrid()},initGridLines:function(){var t=this.config,e=this.state.clip,n=this.$el;(t.grid_x_lines.length||t.grid_y_lines.length)&&(n.gridLines.main=n.main.insert("g","."+P.chart+(t.grid_lines_front?" + *":"")).attr("clip-path",e.pathGrid).attr("class",P.grid+" "+P.gridLines),n.gridLines.main.append("g").attr("class",P.xgridLines),n.gridLines.main.append("g").attr("class",P.ygridLines),n.gridLines.x=(0,O.selectAll)([]))},updateXGrid:function(t){var e=this.config,n=this.scale,i=this.state,r=this.$el,a=r.main,o=r.grid,s=e.axis_rotated,r=this.generateGridData(e.grid_x_type,n.x),u=this.axis.isCategorized()?this.axis.x.tickOffset():0,e=function(t){return(n.zoom||n.x)(t)+u*(s?-1:1)};i.xgridAttr=s?{x1:0,x2:i.width,y1:e,y2:e}:{x1:e,x2:e,y1:0,y2:i.height},o.x=a.select("."+P.xgrids).selectAll("."+P.xgrid).data(r),o.x.exit().remove(),o.x=o.x.enter().append("line").attr("class",P.xgrid).merge(o.x),t||o.x.each(function(){var e=(0,O.select)(this);Object.keys(i.xgridAttr).forEach(function(t){e.attr(t,i.xgridAttr[t]).style("opacity",function(){return e.attr(s?"y1":"x1")===(s?i.height:0)?"0":null})})})},updateYGrid:function(){var e=this,t=e.config,n=e.state,i=e.$el,r=i.grid,a=i.main,o=t.axis_rotated,i=e.axis.y.tickValues()||e.scale.y.ticks(t.grid_y_ticks),t=function(t){return Math.ceil(e.scale.y(t))};r.y=a.select("."+P.ygrids).selectAll("."+P.ygrid).data(i),r.y.exit().remove(),r.y=r.y.enter().append("line").attr("class",P.ygrid).merge(r.y),r.y.attr("x1",o?t:0).attr("x2",o?t:n.width).attr("y1",o?0:t).attr("y2",o?n.height:t),xe(r.y,"grid")},updateGrid:function(){var t=this.$el,e=t.grid;t.gridLines.main||this.initGridLines(),e.main.style("visibility",this.hasArcType()?"hidden":null),this.hideGridFocus(),this.updateXGridLines(),this.updateYGridLines()},updateXGridLines:function(){var t=this.config,e=this.$el,n=e.gridLines,i=e.main,r=this.$T,e=t.axis_rotated;t.grid_x_show&&this.updateXGrid();i=i.select("."+P.xgridLines).selectAll("."+P.xgridLine).data(t.grid_x_lines);r(i.exit()).style("opacity","0").remove();t=i.enter().append("g");t.append("line").style("opacity","0"),t.append("text").attr("transform",e?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),r((i=t.merge(i)).attr("class",function(t){return(P.xgridLine+" "+(t.class||"")).trim()}).select("text").attr("text-anchor",le).attr("dx",fe)).text(function(t){return t.text}).style("opacity",null),n.x=i},updateYGridLines:function(){var t=this.config,e=this.state,n=e.width,i=e.height,r=this.$el,a=this.$T,o=t.axis_rotated;t.grid_y_show&&this.updateYGrid(),a((e=r.main.select("."+P.ygridLines).selectAll("."+P.ygridLine).data(t.grid_y_lines)).exit()).style("opacity","0").remove();t=e.enter().append("g");t.append("line").style("opacity","0"),t.append("text").attr("transform",o?"rotate(-90)":"").style("opacity","0");e=t.merge(e),t=this.yv.bind(this);a(e.attr("class",function(t){return(P.ygridLine+" "+(t.class||"")).trim()}).select("line")).attr("x1",o?t:0).attr("x2",o?t:n).attr("y1",o?0:t).attr("y2",o?i:t).style("opacity",null),a(e.select("text").attr("text-anchor",le).attr("dx",fe)).attr("dy",-5).attr("x",ye(o,n,i)).attr("y",t).text(function(t){return t.text}).style("opacity",null),r.gridLines.y=e},redrawGrid:function(t){var e=this.config.axis_rotated,n=this.state,i=n.width,r=n.height,a=this.$el.gridLines,o=this.$T,s=this.xv.bind(this),n=a.x.select("line"),a=a.x.select("text"),n=o(n,t).attr("x1",e?0:s).attr("x2",e?i:s).attr("y1",e?s:0).attr("y2",e?s:r),a=o(a,t).attr("x",ye(!e,i,r)).attr("y",s).text(function(t){return t.text});return[n.style("opacity",null),a.style("opacity",null)]},initFocusGrid:function(){var t=this.config,e=this.state.clip,n=this.$el,i=t.grid_front,i="."+P[i&&n.gridLines.main?"gridLines":"chart"]+(i?" + *":""),e=n.main.insert("g",i).attr("clip-path",e.pathGrid).attr("class",P.grid);n.grid.main=e,t.grid_x_show&&e.append("g").attr("class",P.xgrids),t.grid_y_show&&e.append("g").attr("class",P.ygrids),t.interaction_enabled&&t.grid_focus_show&&(e.append("g").attr("class",P.xgridFocus).append("line").attr("class",P.xgridFocus),t.grid_focus_y&&!t.tooltip_grouped&&e.append("g").attr("class",P.ygridFocus).append("line").attr("class",P.ygridFocus))},showGridFocus:function(t){var r,a,o=this,e=o.config,n=o.state,s=n.width,u=n.height,c=e.axis_rotated,i=o.$el.main.selectAll("line."+P.xgridFocus+", line."+P.ygridFocus),n=(t||[i.datum()]).filter(function(t){return t&&z(o.getBaseValue(t))});!e.tooltip_show||0===n.length||o.hasType("bubble")||o.hasArcType()||(r=e.grid_focus_edge&&!e.tooltip_grouped,a=o.xx.bind(o),i.style("visibility",null).data(n.concat(n)).each(function(t){var n,i=(0,O.select)(this),e={x:a(t),y:o.getYScaleById(t.id)(t.value)};n=i.classed(P.xgridFocus)?c?[null,e.x,r?e.y:s,e.x]:[e.x,r?e.y:null,e.x,u]:(t="y2"===o.axis.getId(t.id),c?[e.y,r&&!t?e.x:null,e.y,r&&t?e.x:u]:[r&&t?e.x:null,e.y,r&&!t?e.x:s,e.y]),["x1","y1","x2","y2"].forEach(function(t,e){return i.attr(t,n[e])})}),xe(i,"grid"),null!=o.showCircleFocus&&o.showCircleFocus(t))},hideGridFocus:function(){var t=this.state,e=t.inputType,n=t.resizing,t=this.$el.main;"mouse"!==e&&n||(t.selectAll("line."+P.xgridFocus+", line."+P.ygridFocus).style("visibility","hidden"),null!=this.hideCircleFocus&&this.hideCircleFocus())},updateGridFocus:function(){var t=this.state,e=t.inputType,n=t.width,i=t.height,r=t.resizing,t=this.$el.grid.main.select("line."+P.xgridFocus);return"touch"===e?t.empty()?r&&null!=this.showCircleFocus&&this.showCircleFocus():this.showGridFocus():(r=this.config.axis_rotated,t.attr("x1",r?0:-10).attr("x2",r?n:-10).attr("y1",r?-10:0).attr("y2",r?-10:i)),!0},generateGridData:function(t,e){var n=this.$el.main.select("."+P.axisX).selectAll(".tick").size(),i=[];if("year"===t)for(var r=this.getXDomain().map(function(t){return t.getFullYear()}),t=r[0],a=r[1],o=t;o<=a;o++)i.push(new Date(o+"-01-01 00:00:00"));else(i=e.ticks(10)).length>n&&(i=i.filter(function(t){return(t+"").indexOf(".")<0}));return i},getGridFilterToRemove:function(t){return t?function(e){var n=!1;return($(t)?t.concat():[t]).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)}),n}:function(){return!0}},removeGridLines:function(t,e){var n=this.config,i=this.$T,r=this.getGridFilterToRemove(t),a=e?P.xgridLines:P.ygridLines,t=e?P.xgridLine:P.ygridLine;i(this.$el.main.select("."+a).selectAll("."+t).filter(r)).style("opacity","0").remove();e="grid_"+(e?"x":"y")+"_lines";n[e]=n[e].filter(function(t){return!r(t)})}},Kt={initRegion:function(){var t=this.$el;t.region.main=t.main.insert("g",":first-child").attr("clip-path",this.state.clip.path).attr("class",P.regions)},updateRegion:function(){var t=this.config,e=this.$el.region,n=this.$T;e.main||this.initRegion(),e.main.style("visibility",this.hasArcType()?"hidden":null);t=e.main.selectAll("."+P.region).data(t.regions);n(t.exit()).style("opacity","0").remove(),(t=t.enter().append("g").merge(t).attr("class",this.classRegion.bind(this))).append("rect").style("fill-opacity","0"),e.list=t},redrawRegion:function(t){var e=this,n=e.$el.region;return[(0,e.$T)(n.list.select("rect"),t).attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)).style("fill-opacity",function(t){return z(t.opacity)?t.opacity:null}).on("end",function(){(0,O.select)(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(t,e){var n=this.config,i=this.scale,r=n.axis_rotated,a="x"===t,n="start",t=0;return"y"===e.axis||"y2"===e.axis?(a||(n="end"),(a?r:!r)&&n in e&&(t=(0,i[e.axis])(e[n]))):(a?!r:r)&&n in e&&(t=(i.zoom||i.x)(this.axis.isTimeSeries()?Q.call(this,e[n]):e[n])),t},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var n=this.config,i=this.scale,r=this.state,a=n.axis_rotated,o="width"===t,s=this[o?"regionX":"regionY"](e),n="end",t=r[t];return"y"===e.axis||"y2"===e.axis?(o||(n="start"),(o?a:!a)&&n in e&&(t=(0,i[e.axis])(e[n]))):(o?!a:a)&&n in e&&(t=(i.zoom||i.x)(this.axis.isTimeSeries()?Q.call(this,e[n]):e[n])),t<s?0:t-s},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}},Jt={getAxisSize:function(t){var e=this.config.axis_rotated;return e&&"x"===t||!e&&/y2?/.test(t)?this.getAxisWidthByAxisId(t,!0):this.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){if(this.axis){var n=null==(n=this.axis)?void 0:n.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)}return 40},getHorizontalAxisHeight:function(t){var e=this.config,n=this.state,i=n.current,r=n.rotatedPadding,a=n.isLegendRight,o=n.isLegendInset,s=e.axis_rotated,n=30;if("x"===t&&!e.axis_x_show)return 8;if("x"===t&&e.axis_x_height)return e.axis_x_height;if("y"===t&&!e.axis_y_show)return!e.legend_show||a||o?1:10;if("y2"===t&&!e.axis_y2_show)return r.top;r=this.getAxisTickRotate(t);return("x"===t&&!s||/y2?/.test(t)&&s)&&r&&(n=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(r))/180),!e.axis_x_tick_multiline&&i.height&&n>i.height/2&&(n=i.height/2)),n+(this.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||s?0:-10)},getEventRectWidth:function(){return Math.max(0,this.axis.x.tickInterval())},getAxisTickRotate:function(t){var e,n,i=this.axis,r=this.config,a=this.state,o=this.$el,s=r["axis_"+t+"_tick_rotate"];return"x"===t&&(e=i.isCategorized()||i.isTimeSeries(),r.axis_x_tick_fit&&e&&(n=r.axis_x_tick_count,t=a.current.maxTickWidths.x.ticks.length,i=0,n?i=t<n?t:n:t&&(i=t),i!==a.axis.x.tickCount&&(t=this.data.targets,a.axis.x.padding=this.getXDomainPadding([this.getXDomainMinMax(t,"min"),this.getXDomainMinMax(t,"max")],i)),a.axis.x.tickCount=i),o.svg&&r.axis_x_tick_fit&&!r.axis_x_tick_multiline&&!r.axis_x_tick_culling&&r.axis_x_tick_autorotate&&e&&(s=this.needToRotateXAxisTickTexts()?r.axis_x_tick_rotate:0)),s},needToRotateXAxisTickTexts:function(){var t=this.state,e=t.axis,t=t.current.width-this.getCurrentPaddingLeft(!1)-this.getCurrentPaddingRight(),e=e.x.tickCount+e.x.padding.left+e.x.padding.right;return(e?t/e:0)<this.axis.getMaxTickWidth("x")}},Qt={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},Dt={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]};function _e(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function me(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?_e(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var Dt=me(me(me({axis_rotated:!1},{axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]}),Qt),Dt),be=[Lt,{category:function(t,e){var n=this.internal,i=n.config;return 1<arguments.length&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},categories:function(t){var e=this.internal,n=e.config;return arguments.length&&(n.axis_x_categories=t,e.redraw()),n.axis_x_categories}},Nt,It,Yt,Ot,Bt,Xt],we=[Gt,qt,Vt,Ut,Zt,Kt,Jt],Te=[{data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},Dt,{grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0}],Ae=Rn(12),Me={initPie:function(){var t=this.config,e=t.data_type,n=t.pie_padding,i=t[e+"_startingAngle"]||0,e=(this.hasType("pie")&&n?.01*n:t[e+"_padAngle"])||0;this.pie=(0,Ht.pie)().startAngle(i).endAngle(i+2*Math.PI).padAngle(e).value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}).sort(this.getSortCompareFn.bind(this)(!0))},updateRadius:function(){var t=this.config,e=this.state,n=t.pie_padding,i=t.gauge_width||t.donut_width,r=this.filterTargetsToShow(this.data.targets).length*t.gauge_arcs_minWidth;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2*(this.hasMultiArcGauge()?.85:1),e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=i?(e.radius-i)/e.radius:.6,e.gaugeArcWidth=i||(r<=e.radius-e.innerRadius?e.radius-e.innerRadius:r<=e.radius?r:e.radius);n=t.pie_innerRadius||(n?n*(e.innerRadiusRatio+.1):0);e.outerRadius=t.pie_outerRadius,e.innerRadius=this.hasType("donut")||this.hasType("gauge")?e.radius*e.innerRadiusRatio:n},getRadius:function(t){var e=null==t?void 0:t.data,n=this.state,t=n.innerRadius,n=n.outerRadius;return!B(t)&&e&&(t=t[e.id]||0),Y(n)&&e&&e.id in n?n=n[e.id]:B(n)||(n=this.state.radius),{innerRadius:t,outerRadius:n}},updateArc:function(){this.updateRadius(),this.svgArc=this.getSvgArc(),this.svgArcExpanded=this.getSvgArcExpanded()},getArcLength:function(){var t=3.6*this.config.gauge_arcLength,e=t/360*2;return t<-360?e=-2:360<t&&(e=2),e*Math.PI},getStartAngle:function(){var t=this.config,e=t.gauge_fullCircle,n=-1*Math.PI/2,i=Math.PI/2,t=t.gauge_startingAngle;return!e&&t<=n?t=n:!e&&i<=t?t=i:(t>Math.PI||t<-1*Math.PI)&&(t=Math.PI),t},updateAngle:function(t){var e=this,n=e.config,i=e.state,r=e.pie,a=t,o=!1;if(!n)return null;var s,u=e.getStartAngle(),c=n.gauge_fullCircle?e.getArcLength():-2*u;return a.data&&e.isGaugeType(a.data)&&!e.hasMultiArcGauge()&&(s=n.gauge_min,t=n.gauge_max,i=e.getTotalDataSum(i.rendered),r=r.startAngle(u).endAngle(c*((i-s)/(t-s))+u)),r(e.filterTargetsToShow()).forEach(function(t,e){o||t.data.id!==a.data.id||(o=!0,(a=t).index=e)}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),a.data&&e.hasMultiArcGauge()&&(r=n.gauge_min,e=n.gauge_max,n=a.value<r?0:a.value<e?a.value-r:e-r,a.startAngle=u,a.endAngle=u+c/(e-r)*n),o?a:null},getSvgArc:function(){function t(t,e){var n,i="M 0 0";return(t.value||t.data)&&(n=!e&&r.updateAngle(t),e?i=o(t):n&&(i=o(n))),i}var r=this,n=r.state,i=n.gaugeArcWidth/r.filterTargetsToShow(r.data.targets).length,a=r.hasMultiArcGauge(),o=(0,Ht.arc)().innerRadius(function(t){var e=r.getRadius(t).innerRadius;return a?n.radius-i*(t.index+1):B(e)?e:0}).outerRadius(function(t){var e=r.getRadius(t).outerRadius;return a?n.radius-i*t.index:e});return t.centroid=o.centroid,t},getSvgArcExpanded:function(t){var n=this,i=n.state,r=t||1,a=i.gaugeArcWidth/n.filterTargetsToShow(n.data.targets).length,o=n.hasMultiArcGauge(),s=Math.min(i.radiusExpanded*r-i.radius,.8*a-100*(1-r)),e=(0,Ht.arc)().innerRadius(function(t){return o?i.radius-a*(t.index+1):n.getRadius(t).innerRadius}).outerRadius(function(t){var e=o?i.radius-a*t.index+s:(t=n.getRadius(t).outerRadius,e=i.radiusExpanded,i.radius!==t&&(e-=Math.abs(i.radius-t)),e*r);return e});return function(t){t=n.updateAngle(t);return t?e(t):"M 0 0"}},getArc:function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e,n,i,r=this,a=r.config,o=r.state.radiusExpanded,s=r.updateAngle(t),u="";return s&&(r.hasMultiArcGauge()?(e=Math.sin(s.endAngle-Math.PI/2),u="translate("+(n=Math.cos(s.endAngle-Math.PI/2)*(o+25))+","+(i=e*(o+15-Math.abs(10*e))+3)+")"):(!r.hasType("gauge")||1<r.data.targets.length)&&(e=r.getRadius(t).outerRadius,n=(s=this.svgArc.centroid(s).map(function(t){return isNaN(t)?0:t}))[0],i=s[1],s=Math.sqrt(n*n+i*i),u="translate("+n*(a=(a=r.hasType("donut")&&a.donut_label_ratio||r.hasType("pie")&&a.pie_label_ratio)?F(a)?a.bind(r.api)(t,e,s):a:e&&(s?(.375<36/e?1.175-36/e:.8)*e/s:0))+","+i*a+")")),u},convertToArcData:function(t){return this.addName({id:(t.data||t).id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){var r=this,a=r.hasType("gauge");r.shouldShowArcLabel()&&t.style("fill",r.updateTextColor.bind(r)).attr("filter",r.updateTextBacgroundColor.bind(r)).each(function(t){var e=(0,O.select)(this),n=r.updateAngle(t),i=r.getRatio("arc",n);r.meetsLabelThreshold(i,(r.hasType("donut")?"donut":r.hasType("gauge")&&"gauge")||r.hasType("pie")&&"pie")?(n=(n||t).value,_(e,(r.getArcLabelFormat()||r.defaultArcValueFormat)(n,i,t.data.id).toString(),[-1,1],a)):e.text("")})},expandArc:function(t){var e,n,i=this,r=i.state.transiting,a=i.$el;r?e=setInterval(function(){r||(clearInterval(e),0<a.legend.selectAll("."+P.legendItemFocused).size()&&i.expandArc(t))},10):(n=i.mapToTargetIds(t),a.svg.selectAll(i.selectorTargets(n,"."+P.chartArc)).each(function(t){var e;i.shouldExpand(t.data.id)&&(e=i.getExpandConfig(t.data.id,"duration"),t=i.getSvgArcExpanded(i.getExpandConfig(t.data.id,"rate")),(0,O.select)(this).selectAll("path").transition().duration(e).attr("d",i.svgArcExpanded).transition().duration(2*e).attr("d",t))}))},unexpandArc:function(t){var e=this,n=e.state.transiting,i=e.$el.svg;n||(t=e.mapToTargetIds(t),i.selectAll(e.selectorTargets(t,"."+P.chartArc)).selectAll("path").transition().duration(function(t){return e.getExpandConfig(t.data.id,"duration")}).attr("d",e.svgArc),i.selectAll(""+P.arc).style("opacity",null))},getExpandConfig:function(t,e){var n,i=this.config;return this.isDonutType(t)?n="donut":this.isGaugeType(t)?n="gauge":this.isPieType(t)&&(n="pie"),n?i[n+"_expand_"+e]:{duration:50,rate:.98}[e]},shouldExpand:function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},shouldShowArcLabel:function(){var e=this,n=e.config;return["pie","donut","gauge"].some(function(t){return e.hasType(t)&&n[t+"_label_show"]})},getArcLabelFormat:function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),F(e)?e.bind(this.api):e},getArcTitle:function(){var t=this.hasType("donut")?"donut":this.hasType("gauge")&&"gauge";return t?this.config[t+"_title"]:""},updateTargetsForArc:function(t){var e=this.$el,n=this.hasType("gauge"),i=this.getChartClass("Arc"),r=this.getClass("arcs",!0),a=this.classFocus.bind(this),o=e.main.select("."+P.chartArcs),s=o.selectAll("."+P.chartArc).data(this.pie(t)).attr("class",function(t){return i(t)+a(t.data)}),t=s.enter().append("g").attr("class",i);t.append("g").attr("class",r).merge(s),t.append("text").attr("dy",n&&!this.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none"),e.text=o.selectAll("."+P.target+" text")},initArc:function(){var t=this.$el;t.arcs=t.main.select("."+P.chart).append("g").attr("class",P.chartArcs).attr("transform",this.getTranslate("arc")),this.setArcTitle()},setArcTitle:function(){var t,e=this.getArcTitle(),n=this.hasType("gauge");e&&(t=this.$el.arcs.append("text").attr("class",P[n?"chartArcsGaugeTitle":"chartArcsTitle"]).style("text-anchor","middle"),n&&t.attr("dy","-0.3em"),_(t,e,n?void 0:[-.6,1.35],!0))},redrawArc:function(t,e,n){var i=this,r=i.config,a=i.state,o=i.$el.main,s=r.interaction_enabled,u=s&&r.data_selection_isselectable,o=o.selectAll("."+P.arcs).selectAll("."+P.arc).data(i.arcData.bind(i));o.exit().transition().duration(e).style("opacity","0").remove(),o=o.enter().append("path").attr("class",i.getClass("arc",!0)).style("fill",function(t){return i.color(t.data)}).style("cursor",function(t){return null!=u&&null!=u.bind&&u.bind(i.api)(t)?"pointer":null}).style("opacity","0").each(function(t){i.isGaugeType(t.data)&&(t.startAngle=r.gauge_startingAngle,t.endAngle=r.gauge_startingAngle),this._current=t}).merge(o),i.hasType("gauge")&&(i.updateGaugeMax(),i.hasMultiArcGauge()&&i.redrawMultiArcGauge()),o.attr("transform",function(t){return!i.isGaugeType(t.data)&&n?"scale(0)":""}).style("opacity",function(t){return t===this._current?"0":null}).each(function(){a.transiting=!0}).transition().duration(t).attrTween("d",function(e){var t=i.updateAngle(e);if(!t)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var n=(0,Ae.interpolate)(this._current,t);return this._current=n(0),function(t){t=n(t);return t.data=e.data,i.getArc(t,!0)}}).attr("transform",n?"scale(1)":"").style("fill",function(t){var e;return i.levelColor?(e=i.levelColor(t.data.values[0].value),r.data_colors[t.data.id]=e):e=i.color(t.data),e}).style("opacity",null).call(x,function(){var t,e;i.levelColor&&(e=(t=(0,O.select)(this)).datum(),i.updateLegendItemColor(e.data.id,t.style("fill"))),a.transiting=!1,y(r.onrendered,i.api)}),s&&i.bindArcEvent(o),i.hasType("gauge")&&i.redrawBackgroundArcs(),i.redrawArcText(t)},redrawBackgroundArcs:function(){var e,n=this,i=n.config,r=n.state,t=n.hasMultiArcGauge(),a=i.gauge_fullCircle,o=n.getStartAngle(),s=a?o+n.getArcLength():-1*o,a=n.$el.arcs.select((t?"g":"")+"."+P.chartArcsBackground);t?(e=0,(a=a.selectAll("path."+P.chartArcsBackground).data(n.data.targets)).enter().append("path").attr("class",function(t,e){return P.chartArcsBackground+" "+P.chartArcsBackground+"-"+e}).merge(a).style("fill",i.gauge_background||null).attr("d",function(t){t=t.id;if(0<=r.hiddenTargetIds.indexOf(t))return"M 0 0";t={data:[{value:i.gauge_max}],startAngle:o,endAngle:s,index:e++};return n.getArc(t,!0,!0)}),a.exit().remove()):a.attr("d",function(){var t={data:[{value:i.gauge_max}],startAngle:o,endAngle:s};return n.getArc(t,!0,!0)})},bindArcEvent:function(t){var i=this,r=i.config,n=i.state,e="touch"===n.inputType,a="mouse"===n.inputType;function o(t,e,n){i.expandArc(n),i.api.focus(n),i.toggleFocusLegend(n,!0),i.showTooltip([e],t)}function s(t){t=(null==t?void 0:t.id)||void 0;i.unexpandArc(t),i.api.revert(),i.revertLegend(),i.hideTooltip()}t.on("click",function(t,e,n){e=i.updateAngle(e);e&&(e=i.convertToArcData(e),null!=i.toggleShape&&i.toggleShape(this,e,n),r.data_onclick.bind(i.api)(e,this))}),a&&t.on("mouseover",function(t,e){n.transiting||(n.event=t,o(this,e=(e=i.updateAngle(e))?i.convertToArcData(e):null,(null==e?void 0:e.id)||void 0),i.setOverOut(!0,e))}).on("mouseout",function(t,e){n.transiting||(n.event=t,e=(e=i.updateAngle(e))?i.convertToArcData(e):null,s(),i.setOverOut(!1,e))}).on("mousemove",function(t,e){e=i.updateAngle(e),e=e?i.convertToArcData(e):null;n.event=t,i.showTooltip([e],this)}),e&&i.hasArcType()&&!i.radars&&i.$el.svg.on("touchstart touchmove",function(t){var e;n.transiting||(t=(null==(e=(t=null!=(e=function(t){t=t.changedTouches[0];return(0,O.select)(L.elementFromPoint(t.clientX,t.clientY))}(n.event=t).datum())&&e.data&&e.data.id?i.updateAngle(e):null)?i.convertToArcData(t):null)?void 0:e.id)||void 0,i.callOverOutForTouch(e),N(t)?s():o(this,e,t))})},redrawArcText:function(t){var e,n=this,i=n.config,r=n.state,a=n.$el,o=a.main,s=a.arcs,a=n.hasType("gauge"),u=n.hasMultiArcGauge();a&&1===n.data.targets.length&&i.gauge_title||(e=o.selectAll("."+P.chartArc).select("text").style("opacity","0").attr("class",function(t){return n.isGaugeType(t.data)?P.gaugeValue:null}).call(n.textForArcLabel.bind(n)).attr("transform",n.transformForArcLabel.bind(n)).style("font-size",function(t){return n.isGaugeType(t.data)&&1===n.data.targets.length&&!u?Math.round(r.radius/5)+"px":null}).transition().duration(t).style("opacity",function(t){return n.isTargetToShow(t.data.id)&&n.isArcType(t.data)?null:"0"}),u&&e.attr("dy","-.1em")),o.select("."+P.chartArcsTitle).style("opacity",n.hasType("donut")||a?null:"0"),a&&((a=i.gauge_fullCircle)&&null!=e&&e.attr("dy",""+(u?0:Math.round(r.radius/14))),i.gauge_label_show&&(s.select("."+P.chartArcsGaugeUnit).attr("dy",(a?1.5:.75)+"em").text(i.gauge_units),s.select("."+P.chartArcsGaugeMin).attr("dx",-1*(r.innerRadius+(r.radius-r.innerRadius)/(a?1:2))+"px").attr("dy","1.2em").text(n.textForGaugeMinMax(i.gauge_min,!1)),a||s.select("."+P.chartArcsGaugeMax).attr("dx",r.innerRadius+(r.radius-r.innerRadius)/2+"px").attr("dy","1.2em").text(n.textForGaugeMinMax(i.gauge_max,!0))))}},ke={initArea:function(t){var e=this.config;t.insert("g","."+P[e.area_front?"circles":"lines"]).attr("class",this.getClass("areas",!0))},updateAreaGradient:function(){var s=this,u=s.config,c=s.state.datetimeId,l=s.$el.defs;s.data.targets.forEach(function(n){var i,t,e,r,a,o=c+"-areaGradient"+s.getTargetSelectorSuffix(n.id);s.isAreaType(n)&&l.select("#"+o).empty()&&(i=s.color(n),t=void 0===(e=(r=u.area_linearGradient).x)?[0,0]:e,e=void 0===(e=r.y)?[0,1]:e,r=void 0===(r=r.stops)?[[0,i,1],[1,i,0]]:r,a=l.append("linearGradient").attr("id",o).attr("x1",t[0]).attr("x2",t[1]).attr("y1",e[0]).attr("y2",e[1]),r.forEach(function(t){var e=F(t[1])?t[1].bind(s.api)(n.id):t[1];a.append("stop").attr("offset",t[0]).attr("stop-color",e||i).attr("stop-opacity",t[2])}))})},updateAreaColor:function(t){return this.config.area_linearGradient?"url(#"+this.state.datetimeId+"-areaGradient"+this.getTargetSelectorSuffix(t.id)+")":this.color(t)},updateArea:function(t,e){var n=this,i=n.config,r=n.state,a=n.$el,o=n.$T,a=(e=void 0===e?!1:e)?a.subchart:a;i.area_linearGradient&&n.updateAreaGradient();i=a.main.selectAll("."+P.areas).selectAll("."+P.area).data(n.lineData.bind(n));o(i.exit(),t).style("opacity","0").remove(),a.area=i.enter().append("path").attr("class",n.getClass("area",!0)).style("fill",n.updateAreaColor.bind(n)).style("opacity",function(){return r.orgAreaOpacity=(0,O.select)(this).style("opacity"),"0"}).merge(i),i.style("opacity",r.orgAreaOpacity)},redrawArea:function(t,e,n){var i=this,n=((n=void 0===n?!1:n)?this.$el.subchart:this.$el).area,r=i.state.orgAreaOpacity;return[i.$T(n,e,A()).attr("d",t).style("fill",i.updateAreaColor.bind(i)).style("opacity",function(t){return(i.isAreaRangeType(t)?r/1.75:r)+""})]},generateDrawArea:function(t,n){function a(t){return(n?u.subxx:u.xx).call(u,t)}function o(t,e){return u.isGrouped(t.id)?i(t,e)[0][1]:r(t.id,n)(u.isAreaRangeType(t)?u.getRangedData(t,"high"):u.getShapeYMin(t.id))}function s(t,e){return u.isGrouped(t.id)?i(t,e)[1][1]:r(t.id,n)(u.isAreaRangeType(t)?u.getRangedData(t,"low"):t.value)}var u=this,c=u.config,l=c.line_connectNull,f=c.axis_rotated,i=u.generateGetAreaPoints(t,n),r=u.getYScaleById.bind(u);return function(t){var e,n=l?u.filterRemoveNull(t.values):t.values,i=0,r=0,r=u.isAreaType(t)?(e=(0,Ht.area)(),e=f?e.y(a).x0(o).x1(s):e.x(a).y0(c.area_above?0:o).y1(s),l||(e=e.defined(function(t){return null!==u.getBaseValue(t)})),u.isStepType(t)&&(n=u.convertValuesToStep(n)),e.curve(u.getCurve(t))(n)):(n[0]&&(i=u.scale.x(n[0].x),r=u.getYScaleById(t.id)(n[0].value)),f?"M "+r+" "+i:"M "+i+" "+r);return r||"M 0 0"}},generateGetAreaPoints:function(t,a){var o=this,s=o.config,u=o.getShapeX(0,t,a),c=o.getShapeY(!!a),l=o.getShapeOffset(o.isAreaType,t,a),f=o.getYScaleById.bind(o);return function(t,e){var n=f.call(o,t.id,a)(o.getShapeYMin(t.id)),i=l(t,e)||n,r=u(t),e=c(t);return[[r,i],[r,(e=s.axis_rotated&&(0<t.value&&e<n||t.value<0&&n<e)?n:e)-(n-i)],[r,e-(n-i)],[r,i]]}}},Se={initBar:function(){var t=this.$el,e=this.config,n=this.state.clip;t.bar=t.main.select("."+P.chart).insert("g",":first-child").attr("class",P.chartBars),!1===e.clipPath&&(e.bar_radius||e.bar_radius_ratio)&&t.bar.attr("clip-path",n.pathXAxis.replace(/#[^)]*/,"#"+n.id))},updateTargetsForBar:function(t){var e=this,n=e.config,i=e.$el,r=e.getChartClass("Bar"),a=e.getClass("bars",!0),o=e.classFocus.bind(e),s=n.interaction_enabled&&n.data_selection_isselectable;i.bar||e.initBar(),e.$el.main.select("."+P.chartBars).selectAll("."+P.chartBar).data(t.filter(function(t){return t.values.some(function(t){return B(t.value)||e.isBarRangeType(t)})})).attr("class",function(t){return r(t)+o(t)}).enter().append("g").attr("class",r).style("opacity","0").style("pointer-events","none").append("g").attr("class",a).style("cursor",function(t){return null!=s&&null!=s.bind&&s.bind(e.api)(t)?"pointer":null})},updateBar:function(t,e){var n=this.$el,i=this.$T,r=(e=void 0===e?!1:e)?n.subchart:n,a=this.getClass("bar",!0),e=this.initialOpacity.bind(this),n=r.main.selectAll("."+P.bars).selectAll("."+P.bar).data(this.labelishData.bind(this));i(n.exit(),t).style("opacity","0").remove(),r.bar=n.enter().append("path").attr("class",a).style("fill",this.color).merge(n).style("opacity",e)},redrawBar:function(e,t,n){var i=this,n=((n=void 0===n?!1:n)?i.$el.subchart:i.$el).bar;return[i.$T(n,t,A()).attr("d",function(t){return(B(t.value)||i.isBarRangeType(t))&&e(t)}).style("fill",this.color).style("opacity",null)]},generateDrawBar:function(t,e){var c=this,n=c.config,l=c.generateGetBarPoints(t,e),f=n.axis_rotated,i=n.bar_radius,r=n.bar_radius_ratio,h=B(i)&&0<i?function(){return i}:B(r)?function(t){return t*r}:null;return function(t,e){var n=l(t,e),i=+f,r=+!i,a=t.value<0,o=["",""],s=0,u=c.isGrouped(t.id),e=0!==t.value&&h,t=!(!e||!u)&&c.isStackingRadiusData(t);!e||u&&!t||(t=n[2][t=f?r:i]-n[0][t],t="a"+(s=h(t))+","+s+" "+(a?"1 0 0":"0 0 1")+" ",o[+!f]=t+s+","+s,o[+f]=t+[-s,s][f?"sort":"reverse"](),a&&o.reverse());o=f?"H"+(n[1][i]-s)+" "+o[0]+"V"+(n[2][r]-s)+" "+o[1]+"H"+n[3][i]:"V"+(n[1][r]+(a?-s:s))+" "+o[0]+"H"+(n[2][i]-s)+" "+o[1]+"V"+n[3][r];return"M"+n[0][i]+","+n[0][r]+o+"z"}},isStackingRadiusData:function(t){var e=this.config,n=this.data,i=t.id,r=t.index,a=t.value,o=e.data_groups.find(function(t){return-1<t.indexOf(i)}),n=this.orderTargets(this.filterTargetsToShow(n.targets.filter(this.isBarType,this))).filter(function(t){return-1<o.indexOf(t.id)}).map(function(t){return t.values.filter(function(t){return t.index===r&&(0<a?0<t.value:t.value<0)})[0]}).filter(Boolean).map(function(t){return t.id});return 0!==a&&n.indexOf(i)===n.length-1},generateGetBarPoints:function(t,o){var s=this,u=s.config,e=o?s.axis.subX:s.axis.x,n=s.getIndicesMax(t)+1,c=s.getBarW("bar",e,n),l=s.getShapeX(c,t,!!o),f=s.getShapeY(!!o),h=s.getShapeOffset(s.isBarType,t,!!o),d=s.getYScaleById.bind(s);return function(t,e){var n=d.call(s,t.id,o)(s.getShapeYMin(t.id)),i=h(t,e)||n,r=B(c)?c:c[t.id]||c._$width,a=l(t),e=f(t);u.axis_rotated&&(0<t.value&&e<n||t.value<0&&n<e)&&(e=n),s.isBarRangeType(t)||(e-=n-i);r=a+r;return[[a,i],[a,e],[r,e],[r,i]]}}};function Ee(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}var Ce={initCandlestick:function(){var t=this.$el;t.candlestick=t.main.select("."+P.chart).append("g").attr("class",P.chartCandlesticks)},updateTargetsForCandlestick:function(t){var e=this.$el,n=this.getChartClass("Candlestick"),i=this.classFocus.bind(this);e.candlestick||this.initCandlestick(),this.$el.main.select("."+P.chartCandlesticks).selectAll("."+P.chartCandlestick).data(t).attr("class",function(t){return n(t)+i(t)}).enter().append("g").attr("class",n).style("pointer-events","none")},updateCandlestick:function(t,e){var n=this.$el,i=this.$T,r=(e=void 0===e?!1:e)?n.subchart:n,a=this.getClass("candlestick",!0),e=this.initialOpacity.bind(this),n=r.main.selectAll("."+P.chartCandlestick).selectAll("."+P.candlestick).data(this.labelishData.bind(this));i(n.exit(),t).style("opacity","0").remove();a=n.enter().filter(function(t){return t.value}).append("g").attr("class",a);a.append("line"),a.append("path"),r.candlestick||(r.candlestick={}),r.candlestick=n.merge(a).style("opacity",e)},generateDrawCandlestick:function(t,e){var u=this,n=u.config,c=u.generateGetCandlestickPoints(t,e),l=n.axis_rotated,f=n.candlestick_color_down;return function(t,e,n){var i=c(t,e),e=u.getCandlestickData(t),r=null==e?void 0:e._isUp,t=+l;n.classed&&n.classed(P[r?"valueUp":"valueDown"],!0);e=l?"H"+i[1][1]+" V"+i[1][0]+" H"+i[0][1]:"V"+i[1][1]+" H"+i[1][0]+" V"+i[0][1];n.select("path").attr("d","M"+i[0][t]+","+i[0][+!t]+e+"z").style("fill",function(t){return(r?u.color(t):Y(f)?f[t.id]:f)||u.color(t)});var a,o=n.select("line"),s=l?{x1:i[2][1],x2:i[2][2],y1:i[2][0],y2:i[2][0]}:{x1:i[2][0],x2:i[2][0],y1:i[2][1],y2:i[2][2]};for(a in s)o.attr(a,s[a])}},generateGetCandlestickPoints:function(t,u){var c=this,l=c.config,e=(u=void 0===u?!1:u)?c.axis.subX:c.axis.x,n=c.getIndicesMax(t)+1,f=c.getBarW("candlestick",e,n),h=c.getShapeX(f,t,!!u),d=c.getShapeY(!!u),g=c.getShapeOffset(c.isBarType,t,!!u),p=c.getYScaleById.bind(c);return function(t,e){var n,i=p.call(c,t.id,u)(c.getShapeYMin(t.id)),r=g(t,e)||i,a=B(f)?f:f[t.id]||f._$width,o=c.getCandlestickData(t),s=o?((n={start:h(t),end:0}).end=n.start+a,e={start:d(o.open),end:d(o.close)},s={x:n.start+a/2,high:d(o.high),low:d(o.low)},l.axis_rotated&&(0<t.value&&e.start<i||t.value<0&&i<e.start)&&(e.start=i),e.start-=i-r,[[n.start,e.start],[n.end,e.end],[s.x,s.low,s.high]]):[[0,0],[0,0],[0,0,0]];return s}},redrawCandlestick:function(i,r,t){var e=this.$el,a=this.$T,e=((t=void 0===t?!1:t)?e.subchart:e).candlestick,o=A(!0);return[e.each(function(t,e){var n=a((0,O.select)(this),r,o);i(t,e,n)}).style("opacity",null)]},getCandlestickData:function(t){var e,n=t.value;return $(n)?!(e={open:n[0],high:n[1],low:n[2],close:n[3]})!==(t=void 0!==(t=n[4])&&t)&&(e.volume=t):Y(n)&&(e=function(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?Ee(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}({},n)),e&&(e._isUp=e.close>=e.open),e||null}},De={initGauge:function(){function t(t){i.append("text").attr("class",t).style("text-anchor","middle").style("pointer-events","none")}var e,n=this.config,i=this.$el.arcs;this.hasType("gauge")&&(e=this.hasMultiArcGauge(),i.append(e?"g":"path").attr("class",P.chartArcsBackground).style("fill",!e&&n.gauge_background||null),n.gauge_units&&t(P.chartArcsGaugeUnit),n.gauge_label_show&&(t(P.chartArcsGaugeMin),n.gauge_fullCircle||t(P.chartArcsGaugeMax)))},updateGaugeMax:function(){var t=this.config,e=this.state,e=this.hasMultiArcGauge()?this.getMinMaxData().max[0].value:this.getTotalDataSum(e.rendered);e+t.gauge_min*(0<t.gauge_min?-1:1)>t.gauge_max&&(t.gauge_max=e-t.gauge_min)},redrawMultiArcGauge:function(){var u=this,t=u.config,c=u.state,e=u.$el,l=u.state.hiddenTargetIds,e=e.main.selectAll("."+P.arcs).selectAll("."+P.arcLabelLine).data(u.arcData.bind(u));e.enter().append("rect").attr("class",function(t){return P.arcLabelLine+" "+P.target+" "+P.target+"-"+t.data.id}).merge(e).style("fill",function(t){return u.levelColor?u.levelColor(t.data.values[0].value):u.color(t.data)}).style("display",t.gauge_label_show?null:"none").each(function(t){var e,n,i,r=0,a=0,o=0,s="";l.indexOf(t.data.id)<0&&(i=u.updateAngle(t),e=c.gaugeArcWidth/u.filterTargetsToShow(u.data.targets).length*(i.index+1),i=(n=i.endAngle-Math.PI/2)-(0==(t=c.radius-e)?0:1/t),r=c.radiusExpanded-c.radius+e,a=Math.cos(i)*t,o=Math.sin(i)*t,s="rotate("+180*n/Math.PI+", "+a+", "+o+")"),(0,O.select)(this).attr("x",a).attr("y",o).attr("width",r).attr("height",2).attr("transform",s).style("stroke-dasharray","0, "+(r+2)+", 0")})},textForGaugeMinMax:function(t,e){var n=this.config.gauge_label_extents;return F(n)?n.bind(this.api)(t,e):t},getGaugeLabelHeight:function(){var t=this.config;return this.config.gauge_label_show&&!t.gauge_fullCircle?20:0},getPaddingBottomForGauge:function(){return this.getGaugeLabelHeight()*(this.config.gauge_label_show?2:2.5)}},Re={initBubble:function(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function(){var t=this.state,e=t.width,n=t.height,i=gt,t=this.cache.get(i);return t||this.cache.add(i,t=W("min",[e,n])),t},getBubbleR:function(t){var e=this,n=e.config.bubble_maxR;F(n)?n=n.bind(e.api)(t):B(n)||(n=e.getBaseLength()/(2*e.getMaxDataCount())+12);var i=W("max",e.getMinMaxData().max.map(function(t){return e.isBubbleZType(t)?e.getBubbleZData(t.value,"y"):Y(t.value)?t.value.mid:t.value})),n=n*n*Math.PI,i=(e.isBubbleZType(t)?e.getBubbleZData(t.value,"z"):t.value)*(n/i);return Math.sqrt(i/Math.PI)},getBubbleZData:function(t,e){return Y(t)?t[e]:t["y"===e?0:1]}},Oe={initLine:function(){var t=this.$el;t.line=t.main.select("."+P.chart).append("g").attr("class",P.chartLines)},updateTargetsForLine:function(t){var e=this,n=e.$el,i=n.area,r=n.line,a=n.main,o=e.getChartClass("Line"),n=e.getClass("lines",!0),s=e.classFocus.bind(e);r||e.initLine();r=t.filter(function(t){return!(e.isScatterType(t)||e.isBubbleType(t))}),t=a.select("."+P.chartLines).selectAll("."+P.chartLine).data(r).attr("class",function(t){return o(t)+s(t)}),a=t.enter().append("g").attr("class",o).style("opacity","0").style("pointer-events","none");a.append("g").attr("class",n),e.hasTypeOf("Area")&&e.initArea(!i&&a.empty()?t:a),e.updateTargetForCircle(r,a)},updateLine:function(t,e){var n=this,i=n.format.extraLineClasses,r=n.$el,a=n.$T,e=(e=void 0===e?!1:e)?r.subchart:r,r=e.main.selectAll("."+P.lines).selectAll("."+P.line).data(n.lineData.bind(n));a(r.exit(),t).style("opacity","0").remove(),e.line=r.enter().append("path").attr("class",function(t){return n.getClass("line",!0)(t)+" "+(i(t)||"")}).style("stroke",n.color).merge(r).style("opacity",n.initialOpacity.bind(n)).style("shape-rendering",function(t){return n.isStepType(t)?"crispEdges":""}).attr("transform",null)},redrawLine:function(t,e,n){var i=this.$el;return[(0,this.$T)(((n=void 0===n?!1:n)?i.subchart:i).line,e,A()).attr("d",t).style("stroke",this.color).style("opacity",null)]},getCurve:function(e){var n=this;return n.config.axis_rotated&&n.isStepType(e)?function(t){t=n.getInterpolate(e)(t);return t.orgPoint=t.point,t.pointRotated=function(t,e){1===this._point&&(this._point=2);var n=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,n),this._context.lineTo(t,n),this._x=t,this._y=e},t.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},t}:n.getInterpolate(e)},generateDrawLine:function(t,o){function e(t){return(o?s.subxx:s.xx).call(s,t)}var s=this,u=s.config,c=s.scale,l=u.line_connectNull,f=u.axis_rotated,n=s.generateGetLinePoints(t,o),h=s.getYScaleById.bind(s),t=function(t,e){return s.isGrouped(t.id)?n(t,e)[0][1]:h(t.id,o)(s.getBaseValue(t))},d=(0,Ht.line)(),d=f?d.x(t).y(e):d.x(e).y(t);l||(d=d.defined(function(t){return null!==s.getBaseValue(t)}));var g=o?c.subX:c.x;return function(t){var e,n=h(t.id,o),i=l?s.filterRemoveNull(t.values):t.values,r=0,a=0;return(s.isLineType(t)?(e=u.data_regions[t.id])?s.lineWithRegions(i,c.zoom||g,n,e):(s.isStepType(t)&&(i=s.convertValuesToStep(i)),d.curve(s.getCurve(t))(i)):(i[0]&&(r=g(i[0].x),a=n(i[0].value)),f?"M "+a+" "+r:"M "+r+" "+a))||"M 0 0"}},lineWithRegions:function(t,a,o,e){var n=this,s=n.config.axis_rotated,i=n.axis.isTimeSeries(),r=n.axis.isCategorized()?.5:0,u=[];if(I(e))for(var c,l=function(t,e){return N(t)?e:i?Q.call(n,t):t},f=0;c=e[f];f++){var h=l(c.start,t[0].x),d=l(c.end,t[t.length-1].x),g=c.style||{dasharray:"2 2"};u[f]={start:h,end:d,style:g}}for(var p,v=s?function(t){return o(t.value)}:function(t){return a(t.x)},y=s?function(t){return a(t.x)}:function(t){return o(t.value)},x=function(t){return"M"+t[0][0]+","+t[0][1]+"L"+t[1][0]+","+t[1][1]},_=i?function(t,e,n,i){var r=t.x.getTime(),e=e.x-t.x,t=new Date(r+e*n),i=new Date(r+e*(n+i)),n=s?[[o(S(n)),a(t)],[o(S(n+M)),a(i)]]:[[a(t),o(S(n))],[a(i),o(S(n+M))]];return x(n)}:function(t,e,n,i){i=s?[[o(S(n),!0),a(k(n))],[o(S(n+i),!0),a(k(n+i))]]:[[a(k(n),!0),o(S(n))],[a(k(n+i),!0),o(S(n+i))]];return x(i)},m={x:n.axis.getAxisType("x"),y:n.axis.getAxisType("y")},b="",w=0;p=t[w];w++){var T=t[w-1],A=T&&z(T.value),g=function(t,e){for(var n,i=0;n=e[i];i++)if(n.start<t&&t<=n.end)return n.style;return!1}(p.x,u);if(z(p.value))if(!N(u)&&g&&A){if(A){try{g=g.dasharray.split(" ")}catch(t){g="2 2".split(" ")}for(var M,k=jt(m.x,T.x+r,p.x+r),S=jt(m.y,T.value,p.value),E=a(p.x)-a(T.x),C=o(p.value)-o(T.value),C=Math.sqrt(Math.pow(E,2)+Math.pow(C,2)),D=(M=g[0]/C)*g[1],R=M;R<=1;R+=D)b+=_(T,p,R,M),1<=R+D&&(b+=_(T,p,1,0))}}else b+=(w&&A?"L":"M")+v(p)+","+y(p)}return b},isWithinStep:function(t,e){return Math.abs(e-b(this.state.event,t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return!0===e||$(e)&&-1!==e.indexOf(t.id)}},Le={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){t=t||this.config.point_type;return d(t)&&F(t.create)&&F(t.update)},initialOpacityForCircle:function(t){var e=this.config,n=this.state.withoutFadeIn,e=e.point_opacity;return e=N(e)?null!==this.getBaseValue(t)&&n[t.id]?this.opacityForCircle(t):"0":e},opacityForCircle:function(t){var e=this.config,n=e.point_opacity;return N(n)&&(n=e.point_show&&!e.point_focus_only?null:"0",n=z(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":n:"0"),n},initCircle:function(){var t=this.$el.main;this.point=this.generatePoint(),(this.hasType("bubble")||this.hasType("scatter"))&&t.select("."+P.chartCircles).empty()&&t.select("."+P.chart).append("g").attr("class",P.chartCircles)},updateTargetForCircle:function(t,e){var n=this,i=this,r=i.config,a=i.data,o=i.$el,s=r.interaction_enabled&&r.data_selection_enabled,u=s&&r.data_selection_isselectable,c=i.getClass("circles",!0);r.point_show&&(o.circle||i.initCircle(),e=e,(t=t)||(t=a.targets.filter(function(t){return n.isScatterType(t)||n.isBubbleType(t)}),(a=o.main.select("."+P.chartCircles).style("pointer-events","none").selectAll("."+P.circles).data(t).attr("class",c)).exit().remove(),e=a.enter()),s&&e.append("g").attr("class",function(t){return i.generateClass(P.selectedCircles,t.id)}),e.append("g").attr("class",c).style("cursor",function(t){return F(u)&&u(t)?"pointer":null}),s&&t.forEach(function(e){o.main.selectAll("."+P.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll(""+P.selectedCircle).each(function(t){t.value=e.values[t.index].value})}))},updateCircle:function(t){var e=this,n=e.config,i=e.state,r=e.$el,a=n.point_focus_only,r=(t=void 0===t?!1:t)?r.subchart:r;n.point_show&&!i.toggling&&((i=r.main.selectAll("."+P.circles).selectAll("."+P.circle).data(function(t){return e.isLineType(t)&&e.shouldDrawPointsForLine(t)||e.isBubbleType(t)||e.isRadarType(t)||e.isScatterType(t)?a?[t.values[0]]:t.values:[]})).exit().remove(),i.enter().filter(Boolean).append(e.point("create",this,e.pointR.bind(e),e.color)),r.circle=r.main.selectAll("."+P.circles+" ."+P.circle).style("stroke",e.color).style("opacity",e.initialOpacityForCircle.bind(e)))},redrawCircle:function(t,e,n,i,r){var a=this,o=a.state.rendered,s=a.$el,u=a.$T,r=(r=void 0===r?!1:r)?s.subchart:s,s=r.main.selectAll("."+P.selectedCircle);if(!a.config.point_show)return[];var c=a.point("update",a,t,e,a.color,n,i,s),i=a.isCirclePoint()?"c":"",l=A(),f=a.opacityForCircle.bind(a),h=[];return r.circle.each(function(t){t=c.bind(this)(t),t=u(t,n||!o,l).style("opacity",f);h.push(t)}),[h,u(s,n).attr(i+"x",t).attr(i+"y",e)]},showCircleFocus:function(n){var a,o=this,t=o.config,e=o.state,i=e.hasRadar,r=e.resizing,s=e.toggling,u=e.transiting,e=o.$el.circle;!1===u&&t.point_focus_only&&e&&(t=(i?o.radarCircleX:o.circleX).bind(o),i=(i?o.radarCircleY:o.circleY).bind(o),s=s||N(n),a=o.point("update",o,t,i,o.color,!r&&s),(e=n?e.filter(function(e){var t=n.filter(function(t){return t.id===e.id});return!!t.length&&(0,O.select)(this).datum(t[0])}):e).attr("class",this.updatePointClass.bind(this)).style("opacity",null).each(function(t){var e=t.id,n=t.index,i=t.value,r="hidden";z(i)&&(a.bind(this)(t),o.expandCircles(n,e),r=""),this.style.visibility=r}))},hideCircleFocus:function(){var t=this.config,e=this.$el.circle;t.point_focus_only&&e&&(this.unexpandCircles(),e.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(i){void 0===i&&(i=!1);var r=this,a=r.generateGetLinePoints(r.getShapeIndices(r.isLineType),i);return function(t,e){var n=t.id;return r.isGrouped(n)?a(t,e)[0][1]:r.getYScaleById(n,i)(r.getBaseValue(t))}},expandCircles:function(t,e,n){var i=this.pointExpandedR.bind(this);n&&this.unexpandCircles();var e=this.getShapeByIndex("circle",t,e).classed(P.EXPANDED,!0),r=i(e)/this.config.point_r,a=1-r;this.isCirclePoint()?e.attr("r",i):e.each(function(){var t,e,n=(0,O.select)(this);"circle"===this.tagName?n.attr("r",i):(t=(e=this.getBBox()).width,e=e.height,t=a*(+n.attr("x")+t/2),e=a*(+n.attr("y")+e/2),n.attr("transform","translate("+t+" "+e+") scale("+r+")"))})},unexpandCircles:function(t){var e=this.pointR.bind(this),t=this.getShapeByIndex("circle",t).filter(function(){return(0,O.select)(this).classed(P.EXPANDED)}).classed(P.EXPANDED,!1);t.attr("r",e),this.isCirclePoint()||t.attr("transform","scale("+e(t)/this.config.point_r+")")},pointR:function(t){var e=this.config.point_r,n=e;return this.isBubbleType(t)?n=this.getBubbleR(t):F(e)&&(n=e.bind(this.api)(t)),n},pointExpandedR:function(t){var e=this.config,n=this.isBubbleType(t)?1.15:1.75;return e.point_focus_expand_enabled?e.point_focus_expand_r||this.pointR(t)*n:this.pointR(t)},pointSelectR:function(t){var e=this.config.point_select_r;return F(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function(t,e){var n=b(this.state.event,t),i=(0,O.select)(t),r=this.isCirclePoint(t)?"c":"",a=+i.attr(r+"x"),r=+i.attr(r+"y");return a||r||1!==t.nodeType||(a=(t=T(t)).x,r=t.y),Math.sqrt(Math.pow(a-n[0],2)+Math.pow(r-n[1],2))<(e||this.config.point_sensitivity)},insertPointInfoDefs:function(t,e){function n(t,e){for(var n,i=t.attributes,r=0;n=i[r];r++)n=n.name,e.setAttribute(n,t.getAttribute(n))}var i,r=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,t=L.createElementNS(O.namespaces.svg,r.nodeName.toLowerCase());t.id=e,t.style.fill="inherit",t.style.stroke="inherit",n(r,t),null!=(e=r.childNodes)&&e.length&&(i=(0,O.select)(t),"innerHTML"in t?i.html(r.innerHTML):R(r.childNodes).forEach(function(t){n(t,i.append(t.tagName).node())})),this.$el.defs.node().appendChild(t)},pointFromDefs:function(t){return this.$el.defs.select("#"+t)},updatePointClass:function(t){var e=this,n=e.$el.circle,i=!1;return i=Y(t)||n?!0===t?n.each(function(t){t=e.getClass("circle",!0)(t);-1<this.getAttribute("class").indexOf(P.EXPANDED)&&(t+=" "+P.EXPANDED),this.setAttribute("class",t)}):e.getClass("circle",!0)(t):i},generateGetLinePoints:function(t,a){var o=this,s=o.config,u=o.getShapeX(0,t,a),c=o.getShapeY(a),l=o.getShapeOffset(o.isLineType,t,a),f=o.getYScaleById.bind(o);return function(t,e){var n=f.call(o,t.id,a)(o.getShapeYMin(t.id)),i=l(t,e)||n,r=u(t),e=c(t),i=[r,(e=s.axis_rotated&&(0<t.value&&e<n||t.value<0&&n<e)?n:e)-(n-i)];return[i,i,i,i]}},generatePoint:function(){var o=this,t=o.config,s=o.state.datetimeId,u=[],c=X(t.point_pattern)?t.point_pattern:[t.point_type];return function(i,r){for(var t=arguments.length,a=Array(2<t?t-2:0),e=2;e<t;e++)a[e-2]=arguments[e];return function(t){var e=o.getTargetSelectorSuffix(t.id||(null==(n=t.data)?void 0:n.id)||t),n=(0,O.select)(this);u.indexOf(e)<0&&u.push(e);t=c[u.indexOf(e)%c.length];if(o.hasValidPointType(t))t=o[t];else if(!o.hasValidPointDrawMethods(t)){e=s+"-point"+e;if(o.pointFromDefs(e).size()<1&&o.insertPointInfoDefs(t,e),"create"===i)return o.custom.create.bind(r).apply(void 0,[n,e].concat(a));if("update"===i)return o.custom.update.bind(r).apply(void 0,[n].concat(a))}return t[i].bind(r).apply(void 0,[n].concat(a))}}},custom:{create:function(t,e,n,i){return t.append("use").attr("xlink:href","#"+e).attr("class",this.updatePointClass.bind(this)).style("fill",i).node()},update:function(t,e,n,i,r,a,o){var s=t.node().getBBox(),u=s.width,c=s.height,s=function(t){return z(t.value)?e(t)-u/2:0},t=t;return r&&(a&&t.attr("x",s),t=this.$T(t,r,A()),o&&this.$T(o,r,A())),t.attr("x",s).attr("y",function(t){return z(t.value)?n(t)-c/2:0}).style("fill",i)}},circle:{create:function(t,e,n){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",n).node()},update:function(t,e,n,i,r,a,o){return this.hasType("bubble")&&t.attr("r",this.pointR.bind(this)),r&&(a&&t.attr("cx",e),t.attr("cx")&&(t=this.$T(t,r,A())),o&&this.$T(t,r,A())),t.attr("cx",e).attr("cy",n).style("fill",i)}},rectangle:{create:function(t,e,n){function i(t){return 2*e(t)}return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",i).attr("height",i).style("fill",n).node()},update:function(t,e,n,i,r,a,o){function s(t){return e(t)-u}var u=this.config.point_r,t=t;return r&&(a&&t.attr("x",s),t=this.$T(t,r,A()),o&&this.$T(o,r,A())),t.attr("x",s).attr("y",function(t){return n(t)-u}).style("fill",i)}}};var Pe=_t,ze={initRadar:function(){var t=this.config,e=this.state.current,n=this.$el;this.hasType("radar")&&(n.radar=n.main.select("."+P.chart).append("g").attr("class",P.chartRadars),n.radar.levels=n.radar.append("g").attr("class",P.levels),n.radar.axes=n.radar.append("g").attr("class",P.axis),n.radar.shapes=n.radar.append("g").attr("class",P.shapes),e.dataMax=t.radar_axis_max||this.getMinMaxData().max[0].value)},getRadarSize:function(){var t=this.config,e=this.state,n=e.arcWidth,e=e.arcHeight,t=t.axis_x_categories.length<4?-20:10,t=(Math.min(n,e)-t)/2;return[t,t]},updateTargetsForRadar:function(t){var e=this.config;g(e.axis_x_categories)&&(e.axis_x_categories=Z(0,W("max",t.map(function(t){return t.values.length})))),this.generateRadarPoints()},getRadarPosition:function(s,u,c,l){var f=this.config,t=this.getRadarSize(),h=t[0],d=t[1],g=f.axis_x_categories.length,p=f.radar_direction_clockwise,t=R(s).map(function(t){return e=p,n=t,i=g,r=u,a=I(c)?c:"x"===s?h:d,o=B(l)?l:f.radar_size_ratio,t=2*Math.PI,a*(1-o*("x"===n?Math.sin:Math.cos)((e&&0<r?i-r:r)*t/i));var e,n,i,r,a,o});return 1===t.length?t[0]:t},generateRadarPoints:function(){var n=this,t=n.data.targets,e=n.getRadarSize(),i=e[0],r=e[1],a=n.cache.get(Pe)||{},e=a._size;e&&(e.width===i||e.height===r)||(t.forEach(function(t){a[t.id]=t.values.map(function(t,e){return n.getRadarPosition(["x","y"],e,void 0,n.getRatio("radar",t))})}),a._size={width:i,height:r},n.cache.add(Pe,a))},redrawRadar:function(){var t=this.$el,e=t.radar,n=t.main,t=this.getTranslate("radar");t&&(e.attr("transform",t),n.select("."+P.chartTexts).attr("transform",t),this.generateRadarPoints(),this.updateRadarLevel(),this.updateRadarAxes(),this.updateRadarShape())},generateGetRadarPoints:function(){var n=this.cache.get(Pe);return function(t,e){e=n[t.id][e];return[e,e,e,e]}},updateRadarLevel:function(){var n=this,t=n.config,e=n.state,i=n.$el.radar,r=n.getRadarSize(),a=r[0],o=r[1],s=t.radar_level_depth,u=t.axis_x_categories.length,c=t.radar_level_text_show,l=i.levels,f=Z(0,s),h=t.radar_size_ratio*Math.min(a,o),d=f.map(function(t){return(t+1)/s*h}),g=(t.radar_level_text_format||function(){}).bind(n.api),p=f.map(function(t){var e=d[t];return Z(0,u).map(function(t){return n.getRadarPosition(["x","y"],t,e,1).join(",")}).join(" ")}),r=l.selectAll("."+P.level).data(f);r.exit().remove();i=r.enter().append("g").attr("class",function(t,e){return P.level+" "+P.level+"-"+e});i.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),c&&(l.select("text").empty()&&l.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return g(0)}),i.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(t){return g(e.current.dataMax/f.length*(t+1))})),i.merge(r).attr("transform",function(t){return"translate("+(a-d[t])+", "+(o-d[t])+")"}).selectAll("polygon").attr("points",function(t){return p[t]}),c&&l.selectAll("text").attr("x",function(t){return N(t)?a:p[t].split(",")[0]}).attr("y",function(t){return N(t)?o:0})},updateRadarAxes:function(){var n=this,t=n.config,e=n.$el.radar,i=n.getRadarSize(),r=i[0],a=i[1],i=t.axis_x_categories,e=e.axes.selectAll("g").data(i);e.exit().remove();var o,s,i=e.enter().append("g").attr("class",function(t,e){return P.axis+"-"+e});t.radar_axis_line_show&&i.append("line"),t.radar_axis_text_show&&i.append("text"),e=i.merge(e),t.radar_axis_line_show&&e.select("line").attr("x1",r).attr("y1",a).attr("x2",function(t,e){return n.getRadarPosition("x",e)}).attr("y2",function(t,e){return n.getRadarPosition("y",e)}),t.radar_axis_text_show&&(t=(i=t.radar_axis_text_position).x,o=void 0===t?0:t,i=i.y,s=void 0===i?0:i,e.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(t){t.each(function(t){_((0,O.select)(this),t+"",[-.6,1.2])})}).datum(function(t,e){return{index:e}}).attr("transform",function(t){N(this.width)&&(this.width=this.getBoundingClientRect().width/2);var e=n.getRadarPosition("x",t.index,void 0,1),t=Math.round(n.getRadarPosition("y",t.index,void 0,1));return r<e?e+=this.width+o:Math.round(e)<r&&(e-=this.width+o),a<t?(t/2===a&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),t+=s):t<a&&(t-=s),"translate("+e+" "+t+")"})),n.bindEvent()},bindEvent:function(){var n,i,r=this,t=r.config,a=r.state,e=r.$el,o=e.radar,s=e.svg,u=t.point_focus_only,e=a.inputType,c=a.transiting;t.interaction_enabled&&(n="mouse"===e,i=function(t){t=t.target;/tspan/i.test(t.tagName)&&(t=t.parentNode);t=(0,O.select)(t).datum();return t&&1===Object.keys(t).length?t.index:void 0},e=function(t){a.event=t;var e=i(t),t=N(e);(n||t)&&(r.hideTooltip(),u?r.hideCircleFocus():r.unexpandCircles(),n?r.setOverOut(!1,e):t&&r.callOverOutForTouch())},o.axes.selectAll("text").on(n?"mouseover ":"touchstart",function(t){c||(a.event=t,t=i(t),r.selectRectForSingle(s.node(),null,t),n?r.setOverOut(!0,t):r.callOverOutForTouch(t))}).on("mouseout",n?e:null),n||s.on("touchstart",e))},updateRadarShape:function(){var e=this,t=e.data.targets.filter(function(t){return e.isRadarType(t)}),n=e.cache.get(Pe),i=e.$el.radar.shapes.selectAll("polygon").data(t),r=i.enter().append("g").attr("class",e.getChartClass("Radar"));e.$T(i.exit()).remove(),r.append("polygon").merge(i).style("fill",e.color).style("stroke",e.color).attr("points",function(t){return n[t.id].join(" ")}),e.updateTargetForCircle(t,r)},radarCircleX:function(t){return this.cache.get(Pe)[t.id][t.index][0]},radarCircleY:function(t){return this.cache.get(Pe)[t.id][t.index][1]}},Ne={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},Ie={area_above:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},Fe={bar_label_threshold:0,bar_indices_removeNull:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},Be={bubble_maxR:35,bubble_zerobased:!1},Xe={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},$e={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},Ye={scatter_zerobased:!1},je={spline_interpolation_type:"cardinal"},Ge={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},He={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},Ve={pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},Ue={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return t%1==0?t:t.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1};function qe(t,e){C(te.prototype,we.concat(t)),C(re.prototype,be),dt.setOptions(Te.concat(e||[]))}function We(t,e){qe([Le,Oe].concat(t||[])),dt.setOptions([Ne,$e].concat(e||[]))}function Ze(t,e){C(te.prototype,[Me].concat(t||[])),dt.setOptions(e)}var Ke=function(){return We(ke,[Ie]),(Ke=function(){return M.AREA})()},Je=function(){return We(ke,[Ie]),(Je=function(){return M.AREA_LINE_RANGE})()},Qe=function(){return We(ke,[Ie,je]),(Qe=function(){return M.AREA_SPLINE})()},tn=function(){return We(ke,[Ie,je]),(tn=function(){return M.AREA_SPLINE_RANGE})()},en=function(){return We(ke,[Ie]),(en=function(){return M.AREA_STEP})()},nn=function(){return We(),(nn=function(){return M.LINE})()},rn=function(){return We(void 0,[je]),(rn=function(){return M.SPLINE})()},an=function(){return We(),(an=function(){return M.STEP})()},on=function(){return Ze(void 0,[Ge]),(on=function(){return M.DONUT})()},sn=function(){return Ze([De],[He]),(sn=function(){return M.GAUGE})()},un=function(){return Ze(void 0,[Ve]),(un=function(){return M.PIE})()},cn=function(){return Ze([Le,ze],[Ne,Ue]),(cn=function(){return M.RADAR})()},ln=function(){return qe([Se],Fe),(ln=function(){return M.BAR})()},fn=function(){return qe([Le,Re],[Be,Ne]),(fn=function(){return M.BUBBLE})()},hn=function(){return qe([Ce],[Xe]),(hn=function(){return M.CANDLESTICK})()},dn=function(){return qe([Le],[Ne,Ye]),(dn=function(){return M.SCATTER})()},gn={selected:function(t){var e=this.internal,n=[];return e.$el.main.selectAll("."+(P.shapes+e.getTargetSelectorSuffix(t))).selectAll("."+P.shape).filter(function(){return(0,O.select)(this).classed(P.SELECTED)}).each(function(t){return n.push(t)}),n},select:function(s,u,c){var l=this.internal,f=l.config,t=l.$el;f.data_selection_enabled&&t.main.selectAll("."+P.shapes).selectAll("."+P.shape).each(function(t,e){var n=(0,O.select)(this),i=(t.data||t).id,r=l.getToggle(this,t).bind(l),a=f.data_selection_grouped||!s||0<=s.indexOf(i),o=!u||0<=u.indexOf(e),i=n.classed(P.SELECTED);n.classed(P.line)||n.classed(P.area)||(a&&o?f.data_selection_isselectable.bind(l.api)(t)&&!i&&r(!0,n.classed(P.SELECTED,!0),t,e):I(c)&&c&&i&&r(!1,n.classed(P.SELECTED,!1),t,e))})},unselect:function(s,u){var c=this.internal,l=c.config,t=c.$el;l.data_selection_enabled&&t.main.selectAll("."+P.shapes).selectAll("."+P.shape).each(function(t,e){var n=(0,O.select)(this),i=(t.data||t).id,r=c.getToggle(this,t).bind(c),a=l.data_selection_grouped||!s||0<=s.indexOf(i),o=!u||0<=u.indexOf(e),i=n.classed(P.SELECTED);n.classed(P.line)||n.classed(P.area)||a&&o&&l.data_selection_isselectable.bind(c.api)(t)&&i&&r(!1,n.classed(P.SELECTED,!1),t,e)})}},pn={subchart:{show:function(){var t=this.internal,e=t.$el.subchart,n=t.config,i=n.subchart_show;i||(t.unbindZoomEvent(),n.subchart_show=!i,e.main||t.initSubchart(),i=e.main.selectAll("."+P.target),t.data.targets.length!==i.size()&&(t.updateSizes(),t.updateTargetsForSubchart(t.data.targets),i=e.main.selectAll("."+P.target)),i.style("opacity",null),e.main.style("display",null),this.flush())},hide:function(){var t=this.internal,e=t.$el.subchart,t=t.config;t.subchart_show&&"none"!==e.main.style("display")&&(t.subchart_show=!1,e.main.style("display","none"),this.flush())},toggle:function(){var t=this.internal.config;this.subchart[t.subchart_show?"hide":"show"]()}}},vn=Rn(13);_t=function(t){var n,i,r,a,e=this.internal,o=e.$el,s=e.axis,u=e.config,c=e.org,l=e.scale,f=u.axis_rotated,h=s.isCategorized(),t=t;return u.zoom_enabled&&t?(s.isTimeSeries()&&(t=t.map(function(t){return Q.bind(e)(t)})),n=t,i=e.getZoomDomain(!0),s=e.getZoomDomain(),r=s[0],a=s[1],n.every(function(t,e){return(0===e?r<=t:t<=a)&&!n.every(function(t,e){return t===i[e]})})&&(h&&(t=t.map(function(t,e){return+t+(0===e?0:1)})),e.api.tooltip.hide(),u.subchart_show?(u=l.zoom||l.x,e.brush.getSelection().call(e.brush.move,t.map(u))):(c=[-(h=h?l.x.orgScale():c.xScale||l.x)(t[0]),0],c=(h=vn.zoomIdentity.scale(h.range()[1]/(h(t[1])-h(t[0])))).translate.apply(h,f?c.reverse():c),o.eventRect.call(e.zoom.transform,c)),e.setZoomResetButton())):t=l.zoom?l.zoom.domain():l.x.orgDomain(),t};C(_t,{enable:function(t){var e=this.internal,n=e.config;/^(drag|wheel)$/.test(t)&&(n.zoom_type=t),n.zoom_enabled=!!t,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,n=e.config,e=e.org.xDomain;return 0!==t&&!t||(n.zoom_x_max=W("max",[e[1],t])),n.zoom_x_max},min:function(t){var e=this.internal,n=e.config,e=e.org.xDomain;return 0!==t&&!t||(n.zoom_x_min=W("min",[e[0],t])),n.zoom_x_min},range:function(t){var e,n=this.zoom;return Y(t)&&(e=t.min,t=t.max,I(e)&&n.min(e),I(t)&&n.max(t)),{min:n.min(),max:n.max()}}});var yn={zoom:_t,unzoom:function(){var t=this.internal,e=t.config,n=t.$el,i=n.eventRect,n=n.zoomResetBtn;t.scale.zoom&&(e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(vn.zoomIdentity),t.updateZoom(!0),null!=n&&n.style("display","none"),(0,vn.zoomTransform)(i.node())!==vn.zoomIdentity&&t.zoom.transform(i,vn.zoomIdentity))}};function xn(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function _n(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?xn(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var mn=_n(_n({},{drag:function(t){var e,n,f,h,d,g,p=this,i=p.config,r=p.state,a=p.$el.main,o=i.data_selection_grouped,s=i.interaction_enabled&&i.data_selection_isselectable;p.hasArcType()||!i.data_selection_enabled||i.zoom_enabled&&!p.zoom.altDomain||!i.data_selection_multiple||(e=(n=r.dragStart||[0,0])[0],i=n[1],n=t[0],t=t[1],f=Math.min(e,n),h=Math.max(e,n),d=o?r.margin.top:Math.min(i,t),g=o?r.height:Math.max(i,t),a.select("."+P.dragarea).attr("x",f).attr("y",d).attr("width",h-f).attr("height",g-d),a.selectAll("."+P.shapes).selectAll("."+P.shape).filter(function(t){return null==s?void 0:s.bind(p.api)(t)}).each(function(t,e){var n,i=(0,O.select)(this),r=i.classed(P.SELECTED),a=i.classed(P.INCLUDED),o=!1;if(i.classed(P.circle))var s=+i.attr("cx"),u=+i.attr("cy"),c=p.togglePoint,o=f<s&&s<h&&d<u&&u<g;else{if(!i.classed(P.bar))return;var s=(s=(l=(n=this).getBoundingClientRect()).width,l=l.height,{x:(n=m(n))[0].x,y:Math.min(n[0].y,n[1].y),width:s,height:l}),l=s.x,u=s.y;c=p.togglePath,o=!(h<l||l+s.width<f||g<u||u+s.height<d)}o^a&&(i.classed(P.INCLUDED,!a),i.classed(P.SELECTED,!r),c.call(p,!r,i,t,e))}))},dragstart:function(t){var e=this.config,n=this.state,i=this.$el.main;!this.hasArcType()&&e.data_selection_enabled&&(n.dragStart=t,i.select("."+P.chart).append("rect").attr("class",P.dragarea).style("opacity","0.1"),this.setDragStatus(!0))},dragend:function(){var t=this.config,e=this.$el.main,n=this.$T;!this.hasArcType()&&t.data_selection_enabled&&(n(e.select("."+P.dragarea)).style("opacity","0").remove(),e.selectAll("."+P.shape).classed(P.INCLUDED,!1),this.setDragStatus(!1))}}),{},{selectPoint:function(t,e,n){var i=this,r=i.config,a=i.$el.main,o=i.$T,s=r.axis_rotated,u=(s?i.circleY:i.circleX).bind(i),c=(s?i.circleX:i.circleY).bind(i),s=i.pointSelectR.bind(i);y(r.data_onselected,i.api,e,t.node()),o(a.select("."+P.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+P.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(P.selectedCircle,n)}).attr("cx",u).attr("cy",c).attr("stroke",i.color).attr("r",function(t){return 1.4*i.pointSelectR(t)})).attr("r",s)},unselectPoint:function(t,e,n){var i=this.config,r=this.$el.main,a=this.$T;y(i.data_onunselected,this.api,e,t.node()),a(r.select("."+P.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+P.selectedCircle+"-"+n)).attr("r",0).remove()},togglePoint:function(t,e,n,i){this[(t?"":"un")+"selectPoint"](e,n,i)},selectPath:function(t,e){var n=this.config;y(n.data_onselected,this.api,e,t.node()),n.interaction_brighten&&t.style("filter","brightness(1.25)")},unselectPath:function(t,e){var n=this.config;y(n.data_onunselected,this.api,e,t.node()),n.interaction_brighten&&t.style("filter",null)},togglePath:function(t,e,n,i){this[(t?"":"un")+"selectPath"](e,n,i)},getToggle:function(t,e){return"path"===t.nodeName?this.togglePath:this.isStepType(e)?function(){}:this.togglePoint},toggleShape:function(t,e,n){var i,r=this.config,a=this.$el.main,o=(0,O.select)(t),s=o.classed(P.SELECTED),u=this.getToggle(t,e).bind(this);r.data_selection_enabled&&r.data_selection_isselectable.bind(this.api)(e)&&(r.data_selection_multiple||(t="."+P.shapes,r.data_selection_grouped&&(t+=this.getTargetSelectorSuffix(e.id)),a.selectAll(t).selectAll("."+P.shape).each(function(t,e){var n=(0,O.select)(this);n.classed(P.SELECTED)&&u(!1,(i=n).classed(P.SELECTED,!1),t,e)})),i&&i.node()===o.node()||(o.classed(P.SELECTED,!s),u(!s,o,e,n)))}}),bn={initBrush:function(){var i,t,r=this,a=r.config,o=r.scale,e=r.$el.subchart,s=a.axis_rotated;r.brush=(s?(0,c.brushY):(0,c.brushX))().handleSize(5);r.brush.on("start brush end",function(t){var n=t.selection,e=t.target,t=t.type;"start"===t&&"touch"===r.state.inputType&&r.hideTooltip(),/(start|brush)/.test(t)&&r.redrawForBrush(),"end"===t&&(i=o.x.orgDomain()),null!=e&&e.handle&&(null===n?r.brush.handle.attr("display","none"):r.brush.handle.attr("display",null).attr("transform",function(t,e){return"translate("+(s?[33,n[e]-(0===e?30:24)]:[n[e],3])+")"}))}),r.brush.updateResize=function(){var e=this;t&&clearTimeout(t),t=setTimeout(function(){var t=e.getSelection();i&&(0,c.brushSelection)(t.node())&&e.move(t,i.map(o.subX.orgScale()))},0)},r.brush.update=function(){var t;return 0===this.extent()()[1].filter(function(t){return isNaN(t)}).length&&null!=(t=e.main)&&t.select("."+P.brush).call(this),this},r.brush.scale=function(t){var e,n,i=a.subchart_size_height||(e=r.$el.svg.select("."+P.brush+" .overlay"),n={width:0,height:0},e.size()&&(n.width=+e.attr("width"),n.height=+e.attr("height")),n[s?"width":"height"]),n=r.getExtent();!n&&t.range?n=[[0,0],[t.range()[1],i]]:$(n)&&(n=n.map(function(t,e){return[t,0<e?i:e]})),s&&n[1].reverse(),this.extent(n),this.update()},r.brush.getSelection=function(){return e.main?e.main.select("."+P.brush):(0,O.select)([])}},initSubchart:function(){var n,i=this,t=i.config,e=i.state,r=e.clip,a=e.hasAxis,o=i.$el,s=o.defs,u=o.svg,c=o.subchart,l=o.axis;a&&(e=t.subchart_show?null:"hidden",o=r.id+"-subchart",a=i.getClipPath(o),r.idSubchart=o,i.appendClip(s,o),i.initBrush(),c.main=u.append("g").classed(P.subchart,!0).attr("transform",i.getTranslate("context")),(n=c.main).style("visibility",e),n.append("g").attr("clip-path",a).attr("class",P.chart),["bar","line","bubble","candlestick","scatter"].forEach(function(t){var e=D(/^(bubble|scatter)$/.test(t)?"circle":t);(i.hasType(t)||i.hasTypeOf(e))&&(t=n.select("."+P.chart),e=P["chart"+e+"s"],t.select("."+e).empty()&&t.append("g").attr("class",e))}),a=n.append("g").attr("clip-path",a).attr("class",P.brush).call(i.brush),t.subchart_showHandle&&i.addBrushHandle(a),l.subX=n.append("g").attr("class",P.axisX).attr("transform",i.getTranslate("subX")).attr("clip-path",t.axis_rotated?"":r.pathXAxis).style("visibility",t.subchart_axis_x_show?e:"hidden"))},addBrushHandle:function(t){var e=this.config,n=e.axis_rotated,i=e.subchart_init_range,e="handle--custom",r=n?["M 5.2491724,29.749209 a 6,6 0 0 0 -5.50000003,-6.5 H -5.7508276 a 6,6 0 0 0 -6.0000004,6.5 z m -5.00000003,-2 H -6.7508276 m 6.99999997,-2 H -6.7508276Z","M 5.2491724,23.249172 a 6,-6 0 0 1 -5.50000003,6.5 H -5.7508276 a 6,-6 0 0 1 -6.0000004,-6.5 z m -5.00000003,2 H -6.7508276 m 6.99999997,2 H -6.7508276Z"]:["M 0 18 A 6 6 0 0 0 -6.5 23.5 V 29 A 6 6 0 0 0 0 35 Z M -2 23 V 30 M -4 23 V 30Z","M 0 18 A 6 6 0 0 1 6.5 23.5 V 29 A 6 6 0 0 1 0 35 Z M 2 23 V 30 M 4 23 V 30Z"];this.brush.handle=t.selectAll("."+e).data(n?[{type:"n"},{type:"s"}]:[{type:"w"},{type:"e"}]).enter().append("path").attr("class",e).attr("cursor",(n?"ns":"ew")+"-resize").attr("d",function(t){return r[+/[se]/.test(t.type)]}).attr("display",i?null:"none")},updateTargetsForSubchart:function(o){var s=this,t=s.config,e=s.state,u=s.$el.subchart.main;t.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(function(t){return s.hasType(t)||s.hasTypeOf(D(t))}).forEach(function(t){var e=/^(bubble|scatter)$/.test(t),n=D(e?"circle":t),i=s.getChartClass(n,!0),r=s.getClass(e?"circles":t+"s",!0),a=u.select("."+P["chart"+n+"s"]);e?((e=a.selectAll("."+P.circles).data(o.filter(s["is"+D(t)+"Type"].bind(s))).attr("class",r)).exit().remove(),e.enter().append("g").attr("class",r)):(r=(n=a.selectAll("."+P["chart"+n]).attr("class",i).data(o.filter(s["is"+n+"Type"].bind(s)))).enter().append("g").style("opacity","0").attr("class",i).append("g").attr("class",r),n.exit().remove(),"line"===t&&s.hasTypeOf("Area")&&r.append("g").attr("class",s.getClass("areas",!0)))}),u.selectAll("."+P.brush+" rect").attr(t.axis_rotated?"width":"height",t.axis_rotated?e.width2:e.height2))},redrawSubchart:function(t,e,n){var i=this,r=i.config,a=i.$el.subchart.main,o=i.state,s=!!e;a.style("visibility",r.subchart_show?null:"hidden"),r.subchart_show&&("zoom"===(null==(a=o.event)?void 0:a.type)&&i.brush.update(),t&&(a=r.subchart_init_range,E(i)||i.brush.update(),Object.keys(n.type).forEach(function(t){var e=D(t),t=i["generateDraw"+e](n.indices[t],!0);i["update"+e](s,!0),i["redraw"+e](t,s,!0)}),(i.hasType("bubble")||i.hasType("scatter"))&&(t=n.pos.cx,r=i.updateCircleY(!0),i.updateCircle(!0),i.redrawCircle(t,r,s,void 0,!0)),!o.rendered&&a&&i.brush.move(i.brush.getSelection(),a.map(i.scale.x))))},redrawForBrush:function(){var t=this.config,e=t.subchart_onbrush,n=t.zoom_rescale,t=this.scale;this.redraw({withTransition:!1,withY:n,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e.bind(this.api)(t.x.orgDomain())},transformContext:function(t,e){var n=this.$el.subchart,i=this.$T,t=null!=e&&e.axisSubX?e.axisSubX:i(n.main.select("."+P.axisX),t);n.main.attr("transform",this.getTranslate("context")),t.attr("transform",this.getTranslate("subX"))},getExtent:function(){var e,t=this.config,n=this.scale,t=t.axis_x_extent;return t&&(F(t)?t=t.bind(this.api)(this.getXDomain(this.data.targets),n.subX):this.axis.isTimeSeries()&&t.every(isNaN)&&(e=Q.bind(this),t=t.map(function(t){return n.subX(e(t))}))),t}},wn={initZoom:function(){this.scale.zoom=null,this.generateZoom(),this.initZoomBehaviour()},bindZoomEvent:function(t){void 0===t&&(t=!0);var e=this.config;e.zoom_enabled&&t?e.subchart_show||this.bindZoomOnEventRect():!1===t&&(this.api.unzoom(),this.unbindZoomEvent())},generateZoom:function(){var i=this,r=i.config,a=i.org,o=i.scale,t=(0,vn.zoom)().duration(0).on("start",i.onZoomStart.bind(i)).on("zoom",i.onZoom.bind(i)).on("end",i.onZoomEnd.bind(i));t.orgScaleExtent=function(){var t=r.zoom_extent||[1,10];return[t[0],Math.max(i.getMaxDataCount()/t[1],t[1])]},t.updateScaleExtent=function(){var t=S(i.scale.x.orgDomain())/S(i.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this},t.updateTransformScale=function(t){null!=(n=a.xScale)&&n.range(o.x.range());var e=t[r.axis_rotated?"rescaleY":"rescaleX"](a.xScale||o.x),n=i.trimXDomain(e.domain()),t=r.zoom_rescale;e.domain(n,a.xDomain),i.state.xTickOffset||(i.state.xTickOffset=i.axis.x.tickOffset()),o.zoom=i.getCustomizedScale(e),i.axis.x.scale(o.zoom),t&&(a.xScale||(a.xScale=o.x.copy()),o.x.domain(n))},t.getDomain=function(){var t=o[o.zoom?"zoom":"subX"].domain();return i.axis.isCategorized()&&(t[1]-=2),t},i.zoom=t},onZoomStart:function(t){var e=t.sourceEvent;e&&(this.zoom.startEvent=e,this.state.zooming=!0,y(this.config.zoom_onzoomstart,this.api,t))},onZoom:function(t){var e,n,i=this,r=i.config,a=i.scale,o=i.state,s=i.org,u=t.sourceEvent,c=(null==t?void 0:t.transform)===vn.zoomIdentity;!r.zoom_enabled||0===i.filterTargetsToShow(i.data.targets).length||!a.zoom&&-1<(null==u?void 0:u.type.indexOf("touch"))&&1===(null==u?void 0:u.touches.length)||(t.sourceEvent&&(o.zooming=!0),e="mousemove"===(null==u?void 0:u.type),n=(null==u?void 0:u.wheelDelta)<0,u=t.transform,!e&&n&&a.x.domain().every(function(t,e){return t!==s.xDomain[e]})&&a.x.domain(s.xDomain),i.zoom.updateTransformScale(u),t=0<r.transition_duration&&!r.subchart_show&&(o.dragging||c||!t.sourceEvent),i.redraw({withTransition:t,withY:r.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),i.state.cancelClick=e,c||y(r.zoom_onzoom,i.api,i.zoom.getDomain()))},onZoomEnd:function(t){var e,n=this.config,i=this.state,r=this.zoom.startEvent,a=null==t?void 0:t.sourceEvent,t=(null==t?void 0:t.transform)===vn.zoomIdentity;-1<(null==r?void 0:r.type.indexOf("touch"))&&(r=r.changedTouches[0],a=null==a||null==(e=a.changedTouches)?void 0:e[0]),"drag"===n.zoom_type&&a&&r.clientX===a.clientX&&r.clientY===a.clientY||(this.redrawEventRect(),this.updateZoom(),i.zooming=!1,t||!a&&!i.dragging||y(n.zoom_onzoomend,this.api,this.zoom.getDomain()))},updateZoom:function(t){var e=this.scale,n=e.subX,i=e.x,r=e.zoom;r&&(e=r.domain(),r=n.domain(),e=(e[0]<=r[0]||e[0]-.015<=r[0])&&(r[1]<=e[1]||r[1]<=e[1]-.015),(t||e)&&(this.axis.x.scale(n),i.domain(n.orgDomain()),this.scale.zoom=null))},bindZoomOnEventRect:function(){var t=this.config,e=this.$el.eventRect,t="drag"===t.zoom_type?this.zoomBehaviour:this.zoom;this.$el.svg.on("wheel",function(){}),e.call(t).on("dblclick.zoom",null)},initZoomBehaviour:function(){var n,i=this,t=i.config,r=i.state,e=t.axis_rotated,a=0,o=0,s={axis:e?"y":"x",attr:e?"height":"width",index:e?1:0};i.zoomBehaviour=(0,Rt.drag)().clickDistance(4).on("start",function(t){r.event=t,i.setDragStatus(!0),i.unselectRect(),n=n||i.$el.main.append("rect").attr("clip-path",r.clip.path).attr("class",P.zoomBrush).attr("width",e?r.width:0).attr("height",e?0:r.height),a=b(t,this)[s.index],o=a,n.attr(s.axis,a).attr(s.attr,0),i.onZoomStart(t)}).on("drag",function(t){o=b(t,this)[s.index],n.attr(s.axis,Math.min(a,o)).attr(s.attr,Math.abs(o-a))}).on("end",function(t){var e=i.scale.zoom||i.scale.x;r.event=t,n.attr(s.axis,0).attr(s.attr,0),o<a&&(a=(t=[o,a])[0],o=t[1]),a<0&&(o+=Math.abs(a),a=0),a!==o&&i.api.zoom([a,o].map(function(t){return e.invert(t)})),i.setDragStatus(!1)})},setZoomResetButton:function(){var t=this,e=t.config,n=t.$el,i=e.zoom_resetButton;i&&"drag"===e.zoom_type&&(n.zoomResetBtn?n.zoomResetBtn.style("display",null):n.zoomResetBtn=t.$el.chart.append("div").classed(P.button,!0).append("span").on("click",function(){F(i.onclick)&&i.onclick.bind(t.api)(this),t.api.unzoom()}).classed(P.buttonZoomReset,!0).text(i.text||"Reset Zoom"))}},Tn={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){},data_onunselected:function(){}},An={subchart_show:!1,subchart_showHandle:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_format:void 0,subchart_axis_x_tick_text_show:!0,subchart_init_range:void 0,subchart_onbrush:function(){}},Mn={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},kn=function(){return C(te.prototype,mn),C(re.prototype,gn),dt.setOptions([Tn]),(kn=function(){return!0})()},Sn=function(){return C(te.prototype,bn),C(re.prototype,pn),dt.setOptions([An]),(Sn=function(){return!0})()},En=function(){return C(te.prototype,wn),C(re.prototype,yn),dt.setOptions([Mn]),(En=function(){return!0})()},Cn={},Dn={version:"3.3.0",generate:function(t){t=U({},Cn,t),t=new re(t);return t.internal.charts=this.instance,this.instance.push(t),t},defaults:function(t){return Cn=Y(t)?t:Cn},instance:[],plugin:{}};Object.keys(e).forEach(function(t){return e[t]()}),Object.keys(n).forEach(function(t){return n[t]()})}(),On}()});var apexDashboardChart=function($t,Yt){"use strict";var jt={featureDetails:{name:"APEX-D3Dashboard-Charts",scriptVersion:"2.6.6.19",utilVersion:"1.4",url:"https://github.com/RonnyWeiss",url2:"https://ronnyweiss.app",license:"MIT"},isDefinedAndNotNull:function(t){return null!=t&&""!=t},groupObjectArray:function(t,i){return t&&Array.isArray(t)?t.reduce(function(t,e){var n=e[i];return n&&(t[n=""+n]=t[n]||[]).push(e),t},{}):[]},link:function(t,e){if(!e)return window.parent.location.href=t;window.open(t,"_blank")},escapeHTML:function(t){if(null===t)return null;if(void 0!==t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(t){}return $t.util.escapeHTML(String(t))}},loader:{start:function(t,e){e&&Yt(t).css("min-height","100px"),$t.util.showSpinner(Yt(t))},stop:function(t,e){e&&Yt(t).css("min-height",""),Yt(t+" > .u-Processing").remove(),Yt(t+" > .ct-loader").remove()}},jsonSaveExtend:function(e,n){var i={},t={};if("string"==typeof n)try{t=JSON.parse(n)}catch(t){$t.debug.error({module:"util.js",msg:"Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used.",err:t,targetConfig:n})}else t=Yt.extend(!0,{},n);try{i=Yt.extend(!0,{},e,t)}catch(t){i=Yt.extend(!0,{},e),$t.debug.error({module:"util.js",msg:"Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used.",err:t,finalConfig:i})}return i},printDOMMessage:{show:function(t,e,n,i){var r=Yt("<div></div>").css("margin","12px").css("text-align","center").css("padding","35px 0").addClass("dominfomessagediv"),a=Yt("<div></div>"),i=Yt("<span></span>").addClass("fa").addClass(n||"fa-info-circle-o").addClass("fa-2x").css("height","32px").css("width","32px").css("color","#D0D0D0").css("margin-bottom","16px").css("color",i||"inhherit");a.append(i);e=Yt("<span></span>").text(e).css("display","block").css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px");r.append(a).append(e),Yt(t).append(r)},hide:function(t){Yt(t).children(".dominfomessagediv").remove()}},noDataMessage:{show:function(t,e){jt.printDOMMessage.show(t,e,"fa-search")},hide:function(t){jt.printDOMMessage.hide(t)}},errorMessage:{show:function(t,e){jt.printDOMMessage.show(t,e,"fa-exclamation-triangle","#FFCB3D")},hide:function(t){jt.printDOMMessage.hide(t)}},cutString:function(e,t){try{return!(t<0)&&e.length>t?e.substring(0,t-3)+"...":e}catch(t){return e}},isBetween:function(t,e,n){n=n||0;return e-n<=t&&t<=e+n}};function Gt(t,e,n){return n?void 0!==t&&null!=t?1==t||"true"===t:e:jt.isDefinedAndNotNull(t)?t:e}return{initialize:function(c,t,e,n,i,r,a,Ft){var o,s,Bt={},Xt=5,u="#"+c,l=Yt(u).find(".d3dc-root");if($t.debug.info({fct:jt.featureDetails.name+" - initialize",msg:"Load...",featureDetails:jt.featureDetails}),u)if(0<l.length){var f={},f=jt.jsonSaveExtend({colSpan:12,height:400,refresh:0},i),h=jt.jsonSaveExtend({axisLabelPosition:"inner3",background:null,chartTitle:null,gauge:{min:0,max:null,type:"single",width:null,arcMinWidth:null,fullCircle:!1,title:null},grid:{x:!0,y:!0},legend:{position:"right",show:!0},line:{step:"step"},padding:{bottom:null,left:null,right:null,top:null},rotateAxis:!1,showDataLabels:!1,showDataPoints:!0,showAbsoluteValues:!1,threshold:.05,tooltip:{grouped:!0,show:!0},transitionDuration:200,x:{axisHeight:null,label:"x Axis",timeFormat:"%Y-%m-%dT%H:%M:%S",type:"category",tick:{cutAfter:30,maxNumber:25,multiline:!1,rotation:60,autoRotate:!0,timeFormat:"%y-%m-%d %H:%M",fit:!0}},y:{label:"y Axis 1",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},y2:{label:"y Axis 2",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},zoom:{enabled:!0,type:"scroll",rescale:!1}},r);f.d3chart=h,f.noDataMessage=e,f.errorMessage=n;var d=(o=l,(s=Yt("<div></div>")).addClass("d3dc-container"),s.attr("id",c+"-c"),s.css("min-height","100px"),o.append(s),s);v(f);try{Yt(u).bind("apexrefresh",function(){v(f)})}catch(t){jt.errorMessage.show(u,f.errorMessage),$t.debug.error({fct:jt.featureDetails.name+" - initialize",msg:"Can't bind refresh event on "+u+". Apex is missing",err:t,featureDetails:jt.featureDetails})}0<f.refresh&&setInterval(function(){Yt(u).is(":visible")&&v(f)},1e3*f.refresh)}else $t.debug.error({fct:jt.featureDetails.name+" - initialize",msg:"Can't find element with class d3dc-root in element with id: "+c,featureDetails:jt.featureDetails});else $t.debug.error({fct:jt.featureDetails.name+" - initialize",msg:"Can't find pRegionID: "+c,featureDetails:jt.featureDetails});function g(t,r){if($t.debug.info({fct:jt.featureDetails.name+" - prepareData",msg:"AJAX Finished",pAjaxResponse:t,featureDetails:jt.featureDetails}),Bt.innerItemsIntervals&&Yt.each(Bt.innerItemsIntervals,function(t,e){clearInterval(e)}),Bt.innerItemsIntervals={},d.empty(),t.items&&0<t.items.length)try{var a=p(d),o=0;Yt.each(t.items,function(t,e){var n;n=e.itemConfig||{};var i=e.colSpan||f.colSpan;o+=i,$t.debug.info({fct:jt.featureDetails.name+" - prepareData",msg:"Render chart  - Col "+t,featureDetails:jt.featureDetails}),function(t,e,n,i,r,a,o,s){var u=c+"-c-"+t,t=Yt("<div></div>");t.attr("id",u),t.addClass("d3dc-col-"+i),t.addClass("d3chartcol"),n.append(t),s?function(o,t,e,n,s){$t.debug.info({fct:jt.featureDetails.name+" - drawChart",pItemSel:o,pItemHeight:t,pConfigData:e,pValuesData:n,pDefaultConfig:s,featureDetails:jt.featureDetails});var i,r,u=["pie","donut","gauge"],c=!1,l=!1,f=!1;function a(t,i){try{return t.sort(function(t,e){var n=d3.timeParse(i),t=n(t.x),e=n(e.x);return new Date(t).getTime()-new Date(e).getTime()})}catch(t){$t.debug.error({fct:jt.featureDetails.name+" - drawChart",msg:"Error while try sort JSON Array by Time Value",err:t,featureDetails:jt.featureDetails})}}try{var h=!1,d=Gt(e.chartTitle,s.d3chart.chartTitle||"").toString(),g=Gt(e.background,s.d3chart.background),p=null;jt.isDefinedAndNotNull(g)&&(p={color:g});var v=Gt(e.lineStep,s.d3chart.line.step),y=Gt(e.gaugeMin,s.d3chart.gauge.min),x=Gt(e.gaugeMax,s.d3chart.gauge.max),_=Gt(e.gaugeType,s.d3chart.gauge.type),m=Gt(e.gaugeWidth,s.d3chart.gauge.width),b=Gt(e.gaugeArcMinWidth,s.d3chart.gauge.arcMinWidth),w=Gt(e.gaugeFullCircle,s.d3chart.gauge.fullCircle,!0),T=Gt(e.gaugeTitle,s.d3chart.gauge.title||"").toString(),A=Gt(e.gridX,s.d3chart.grid.x,!0),M=Gt(e.gridY,s.d3chart.grid.y,!0),k=Gt(e.xAxisHeight,s.d3chart.x.axisHeight),S=Gt(e.legendShow,s.d3chart.legend.show,!0),E=Gt(e.legendPosition,s.d3chart.legend.position),C=jt.jsonSaveExtend(null,s.d3chart.padding);jt.isDefinedAndNotNull(e.paddingBottom)&&(C.bottom=e.paddingBottom),jt.isDefinedAndNotNull(e.paddingLeft)&&(C.left=e.paddingLeft),jt.isDefinedAndNotNull(e.paddingRight)&&(C.right=e.paddingRight),jt.isDefinedAndNotNull(e.paddingTop)&&(C.top=e.paddingTop);var D,R=Gt(e.rotateAxis,s.d3chart.rotateAxis,!0),O=Gt(e.axisLabelPosition,s.d3chart.axisLabelPosition),L=null,P=null;switch(O){case"inner1":L="inner-left",P="inner-bottom";break;case"inner2":L="inner-center",P="inner-middle";break;case"inner3":L="inner-right",P="inner-top";break;case"outer1":L="outer-left",P="outer-bottom";break;case"outer2":L="outer-center",P="outer-middle";break;case"outer3":L="outer-right",P="outer-top"}R&&(D=L,L=P,P=D);var z=Gt(e.tooltipShow,s.d3chart.tooltip.show,!0),N=Gt(e.tooltipGrouped,s.d3chart.tooltip.grouped,!0),I=Gt(e.transitionDuration||s.d3chart.transitionDuration),F=Gt(e.xShow,s.d3chart.x.show,!0),B=Gt(e.xLabel,s.d3chart.x.label||"").toString(),X=Gt(e.xType,s.d3chart.x.type),$=null,Y=null,j=Gt(e.xTickCutAfter,s.d3chart.x.tick.cutAfter),G=Gt(e.xTickMaxNumber,s.d3chart.x.tick.maxNumber),H=Gt(e.xTickRotation,s.d3chart.x.tick.rotation),V=Gt(e.xTickMultiline,s.d3chart.x.tick.multiline,!0),U=Gt(e.xTickFit,s.d3chart.x.tick.fit,!0),q=Gt(e.xTickAutoRotate,s.d3chart.x.tick.autoRotate,!0),W=null;"category"!=X&&"timeseries"!=X||(Y="x"),"timeseries"==X&&($=Gt(e.xTimeFormat,s.d3chart.x.timeFormat),W=Gt(e.xTickTimeFormat,s.d3chart.x.tick.timeFormat),a(n,$)),"category"==X&&(W=function(t,e){return jt.cutString(e,j)});var Z=Gt(e.yLabel,s.d3chart.y.label||"").toString(),K=Gt(e.yLog,s.d3chart.y.log,!0),J=null;K&&(J="log");var Q=e.yMin||s.d3chart.y.min,tt=e.yMax||s.d3chart.y.max,et=e.yTickMaxNumber||s.d3chart.y.tick.maxNumber,nt=e.yUnit||s.d3chart.y.unit,it=!1,rt=Gt(e.y2Label,s.d3chart.y2.label||"").toString(),at=Gt(e.y2Log,s.d3chart.y2.log,!0),ot=null;at&&(ot="log");var st=Gt(e.y2Min,s.d3chart.y2.min),ut=Gt(e.y2Max,s.d3chart.y2.max),ct=Gt(e.y2TickMaxNumber,s.d3chart.y2.tick.maxNumber),lt=Gt(e.y2Unit,s.d3chart.y2.unit),ft=Gt(e.zoomEnabled,s.d3chart.zoom.enabled,!0),ht=Gt(e.zoomType,s.d3chart.zoom.type),dt=!1,gt=Gt(e.threshold,s.d3chart.threshold);!ft||"scroll"==ht?dt=!1:"subchart"==ht?ft=!(dt=!0):"drag"==ht&&(dt=!(ft=!0));var pt,vt,yt=Gt(e.zoomRescale,s.d3chart.zoom.rescale,!0),xt=[],_t=[],mt=[],bt={},wt={},Tt={},At={},Mt={},kt=0,St=jt.groupObjectArray(n,"seriesID");if(St){"category"!=X&&"timeseries"!=X||(_t.push("x"),pt=jt.groupObjectArray(n,"x"),vt=Object.keys(pt),Yt.each(vt,function(t,e){_t.push(Gt(e.replace("",""),null))})),xt.push(_t),Yt.each(St,function(t,e){var n,r,i,a;kt++,e[0]&&e[0].seriesID?(n=e[0],r=escape(n.seriesID),bt[r]=n.color,wt[r]=n.type,0<=u.indexOf(n.type)&&(ft=!1),"gauge"===n.type&&(c=!0),"pie"===n.type&&(l=!0),"donut"===n.type&&(f=!0),jt.isDefinedAndNotNull(n.tooltip)&&(h=!0),Tt[r]=n.yAxis||"y",jt.isDefinedAndNotNull(n.groupID)&&(i=escape(n.groupID.toString()),Mt[i]||(Mt[i]=[]),Mt[i].push(r)),"y2"==n.yAxis&&(it=!0),At[r]=Gt(n.label,r),(a=[]).push(r),"category"==X||"timeseries"==X?Yt.each(pt,function(t,e){var n=null,i=null;Yt.each(e,function(t,e){escape(e.seriesID)==r&&(n=e.y,e.z&&(i=e.z))}),null!==i?a.push({y:n,z:i}):a.push(n)}):Yt.each(e,function(t,e){var n=Gt(e.y,null);e.z?(e=e.z,a.push({y:n,z:e})):a.push(n)}),xt.push(a)):(jt.errorMessage.show(o,s.errorMessage),$t.debug.error({fct:jt.featureDetails.name+" - drawChart",msg:"No seriesID found in seriesID Cursor",featureDetails:jt.featureDetails}))}),Yt.each(Mt,function(t,e){mt.push(e)});var Et=Gt(e.showDataLabels,s.d3chart.showDataLabels,!0);l||f?Et={colors:"white"}:c&&(Et={colors:"single"===_&&1<kt?"white":"inherit"});var Ct=Gt(e.showDataPoints,s.d3chart.showDataPoints,!0);Gt(e.showAbsoluteValues,s.d3chart.showAbsoluteValues)&&(i=function(t,e,n){return t+nt}),h&&(r=function(t){var r=Yt("<div></div>");return r.addClass("bb-tooltip"),r.addClass("bida-chart-tooltip-custome"),Yt.each(t,function(t,e){var n=""+unescape(e.id),i=e.index;St[n]&&(1===St[n].length&&(i=0),St[n][i]&&jt.isDefinedAndNotNull(St[n][i].tooltip)&&(e=Yt("<div>"),i=St[n][i].tooltip,!1!==Ft&&(i=jt.escapeHTML(i)),e.append(i),r.append(e)))}),r[0].outerHTML});try{var Dt=o+"bbc",Rt=Dt.replace("#",""),Ot=Yt("<div></div>");Ot.attr("id",Rt),Yt(o).append(Ot);var Lt={bindto:Dt,background:p,title:{text:d},size:{height:t},data:{x:Y,xFormat:$,columns:xt,types:wt,groups:mt,colors:bt,labels:Et,axes:Tt,names:At,onclick:function(t){var e;e=t,t=""+unescape(e.id),e=e.index,St[t]&&(1===St[t].length&&(e=0),St[t][e]&&St[t][e].link&&jt.link(St[t][e].link))}},pie:{label:{format:i,threshold:gt}},donut:{label:{format:i,threshold:gt}},line:{step:{type:v}},gauge:{label:{format:i,threshold:gt},fullCircle:w,min:y,max:x,type:_,width:m,title:T,arc:{minWidth:b}},radar:{direction:{clockwise:!0}},subchart:{show:dt},zoom:{type:ht,enabled:ft,rescale:yt},transition:{duration:I},legend:{show:S,position:E},tooltip:{show:z,grouped:N,contents:r},grid:{x:{show:A},y:{show:M}},point:{show:Ct},axis:{rotated:R,x:{show:F,label:{text:B,position:L},type:X,tick:{culling:{max:G},autorotate:q,rotate:H,multiline:V,format:W,fit:U},height:k},y:{label:{text:Z,position:P},type:J,max:tt,min:Q,tick:{culling:{max:et},format:function(t){return t+nt}}},y2:{show:it,label:{text:rt,position:P},type:ot,max:ut,min:st,tick:{culling:{max:ct},format:function(t){return t+lt}}}},padding:C};$t.debug.info({fct:jt.featureDetails.name+" - drawChart",finalChartData:Lt,featureDetails:jt.featureDetails});var Pt=bb.generate(Lt);function zt(){!document.hidden&&Ot.is(":visible")&&Pt.resize({height:t})}function Nt(){Bt.innerItemsIntervals&&Bt.innerItemsIntervals[o]&&clearInterval(Bt.innerItemsIntervals[o])}function It(){Bt.innerItemsIntervals[o]=setInterval(function(){0===Yt(o).length?clearInterval(Bt.innerItemsIntervals[o]):Ot.is(":visible")&&(jt.isBetween(Ot.width(),Ot.find("svg").width(),Xt)||($t.debug.info({fct:jt.featureDetails.name+" - drawChart",msg:"Chart has resize problem",featureDetails:jt.featureDetails}),zt()))},Bt.defTime)}ft&&Yt(Dt).contextmenu(function(t){t.preventDefault(),Pt.unzoom()}),Yt(window).resize(function(){zt()}),Nt(),It(),document.addEventListener("visibilitychange",function(){(document.hidden?Nt:It)()})}catch(t){Yt(o).empty(),jt.errorMessage.show(o,s.errorMessage),$t.debug.error({fct:jt.featureDetails.name+" - drawChart",msg:"Error while try to render chart",err:t,featureDetails:jt.featureDetails})}}else jt.noDataMessage.show(o,s.noDataMessage)}catch(t){Yt(o).empty(),jt.errorMessage.show(o,s.errorMessage),$t.debug.error({fct:jt.featureDetails.name+" - drawChart",msg:"Error while prepare data for chart",err:t,featureDetails:jt.featureDetails})}}("#"+u,e,a,s,o):jt.noDataMessage.show(t,o.noDataMessage);jt.isDefinedAndNotNull(r)&&((o=Yt("<h4></h4>")).css("text-align","center"),!1!==Ft?o.text(r):o.html(r),t.prepend(o))}(t,e.height||f.height,a,i,e.title,n,r,e.itemData),12<=o&&(a=p(d),o=0)})}catch(t){jt.errorMessage.show(d,r.errorMessage),$t.debug.error({fct:jt.featureDetails.name+" - prepareData",msg:"Error while prepare data for chart",err:t,featureDetails:jt.featureDetails})}else d.css("min-height",""),jt.noDataMessage.show(d,r.noDataMessage);jt.loader.stop(u),$t.debug.info({fct:jt.featureDetails.name+" - prepareData",msg:"Finished",featureDetails:jt.featureDetails})}function p(t){var e=Yt("<div></div>");return e.addClass("d3dc-row"),t.append(e),e}function v(e){jt.loader.start(u);$t.server.plugin(t,{pageItems:a},{success:function(t){g(t,e)},error:function(t){Yt(u).empty(),jt.errorMessage.show(u,e.errorMessage),$t.debug.error({fct:jt.featureDetails.name+" - getData",msg:"Error while loading AJAX data",err:t,featureDetails:jt.featureDetails}),jt.loader.stop(u)},dataType:"json"})}}}};