!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,function(s){"use strict";function h(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function u(n){let r=n,a=n;var i;function o(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;a(t[r],e)<0?n=1+r:i=r}return n}return 1===n.length&&(r=(t,e)=>n(t)-e,a=(i=n,(t,e)=>h(i(t),e))),{left:o,center:function(t,e,n,i){return i=o(t,e,n=null==n?0:n,(i=null==i?t.length:i)-1),n<i&&r(t[i-1],e)>-r(t[i],e)?i-1:i},right:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;0<a(t[r],e)?i=r:n=1+r}return n}}}function a(t){return null===t?NaN:+t}var t=u(h);const v=t.right;var e=t.left,n=u(a).center;function i(e,n){let i=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&++i;else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(r=+r)>=r&&++i}return i}function c(t){return 0|t.length}function l(t){return!(0<t)}function f(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function r(e,n){let i=0,r,a=0,o=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(r=t-a,a+=r/++i,o+=r*(t-a));else{let t=-1;for(var s of e)null!=(s=n(s,++t,e))&&(s=+s)>=s&&(r=s-a,a+=r/++i,o+=r*(s-a))}if(1<i)return o/(i-1)}function o(t,e){e=r(t,e);return e&&Math.sqrt(e)}function x(e,n){let i,r;if(void 0===n)for(const t of e)null!=t&&(void 0===i?t>=t&&(i=r=t):(i>t&&(i=t),r<t&&(r=t)));else{let t=-1;for(var a of e)null!=(a=n(a,++t,e))&&(void 0===i?a>=a&&(i=r=a):(i>a&&(i=a),r<a&&(r=a)))}return[i,r]}class k{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let t=0;t<this._n&&t<32;t++){var r=n[t],a=e+r,r=Math.abs(e)<Math.abs(r)?e-(a-r):r-(a-e);r&&(n[i++]=r),e=a}return n[i]=e,this._n=i+1,this}valueOf(){var t=this._partials;let e=this._n,n,i,r,a=0;if(0<e){for(a=t[--e];0<e&&(n=a,i=t[--e],a=n+i,r=i-(a-n),!r););0<e&&(r<0&&t[e-1]<0||0<r&&0<t[e-1])&&(i=2*r,n=a+i,i==n-a&&(a=n))}return a}}class d extends Map{constructor(t,e=m){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(p(this,t))}has(t){return super.has(p(this,t))}set(t,e){return super.set(y(this,t),e)}delete(t){return super.delete(_(this,t))}}class g extends Set{constructor(t,e=m){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const n of t)this.add(n)}has(t){return super.has(p(this,t))}add(t){return super.add(y(this,t))}delete(t){return super.delete(_(this,t))}}function p({_intern:t,_key:e},n){e=e(n);return t.has(e)?t.get(e):n}function y({_intern:t,_key:e},n){e=e(n);return t.has(e)?t.get(e):(t.set(e,n),n)}function _({_intern:t,_key:e},n){e=e(n);return t.has(e)&&(n=t.get(n),t.delete(e)),n}function m(t){return null!==t&&"object"==typeof t?t.valueOf():t}function b(t){return t}function w(t,...e){return M(t,b,b,e)}function T(t,e,...n){return M(t,b,e,n)}function A(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function M(t,l,f,h){return function t(e,n){if(n>=h.length)return f(e);const i=new d,r=h[n++];let a=-1;for(const s of e){var o=r(s,++a,e);const c=i.get(o);c?c.push(s):i.set(o,[s])}for(const[u,e]of i)i.set(u,t(e,n));return l(i)}(t,0)}function S(e,t){return Array.from(t,t=>e[t])}function E(e,...r){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[n=h]=r;if(1===n.length||1<r.length){const t=Uint32Array.from(e,(t,e)=>e);return 1<r.length?(r=r.map(t=>e.map(t)),t.sort((t,e)=>{for(const i of r){var n=h(i[t],i[e]);if(n)return n}})):(n=e.map(n),t.sort((t,e)=>h(n[t],n[e]))),S(e,t)}return e.sort(n)}var C=Array.prototype.slice;function D(t){return function(){return t}}var R=Math.sqrt(50),O=Math.sqrt(10),L=Math.sqrt(2);function P(n,i,t){var e,r,a,o,s=-1;if(t=+t,(n=+n)===(i=+i)&&0<t)return[n];if((e=i<n)&&(r=n,n=i,i=r),0===(o=z(n,i,t))||!isFinite(o))return[];if(0<o){let t=Math.round(n/o),e=Math.round(i/o);for(t*o<n&&++t,e*o>i&&--e,a=new Array(r=e-t+1);++s<r;)a[s]=(t+s)*o}else{o=-o;let t=Math.round(n*o),e=Math.round(i*o);for(t/o<n&&++t,e/o>i&&--e,a=new Array(r=e-t+1);++s<r;)a[s]=(t+s)/o}return e&&a.reverse(),a}function z(t,e,n){t=(e-t)/Math.max(0,n),n=Math.floor(Math.log(t)/Math.LN10),t/=Math.pow(10,n);return 0<=n?(R<=t?10:O<=t?5:L<=t?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(R<=t?10:O<=t?5:L<=t?2:1)}function N(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),n=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),i=i/n;return R<=i?n*=10:O<=i?n*=5:L<=i&&(n*=2),e<t?-n:n}function I(t,e,n){let i;for(;;){var r=z(t,e,n);if(r===i||0===r||!isFinite(r))return[t,e];0<r?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}function F(t){return Math.ceil(Math.log(i(t))/Math.LN2)+1}function X(){var d=b,g=x,p=F;function e(t){for(var e,n=(t=!Array.isArray(t)?Array.from(t):t).length,i=new Array(n),r=0;r<n;++r)i[r]=d(t[r],r,t);var a,o=g(i),s=o[0],c=o[1],u=p(i,s,c);Array.isArray(u)||(a=c,o=+u,g===x&&([s,c]=I(s,c,o)),(u=P(s,c,o))[u.length-1]>=c&&(c<=a&&g===x?(o=z(s,c,o),isFinite(o)&&(0<o?c=(Math.floor(c/o)+1)*o:o<0&&(c=(Math.ceil(c*-o)+1)/-o))):u.pop()));for(var l=u.length;u[0]<=s;)u.shift(),--l;for(;u[l-1]>c;)u.pop(),--l;var f,h=new Array(l+1);for(r=0;r<=l;++r)(f=h[r]=[]).x0=0<r?u[r-1]:s,f.x1=r<l?u[r]:c;for(r=0;r<n;++r)s<=(e=i[r])&&e<=c&&h[v(u,e,0,l)].push(t[r]);return h}return e.value=function(t){return arguments.length?(d="function"==typeof t?t:D(t),e):d},e.domain=function(t){return arguments.length?(g="function"==typeof t?t:D([t[0],t[1]]),e):g},e.thresholds=function(t){return arguments.length?(p="function"==typeof t?t:Array.isArray(t)?D(C.call(t)):D(t),e):p},e}function B(e,n){let i;if(void 0===n)for(const t of e)null!=t&&(i<t||void 0===i&&t>=t)&&(i=t);else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(i<r||void 0===i&&r>=r)&&(i=r)}return i}function $(e,n){let i;if(void 0===n)for(const t of e)null!=t&&(i>t||void 0===i&&t>=t)&&(i=t);else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(i>r||void 0===i&&r>=r)&&(i=r)}return i}function Y(n,i,r=0,a=n.length-1,o=h){for(;r<a;){var s,c,u,l;600<a-r&&(s=a-r+1,c=i-r+1,l=Math.log(s),u=.5*Math.exp(2*l/3),l=.5*Math.sqrt(l*u*(s-u)/s)*(c-s/2<0?-1:1),Y(n,i,Math.max(r,Math.floor(i-c*u/s+l)),Math.min(a,Math.floor(i+(s-c)*u/s+l)),o));var f=n[i];let t=r,e=a;for(j(n,r,i),0<o(n[a],f)&&j(n,r,a);t<e;){for(j(n,t,e),++t,--e;o(n[t],f)<0;)++t;for(;0<o(n[e],f);)--e}0===o(n[r],f)?j(n,r,e):(++e,j(n,e,a)),e<=i&&(r=e+1),i<=e&&(a=e-1)}return n}function j(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function G(t,e,n){if(i=(t=Float64Array.from(function*(e,n){if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(yield t);else{let t=-1;for(var i of e)null!=(i=n(i,++t,e))&&(i=+i)>=i&&(yield i)}}(t,n))).length){if((e=+e)<=0||i<2)return $(t);if(1<=e)return B(t);var n=(i-1)*e,i=Math.floor(n),e=B(Y(t,i).subarray(0,i+1));return e+($(t.subarray(i+1))-e)*(n-i)}}function H(t,e,n=a){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(1<=e)return+n(t[r-1],r-1,t);var i=(r-1)*e,r=Math.floor(i),e=+n(t[r],r,t);return e+(+n(t[r+1],r+1,t)-e)*(i-r)}}function U(t,e){let n,i=-1,r=-1;if(void 0===e)for(const o of t)++r,null!=o&&(n<o||void 0===n&&o>=o)&&(n=o,i=r);else for(var a of t)null!=(a=e(a,++r,t))&&(n<a||void 0===n&&a>=a)&&(n=a,i=r);return i}function V(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function q(t,e){let n,i=-1,r=-1;if(void 0===e)for(const o of t)++r,null!=o&&(n>o||void 0===n&&o>=o)&&(n=o,i=r);else for(var a of t)null!=(a=e(a,++r,t))&&(n>a||void 0===n&&a>=a)&&(n=a,i=r);return i}function W(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a}function Z(t,e=h){if(1===e.length)return q(t,e);let n,i=-1,r=-1;for(const a of t)++r,(i<0?0===e(a,a):e(a,n)<0)&&(n=a,i=r);return i}var K=J(Math.random);function J(o){return function(t,e=0,n=t.length){let i=n-(e=+e);for(;i;){var r=o()*i--|0,a=t[i+e];t[i+e]=t[r+e],t[r+e]=a}return t}}function Q(t){if(!(r=t.length))return[];for(var e=-1,n=$(t,tt),i=new Array(n);++e<n;)for(var r,a=-1,o=i[e]=new Array(r);++a<r;)o[a]=t[a][e];return i}function tt(t){return t.length}function et(t){return t instanceof Set?t:new Set(t)}function nt(t,e){const n=t[Symbol.iterator](),i=new Set;for(const o of e)if(!i.has(o))for(var r,a;{value:r,done:a}=n.next();){if(a)return!1;if(i.add(r),Object.is(o,r))break}return!0}var it=Array.prototype.slice;function rt(t){return t}var at=1,ot=2,st=3,ct=4,ut=1e-6;function lt(t){return"translate("+t+",0)"}function ft(t){return"translate(0,"+t+")"}function ht(e){return t=>+e(t)}function dt(e,n){return n=Math.max(0,e.bandwidth()-2*n)/2,e.round()&&(n=Math.round(n)),t=>+e(t)+n}function gt(){return!this.__axis}function pt(d,g){var p=[],v=null,x=null,y=6,_=6,m=3,b="undefined"!=typeof window&&1<window.devicePixelRatio?0:.5,w=d===at||d===ct?-1:1,T=d===ct||d===ot?"x":"y",A=d===at||d===st?lt:ft;function e(t){var e=null==v?g.ticks?g.ticks.apply(g,p):g.domain():v,n=null==x?g.tickFormat?g.tickFormat.apply(g,p):rt:x,i=Math.max(y,0)+m,r=g.range(),a=+r[0]+b,o=+r[r.length-1]+b,s=(g.bandwidth?dt:ht)(g.copy(),b),c=t.selection?t.selection():t,u=c.selectAll(".domain").data([null]),l=(h=c.selectAll(".tick").data(e,g).order()).exit(),f=h.enter().append("g").attr("class","tick"),r=h.select("line"),e=h.select("text"),u=u.merge(u.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),h=h.merge(f),r=r.merge(f.append("line").attr("stroke","currentColor").attr(T+"2",w*y)),e=e.merge(f.append("text").attr("fill","currentColor").attr(T,w*i).attr("dy",d===at?"0em":d===st?"0.71em":"0.32em"));t!==c&&(u=u.transition(t),h=h.transition(t),r=r.transition(t),e=e.transition(t),l=l.transition(t).attr("opacity",ut).attr("transform",function(t){return isFinite(t=s(t))?A(t+b):this.getAttribute("transform")}),f.attr("opacity",ut).attr("transform",function(t){var e=this.parentNode.__axis;return A((e&&isFinite(e=e(t))?e:s(t))+b)})),l.remove(),u.attr("d",d===ct||d===ot?_?"M"+w*_+","+a+"H"+b+"V"+o+"H"+w*_:"M"+b+","+a+"V"+o:_?"M"+a+","+w*_+"V"+b+"H"+o+"V"+w*_:"M"+a+","+b+"H"+o),h.attr("opacity",1).attr("transform",function(t){return A(s(t)+b)}),r.attr(T+"2",w*y),e.attr(T,w*i).text(n),c.filter(gt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",d===ot?"start":d===ct?"end":"middle"),c.each(function(){this.__axis=s})}return e.scale=function(t){return arguments.length?(g=t,e):g},e.ticks=function(){return p=it.call(arguments),e},e.tickArguments=function(t){return arguments.length?(p=null==t?[]:it.call(t),e):p.slice()},e.tickValues=function(t){return arguments.length?(v=null==t?null:it.call(t),e):v&&v.slice()},e.tickFormat=function(t){return arguments.length?(x=t,e):x},e.tickSize=function(t){return arguments.length?(y=_=+t,e):y},e.tickSizeInner=function(t){return arguments.length?(y=+t,e):y},e.tickSizeOuter=function(t){return arguments.length?(_=+t,e):_},e.tickPadding=function(t){return arguments.length?(m=+t,e):m},e.offset=function(t){return arguments.length?(b=+t,e):b},e}var vt={value:()=>{}};function xt(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new yt(i)}function yt(t){this._=t}function _t(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=vt,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}yt.prototype=xt.prototype={constructor:yt,on:function(t,e){var n,i,r=this._,a=(i=r,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)r[n]=_t(r[n],t.name,e);else if(null==e)for(n in r)r[n]=_t(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=function(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}(r[n],t.name)))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new yt(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(i=this._[t]).length;a<n;++a)i[a].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};var mt="http://www.w3.org/1999/xhtml",bt={svg:"http://www.w3.org/2000/svg",xhtml:mt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wt(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),bt.hasOwnProperty(e)?{space:bt[e],local:t}:t}function Tt(t){t=wt(t);return(t.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===mt&&t.documentElement.namespaceURI===mt?t.createElement(n):t.createElementNS(e,n)}})(t)}function At(){}function Mt(t){return null==t?At:function(){return this.querySelector(t)}}function St(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function kt(){return[]}function Et(t){return null==t?kt:function(){return this.querySelectorAll(t)}}function Ct(t){return function(){return this.matches(t)}}function Dt(e){return function(t){return t.matches(e)}}var Rt=Array.prototype.find;function Ot(){return this.firstElementChild}var Lt=Array.prototype.filter;function Pt(){return this.children}function zt(t){return new Array(t.length)}function Nt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function It(t,e,n,i,r,a){for(var o,s=0,c=e.length,u=a.length;s<u;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new Nt(t,a[s]);for(;s<c;++s)(o=e[s])&&(r[s]=o)}function Ft(t,e,n,i,r,a,o){for(var s,c,u=new Map,l=e.length,f=a.length,h=new Array(l),d=0;d<l;++d)(s=e[d])&&(h[d]=c=o.call(s,s.__data__,d,e)+"",u.has(c)?r[d]=s:u.set(c,s));for(d=0;d<f;++d)c=o.call(t,a[d],d,a)+"",(s=u.get(c))?((i[d]=s).__data__=a[d],u.delete(c)):n[d]=new Nt(t,a[d]);for(d=0;d<l;++d)(s=e[d])&&u.get(h[d])===s&&(r[d]=s)}function Xt(t){return t.__data__}function Bt(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function $t(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Yt(t,e){return t.style.getPropertyValue(e)||$t(t).getComputedStyle(t,null).getPropertyValue(e)}function jt(t){return t.trim().split(/^|\s+/)}function Gt(t){return t.classList||new Ht(t)}function Ht(t){this._node=t,this._names=jt(t.getAttribute("class")||"")}function Ut(t,e){for(var n=Gt(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Vt(t,e){for(var n=Gt(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function qt(){this.textContent=""}function Wt(){this.innerHTML=""}function Zt(){this.nextSibling&&this.parentNode.appendChild(this)}function Kt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Jt(){return null}function Qt(){var t=this.parentNode;t&&t.removeChild(this)}function te(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ee(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ne(a){return function(){var t=this.__on;if(t){for(var e,n=0,i=-1,r=t.length;n<r;++n)e=t[n],a.type&&e.type!==a.type||e.name!==a.name?t[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?t.length=i:delete this.__on}}}function ie(o,s,c){return function(){var t,e,n=this.__on,i=(e=s,function(t){e.call(this,t,this.__data__)});if(n)for(var r=0,a=n.length;r<a;++r)if((t=n[r]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=i,t.options=c),void(t.value=s);this.addEventListener(o.type,i,c),t={type:o.type,name:o.name,value:s,listener:i,options:c},n?n.push(t):this.__on=[t]}}function re(t,e,n){var i=$t(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}Nt.prototype={constructor:Nt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ht.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var ae=[null];function oe(t,e){this._groups=t,this._parents=e}function se(){return new oe([[document.documentElement]],ae)}function ce(t){return"string"==typeof t?new oe([[document.querySelector(t)]],[document.documentElement]):new oe([[t]],ae)}oe.prototype=se.prototype={constructor:oe,select:function(t){"function"!=typeof t&&(t=Mt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o,s=e[r],c=s.length,u=i[r]=new Array(c),l=0;l<c;++l)(a=s[l])&&(o=t.call(a,a.__data__,l,s))&&("__data__"in a&&(o.__data__=a.__data__),u[l]=o);return new oe(i,this._parents)},selectAll:function(t){var e;t="function"==typeof t?(e=t,function(){var t=e.apply(this,arguments);return null==t?[]:St(t)}):Et(t);for(var n=this._groups,i=n.length,r=[],a=[],o=0;o<i;++o)for(var s,c=n[o],u=c.length,l=0;l<u;++l)(s=c[l])&&(r.push(t.call(s,s.__data__,l,c)),a.push(s));return new oe(r,a)},selectChild:function(t){return this.select(null==t?Ot:(e="function"==typeof t?t:Dt(t),function(){return Rt.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?Pt:(e="function"==typeof t?t:Dt(t),function(){return Lt.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=Ct(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,c=i[r]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&c.push(a);return new oe(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Xt);var n,i=e?Ft:It,r=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),c=new Array(o),u=new Array(o),l=0;l<o;++l){var f=r[l],h=a[l],d=h.length,g=St(t.call(f,f&&f.__data__,l,r)),p=g.length,v=c[l]=new Array(p),x=s[l]=new Array(p);i(f,h,v,x,u[l]=new Array(d),g,e);for(var y,_,m=0,b=0;m<p;++m)if(y=v[m]){for(b<=m&&(b=m+1);!(_=x[b])&&++b<p;);y._next=_||null}}return(s=new oe(s,r))._enter=c,s._exit=u,s},enter:function(){return new oe(this._enter||this._groups.map(zt),this._parents)},exit:function(){return new oe(this._exit||this._groups.map(zt),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,a=this.exit(),i="function"==typeof t?t(i):i.append(t+"");return null!=e&&(r=e(r)),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(t){if(!(t instanceof oe))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,i=e.length,t=n.length,r=Math.min(i,t),a=new Array(i),o=0;o<r;++o)for(var s,c=e[o],u=n[o],l=c.length,f=a[o]=new Array(l),h=0;h<l;++h)(s=c[h]||u[h])&&(f[h]=s);for(;o<i;++o)a[o]=e[o];return new oe(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],a=r.length-1,o=r[a];0<=--a;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||Bt;for(var e=this._groups,i=e.length,r=new Array(i),a=0;a<i;++a){for(var o,s=e[a],c=s.length,u=r[a]=new Array(c),l=0;l<c;++l)(o=s[l])&&(u[l]=o);u.sort(t)}return new oe(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,a=e[n],o=0,s=a.length;o<s;++o)(r=a[o])&&t.call(r,r.__data__,o,a);return this},attr:function(t,e){var n=wt(t);if(arguments.length<2){t=this.node();return n.local?t.getAttributeNS(n.space,n.local):t.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,i){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):Yt(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=jt(t+"");if(arguments.length<2){for(var i=Gt(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?Ut:Vt)(this,t)}}:e?function(t){return function(){Ut(this,t)}}:function(t){return function(){Vt(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?qt:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Wt:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Zt)},lower:function(){return this.each(Kt)},append:function(t){var e="function"==typeof t?t:Tt(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:Tt(t),i=null==e?Jt:"function"==typeof e?e:Mt(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(Qt)},clone:function(t){return this.select(t?ee:te)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,a=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=a.length;if(!(arguments.length<2)){for(s=e?ie:ne,i=0;i<o;++i)this.each(s(a[i],e,n));return this}var s=this.node().__on;if(s)for(var c,u=0,l=s.length;u<l;++u)for(i=0,c=s[u];i<o;++i)if((r=a[i]).type===c.type&&r.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return re(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return re(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],a=0,o=r.length;a<o;++a)(i=r[a])&&(yield i)}};var ue=0;function le(){return new fe}function fe(){this._="@"+(++ue).toString(36)}function he(t){for(var e;e=t.sourceEvent;)t=e;return t}function de(t,e){if(t=he(t),e=void 0===e?t.currentTarget:e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function ge(t){t.stopImmediatePropagation()}function pe(t){t.preventDefault(),t.stopImmediatePropagation()}function ve(t){var e=t.document.documentElement,t=ce(t).on("dragstart.drag",pe,!0);"onselectstart"in e?t.on("selectstart.drag",pe,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function xe(t,e){var n=t.document.documentElement,i=ce(t).on("dragstart.drag",null);e&&(i.on("click.drag",pe,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}fe.prototype=le.prototype={constructor:fe,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var ye=t=>()=>t;function _e(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:a,x:o,y:s,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}function me(t){return!t.ctrlKey&&!t.button}function be(){return this.parentNode}function we(t,e){return null==e?{x:t.x,y:t.y}:e}function Te(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ae(t,e,n){(t.prototype=e.prototype=n).constructor=t}function Me(t,e){var n,i=Object.create(t.prototype);for(n in e)i[n]=e[n];return i}function Se(){}_e.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var ke=1/.7,Ee="\\s*([+-]?\\d+)\\s*",Ce="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",De="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Re=/^#([0-9a-f]{3,8})$/,Oe=new RegExp("^rgb\\("+[Ee,Ee,Ee]+"\\)$"),Le=new RegExp("^rgb\\("+[De,De,De]+"\\)$"),Pe=new RegExp("^rgba\\("+[Ee,Ee,Ee,Ce]+"\\)$"),ze=new RegExp("^rgba\\("+[De,De,De,Ce]+"\\)$"),Ne=new RegExp("^hsl\\("+[Ce,De,De]+"\\)$"),Ie=new RegExp("^hsla\\("+[Ce,De,De,Ce]+"\\)$"),Fe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Xe(){return this.rgb().formatHex()}function Be(){return this.rgb().formatRgb()}function $e(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Re.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ye(e):3===n?new Ue(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?je(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?je(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Oe.exec(t))?new Ue(e[1],e[2],e[3],1):(e=Le.exec(t))?new Ue(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Pe.exec(t))?je(e[1],e[2],e[3],e[4]):(e=ze.exec(t))?je(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ne.exec(t))?Ze(e[1],e[2]/100,e[3]/100,1):(e=Ie.exec(t))?Ze(e[1],e[2]/100,e[3]/100,e[4]):Fe.hasOwnProperty(t)?Ye(Fe[t]):"transparent"===t?new Ue(NaN,NaN,NaN,0):null}function Ye(t){return new Ue(t>>16&255,t>>8&255,255&t,1)}function je(t,e,n,i){return new Ue(t=i<=0?e=n=NaN:t,e,n,i)}function Ge(t){return(t=t instanceof Se?t:$e(t))?new Ue((t=t.rgb()).r,t.g,t.b,t.opacity):new Ue}function He(t,e,n,i){return 1===arguments.length?Ge(t):new Ue(t,e,n,null==i?1:i)}function Ue(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Ve(){return"#"+We(this.r)+We(this.g)+We(this.b)}function qe(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function We(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ze(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new Qe(t,e,n,i)}function Ke(t){if(t instanceof Qe)return new Qe(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof Se)?$e(t):t))return new Qe;if(t instanceof Qe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,c=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=c<.5?a+r:2-a-r,o*=60):s=0<c&&c<1?0:o,new Qe(o,s,c,t.opacity)}function Je(t,e,n,i){return 1===arguments.length?Ke(t):new Qe(t,e,n,null==i?1:i)}function Qe(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function tn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Ae(Se,$e,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Xe,formatHex:Xe,formatHsl:function(){return Ke(this).formatHsl()},formatRgb:Be,toString:Be}),Ae(Ue,He,Me(Se,{brighter:function(t){return t=null==t?ke:Math.pow(ke,t),new Ue(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ue(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ve,formatHex:Ve,formatRgb:qe,toString:qe})),Ae(Qe,Je,Me(Se,{brighter:function(t){return t=null==t?ke:Math.pow(ke,t),new Qe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new Ue(tn(240<=t?t-240:120+t,n,e),tn(t,n,e),tn(t<120?240+t:t-120,n,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const en=Math.PI/180,nn=180/Math.PI,rn=.96422,an=1,on=.82521,sn=4/29,cn=6/29,un=3*cn*cn,ln=cn*cn*cn;function fn(t){if(t instanceof dn)return new dn(t.l,t.a,t.b,t.opacity);if(t instanceof mn)return bn(t);var e,n,i=xn((t=!(t instanceof Ue)?Ge(t):t).r),r=xn(t.g),a=xn(t.b),o=gn((.2225045*i+.7168786*r+.0606169*a)/an);return i===r&&r===a?e=n=o:(e=gn((.4360747*i+.3850649*r+.1430804*a)/rn),n=gn((.0139322*i+.0971045*r+.7141733*a)/on)),new dn(116*o-16,500*(e-o),200*(o-n),t.opacity)}function hn(t,e,n,i){return 1===arguments.length?fn(t):new dn(t,e,n,null==i?1:i)}function dn(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function gn(t){return t>ln?Math.pow(t,1/3):t/un+sn}function pn(t){return t>cn?t*t*t:un*(t-sn)}function vn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function xn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function yn(t){if(t instanceof mn)return new mn(t.h,t.c,t.l,t.opacity);if(0===(t=!(t instanceof dn)?fn(t):t).a&&0===t.b)return new mn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*nn;return new mn(e<0?360+e:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function _n(t,e,n,i){return 1===arguments.length?yn(t):new mn(t,e,n,null==i?1:i)}function mn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function bn(t){if(isNaN(t.h))return new dn(t.l,0,0,t.opacity);var e=t.h*en;return new dn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Ae(dn,hn,Me(Se,{brighter:function(t){return new dn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new dn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Ue(vn(3.1338561*(e=rn*pn(e))-1.6168667*(t=an*pn(t))-.4906146*(n=on*pn(n))),vn(-.9787684*e+1.9161415*t+.033454*n),vn(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Ae(mn,_n,Me(Se,{brighter:function(t){return new mn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new mn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return bn(this).rgb()}}));var wn=1.78277,Tn=-.29227,An=-.90649,Mn=1.97294,Sn=Mn*An,kn=Mn*wn,En=wn*Tn- -.14861*An;function Cn(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Dn)return new Dn(t.h,t.s,t.l,t.opacity);var e=(t=!(t instanceof Ue)?Ge(t):t).r/255,n=t.g/255,i=t.b/255,r=(En*i+Sn*e-kn*n)/(En+Sn-kn),i=(Mn*(n-r)-Tn*(e=i-r))/An,n=Math.sqrt(i*i+e*e)/(Mn*r*(1-r));return new Dn((e=n?Math.atan2(i,e)*nn-120:NaN)<0?e+360:e,n,r,t.opacity)}(t):new Dn(t,e,n,null==i?1:i)}function Dn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Rn(t,e,n,i,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*i+o*r)/6}function On(o){var s=o.length-1;return function(t){var e=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),n=o[e],i=o[e+1],r=0<e?o[e-1]:2*n-i,a=e<s-1?o[e+2]:2*i-n;return Rn((t-e/s)*s,r,n,i,a)}}function Ln(o){var s=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*s),n=o[(e+s-1)%s],i=o[e%s],r=o[(e+1)%s],a=o[(e+2)%s];return Rn((t-e/s)*s,n,i,r,a)}}Ae(Dn,Cn,Me(Se,{brighter:function(t){return t=null==t?ke:Math.pow(ke,t),new Dn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Dn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*en,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),t=Math.sin(t);return new Ue(255*(e+n*(-.14861*i+wn*t)),255*(e+n*(Tn*i+An*t)),255*(e+Mn*i*n),this.opacity)}}));var Pn=t=>()=>t;function zn(e,n){return function(t){return e+t*n}}function Nn(t,e){var n=e-t;return n?zn(t,180<n||n<-180?n-360*Math.round(n/360):n):Pn(isNaN(t)?e:t)}function In(a){return 1==(a=+a)?Fn:function(t,e){return e-t?(n=t,i=e,r=a,n=Math.pow(n,r),i=Math.pow(i,r)-n,r=1/r,function(t){return Math.pow(n+t*i,r)}):Pn(isNaN(t)?e:t);var n,i,r}}function Fn(t,e){var n=e-t;return n?zn(t,n):Pn(isNaN(t)?e:t)}var Xn=function t(e){var o=In(e);function n(e,t){var n=o((e=He(e)).r,(t=He(t)).r),i=o(e.g,t.g),r=o(e.b,t.b),a=Fn(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=r(t),e.opacity=a(t),e+""}}return n.gamma=t,n}(1);function Bn(s){return function(t){for(var e,n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),o=0;o<n;++o)e=He(t[o]),i[o]=e.r||0,r[o]=e.g||0,a[o]=e.b||0;return i=s(i),r=s(r),a=s(a),e.opacity=1,function(t){return e.r=i(t),e.g=r(t),e.b=a(t),e+""}}}var $n=Bn(On),Yn=Bn(Ln);function jn(e,n){n=n||[];var i,r=e?Math.min(n.length,e.length):0,a=n.slice();return function(t){for(i=0;i<r;++i)a[i]=e[i]*(1-t)+n[i]*t;return a}}function Gn(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Hn(t,e){for(var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),o=0;o<i;++o)r[o]=Jn(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(t){for(o=0;o<i;++o)a[o]=r[o](t);return a}}function Un(e,n){var i=new Date;return e=+e,n=+n,function(t){return i.setTime(e*(1-t)+n*t),i}}function Vn(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function qn(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),e=null===e||"object"!=typeof e?{}:e)n in t?i[n]=Jn(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var Wn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zn=new RegExp(Wn.source,"g");function Kn(t,i){var e,n,r,a,o,s=Wn.lastIndex=Zn.lastIndex=0,c=-1,u=[],l=[];for(t+="",i+="";(e=Wn.exec(t))&&(n=Zn.exec(i));)(r=n.index)>s&&(r=i.slice(s,r),u[c]?u[c]+=r:u[++c]=r),(e=e[0])===(n=n[0])?u[c]?u[c]+=n:u[++c]=n:(u[++c]=null,l.push({i:c,x:Vn(e,n)})),s=Zn.lastIndex;return s<i.length&&(r=i.slice(s),u[c]?u[c]+=r:u[++c]=r),u.length<2?l[0]?(o=l[0].x,function(t){return o(t)+""}):(a=i,function(){return a}):(i=l.length,function(t){for(var e,n=0;n<i;++n)u[(e=l[n]).i]=e.x(t);return u.join("")})}function Jn(t,e){var n=typeof e;return null==e||"boolean"==n?Pn(e):("number"==n?Vn:"string"==n?(n=$e(e))?(e=n,Xn):Kn:e instanceof $e?Xn:e instanceof Date?Un:Gn(e)?jn:Array.isArray(e)?Hn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?qn:Vn)(t,e)}function Qn(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var ti,ei=180/Math.PI,ni={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ii(t,e,n,i,r,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,c/=s),t*i<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*ei,skewX:Math.atan(c)*ei,scaleX:o,scaleY:s}}function ri(f,h,d,g){function p(t){return t.length?t.pop()+" ":""}return function(t,e){var n,i,r,a,o,s,c,u=[],l=[];return t=f(t),e=f(e),r=t.translateX,a=t.translateY,c=e.translateX,s=e.translateY,o=u,n=l,r!==c||a!==s?(i=o.push("translate(",null,h,null,d),n.push({i:i-4,x:Vn(r,c)},{i:i-2,x:Vn(a,s)})):(c||s)&&o.push("translate("+c+h+s+d),n=t.rotate,r=e.rotate,i=u,a=l,n!==r?(180<n-r?r+=360:180<r-n&&(n+=360),a.push({i:i.push(p(i)+"rotate(",null,g)-2,x:Vn(n,r)})):r&&i.push(p(i)+"rotate("+r+g),o=t.skewX,c=e.skewX,s=u,a=l,o!==c?a.push({i:s.push(p(s)+"skewX(",null,g)-2,x:Vn(o,c)}):c&&s.push(p(s)+"skewX("+c+g),n=t.scaleX,i=t.scaleY,r=e.scaleX,a=e.scaleY,o=u,s=l,n!==r||i!==a?(c=o.push(p(o)+"scale(",null,",",null,")"),s.push({i:c-4,x:Vn(n,r)},{i:c-2,x:Vn(i,a)})):1===r&&1===a||o.push(p(o)+"scale("+r+","+a+")"),t=e=null,function(t){for(var e,n=-1,i=l.length;++n<i;)u[(e=l[n]).i]=e.x(t);return u.join("")}}}var ai=ri(function(t){return(t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"")).isIdentity?ni:ii(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),oi=ri(function(t){return null==t?ni:((ti=ti||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=ti.transform.baseVal.consolidate())?ii((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ni)},", ",")",")");function si(t){return((t=Math.exp(t))+1/t)/2}var ci=function n(h,d,g){function t(t,e){var i,r,a,n,o=t[0],s=t[1],c=t[2],u=e[0],t=e[1],e=e[2],l=u-o,f=t-s,u=l*l+f*f;return(n=u<1e-12?(a=Math.log(e/c)/h,function(t){return[o+t*l,s+t*f,c*Math.exp(h*t*a)]}):(i=Math.sqrt(u),t=(e*e-c*c+g*u)/(2*c*d*i),n=(e*e-c*c-g*u)/(2*e*d*i),r=Math.log(Math.sqrt(t*t+1)-t),a=(Math.log(Math.sqrt(n*n+1)-n)-r)/h,function(t){var e=t*a,n=si(r),t=c/(d*i)*(n*(t=h*e+r,((t=Math.exp(2*t))-1)/(t+1))-(t=r,((t=Math.exp(t))-1/t)/2));return[o+t*l,s+t*f,c*n/si(h*e+r)]})).duration=1e3*a*h/Math.SQRT2,n}return t.rho=function(t){var e=Math.max(.001,+t),t=e*e;return n(e,t,t*t)},t}(Math.SQRT2,2,4);function ui(o){return function(e,t){var n=o((e=Je(e)).h,(t=Je(t)).h),i=Fn(e.s,t.s),r=Fn(e.l,t.l),a=Fn(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=i(t),e.l=r(t),e.opacity=a(t),e+""}}}var li=ui(Nn),fi=ui(Fn);function hi(o){return function(e,t){var n=o((e=_n(e)).h,(t=_n(t)).h),i=Fn(e.c,t.c),r=Fn(e.l,t.l),a=Fn(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=i(t),e.l=r(t),e.opacity=a(t),e+""}}}var di=hi(Nn),gi=hi(Fn);function pi(s){return function t(o){function e(e,t){var n=s((e=Cn(e)).h,(t=Cn(t)).h),i=Fn(e.s,t.s),r=Fn(e.l,t.l),a=Fn(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=i(t),e.l=r(Math.pow(t,o)),e.opacity=a(t),e+""}}return o=+o,e.gamma=t,e}(1)}var vi=pi(Nn),xi=pi(Fn);function yi(t,e){void 0===e&&(e=t,t=Jn);for(var n=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);n<i;)a[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return a[e](t-e)}}var _i,mi,bi=0,wi=0,Ti=0,Ai=1e3,Mi=0,Si=0,ki=0,Ei="object"==typeof performance&&performance.now?performance:Date,Ci="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Di(){return Si||(Ci(Ri),Si=Ei.now()+ki)}function Ri(){Si=0}function Oi(){this._call=this._time=this._next=null}function Li(t,e,n){var i=new Oi;return i.restart(t,e,n),i}function Pi(){Di(),++bi;for(var t,e=_i;e;)0<=(t=Si-e._time)&&e._call.call(null,t),e=e._next;--bi}function zi(){Si=(Mi=Ei.now())+ki,bi=wi=0;try{Pi()}finally{bi=0,function(){var t,e,n=_i,i=1/0;for(;n;)n=n._call?(i>n._time&&(i=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:_i=e);mi=t,Ii(i)}(),Si=0}}function Ni(){var t=Ei.now(),e=t-Mi;Ai<e&&(ki-=e,Mi=t)}function Ii(t){bi||(wi=wi&&clearTimeout(wi),24<t-Si?(t<1/0&&(wi=setTimeout(zi,t-Ei.now()-ki)),Ti=Ti&&clearInterval(Ti)):(Ti||(Mi=Ei.now(),Ti=setInterval(Ni,Ai)),bi=1,Ci(zi)))}function Fi(e,n,t){var i=new Oi;return i.restart(t=>{i.stop(),e(t+n)},n=null==n?0:+n,t),i}Oi.prototype=Li.prototype={constructor:Oi,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Di():+n)+(null==e?0:+e),this._next||mi===this||(mi?mi._next=this:_i=this,mi=this),this._call=t,this._time=n,Ii()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ii())}};var Xi=xt("start","end","cancel","interrupt"),Bi=[],$i=0,Yi=1,ji=2,Gi=3,Hi=4,Ui=5,Vi=6;function qi(t,e,n,i,r,a){var o,s,c,u,l,f=t.__transition;if(f){if(n in f)return}else t.__transition={};function h(t){var e,n,i,r;if(c.state!==Yi)return g();for(e in l)if((r=l[e]).name===c.name){if(r.state===Gi)return Fi(h);r.state===Hi?(r.state=Vi,r.timer.stop(),r.on.call("interrupt",o,o.__data__,r.index,r.group),delete l[e]):+e<s&&(r.state=Vi,r.timer.stop(),r.on.call("cancel",o,o.__data__,r.index,r.group),delete l[e])}if(Fi(function(){c.state===Gi&&(c.state=Hi,c.timer.restart(d,c.delay,c.time),d(t))}),c.state=ji,c.on.call("start",o,o.__data__,c.index,c.group),c.state===ji){for(c.state=Gi,u=new Array(i=c.tween.length),e=0,n=-1;e<i;++e)(r=c.tween[e].value.call(o,o.__data__,c.index,c.group))&&(u[++n]=r);u.length=n+1}}function d(t){for(var e=t<c.duration?c.ease.call(null,t/c.duration):(c.timer.restart(g),c.state=Ui,1),n=-1,i=u.length;++n<i;)u[n].call(o,e);c.state===Ui&&(c.on.call("end",o,o.__data__,c.index,c.group),g())}function g(){for(var t in c.state=Vi,c.timer.stop(),delete l[s],l)return;delete o.__transition}o=t,s=n,c={name:e,index:i,group:r,on:Xi,tween:Bi,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:$i},((l=o.__transition)[s]=c).timer=Li(function(t){c.state=Yi,c.timer.restart(h,c.delay,c.time),c.delay<=t&&h(t-c.delay)},0,c.time)}function Wi(t,e){e=Ki(t,e);if(e.state>$i)throw new Error("too late; already scheduled");return e}function Zi(t,e){e=Ki(t,e);if(e.state>Gi)throw new Error("too late; already running");return e}function Ki(t,e){t=t.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Ji(t,e){var n,i,r,a=t.__transition,o=!0;if(a){for(r in e=null==e?null:e+"",a)(n=a[r]).name===e?(i=n.state>ji&&n.state<Ui,n.state=Vi,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete t.__transition}}function Qi(t,e,n){var i=t._id;return t.each(function(){var t=Zi(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Ki(t,i).value[e]}}function tr(t,e){var n;return("number"==typeof e?Vn:e instanceof $e?Xn:(n=$e(e))?(e=n,Xn):Kn)(t,e)}function er(i,r){var a,o;function t(){var e,n,t=r.apply(this,arguments);return a=t!==o?(o=t)&&(e=i,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}):a}return t._value=r,t}function nr(i,r){var a,o;function t(){var e,n,t=r.apply(this,arguments);return a=t!==o?(o=t)&&(e=i,n=t,function(t){this.setAttribute(e,n.call(this,t))}):a}return t._value=r,t}var ir=se.prototype.constructor;function rr(t){return function(){this.style.removeProperty(t)}}function ar(r,a,o){var s,c;function t(){var e,n,i,t=a.apply(this,arguments);return s=t!==c?(c=t)&&(e=r,n=t,i=o,function(t){this.style.setProperty(e,n.call(this,t),i)}):s}return t._value=a,t}function or(n){var i,r;function t(){var e,t=n.apply(this,arguments);return i=t!==r?(r=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):i}return t._value=n,t}var sr=0;function cr(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function ur(t){return se().transition(t)}var lr=se.prototype;cr.prototype=ur.prototype={constructor:cr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Mt(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s,c,u=i[o],l=u.length,f=a[o]=new Array(l),h=0;h<l;++h)(s=u[h])&&(c=t.call(s,s.__data__,h,u))&&("__data__"in s&&(c.__data__=s.__data__),f[h]=c,qi(f[h],e,n,h,f,Ki(s,n)));return new cr(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Et(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var c,u=i[s],l=u.length,f=0;f<l;++f)if(c=u[f]){for(var h,d=t.call(c,c.__data__,f,u),g=Ki(c,n),p=0,v=d.length;p<v;++p)(h=d[p])&&qi(h,e,n,p,d,g);a.push(d),o.push(c)}return new cr(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=Ct(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,c=i[r]=[],u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&c.push(a);return new cr(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,t=n.length,r=Math.min(i,t),a=new Array(i),o=0;o<r;++o)for(var s,c=e[o],u=n[o],l=c.length,f=a[o]=new Array(l),h=0;h<l;++h)(s=c[h]||u[h])&&(f[h]=s);for(;o<i;++o)a[o]=e[o];return new cr(a,this._parents,this._name,this._id)},selection:function(){return new ir(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++sr,i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],c=s.length,u=0;u<c;++u)(o=s[u])&&qi(o,t,n,u,s,{time:(o=Ki(o,e)).time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease});return new cr(i,this._parents,t,n)},call:lr.call,nodes:lr.nodes,node:lr.node,size:lr.size,empty:lr.empty,each:lr.each,on:function(t,e){var n,i,r,a,o,s,c=this._id;return arguments.length<2?Ki(this.node(),c).on.on(t):this.each((n=c,r=e,s=((i=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?Wi:Zi,function(){var t=s(this,n),e=t.on;e!==a&&(o=(a=e).copy()).on(i,r),t.on=o}))},attr:function(t,e){var n=wt(t),i="transform"===n?oi:tr;return this.attrTween(t,"function"==typeof e?(n.local?function(i,r,a){var o,s,c;return function(){var t,e,n=a(this);if(null!=n)return(t=this.getAttributeNS(i.space,i.local))===(e=n+"")?null:t===o&&e===s?c:(s=e,c=r(o=t,n));this.removeAttributeNS(i.space,i.local)}}:function(i,r,a){var o,s,c;return function(){var t,e,n=a(this);if(null!=n)return(t=this.getAttribute(i))===(e=n+"")?null:t===o&&e===s?c:(s=e,c=r(o=t,n));this.removeAttribute(i)}})(n,i,Qi(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,i){var r,a,o=i+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===r?a:a=n(r=t,i)}}:function(e,n,i){var r,a,o=i+"";return function(){var t=this.getAttribute(e);return t===o?null:t===r?a:a=n(r=t,i)}})(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return t=wt(t),this.tween(n,(t.local?er:nr)(t,e))},style:function(t,e,n){var i,r,a,o,s,c,u,l,f,h,d,g,p,v,x,y,_,m,b,w,T,A,M,S,k,E="transform"==(t+="")?ai:tr;return null==e?this.styleTween(t,(T=t,A=E,function(){var t=Yt(this,T),e=(this.style.removeProperty(T),Yt(this,T));return t===e?null:t===M&&e===S?k:k=A(M=t,S=e)})).on("end.style."+t,rr(t)):"function"==typeof e?this.styleTween(t,(y=E,_=Qi(this,"style."+(x=t),e),function(){var t=Yt(this,x),e=_(this),n=e+"";return null==e&&(this.style.removeProperty(x),n=e=Yt(this,x)),t===n?null:t===m&&n===b?w:(b=n,w=y(m=t,e))})).each((u=this._id,v="end."+(p="style."+(l=t)),function(){var t=Zi(this,u),e=t.on,n=null==t.value[p]?g=g||rr(l):void 0;e===f&&d===n||(h=(f=e).copy()).on(v,d=n),t.on=h})):this.styleTween(t,(i=t,r=E,c=(a=e)+"",function(){var t=Yt(this,i);return t===c?null:t===o?s:s=r(o=t,a)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,ar(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=Qi(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,or(t))},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Ki(this.node(),n).tween,a=0,o=r.length;a<o;++a)if((i=r[a]).name===t)return i.value;return null}return this.each((null==e?function(r,a){var o,s;return function(){var t=Zi(this,r),e=t.tween;if(e!==o)for(var n=0,i=(s=o=e).length;n<i;++n)if(s[n].name===a){(s=s.slice()).splice(n,1);break}t.tween=s}}:function(a,o,s){var c,u;if("function"!=typeof s)throw new Error;return function(){var t=Zi(this,a),e=t.tween;if(e!==c){u=(c=e).slice();for(var n={name:o,value:s},i=0,r=u.length;i<r;++i)if(u[i].name===o){u[i]=n;break}i===r&&u.push(n)}t.tween=u}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Wi(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Wi(this,t).delay=e}})(e,t)):Ki(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Zi(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Zi(this,t).duration=e}})(e,t)):Ki(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Zi(this,t).ease=e}}(e,t)):Ki(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;Zi(this,e).ease=t}));var e,n},end:function(){var r,a,o=this,s=o._id,c=o.size();return new Promise(function(t,e){var n={value:e},i={value:function(){0==--c&&t()}};o.each(function(){var t=Zi(this,s),e=t.on;e!==r&&((a=(r=e).copy())._.cancel.push(n),a._.interrupt.push(n),a._.end.push(i)),t.on=a}),0===c&&t()})},[Symbol.iterator]:lr[Symbol.iterator]};function fr(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function hr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var dr=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),gr=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),pr=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),vr=Math.PI,xr=vr/2;function yr(t){return(1-Math.cos(vr*t))/2}function _r(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function mr(t){return((t*=2)<=1?_r(1-t):2-_r(t-1))/2}function br(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var wr=4/11,Tr=6/11,Ar=8/11,Mr=.75,Sr=9/11,kr=10/11,Er=.9375,Cr=21/22,Dr=63/64,Rr=1/wr/wr;function Or(t){return(t=+t)<wr?Rr*t*t:t<Ar?Rr*(t-=Tr)*t+Mr:t<kr?Rr*(t-=Sr)*t+Er:Rr*(t-=Cr)*t+Dr}var Lr=1.70158,Pr=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(Lr),zr=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(Lr),Nr=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(Lr),Ir=2*Math.PI,Fr=function e(n,i){var r=Math.asin(1/(n=Math.max(1,n)))*(i/=Ir);function t(t){return n*_r(- --t)*Math.sin((r-t)/i)}return t.amplitude=function(t){return e(t,i*Ir)},t.period=function(t){return e(n,t)},t}(1,.3),Xr=function e(n,i){var r=Math.asin(1/(n=Math.max(1,n)))*(i/=Ir);function t(t){return 1-n*_r(t=+t)*Math.sin((t+r)/i)}return t.amplitude=function(t){return e(t,i*Ir)},t.period=function(t){return e(n,t)},t}(1,.3),Br=function e(n,i){var r=Math.asin(1/(n=Math.max(1,n)))*(i/=Ir);function t(t){return((t=2*t-1)<0?n*_r(-t)*Math.sin((r-t)/i):2-n*_r(t)*Math.sin((r+t)/i))/2}return t.amplitude=function(t){return e(t,i*Ir)},t.period=function(t){return e(n,t)},t}(1,.3),$r={time:null,delay:0,duration:250,ease:hr};se.prototype.interrupt=function(t){return this.each(function(){Ji(this,t)})},se.prototype.transition=function(t){var e,n;t=t instanceof cr?(e=t._id,t._name):(e=++sr,(n=$r).time=Di(),null==t?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],c=s.length,u=0;u<c;++u)(o=s[u])&&qi(o,t,e,u,s,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}(o,e));return new cr(i,this._parents,t,e)};var Yr=[null];var jr=t=>()=>t;function Gr(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Hr(t){t.preventDefault(),t.stopImmediatePropagation()}var Ur={name:"drag"},Vr={name:"space"},qr={name:"handle"},Wr={name:"center"};const{abs:Zr,max:Kr,min:Jr}=Math;function Qr(t){return[+t[0],+t[1]]}function ta(t){return[Qr(t[0]),Qr(t[1])]}var ea={name:"x",handles:["w","e"].map(ua),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},na={name:"y",handles:["n","s"].map(ua),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},ia={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ua),input:function(t){return null==t?null:ta(t)},output:function(t){return t}},ra={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},aa={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},oa={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},sa={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ca={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ua(t){return{type:t}}function la(t){return!t.ctrlKey&&!t.button}function fa(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ha(){return navigator.maxTouchPoints||"ontouchstart"in this}function da(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function ga(z){var N,e=fa,I=la,n=ha,F=!0,r=xt("start","brush","end"),i=6;function a(t){var e=t.property("__brush",l).selectAll(".overlay").data([ua("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ra.overlay).merge(e).each(function(){var t=da(this).extent;ce(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([ua("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ra.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");e=t.selectAll(".handle").data(z.handles,function(t){return t.type});e.exit().remove(),e.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return ra[t.type]}),t.each(X).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",s).filter(n).on("touchstart.brush",s).on("touchmove.brush",c).on("touchend.brush touchcancel.brush",u).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function X(){var t=ce(this),e=da(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-i/2:e[0][0]-i/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-i/2:e[0][1]-i/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+i:i}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+i:i})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function B(t,e,n){var i=t.__brush.emitter;return!i||n&&i.clean?new o(t,e,n):i}function o(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function s(t){var a,r,o,s,c,u,l,f,h,d,g,p,v,x,y,_,m,b,w,T,A,M,e,S,k,E,C,n,D,R,i;function O(t){for(const n of t.changedTouches||[t])for(const i of M)i.identifier===n.identifier&&(i.cur=de(n,a));var e;!w||T||A||1!==M.length||(e=M[0],Zr(e.cur[0]-e[0])>Zr(e.cur[1]-e[1])?A=!0:T=!0);for(const r of M)r.cur&&(r[0]=r.cur[0],r[1]=r.cur[1]);b=!0,Hr(t),L(t)}function L(t){var e,n=M[0],i=n.point0;switch(_=n[0]-i[0],m=n[1]-i[1],o){case Vr:case Ur:s&&(_=Kr(f-h,Jr(p-v,_)),S=h+_,E=v+_),c&&(m=Kr(d-g,Jr(x-y,m)),k=g+m,C=y+m);break;case qr:M[1]?(s&&(S=Kr(f,Jr(p,M[0][0])),E=Kr(f,Jr(p,M[1][0])),s=1),c&&(k=Kr(d,Jr(x,M[0][1])),C=Kr(d,Jr(x,M[1][1])),c=1)):(s<0?(_=Kr(f-h,Jr(p-h,_)),S=h+_,E=v):0<s&&(_=Kr(f-v,Jr(p-v,_)),S=h,E=v+_),c<0?(m=Kr(d-g,Jr(x-g,m)),k=g+m,C=y):0<c&&(m=Kr(d-y,Jr(x-y,m)),k=g,C=y+m));break;case Wr:s&&(S=Kr(f,Jr(p,h-_*s)),E=Kr(f,Jr(p,v+_*s))),c&&(k=Kr(d,Jr(x,g-m*c)),C=Kr(d,Jr(x,y+m*c)))}E<S&&(s*=-1,e=h,h=v,v=e,e=S,S=E,E=e,r in aa&&D.attr("cursor",ra[r=aa[r]])),C<k&&(c*=-1,e=g,g=y,y=e,e=k,k=C,C=e,r in oa&&D.attr("cursor",ra[r=oa[r]])),u.selection&&(l=u.selection),T&&(S=l[0][0],E=l[1][0]),A&&(k=l[0][1],C=l[1][1]),l[0][0]===S&&l[0][1]===k&&l[1][0]===E&&l[1][1]===C||(u.selection=[[S,k],[E,C]],X.call(a),R.brush(t,o.name))}function P(t){if(t.stopImmediatePropagation(),t.touches){if(t.touches.length)return;N&&clearTimeout(N),N=setTimeout(function(){N=null},500)}else xe(t.view,b),i.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var e;n.attr("pointer-events","all"),D.attr("cursor",ra.overlay),u.selection&&(l=u.selection),(e=l)[0][0]!==e[1][0]&&e[0][1]!==e[1][1]||(u.selection=null,X.call(a)),R.end(t,o.name)}N&&!t.touches||I.apply(this,arguments)&&(r=t.target.__data__.type,o="selection"===(F&&t.metaKey?r="overlay":r)?Ur:F&&t.altKey?Wr:qr,s=z===na?null:sa[r],c=z===ea?null:ca[r],e=(u=da(a=this)).extent,l=u.selection,f=e[0][0],d=e[0][1],p=e[1][0],x=e[1][1],m=_=0,w=s&&c&&F&&t.shiftKey,M=Array.from(t.touches||[t],t=>{var e=t.identifier;return(t=de(t,a)).point0=t.slice(),t.identifier=e,t}),"overlay"===r?(l&&(b=!0),e=[M[0],M[1]||M[0]],u.selection=l=[[h=z===na?f:Jr(e[0][0],e[1][0]),g=z===ea?d:Jr(e[0][1],e[1][1])],[v=z===na?p:Kr(e[0][0],e[1][0]),y=z===ea?x:Kr(e[0][1],e[1][1])]],1<M.length&&L()):(h=l[0][0],g=l[0][1],v=l[1][0],y=l[1][1]),S=h,k=g,E=v,C=y,n=ce(a).attr("pointer-events","none"),D=n.selectAll(".overlay").attr("cursor",ra[r]),Ji(a),R=B(a,arguments,!0).beforestart(),t.touches?(R.moved=O,R.ended=P):(i=ce(t.view).on("mousemove.brush",O,!0).on("mouseup.brush",P,!0),F&&i.on("keydown.brush",function(t){switch(t.keyCode){case 16:w=s&&c;break;case 18:o===qr&&(s&&(v=E-_*s,h=S+_*s),c&&(y=C-m*c,g=k+m*c),o=Wr,L());break;case 32:o!==qr&&o!==Wr||(s<0?v=E-_:0<s&&(h=S-_),c<0?y=C-m:0<c&&(g=k-m),o=Vr,D.attr("cursor",ra.selection),L());break;default:return}Hr(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:w&&(T=A=w=!1,L());break;case 18:o===Wr&&(s<0?v=E:0<s&&(h=S),c<0?y=C:0<c&&(g=k),o=qr,L());break;case 32:o===Vr&&(o=t.altKey?(s&&(v=E-_*s,h=S+_*s),c&&(y=C-m*c,g=k+m*c),Wr):(s<0?v=E:0<s&&(h=S),c<0?y=C:0<c&&(g=k),qr),D.attr("cursor",ra[r]),L());break;default:return}Hr(t)},!0),ve(t.view)),X.call(a),R.start(t,o.name))}function c(t){B(this,arguments).moved(t)}function u(t){B(this,arguments).ended(t)}function l(){var t=this.__brush||{selection:null};return t.extent=ta(e.apply(this,arguments)),t.dim=z,t}return a.move=function(t,s){t.tween?t.on("start.brush",function(t){B(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){B(this,arguments).end(t)}).tween("brush",function(){var e=this,n=e.__brush,i=B(e,arguments),t=n.selection,r=z.input("function"==typeof s?s.apply(this,arguments):s,n.extent),a=Jn(t,r);function o(t){n.selection=1===t&&null===r?null:a(t),X.call(e),i.brush()}return null!==t&&null!==r?o:o(1)}):t.each(function(){var t=this,e=arguments,n=t.__brush,i=z.input("function"==typeof s?s.apply(t,e):s,n.extent),e=B(t,e).beforestart();Ji(t),n.selection=null===i?null:i,X.call(t),e.start().brush().end()})},a.clear=function(t){a.move(t,null)},o.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(t,e,n){var i=ce(this.that).datum();r.call(t,this.that,new Gr(t,{sourceEvent:e,target:a,selection:z.output(this.state.selection),mode:n,dispatch:r}),i)}},a.extent=function(t){return arguments.length?(e="function"==typeof t?t:jr(ta(t)),a):e},a.filter=function(t){return arguments.length?(I="function"==typeof t?t:jr(!!t),a):I},a.touchable=function(t){return arguments.length?(n="function"==typeof t?t:jr(!!t),a):n},a.handleSize=function(t){return arguments.length?(i=+t,a):i},a.keyModifiers=function(t){return arguments.length?(F=!!t,a):F},a.on=function(){var t=r.on.apply(r,arguments);return t===r?a:t},a}var pa=Math.abs,va=Math.cos,xa=Math.sin,ya=Math.PI,_a=ya/2,ma=2*ya,ba=Math.max,wa=1e-12;function Ta(n,t){return Array.from({length:t-n},(t,e)=>n+e)}function Aa(y,e){var _=0,m=null,b=null,w=null;function i(i){var t,r=i.length,a=new Array(r),n=Ta(0,r),o=new Array(r*r),s=new Array(r),c=0;i=Float64Array.from({length:r*r},e?(t,e)=>i[e%r][e/r|0]:(t,e)=>i[e/r|0][e%r]);for(let n=0;n<r;++n){let e=0;for(let t=0;t<r;++t)e+=i[n*r+t]+y*i[t*r+n];c+=a[n]=e}t=(c=ba(0,ma-_*r)/c)?_:ma/r;{let e=0;m&&n.sort((t,e)=>m(a[t],a[e]));for(const f of n){var u,l=e;if(y){const h=Ta(1+~r,r).filter(t=>t<0?i[~t*r+f]:i[f*r+t]);b&&h.sort((t,e)=>b(t<0?-i[~t*r+f]:i[f*r+t],e<0?-i[~e*r+f]:i[f*r+e]));for(const d of h)if(d<0){const g=o[~d*r+f]||(o[~d*r+f]={source:null,target:null});g.target={index:f,startAngle:e,endAngle:e+=i[~d*r+f]*c,value:i[~d*r+f]}}else{const p=o[f*r+d]||(o[f*r+d]={source:null,target:null});p.source={index:f,startAngle:e,endAngle:e+=i[f*r+d]*c,value:i[f*r+d]}}s[f]={index:f,startAngle:l,endAngle:e,value:a[f]}}else{const v=Ta(0,r).filter(t=>i[f*r+t]||i[t*r+f]);b&&v.sort((t,e)=>b(i[f*r+t],i[f*r+e]));for(const x of v){let t;f<x?(t=o[f*r+x]||(o[f*r+x]={source:null,target:null}),t.source={index:f,startAngle:e,endAngle:e+=i[f*r+x]*c,value:i[f*r+x]}):(t=o[x*r+f]||(o[x*r+f]={source:null,target:null}),t.target={index:f,startAngle:e,endAngle:e+=i[f*r+x]*c,value:i[f*r+x]},f===x&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value&&(u=t.source,t.source=t.target,t.target=u)}s[f]={index:f,startAngle:l,endAngle:e,value:a[f]}}e+=t}}return(o=Object.values(o)).groups=s,w?o.sort(w):o}return i.padAngle=function(t){return arguments.length?(_=ba(0,t),i):_},i.sortGroups=function(t){return arguments.length?(m=t,i):m},i.sortSubgroups=function(t){return arguments.length?(b=t,i):b},i.sortChords=function(t){return arguments.length?(null==t?w=null:(w=function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)})._=n=t,i):w&&w._;var n},i}const Ma=Math.PI,Sa=2*Ma,ka=1e-6,Ea=Sa-ka;function Ca(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Da(){return new Ca}Ca.prototype=Da.prototype={constructor:Ca,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){var a,o,s=this._x1,c=this._y1,u=(n=+n)-(t=+t),l=(i=+i)-(e=+e),f=s-t,h=c-e,d=f*f+h*h;if((r=+r)<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+(this._x1=t)+","+(this._y1=e):d>ka&&(Math.abs(h*u-l*f)>ka&&r?(o=u*u+l*l,s=(a=n-s)*a+(n=i-c)*n,i=Math.sqrt(o),c=Math.sqrt(d),c=(s=r*Math.tan((Ma-Math.acos((o+d-s)/(2*i*c)))/2))/c,i=s/i,Math.abs(c-1)>ka&&(this._+="L"+(t+c*f)+","+(e+c*h)),this._+="A"+r+","+r+",0,0,"+ +(f*n<h*a)+","+(this._x1=t+i*u)+","+(this._y1=e+i*l)):this._+="L"+(this._x1=t)+","+(this._y1=e))},arc:function(t,e,n,i,r,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(i),s=n*Math.sin(i),c=t+o,u=e+s,l=1^a,i=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+u:(Math.abs(this._x1-c)>ka||Math.abs(this._y1-u)>ka)&&(this._+="L"+c+","+u),n&&((i=i<0?i%Sa+Sa:i)>Ea?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=c)+","+(this._y1=u):i>ka&&(this._+="A"+n+","+n+",0,"+ +(i>=Ma)+","+l+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Ra=Array.prototype.slice;function Oa(t){return function(){return t}}function La(t){return t.source}function Pa(t){return t.target}function za(t){return t.radius}function Na(t){return t.startAngle}function Ia(t){return t.endAngle}function Fa(){return 0}function Xa(){return 10}function Ba(c){var u=La,l=Pa,f=za,h=za,d=Na,g=Ia,p=Fa,v=null;function e(){var t,e=u.apply(this,arguments),n=l.apply(this,arguments),i=p.apply(this,arguments)/2,r=Ra.call(arguments),a=+f.apply(this,(r[0]=e,r)),o=d.apply(this,r)-_a,s=g.apply(this,r)-_a,e=+h.apply(this,(r[0]=n,r)),n=d.apply(this,r)-_a,r=g.apply(this,r)-_a;if(v=v||(t=Da()),wa<i&&(pa(s-o)>2*i+wa?o<s?(o+=i,s-=i):(o-=i,s+=i):o=s=(o+s)/2,pa(r-n)>2*i+wa?n<r?(n+=i,r-=i):(n-=i,r+=i):n=r=(n+r)/2),v.moveTo(a*va(o),a*xa(o)),v.arc(0,0,a,o,s),o===n&&s===r||(c?(i=e-+c.apply(this,arguments),s=(n+r)/2,v.quadraticCurveTo(0,0,i*va(n),i*xa(n)),v.lineTo(e*va(s),e*xa(s)),v.lineTo(i*va(r),i*xa(r))):(v.quadraticCurveTo(0,0,e*va(n),e*xa(n)),v.arc(0,0,e,n,r))),v.quadraticCurveTo(0,0,a*va(o),a*xa(o)),v.closePath(),t)return v=null,t+""||null}return c&&(e.headRadius=function(t){return arguments.length?(c="function"==typeof t?t:Oa(+t),e):c}),e.radius=function(t){return arguments.length?(f=h="function"==typeof t?t:Oa(+t),e):f},e.sourceRadius=function(t){return arguments.length?(f="function"==typeof t?t:Oa(+t),e):f},e.targetRadius=function(t){return arguments.length?(h="function"==typeof t?t:Oa(+t),e):h},e.startAngle=function(t){return arguments.length?(d="function"==typeof t?t:Oa(+t),e):d},e.endAngle=function(t){return arguments.length?(g="function"==typeof t?t:Oa(+t),e):g},e.padAngle=function(t){return arguments.length?(p="function"==typeof t?t:Oa(+t),e):p},e.source=function(t){return arguments.length?(u=t,e):u},e.target=function(t){return arguments.length?(l=t,e):l},e.context=function(t){return arguments.length?(v=null==t?null:t,e):v},e}var $a=Array.prototype.slice;function Ya(t,e){return t-e}var ja=t=>()=>t;function Ga(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=function(t,e){for(var n=e[0],i=e[1],r=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var c=t[a],u=c[0],l=c[1],f=t[s],h=f[0],d=f[1];if(function(t,e,n){return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&function(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}(t[t=+(t[0]===e[0])],n[t],e[t])}(c,f,e))return 0;i<l!=i<d&&n<(h-u)*(i-l)/(d-l)+u&&(r=-r)}return r}(t,e[i]))return n;return 0}function Ha(){}var Ua=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Va(){var h=1,d=1,r=F,a=e;function n(e){var t,n,i=r(e);return(i=Array.isArray(i)?i.slice().sort(Ya):(i=N(t=(n=x(e))[0],n=n[1],i),W(Math.floor(t/i)*i,Math.floor(n/i)*i,i))).map(function(t){return o(e,t)})}function o(e,n){var r=[],i=[];return function(t,e,o){var s,c,n,i,r,a,u=new Array,l=new Array;s=c=-1,i=t[0]>=e,Ua[i<<1].forEach(f);for(;++s<h-1;)n=i,i=t[s+1]>=e,Ua[n|i<<1].forEach(f);Ua[i<<0].forEach(f);for(;++c<d-1;){for(s=-1,i=t[c*h+h]>=e,r=t[c*h]>=e,Ua[i<<1|r<<2].forEach(f);++s<h-1;)n=i,i=t[c*h+h+s+1]>=e,a=r,r=t[c*h+s+1]>=e,Ua[n|i<<1|r<<2|a<<3].forEach(f);Ua[i|r<<3].forEach(f)}s=-1,r=t[c*h]>=e,Ua[r<<2].forEach(f);for(;++s<h-1;)a=r,r=t[c*h+s+1]>=e,Ua[r<<2|a<<3].forEach(f);function f(t){var e,n=[t[0][0]+s,t[0][1]+c],i=[t[1][0]+s,t[1][1]+c],r=g(n),a=g(i);(t=l[r])?(e=u[a])?(delete l[t.end],delete u[e.start],t===e?(t.ring.push(i),o(t.ring)):u[t.start]=l[e.end]={start:t.start,end:e.end,ring:t.ring.concat(e.ring)}):(delete l[t.end],t.ring.push(i),l[t.end=a]=t):(t=u[a])?(e=l[r])?(delete u[t.start],delete l[e.end],t===e?(t.ring.push(i),o(t.ring)):u[e.start]=l[t.end]={start:e.start,end:t.end,ring:e.ring.concat(t.ring)}):(delete u[t.start],t.ring.unshift(n),u[t.start=r]=t):u[r]=l[a]={start:r,end:a,ring:[n,i]}}Ua[r<<3].forEach(f)}(e,n,function(t){a(t,e,n),0<function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)?r.push([t]):i.push(t)}),i.forEach(function(t){for(var e,n=0,i=r.length;n<i;++n)if(-1!==Ga((e=r[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:n,coordinates:r}}function g(t){return 2*t[0]+t[1]*(h+1)*4}function e(t,s,c){t.forEach(function(t){var e,n=t[0],i=t[1],r=0|n,a=0|i,o=s[a*h+r];0<n&&n<h&&r===n&&(e=s[a*h+r-1],t[0]=n+(c-e)/(o-e)-.5),0<i&&i<d&&a===i&&(e=s[(a-1)*h+r],t[1]=i+(c-e)/(o-e)-.5)})}return n.contour=o,n.size=function(t){if(!arguments.length)return[h,d];var e=Math.floor(t[0]),t=Math.floor(t[1]);if(!(0<=e&&0<=t))throw new Error("invalid size");return h=e,d=t,n},n.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:Array.isArray(t)?ja($a.call(t)):ja(t),n):r},n.smooth=function(t){return arguments.length?(a=t?e:Ha,n):a===e},n}function qa(t,e,n){for(var i=t.width,r=t.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,c=0;s<i+n;++s)s<i&&(c+=t.data[s+o*i]),n<=s&&(a<=s&&(c-=t.data[s-a+o*i]),e.data[s-n+o*i]=c/Math.min(s+1,i-1+a-s,a))}function Wa(t,e,n){for(var i=t.width,r=t.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,c=0;s<r+n;++s)s<r&&(c+=t.data[o+s*i]),n<=s&&(a<=s&&(c-=t.data[o+(s-a)*i]),e.data[o+(s-n)*i]=c/Math.min(s+1,r-1+a-s,a))}function Za(t){return t[0]}function Ka(t){return t[1]}function Ja(){return 1}const Qa=Math.pow(2,-52),to=new Uint32Array(512);class eo{static from(e,n=function(t){return t[0]},i=function(t){return t[1]}){var r=e.length;const a=new Float64Array(2*r);for(let t=0;t<r;t++){var o=e[t];a[2*t]=n(o),a[2*t+1]=i(o)}return new eo(a)}constructor(t){var e=t.length>>1;if(0<e&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;t=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*t),this._halfedges=new Int32Array(3*t),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:a,_hullPrev:o,_hullNext:s,_hullTri:c,_hullHash:u}=this;var i=a.length>>1;let e=1/0,n=1/0,r=-1/0,l=-1/0;for(let t=0;t<i;t++){var f=a[2*t],h=a[2*t+1];f<e&&(e=f),h<n&&(n=h),f>r&&(r=f),h>l&&(l=h),this._ids[t]=t}var d=(e+r)/2,g=(n+l)/2;let p=1/0,v,x,y;for(let t=0;t<i;t++){var _=no(d,g,a[2*t],a[2*t+1]);_<p&&(v=t,p=_)}var m,b,w,T,A,M,S,k,E=a[2*v],C=a[2*v+1];p=1/0;for(let t=0;t<i;t++)t!==v&&((m=no(E,C,a[2*t],a[2*t+1]))<p&&0<m&&(x=t,p=m));let D=a[2*x],R=a[2*x+1],O=1/0;for(let t=0;t<i;t++)t!==v&&t!==x&&(b=E,w=C,T=D,A=R,M=a[2*t],S=a[2*t+1],k=void 0,k=T-b,T=A-w,A=M-b,(w=(T=((M=S-w)*(b=k*k+T*T)-T*(S=A*A+M*M))*(w=.5/(k*M-T*A)))*T+(w*=k*S-A*b)*w)<O&&(y=t,O=w));let t=a[2*y],L=a[2*y+1];if(O===1/0){for(let t=0;t<i;t++)this._dists[t]=a[2*t]-a[0]||a[2*t+1]-a[1];ao(this._ids,this._dists,0,i-1);const q=new Uint32Array(i);let n=0;for(let t=0,e=-1/0;t<i;t++){var P=this._ids[t];this._dists[P]>e&&(q[n++]=P,e=this._dists[P])}return this.hull=q.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}ro(E,C,D,R,t,L)&&(X=x,B=D,$=R,x=y,D=t,R=L,y=X,t=B,L=$);var z,N,I,F,X,B,$,Y,j=(Y=E,z=C,N=D,I=R,F=t,X=L,B=N-Y,{x:$=Y+((N=X-z)*(I=B*B+($=I-z)*$)-$*(F=(Y=F-Y)*Y+N*N))*(X=.5/(B*N-$*Y)),y:X=z+(B*F-Y*I)*X});this._cx=j.x,this._cy=j.y;for(let t=0;t<i;t++)this._dists[t]=no(a[2*t],a[2*t+1],j.x,j.y);ao(this._ids,this._dists,0,i-1),this._hullStart=v;let G=3;s[v]=o[y]=x,s[x]=o[v]=y,s[y]=o[x]=v,c[v]=0,c[x]=1,c[y]=2,u.fill(-1),u[this._hashKey(E,C)]=v,u[this._hashKey(D,R)]=x,u[this._hashKey(t,L)]=y,this.trianglesLen=0,this._addTriangle(v,x,y,-1,-1,-1);for(let t=0,e,n;t<this._ids.length;t++){var H=this._ids[t],U=a[2*H],V=a[2*H+1];if(!(0<t&&Math.abs(U-e)<=Qa&&Math.abs(V-n)<=Qa)&&(e=U,n=V,H!==v&&H!==x&&H!==y)){let n=0;for(let t=0,e=this._hashKey(U,V);t<this._hashSize&&(n=u[(e+t)%this._hashSize],-1===n||n===s[n]);t++);n=o[n];let i=n,r;for(;r=s[i],!ro(U,V,a[2*i],a[2*i+1],a[2*r],a[2*r+1]);)if(i=r,i===n){i=-1;break}if(-1!==i){let t=this._addTriangle(i,H,s[i],-1,-1,c[i]);c[H]=this._legalize(t+2),c[i]=t,G++;let e=s[i];for(;r=s[e],ro(U,V,a[2*e],a[2*e+1],a[2*r],a[2*r+1]);)t=this._addTriangle(e,H,r,c[H],-1,c[e]),c[H]=this._legalize(t+2),s[e]=e,G--,e=r;if(i===n)for(;r=o[i],ro(U,V,a[2*r],a[2*r+1],a[2*i],a[2*i+1]);)t=this._addTriangle(r,H,i,-1,c[i],c[r]),this._legalize(t+2),c[r]=t,s[i]=i,G--,i=r;this._hullStart=o[H]=i,s[i]=o[e]=H,s[H]=e,u[this._hashKey(U,V)]=H,u[this._hashKey(a[2*i],a[2*i+1])]=i}}}this.hull=new Uint32Array(G);for(let t=0,e=this._hullStart;t<G;t++)this.hull[t]=e,e=s[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){t/=Math.abs(t)+Math.abs(e);return(0<e?3-t:1+t)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:i}=this;let r=0,a=0;for(;;){var o=n[e],s=e-e%3;if(a=s+(e+2)%3,-1!==o){var c=o-o%3,u=c+(o+2)%3,l=t[a],f=t[e],h=t[s+(e+1)%3],d=t[u];if(g=i[2*l],p=i[2*l+1],v=i[2*f],x=i[2*f+1],y=i[2*h],_=i[2*h+1],s=i[2*d],f=i[2*d+1],h=void 0,h=g-s,g=p-f,p=v-s,h*((v=x-f)*(f=(x=y-s)*x+(y=_-f)*y)-(_=p*p+v*v)*y)-g*(p*f-_*x)+(s=h*h+g*g)*(p*y-v*x)<0){t[e]=d,t[o]=l;l=n[u];if(-1===l){let t=this._hullStart;do{if(this._hullTri[t]===u){this._hullTri[t]=e;break}}while(t=this._hullPrev[t],t!==this._hullStart)}this._link(e,l),this._link(o,n[a]),this._link(a,u);o=c+(o+1)%3;r<to.length&&(to[r++]=o)}else{if(0===r)break;e=to[--r]}}else{if(0===r)break;e=to[--r]}}var g,p,v,x,y,_;return a}_link(t,e){-1!==(this._halfedges[t]=e)&&(this._halfedges[e]=t)}_addTriangle(t,e,n,i,r,a){var o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,i),this._link(o+1,r),this._link(o+2,a),this.trianglesLen+=3,o}}function no(t,e,n,i){n=t-n,i=e-i;return n*n+i*i}function io(t,e,n,i,r,a){r=(i-e)*(r-t),e=(n-t)*(a-e);return Math.abs(r-e)>=33306690738754716e-32*Math.abs(r+e)?r-e:0}function ro(t,e,n,i,r,a){return(io(r,a,t,e,n,i)||io(t,e,n,i,r,a)||io(n,i,r,a,t,e))<0}function ao(n,i,r,a){if(a-r<=20)for(let e=r+1;e<=a;e++){var o=n[e],s=i[o];let t=e-1;for(;t>=r&&i[n[t]]>s;)n[t+1]=n[t--];n[t+1]=o}else{let t=r+1,e=a;oo(n,r+a>>1,t),i[n[r]]>i[n[a]]&&oo(n,r,a),i[n[t]]>i[n[a]]&&oo(n,t,a),i[n[r]]>i[n[t]]&&oo(n,r,t);for(var c=n[t],u=i[c];;){for(;t++,i[n[t]]<u;);for(;e--,i[n[e]]>u;);if(e<t)break;oo(n,t,e)}n[r+1]=n[e],n[e]=c,a-t+1>=e-r?(ao(n,i,t,a),ao(n,i,r,e-1)):(ao(n,i,r,e-1),ao(n,i,t,a))}}function oo(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}class so{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){var i=(t=+t)+(n=+n),r=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${r}`:(1e-6<Math.abs(this._x1-i)||1e-6<Math.abs(this._y1-r))&&(this._+="L"+i+","+r),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=i},${this._y1=r}`)}rect(t,e,n,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class co{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class uo{constructor(t,[e,n,i,r]=[0,0,960,500]){if(!((i=+i)>=(e=+e)&&(r=+r)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=e,this.ymax=r,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:a,hull:e,triangles:o},vectors:n}=this,s=this.circumcenters=this._circumcenters.subarray(0,o.length/3*2);for(let t=0,e=0,n=o.length,i,r;t<n;t+=3,e+=2){var c=2*o[t],u=2*o[t+1],l=2*o[t+2];const _=a[c],b=a[1+c];var f=a[u],h=a[1+u],d=a[l],g=a[1+l],p=f-_,v=h-b,c=d-_,u=g-b,l=p*p+v*v,f=c*c+u*u,h=2*(p*u-v*c);r=h?Math.abs(h)<1e-8?(i=(_+d)/2,(b+g)/2):(h=1/h,i=_+(u*l-v*f)*h,b+(p*f-c*l)*h):(i=(_+d)/2-1e8*u,(b+g)/2+1e8*c),s[e]=i,s[e+1]=r}var i=e[e.length-1];let r,x=4*i,y,_=a[2*i],m,b=a[2*i+1];n.fill(0);for(let t=0;t<e.length;++t)i=e[t],r=x,y=_,m=b,x=4*i,_=a[2*i],b=a[2*i+1],n[r+2]=n[x]=m-b,n[r+3]=n[x+1]=_-y}render(n){const t=null==n?n=new so:void 0;var{delaunay:{halfedges:i,inedges:e,hull:r},circumcenters:a,vectors:o}=this;if(r.length<=1)return null;for(let t=0,e=i.length;t<e;++t){var s,c,u,l=i[t];l<t||(c=2*Math.floor(t/3),u=2*Math.floor(l/3),s=a[c],l=a[1+c],c=a[u],u=a[1+u],this._renderSegment(s,l,c,u,n))}let f,h=r[r.length-1];for(let t=0;t<r.length;++t){f=h,h=r[t];var d=2*Math.floor(e[h]/3),g=a[d],p=a[1+d],d=4*f,d=this._project(g,p,o[2+d],o[3+d]);d&&this._renderSegment(g,p,d[0],d[1],n)}return t&&t.value()}renderBounds(t){const e=null==t?t=new so:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,n){const i=null==n?n=new so:void 0;var r=this._clip(t);if(null!==r&&r.length){n.moveTo(r[0],r[1]);let e=r.length;for(;r[0]===r[e-2]&&r[1]===r[e-1]&&1<e;)e-=2;for(let t=2;t<e;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||n.lineTo(r[t],r[t+1]);return n.closePath(),i&&i.value()}}*cellPolygons(){var{delaunay:{points:n}}=this;for(let t=0,e=n.length/2;t<e;++t){const i=this.cellPolygon(t);i&&(i.index=t,yield i)}}cellPolygon(t){const e=new co;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,i,r){var a=this._regioncode(t,e),o=this._regioncode(n,i);0===a&&0===o?(r.moveTo(t,e),r.lineTo(n,i)):(o=this._clipSegment(t,e,n,i,a,o))&&(r.moveTo(o[0],o[1]),r.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){var r=this._clip(t);if(r)for(const o of this.delaunay.neighbors(t)){var a=this._clip(o);if(a)t:for(let n=0,i=r.length;n<i;n+=2)for(let t=0,e=a.length;t<e;t+=2)if(r[n]==a[t]&&r[n+1]==a[t+1]&&r[(n+2)%i]==a[(t+e-2)%e]&&r[(n+3)%i]==a[(t+e-1)%e]){yield o;break t}}}_cell(t){var{circumcenters:e,delaunay:{inedges:n,halfedges:i,triangles:r}}=this,a=n[t];if(-1===a)return null;const o=[];let s=a;do{var c=Math.floor(s/3);if(o.push(e[2*c],e[2*c+1]),s=s%3==2?s-2:s+1,r[s]!==t)break}while(s=i[s],s!==a&&-1!==s);return o}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var e=this._cell(t);if(null===e)return null;var{vectors:n}=this,i=4*t;return n[i]||n[1+i]?this._clipInfinite(t,e,n[i],n[1+i],n[2+i],n[3+i]):this._clipFinite(t,e)}_clipFinite(a,e){var n=e.length;let o=null,s,c,u=e[n-2],l=e[n-1],f,h=this._regioncode(u,l),d,g;for(let t=0;t<n;t+=2)if(s=u,c=l,u=e[t],l=e[t+1],f=h,h=this._regioncode(u,l),0===f&&0===h)d=g,g=0,o?o.push(u,l):o=[u,l];else{let t,e,n,i,r;if(0===f){if(null===(t=this._clipSegment(s,c,u,l,f,h)))continue;[e,n,i,r]=t}else{if(null===(t=this._clipSegment(u,l,s,c,h,f)))continue;[i,r,e,n]=t,d=g,g=this._edgecode(e,n),d&&g&&this._edge(a,d,g,o,o.length),o?o.push(e,n):o=[e,n]}d=g,g=this._edgecode(i,r),d&&g&&this._edge(a,d,g,o,o.length),o?o.push(i,r):o=[i,r]}if(o)d=g,g=this._edgecode(o[0],o[1]),d&&g&&this._edge(a,d,g,o,o.length);else if(this.contains(a,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return o}_clipSegment(i,r,a,o,s,c){for(;;){if(0===s&&0===c)return[i,r,a,o];if(s&c)return null;let t,e,n=s||c;8&n?(t=i+(a-i)*(this.ymax-r)/(o-r),e=this.ymax):4&n?(t=i+(a-i)*(this.ymin-r)/(o-r),e=this.ymin):t=2&n?(e=r+(o-r)*(this.xmax-i)/(a-i),this.xmax):(e=r+(o-r)*(this.xmin-i)/(a-i),this.xmin),s?(i=t,r=e,s=this._regioncode(i,r)):(a=t,o=e,c=this._regioncode(a,o))}}_clipInfinite(r,t,e,n,i,a){let o=Array.from(t),s;if((s=this._project(o[0],o[1],e,n))&&o.unshift(s[0],s[1]),(s=this._project(o[o.length-2],o[o.length-1],i,a))&&o.push(s[0],s[1]),o=this._clipFinite(r,o))for(let t=0,e=o.length,n,i=this._edgecode(o[e-2],o[e-1]);t<e;t+=2)n=i,i=this._edgecode(o[t],o[t+1]),n&&i&&(t=this._edge(r,n,i,o,t),e=o.length);else this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(n,i,t,r,a){for(;i!==t;){let t,e;switch(i){case 5:i=4;continue;case 4:i=6,t=this.xmax,e=this.ymin;break;case 6:i=2;continue;case 2:i=10,t=this.xmax,e=this.ymax;break;case 10:i=8;continue;case 8:i=9,t=this.xmin,e=this.ymax;break;case 9:i=1;continue;case 1:i=5,t=this.xmin,e=this.ymin}r[a]===t&&r[a+1]===e||!this.contains(n,t,e)||(r.splice(a,0,t,e),a+=2)}if(4<r.length)for(let t=0;t<r.length;t+=2){const a=(t+2)%r.length,e=(t+4)%r.length;(r[t]===r[a]&&r[a]===r[e]||r[t+1]===r[1+a]&&r[1+a]===r[1+e])&&(r.splice(a,2),t-=2)}return a}_project(t,e,n,i){let r=1/0,a,o,s;if(i<0){if(e<=this.ymin)return null;(a=(this.ymin-e)/i)<r&&(s=this.ymin,o=t+(r=a)*n)}else if(0<i){if(e>=this.ymax)return null;(a=(this.ymax-e)/i)<r&&(s=this.ymax,o=t+(r=a)*n)}if(0<n){if(t>=this.xmax)return null;(a=(this.xmax-t)/n)<r&&(o=this.xmax,s=e+(r=a)*i)}else if(n<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/n)<r&&(o=this.xmin,s=e+(r=a)*i)}return[o,s]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const lo=2*Math.PI,fo=Math.pow;var ho={},go={},po=34,vo=10,xo=13;function yo(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function _o(t){var n=Object.create(null),i=[];return t.forEach(function(t){for(var e in t)e in n||i.push(n[e]=e)}),i}function mo(t,e){var n=t+"",t=n.length;return t<e?new Array(e-t+1).join(0)+n:n}function bo(t){var e,n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+mo(-e,6):9999<e?"+"+mo(e,6):mo(e,4))+"-"+mo(t.getUTCMonth()+1,2)+"-"+mo(t.getUTCDate(),2)+(a?"T"+mo(n,2)+":"+mo(i,2)+":"+mo(r,2)+"."+mo(a,3)+"Z":r?"T"+mo(n,2)+":"+mo(i,2)+":"+mo(r,2)+"Z":i||n?"T"+mo(n,2)+":"+mo(i,2)+"Z":"")}function wo(i){var e=new RegExp('["'+i+"\n\r]"),f=i.charCodeAt(0);function n(i,t){var e,n=[],r=i.length,a=0,o=0,s=r<=0,c=!1;function u(){if(s)return go;if(c)return c=!1,ho;var t,e,n=a;if(i.charCodeAt(n)===po){for(;a++<r&&i.charCodeAt(a)!==po||i.charCodeAt(++a)===po;);return(t=a)>=r?s=!0:(e=i.charCodeAt(a++))===vo?c=!0:e===xo&&(c=!0,i.charCodeAt(a)===vo&&++a),i.slice(n+1,t-1).replace(/""/g,'"')}for(;a<r;){if((e=i.charCodeAt(t=a++))===vo)c=!0;else if(e===xo)c=!0,i.charCodeAt(a)===vo&&++a;else if(e!==f)continue;return i.slice(n,t)}return s=!0,i.slice(n,r)}for(i.charCodeAt(r-1)===vo&&--r,i.charCodeAt(r-1)===xo&&--r;(e=u())!==go;){for(var l=[];e!==ho&&e!==go;)l.push(e),e=u();t&&null==(l=t(l,o++))||n.push(l)}return n}function r(t,n){return t.map(function(e){return n.map(function(t){return o(e[t])}).join(i)})}function a(t){return t.map(o).join(i)}function o(t){return null==t?"":t instanceof Date?bo(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,a){var o,s;return(t=n(t,function(t,e){return o?o(t,e-1):(s=t,void(o=a?(i=a,r=yo(n=t),function(t,e){return i(r(t),e,n)}):yo(t)));var n,i,r})).columns=s||[],t},parseRows:n,format:function(t,e){return[(e=null==e?_o(t):e).map(o).join(i)].concat(r(t,e)).join("\n")},formatBody:function(t,e){return r(t,e=null==e?_o(t):e).join("\n")},formatRows:function(t){return t.map(a).join("\n")},formatRow:a,formatValue:o}}var To=wo(","),Ao=To.parse,Mo=To.parseRows,So=To.format,ko=To.formatBody,Eo=To.formatRows,Co=To.formatRow,Do=To.formatValue,Ro=wo("\t"),Oo=Ro.parse,Lo=Ro.parseRows,Po=Ro.format,zo=Ro.formatBody,No=Ro.formatRows,Io=Ro.formatRow,Fo=Ro.formatValue;const Xo=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Bo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function $o(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Yo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function jo(t,e){return fetch(t,e).then(Yo)}function Go(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),jo(t,e).then(function(t){return i(t,n)})}}var Ho=Go(Ao),Uo=Go(Oo);function Vo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function qo(n){return(t,e)=>jo(t,e).then(t=>(new DOMParser).parseFromString(t,n))}var Wo=qo("application/xml"),Zo=qo("text/html"),Ko=qo("image/svg+xml");function Jo(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,a,o,s,c,u,l,f,h,d=t._root,g={data:i},p=t._x0,v=t._y0,x=t._x1,y=t._y1;if(!d)return t._root=g,t;for(;d.length;)if((u=e>=(a=(p+x)/2))?p=a:x=a,(l=n>=(o=(v+y)/2))?v=o:y=o,!(d=(r=d)[f=l<<1|u]))return r[f]=g,t;if(s=+t._x.call(null,d.data),c=+t._y.call(null,d.data),e===s&&n===c)return g.next=d,r?r[f]=g:t._root=g,t;for(;r=r?r[f]=new Array(4):t._root=new Array(4),(u=e>=(a=(p+x)/2))?p=a:x=a,(l=n>=(o=(v+y)/2))?v=o:y=o,(f=l<<1|u)==(h=(o<=c)<<1|a<=s););return r[h]=d,r[f]=g,t}function Qo(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function ts(t){return t[0]}function es(t){return t[1]}function ns(t,e,n){n=new is(null==e?ts:e,null==n?es:n,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function is(t,e,n,i,r,a){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function rs(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var as=ns.prototype=is.prototype;function os(t){return function(){return t}}function ss(t){return 1e-6*(t()-.5)}function cs(t){return t.x+t.vx}function us(t){return t.y+t.vy}function ls(t){return t.index}function fs(t,e){t=t.get(e);if(!t)throw new Error("node not found: "+e);return t}as.copy=function(){var t,e,n=new is(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=rs(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=rs(e));return n},as.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Jo(this.cover(e,n),e,n,t)},as.addAll=function(t){for(var e,n,i,r=t.length,a=new Array(r),o=new Array(r),s=1/0,c=1/0,u=-1/0,l=-1/0,f=0;f<r;++f)isNaN(n=+this._x.call(null,e=t[f]))||isNaN(i=+this._y.call(null,e))||((a[f]=n)<s&&(s=n),u<n&&(u=n),(o[f]=i)<c&&(c=i),l<i&&(l=i));if(u<s||l<c)return this;for(this.cover(s,c).cover(u,l),f=0;f<r;++f)Jo(this,a[f],o[f],t[f]);return this},as.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,a=(i=Math.floor(e))+1;else{for(var o,s,c=r-n||1,u=this._root;t<n||r<=t||e<i||a<=e;)switch(s=(e<i)<<1|t<n,(o=new Array(4))[s]=u,u=o,c*=2,s){case 0:r=n+c,a=i+c;break;case 1:n=r-c,a=i+c;break;case 2:r=n+c,i=a-c;break;case 3:n=r-c,i=a-c}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this},as.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},as.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},as.find=function(t,e,n){var i,r,a,o,s,c,u,l,f=this._x0,h=this._y0,d=this._x1,g=this._y1,p=[],v=this._root;for(v&&p.push(new Qo(v,f,h,d,g)),null==n?n=1/0:(f=t-n,h=e-n,d=t+n,g=e+n,n*=n);u=p.pop();)!(v=u.node)||(i=u.x0)>d||(r=u.y0)>g||(a=u.x1)<f||(o=u.y1)<h||(v.length?(p.push(new Qo(v[3],s=(i+a)/2,c=(r+o)/2,a,o),new Qo(v[2],i,c,s,o),new Qo(v[1],s,r,a,c),new Qo(v[0],i,r,s,c)),(s=(c<=e)<<1|s<=t)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-s],p[p.length-1-s]=u)):(u=(u=t-+this._x.call(null,v.data))*u+(u=e-+this._y.call(null,v.data))*u)<n&&(f=t-(u=Math.sqrt(n=u)),h=e-u,d=t+u,g=e+u,l=v.data));return l},as.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,r,a,o,s,c,u,l,f,h=this._root,d=this._x0,g=this._y0,p=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((c=a>=(u=(d+p)/2))?d=u:p=u,(u=o>=(s=(g+v)/2))?g=s:v=s,!(h=(e=h)[l=u<<1|c]))return this;if(!h.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,f=l)}for(;h.data!==t;)if(!(h=(i=h).next))return this;return(r=h.next)&&delete h.next,i?r?i.next=r:delete i.next:e?(r?e[l]=r:delete e[l],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[f]=h:this._root=h)):this._root=r,this},as.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},as.root=function(){return this._root},as.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},as.visit=function(t){var e,n,i,r,a,o,s,c=[],u=this._root;for(u&&c.push(new Qo(u,this._x0,this._y0,this._x1,this._y1));e=c.pop();)!t(u=e.node,n=e.x0,i=e.y0,r=e.x1,a=e.y1)&&u.length&&(o=(n+r)/2,s=(i+a)/2,(e=u[3])&&c.push(new Qo(e,o,s,r,a)),(e=u[2])&&c.push(new Qo(e,n,s,o,a)),(e=u[1])&&c.push(new Qo(e,o,i,r,s)),(e=u[0])&&c.push(new Qo(e,n,i,o,s)));return this},as.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new Qo(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r,a,o,s,c,u,l,f=e.node;f.length&&(a=e.x0,o=e.y0,u=(a+(s=e.x1))/2,l=(o+(c=e.y1))/2,(r=f[0])&&n.push(new Qo(r,a,o,u,l)),(r=f[1])&&n.push(new Qo(r,u,o,s,l)),(r=f[2])&&n.push(new Qo(r,a,l,u,c)),(r=f[3])&&n.push(new Qo(r,u,l,s,c))),i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},as.x=function(t){return arguments.length?(this._x=t,this):this._x},as.y=function(t){return arguments.length?(this._y=t,this):this._y};const hs=1664525,ds=1013904223,gs=4294967296;function ps(t){return t.x}function vs(t){return t.y}var xs=Math.PI*(3-Math.sqrt(5));function ys(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+t.slice(n+1)]}function _s(t){return(t=ys(Math.abs(t)))?t[1]:NaN}var ms,bs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ws(t){if(!(e=bs.exec(t)))throw new Error("invalid format: "+t);var e;return new Ts({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ts(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function As(t,e){e=ys(t,e);if(!e)return t+"";t=e[0],e=e[1];return e<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")}ws.prototype=Ts.prototype,Ts.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ms={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>As(100*t,e),r:As,s:function(t,e){if(!(i=ys(t,e)))return t+"";var n=i[0],i=(r=i[1])-(ms=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,r=n.length;return i===r?n:r<i?n+new Array(i-r+1).join("0"):0<i?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+ys(t,Math.max(0,e+i-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ss(t){return t}var ks,Es=Array.prototype.map,Cs=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ds(t){var e,s,c,w=void 0===t.grouping||void 0===t.thousands?Ss:(s=Es.call(t.grouping,Number),c=t.thousands+"",function(t,e){for(var n=t.length,i=[],r=0,a=s[0],o=0;0<n&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),i.push(t.substring(n-=a,n+a)),!((o+=a+1)>e));)a=s[r=(r+1)%s.length];return i.reverse().join(c)}),i=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",T=void 0===t.decimal?".":t.decimal+"",A=void 0===t.numerals?Ss:(e=Es.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}),a=void 0===t.percent?"%":t.percent+"",M=void 0===t.minus?"":t.minus+"",S=void 0===t.nan?"NaN":t.nan+"";function o(t){var u=(t=ws(t)).fill,l=t.align,f=t.sign,e=t.symbol,h=t.zero,d=t.width,g=t.comma,p=t.precision,v=t.trim,x=t.type;"n"===x?(g=!0,x="g"):Ms[x]||(void 0===p&&(p=12),v=!0,x="g"),(h||"0"===u&&"="===l)&&(h=!0,u="0",l="=");var y="$"===e?i:"#"===e&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",_="$"===e?r:/[%p]/.test(x)?a:"",m=Ms[x],b=/[defgprs%]/.test(x);function n(t){var e,n,i,r=y,a=_;if("c"===x)a=m(t)+a,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?S:m(Math.abs(t),p),v&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;0<r&&(r=0)}return 0<r?t.slice(0,r)+t.slice(e+1):t}(t)),r=((o=o&&0==+t&&"+"!==f?!1:o)?"("===f?f:M:"-"===f||"("===f?"":f)+r,a=("s"===x?Cs[8+ms/3]:"")+a+(o&&"("===f?")":""),b)for(e=-1,n=t.length;++e<n;)if((i=t.charCodeAt(e))<48||57<i){a=(46===i?T+t.slice(e+1):t.slice(e))+a,t=t.slice(0,e);break}}g&&!h&&(t=w(t,1/0));var s=r.length+t.length+a.length,c=s<d?new Array(d-s+1).join(u):"";switch(g&&h&&(t=w(c+t,c.length?d-a.length:1/0),c=""),l){case"<":t=r+t+a+c;break;case"=":t=r+c+t+a;break;case"^":t=c.slice(0,s=c.length>>1)+r+t+a+c.slice(s);break;default:t=c+r+t+a}return A(t)}return p=void 0===p?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=ws(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(_s(e)/3))),i=Math.pow(10,-e),r=Cs[8+e/3];return function(t){return n(i*t)+r}}}}function Rs(t){return ks=Ds(t),s.format=ks.format,s.formatPrefix=ks.formatPrefix,ks}function Os(t){return Math.max(0,-_s(Math.abs(t)))}function Ls(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(_s(e)/3)))-_s(Math.abs(t)))}function Ps(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_s(e)-_s(t))+1}s.format=void 0,s.formatPrefix=void 0,Rs({thousands:",",grouping:[3],currency:["$",""]});var zs=1e-6,Ns=1e-12,Is=Math.PI,Fs=Is/2,Xs=Is/4,Bs=2*Is,$s=180/Is,Ys=Is/180,js=Math.abs,Gs=Math.atan,Hs=Math.atan2,Us=Math.cos,Vs=Math.ceil,qs=Math.exp,Ws=Math.hypot,Zs=Math.log,Ks=Math.pow,Js=Math.sin,Qs=Math.sign||function(t){return 0<t?1:t<0?-1:0},tc=Math.sqrt,ec=Math.tan;function nc(t){return 1<t?0:t<-1?Is:Math.acos(t)}function ic(t){return 1<t?Fs:t<-1?-Fs:Math.asin(t)}function rc(t){return(t=Js(t/2))*t}function ac(){}function oc(t,e){t&&cc.hasOwnProperty(t.type)&&cc[t.type](t,e)}var sc={Feature:function(t,e){oc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)oc(n[i].geometry,e)}},cc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){uc(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)uc(n[i],e,0)},Polygon:function(t,e){lc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)lc(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)oc(n[i],e)}};function uc(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function lc(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)uc(t[n],e,1);e.polygonEnd()}function fc(t,e){t&&sc.hasOwnProperty(t.type)?sc[t.type](t,e):oc(t,e)}var hc,dc,gc,pc,vc,xc,yc,_c,mc,bc,wc,Tc,Ac,Mc,Sc,kc,Ec=new k,Cc=new k,Dc={point:ac,lineStart:ac,lineEnd:ac,polygonStart:function(){Ec=new k,Dc.lineStart=Rc,Dc.lineEnd=Oc},polygonEnd:function(){var t=+Ec;Cc.add(t<0?Bs+t:t),this.lineStart=this.lineEnd=this.point=ac},sphere:function(){Cc.add(Bs)}};function Rc(){Dc.point=Lc}function Oc(){Pc(hc,dc)}function Lc(t,e){Dc.point=Pc,hc=t,dc=e,gc=t*=Ys,pc=Us(e=(e*=Ys)/2+Xs),vc=Js(e)}function Pc(t,e){var n=(t*=Ys)-gc,i=0<=n?1:-1,r=i*n,a=Us(e=(e*=Ys)/2+Xs),o=Js(e),n=vc*o,e=pc*a+n*Us(r),r=n*i*Js(r);Ec.add(Hs(r,e)),gc=t,pc=a,vc=o}function zc(t){return[Hs(t[1],t[0]),ic(t[2])]}function Nc(t){var e=t[0],n=t[1],t=Us(n);return[t*Us(e),t*Js(e),Js(n)]}function Ic(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Fc(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Xc(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Bc(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function $c(t){var e=tc(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Yc,jc,Gc,Hc,Uc,Vc,qc,Wc,Zc,Kc,Jc,Qc,tu,eu,nu,iu,ru={point:au,lineStart:su,lineEnd:cu,polygonStart:function(){ru.point=uu,ru.lineStart=lu,ru.lineEnd=fu,Mc=new k,Dc.polygonStart()},polygonEnd:function(){Dc.polygonEnd(),ru.point=au,ru.lineStart=su,ru.lineEnd=cu,Ec<0?(xc=-(_c=180),yc=-(mc=90)):zs<Mc?mc=90:Mc<-zs&&(yc=-90),kc[0]=xc,kc[1]=_c},sphere:function(){xc=-(_c=180),yc=-(mc=90)}};function au(t,e){Sc.push(kc=[xc=t,_c=t]),e<yc&&(yc=e),mc<e&&(mc=e)}function ou(t,e){var n,i,r,a,o,s=Nc([t*Ys,e*Ys]);Ac?(r=Fc(Ac,s),$c(n=Fc([r[1],-r[0],0],r)),r=(n=zc(n))[0]*$s*(i=0<(o=t-bc)?1:-1),(o=180<js(o))^(i*bc<r&&r<i*t)?(a=n[1]*$s,mc<a&&(mc=a)):o^(i*bc<(r=(r+360)%360-180)&&r<i*t)?(a=-n[1]*$s)<yc&&(yc=a):(e<yc&&(yc=e),mc<e&&(mc=e)),o?t<bc?hu(xc,t)>hu(xc,_c)&&(_c=t):hu(t,_c)>hu(xc,_c)&&(xc=t):xc<=_c?(t<xc&&(xc=t),_c<t&&(_c=t)):bc<t?hu(xc,t)>hu(xc,_c)&&(_c=t):hu(t,_c)>hu(xc,_c)&&(xc=t)):Sc.push(kc=[xc=t,_c=t]),e<yc&&(yc=e),mc<e&&(mc=e),Ac=s,bc=t}function su(){ru.point=ou}function cu(){kc[0]=xc,kc[1]=_c,ru.point=au,Ac=null}function uu(t,e){var n;Ac?Mc.add(180<js(n=t-bc)?n+(0<n?360:-360):n):(wc=t,Tc=e),Dc.point(t,e),ou(t,e)}function lu(){Dc.lineStart()}function fu(){uu(wc,Tc),Dc.lineEnd(),js(Mc)>zs&&(xc=-(_c=180)),kc[0]=xc,kc[1]=_c,Ac=null}function hu(t,e){return(e-=t)<0?e+360:e}function du(t,e){return t[0]-e[0]}function gu(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var pu={sphere:ac,point:vu,lineStart:yu,lineEnd:bu,polygonStart:function(){pu.lineStart=wu,pu.lineEnd=Tu},polygonEnd:function(){pu.lineStart=yu,pu.lineEnd=bu}};function vu(t,e){t*=Ys;var n=Us(e*=Ys);xu(n*Us(t),n*Js(t),Js(e))}function xu(t,e,n){Gc+=(t-Gc)/++Yc,Hc+=(e-Hc)/Yc,Uc+=(n-Uc)/Yc}function yu(){pu.point=_u}function _u(t,e){t*=Ys;var n=Us(e*=Ys);eu=n*Us(t),nu=n*Js(t),iu=Js(e),pu.point=mu,xu(eu,nu,iu)}function mu(t,e){t*=Ys;var n=Us(e*=Ys),i=n*Us(t),n=n*Js(t),t=Js(e),e=Hs(tc((e=nu*t-iu*n)*e+(e=iu*i-eu*t)*e+(e=eu*n-nu*i)*e),eu*i+nu*n+iu*t);jc+=e,Vc+=e*(eu+(eu=i)),qc+=e*(nu+(nu=n)),Wc+=e*(iu+(iu=t)),xu(eu,nu,iu)}function bu(){pu.point=vu}function wu(){pu.point=Au}function Tu(){Mu(Qc,tu),pu.point=vu}function Au(t,e){Qc=t,tu=e,t*=Ys,e*=Ys,pu.point=Mu;var n=Us(e);eu=n*Us(t),nu=n*Js(t),iu=Js(e),xu(eu,nu,iu)}function Mu(t,e){t*=Ys;var n=Us(e*=Ys),i=n*Us(t),r=n*Js(t),a=Js(e),o=nu*a-iu*r,s=iu*i-eu*a,n=eu*r-nu*i,t=Ws(o,s,n),e=ic(t),t=t&&-e/t;Zc.add(t*o),Kc.add(t*s),Jc.add(t*n),jc+=e,Vc+=e*(eu+(eu=i)),qc+=e*(nu+(nu=r)),Wc+=e*(iu+(iu=a)),xu(eu,nu,iu)}function Su(t){return function(){return t}}function ku(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function Eu(t,e){return[js(t)>Is?t+Math.round(-t/Bs)*Bs:t,e]}function Cu(t,e,n){return(t%=Bs)?e||n?ku(Ru(t),Ou(e,n)):Ru(t):e||n?Ou(e,n):Eu}function Du(n){return function(t,e){return[Is<(t+=n)?t-Bs:t<-Is?t+Bs:t,e]}}function Ru(t){var e=Du(t);return e.invert=Du(-t),e}function Ou(t,e){var r=Us(t),a=Js(t),o=Us(e),s=Js(e);function n(t,e){var n=Us(e),i=Us(t)*n,t=Js(t)*n,n=Js(e),e=n*r+i*a;return[Hs(t*o-e*s,i*r-n*a),ic(e*o+t*s)]}return n.invert=function(t,e){var n=Us(e),i=Us(t)*n,t=Js(t)*n,n=Js(e),e=n*o-t*s;return[Hs(t*o+n*s,i*r+e*a),ic(e*r-i*a)]},n}function Lu(e){function t(t){return(t=e(t[0]*Ys,t[1]*Ys))[0]*=$s,t[1]*=$s,t}return e=Cu(e[0]*Ys,e[1]*Ys,2<e.length?e[2]*Ys:0),t.invert=function(t){return(t=e.invert(t[0]*Ys,t[1]*Ys))[0]*=$s,t[1]*=$s,t},t}function Pu(t,e,n,i,r,a){if(n){var o=Us(e),s=Js(e),c=i*n;null==r?(r=e+i*Bs,a=e-c/2):(r=zu(o,r),a=zu(o,a),(0<i?r<a:a<r)&&(r+=i*Bs));for(var u,l=r;0<i?a<l:l<a;l-=c)u=zc([o,-s*Us(l),-s*Js(l)]),t.point(u[0],u[1])}}function zu(t,e){(e=Nc(e))[0]-=t,$c(e);t=nc(-e[1]);return((-e[2]<0?-t:t)+Bs-zs)%Bs}function Nu(){var i,e=[];return{point:function(t,e,n){i.push([t,e,n])},lineStart:function(){e.push(i=[])},lineEnd:ac,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],i=null,t}}}function Iu(t,e){return js(t[0]-e[0])<zs&&js(t[1]-e[1])<zs}function Fu(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Xu(t,e,n,i,a){var o,r,s=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],r=t[e];if(Iu(i,r)){if(!i[2]&&!r[2]){for(a.lineStart(),o=0;o<e;++o)a.point((i=t[o])[0],i[1]);return void a.lineEnd()}r[0]+=2*zs}s.push(n=new Fu(i,t,null,!0)),c.push(n.o=new Fu(i,null,n,!1)),s.push(n=new Fu(r,t,null,!1)),c.push(n.o=new Fu(r,null,n,!0))}}),s.length){for(c.sort(e),Bu(s),Bu(c),o=0,r=c.length;o<r;++o)c[o].e=n=!n;for(var u,l,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;u=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,r=u.length;o<r;++o)a.point((l=u[o])[0],l[1]);else i(h.x,h.n.x,1,a);h=h.n}else{if(d)for(u=h.p.z,o=u.length-1;0<=o;--o)a.point((l=u[o])[0],l[1]);else i(h.x,h.p.x,-1,a);h=h.p}}while(u=(h=h.o).z,d=!d,!h.v);a.lineEnd()}}}function Bu(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function $u(t){return js(t[0])<=Is?t[0]:Qs(t[0])*((js(t[0])+Is)%Bs-Is)}function Yu(t,e){var n=$u(e),i=e[1],e=Js(i),r=[Js(n),-Us(n),0],a=0,o=0,s=new k;1===e?i=Fs+zs:-1===e&&(i=-Fs-zs);for(var c=0,u=t.length;c<u;++c)if(f=(l=t[c]).length)for(var l,f,h=l[f-1],d=$u(h),g=h[1]/2+Xs,p=Js(g),v=Us(g),x=0;x<f;++x,d=_,p=b,v=w,h=y){var y=l[x],_=$u(y),m=y[1]/2+Xs,b=Js(m),w=Us(m),T=_-d,A=0<=T?1:-1,M=A*T,S=Is<M,m=p*b;s.add(Hs(m*A*Js(M),v*w+m*Us(M))),a+=S?T+A*Bs:T,S^n<=d^n<=_&&($c(M=Fc(Nc(h),Nc(y))),$c(A=Fc(r,M)),((A=(S^0<=T?-1:1)*ic(A[2]))<i||i===A&&(M[0]||M[1]))&&(o+=S^0<=T?1:-1))}return(a<-zs||a<zs&&s<-Ns)^1&o}function ju(v,x,y,_){return function(s){var c,u,l,n=x(s),f=Nu(),h=x(f),d=!1,e={point:i,lineStart:r,lineEnd:a,polygonStart:function(){e.point=g,e.lineStart=o,e.lineEnd=p,u=[],c=[]},polygonEnd:function(){e.point=i,e.lineStart=r,e.lineEnd=a,u=V(u);var t=Yu(c,_);u.length?(d||(s.polygonStart(),d=!0),Xu(u,Hu,t,y,s)):t&&(d||(s.polygonStart(),d=!0),s.lineStart(),y(null,null,1,s),s.lineEnd()),d&&(s.polygonEnd(),d=!1),u=c=null},sphere:function(){s.polygonStart(),s.lineStart(),y(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function i(t,e){v(t,e)&&s.point(t,e)}function t(t,e){n.point(t,e)}function r(){e.point=t,n.lineStart()}function a(){e.point=i,n.lineEnd()}function g(t,e){l.push([t,e]),h.point(t,e)}function o(){h.lineStart(),l=[]}function p(){g(l[0][0],l[0][1]),h.lineEnd();var t,e,n,i,r=h.clean(),a=f.result(),o=a.length;if(l.pop(),c.push(l),l=null,o)if(1&r){if(0<(e=(n=a[0]).length-1)){for(d||(s.polygonStart(),d=!0),s.lineStart(),t=0;t<e;++t)s.point((i=n[t])[0],i[1]);s.lineEnd()}}else 1<o&&2&r&&a.push(a.pop().concat(a.shift())),u.push(a.filter(Gu))}return e}}function Gu(t){return 1<t.length}function Hu(t,e){return((t=t.x)[0]<0?t[1]-Fs-zs:Fs-t[1])-((e=e.x)[0]<0?e[1]-Fs-zs:Fs-e[1])}Eu.invert=Eu;var Uu=ju(function(){return 1},function(u){var l,f=NaN,h=NaN,d=NaN;return{lineStart:function(){u.lineStart(),l=1},point:function(t,e){var n,i,r,a,o,s=0<t?Is:-Is,c=js(t-f);js(c-Is)<zs?(u.point(f,h=0<(h+e)/2?Fs:-Fs),u.point(d,h),u.lineEnd(),u.lineStart(),u.point(s,h),u.point(t,h),l=0):d!==s&&Is<=c&&(js(f-d)<zs&&(f-=d*zs),js(t-s)<zs&&(t-=s*zs),i=h,a=e,o=Js((n=f)-(r=t)),h=js(o)>zs?Gs((Js(i)*(c=Us(a))*Js(r)-Js(a)*(r=Us(i))*Js(n))/(r*c*o)):(i+a)/2,u.point(d,h),u.lineEnd(),u.lineStart(),u.point(s,h),l=0),u.point(f=t,h=e),d=s},lineEnd:function(){u.lineEnd(),f=h=NaN},clean:function(){return 2-l}}},function(t,e,n,i){var r;null==t?(r=n*Fs,i.point(-Is,r),i.point(0,r),i.point(Is,r),i.point(Is,0),i.point(Is,-r),i.point(0,-r),i.point(-Is,-r),i.point(-Is,0),i.point(-Is,r)):js(t[0]-e[0])>zs?(t=t[0]<e[0]?Is:-Is,r=n*t/2,i.point(-t,r),i.point(0,r),i.point(t,r)):i.point(e[0],e[1])},[-Is,-Fs]);function Vu(r){var d=Us(r),a=6*Ys,h=0<d,g=js(d)>zs;function p(t,e){return Us(t)*Us(e)>d}function v(t,e,n){var i=[1,0,0],r=Fc(Nc(t),Nc(e)),a=Ic(r,r),o=r[0],s=a-o*o;if(!s)return!n&&t;var c=Fc(i,r),u=Bc(i,d*a/s);Xc(u,Bc(r,-d*o/s));var l=c,f=Ic(u,l),i=Ic(l,l),a=f*f-i*(Ic(u,u)-1);if(!(a<0)){r=tc(a),o=Bc(l,(-f-r)/i);if(Xc(o,u),o=zc(o),!n)return o;var h,s=t[0],c=e[0],a=t[1],n=e[1];c<s&&(h=s,s=c,c=h);t=c-s,e=js(t-Is)<zs;if(!e&&n<a&&(h=a,a=n,n=h),e||t<zs?e?0<a+n^o[1]<(js(o[0]-s)<zs?a:n):a<=o[1]&&o[1]<=n:Is<t^(s<=o[0]&&o[0]<=c)){i=Bc(l,(-f+r)/i);return Xc(i,u),[o,zc(i)]}}}function x(t,e){var n=h?r:Is-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}return ju(p,function(o){var s,c,u,l,f;return{lineStart:function(){l=u=!1,f=1},point:function(t,e){var n,i,r=[t,e],a=p(t,e),e=h?a?0:x(t,e):a?x(t+(t<0?Is:-Is),e):0;!s&&(l=u=a)&&o.lineStart(),a!==u&&((n=v(s,r))&&!Iu(s,n)&&!Iu(r,n)||(r[2]=1)),a!==u?(f=0,a?(o.lineStart(),n=v(r,s),o.point(n[0],n[1])):(n=v(s,r),o.point(n[0],n[1],2),o.lineEnd()),s=n):g&&s&&h^a&&(e&c||!(i=v(r,s,!0))||(f=0,h?(o.lineStart(),o.point(i[0][0],i[0][1]),o.point(i[1][0],i[1][1]),o.lineEnd()):(o.point(i[1][0],i[1][1]),o.lineEnd(),o.lineStart(),o.point(i[0][0],i[0][1],3)))),!a||s&&Iu(s,r)||o.point(r[0],r[1]),s=r,u=a,c=e},lineEnd:function(){u&&o.lineEnd(),s=null},clean:function(){return f|(l&&u)<<1}}},function(t,e,n,i){Pu(i,r,a,n,t,e)},h?[0,-r]:[-Is,r-Is])}var qu,Wu,Zu,Ku,Ju=1e9,Qu=-Ju;function tl(x,y,_,m){function b(t,e){return x<=t&&t<=_&&y<=e&&e<=m}function w(t,e,n,i){var r=0,a=0;if(null==t||(r=o(t,n))!==(a=o(e,n))||s(t,e)<0^0<n)for(;i.point(0===r||3===r?x:_,1<r?m:y),(r=(r+n+4)%4)!==a;);else i.point(e[0],e[1])}function o(t,e){return js(t[0]-x)<zs?0<e?0:3:js(t[0]-_)<zs?0<e?2:1:js(t[1]-y)<zs?0<e?1:0:0<e?3:2}function T(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(i){var r,f,a,o,s,c,u,l,h,d,g,p=i,t=Nu(),e={point:n,lineStart:function(){e.point=v,f&&f.push(a=[]);d=!0,h=!1,u=l=NaN},lineEnd:function(){r&&(v(o,s),c&&h&&t.rejoin(),r.push(t.result()));e.point=n,h&&p.lineEnd()},polygonStart:function(){p=t,r=[],f=[],g=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=f.length;e<n;++e)for(var i,r,a=f[e],o=1,s=a.length,c=a[0],u=c[0],l=c[1];o<s;++o)i=u,r=l,c=a[o],u=c[0],l=c[1],r<=m?m<l&&(l-r)*(x-i)<(u-i)*(m-r)&&++t:l<=m&&(u-i)*(m-r)<(l-r)*(x-i)&&--t;return t}(),e=g&&t,n=(r=V(r)).length;(e||n)&&(i.polygonStart(),e&&(i.lineStart(),w(null,null,1,i),i.lineEnd()),n&&Xu(r,T,t,w,i),i.polygonEnd());p=i,r=f=a=null}};function n(t,e){b(t,e)&&p.point(t,e)}function v(t,e){var n,i,r=b(t,e);f&&a.push([t,e]),d?(o=t,s=e,d=!1,(c=r)&&(p.lineStart(),p.point(t,e))):r&&h?p.point(t,e):!function(t,e,n,i,r,a){var o=t[0],s=t[1],c=0,u=1,l=e[0]-o,f=e[1]-s,n=n-o;if(l||!(0<n)){if(n/=l,l<0){if(n<c)return;n<u&&(u=n)}else if(0<l){if(u<n)return;c<n&&(c=n)}if(n=r-o,l||!(n<0)){if(n/=l,l<0){if(u<n)return;c<n&&(c=n)}else if(0<l){if(n<c)return;n<u&&(u=n)}if(n=i-s,f||!(0<n)){if(n/=f,f<0){if(n<c)return;n<u&&(u=n)}else if(0<f){if(u<n)return;c<n&&(c=n)}if(n=a-s,f||!(n<0)){if(n/=f,f<0){if(u<n)return;c<n&&(c=n)}else if(0<f){if(n<c)return;n<u&&(u=n)}return 0<c&&(t[0]=o+c*l,t[1]=s+c*f),u<1&&(e[0]=o+u*l,e[1]=s+u*f),1}}}}}(n=[u=Math.max(Qu,Math.min(Ju,u)),l=Math.max(Qu,Math.min(Ju,l))],i=[t=Math.max(Qu,Math.min(Ju,t)),e=Math.max(Qu,Math.min(Ju,e))],x,y,_,m)?r&&(p.lineStart(),p.point(t,e),g=!1):(h||(p.lineStart(),p.point(n[0],n[1])),p.point(i[0],i[1]),r||p.lineEnd(),g=!1),u=t,l=e,h=r}return e}}var el={sphere:ac,point:ac,lineStart:function(){el.point=il,el.lineEnd=nl},lineEnd:ac,polygonStart:ac,polygonEnd:ac};function nl(){el.point=el.lineEnd=ac}function il(t,e){Wu=t*=Ys,Zu=Js(e*=Ys),Ku=Us(e),el.point=rl}function rl(t,e){t*=Ys;var n=Js(e*=Ys),i=Us(e),r=js(t-Wu),a=Us(r),e=i*Js(r),r=Ku*n-Zu*i*a,a=Zu*n+Ku*i*a;qu.add(Hs(tc(e*e+r*r),a)),Wu=t,Zu=n,Ku=i}function al(t){return qu=new k,fc(t,el),+qu}var ol=[null,null],sl={type:"LineString",coordinates:ol};function cl(t,e){return ol[0]=t,ol[1]=e,al(sl)}var ul={Feature:function(t,e){return fl(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(fl(n[i].geometry,e))return!0;return!1}},ll={Sphere:function(){return!0},Point:function(t,e){return hl(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(hl(n[i],e))return!0;return!1},LineString:function(t,e){return dl(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(dl(n[i],e))return!0;return!1},Polygon:function(t,e){return gl(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(gl(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(fl(n[i],e))return!0;return!1}};function fl(t,e){return!(!t||!ll.hasOwnProperty(t.type))&&ll[t.type](t,e)}function hl(t,e){return 0===cl(t,e)}function dl(t,e){for(var n,i,r,a=0,o=t.length;a<o;a++){if(0===(i=cl(t[a],e)))return!0;if(0<a&&0<(r=cl(t[a],t[a-1]))&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<Ns*r)return!0;n=i}return!1}function gl(t,e){return!!Yu(t.map(pl),vl(e))}function pl(t){return(t=t.map(vl)).pop(),t}function vl(t){return[t[0]*Ys,t[1]*Ys]}function xl(t,e,n){var i=W(t,e-zs,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function yl(t,e,n){var i=W(t,e-zs,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function _l(){var e,n,i,r,a,o,s,c,u,l,f,h,d=10,g=d,p=90,v=360,x=2.5;function y(){return{type:"MultiLineString",coordinates:t()}}function t(){return W(Vs(r/p)*p,i,p).map(f).concat(W(Vs(c/v)*v,s,v).map(h)).concat(W(Vs(n/d)*d,e,d).filter(function(t){return js(t%p)>zs}).map(u)).concat(W(Vs(o/g)*g,a,g).filter(function(t){return js(t%v)>zs}).map(l))}return y.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(s).slice(1),f(i).reverse().slice(1),h(c).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(r=+t[0][0],i=+t[1][0],c=+t[0][1],s=+t[1][1],i<r&&(t=r,r=i,i=t),s<c&&(t=c,c=s,s=t),y.precision(x)):[[r,c],[i,s]]},y.extentMinor=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],e<n&&(t=n,n=e,e=t),a<o&&(t=o,o=a,a=t),y.precision(x)):[[n,o],[e,a]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],y):[p,v]},y.stepMinor=function(t){return arguments.length?(d=+t[0],g=+t[1],y):[d,g]},y.precision=function(t){return arguments.length?(x=+t,u=xl(o,a,90),l=yl(n,e,x),f=xl(c,s,90),h=yl(r,i,x),y):x},y.extentMajor([[-180,-90+zs],[180,90-zs]]).extentMinor([[-180,-80-zs],[180,80+zs]])}var ml,bl,wl,Tl,Al=t=>t,Ml=new k,Sl=new k,kl={point:ac,lineStart:ac,lineEnd:ac,polygonStart:function(){kl.lineStart=El,kl.lineEnd=Rl},polygonEnd:function(){kl.lineStart=kl.lineEnd=kl.point=ac,Ml.add(js(Sl)),Sl=new k},result:function(){var t=Ml/2;return Ml=new k,t}};function El(){kl.point=Cl}function Cl(t,e){kl.point=Dl,ml=wl=t,bl=Tl=e}function Dl(t,e){Sl.add(Tl*t-wl*e),wl=t,Tl=e}function Rl(){Dl(ml,bl)}var Ol=1/0,Ll=Ol,Pl=-Ol,zl=Pl,Nl={point:function(t,e){t<Ol&&(Ol=t);Pl<t&&(Pl=t);e<Ll&&(Ll=e);zl<e&&(zl=e)},lineStart:ac,lineEnd:ac,polygonStart:ac,polygonEnd:ac,result:function(){var t=[[Ol,Ll],[Pl,zl]];return Pl=zl=-(Ll=Ol=1/0),t}};var Il,Fl,Xl,Bl,$l=0,Yl=0,jl=0,Gl=0,Hl=0,Ul=0,Vl=0,ql=0,Wl=0,Zl={point:Kl,lineStart:Jl,lineEnd:ef,polygonStart:function(){Zl.lineStart=nf,Zl.lineEnd=rf},polygonEnd:function(){Zl.point=Kl,Zl.lineStart=Jl,Zl.lineEnd=ef},result:function(){var t=Wl?[Vl/Wl,ql/Wl]:Ul?[Gl/Ul,Hl/Ul]:jl?[$l/jl,Yl/jl]:[NaN,NaN];return $l=Yl=jl=Gl=Hl=Ul=Vl=ql=Wl=0,t}};function Kl(t,e){$l+=t,Yl+=e,++jl}function Jl(){Zl.point=Ql}function Ql(t,e){Zl.point=tf,Kl(Xl=t,Bl=e)}function tf(t,e){var n=t-Xl,i=e-Bl,i=tc(n*n+i*i);Gl+=i*(Xl+t)/2,Hl+=i*(Bl+e)/2,Ul+=i,Kl(Xl=t,Bl=e)}function ef(){Zl.point=Kl}function nf(){Zl.point=af}function rf(){of(Il,Fl)}function af(t,e){Zl.point=of,Kl(Il=Xl=t,Fl=Bl=e)}function of(t,e){var n=t-Xl,i=e-Bl,i=tc(n*n+i*i);Gl+=i*(Xl+t)/2,Hl+=i*(Bl+e)/2,Ul+=i,Vl+=(i=Bl*t-Xl*e)*(Xl+t),ql+=i*(Bl+e),Wl+=3*i,Kl(Xl=t,Bl=e)}function sf(t){this._context=t}sf.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Bs)}},result:ac};var cf,uf,lf,ff,hf,df=new k,gf={point:ac,lineStart:function(){gf.point=pf},lineEnd:function(){cf&&vf(uf,lf),gf.point=ac},polygonStart:function(){cf=!0},polygonEnd:function(){cf=null},result:function(){var t=+df;return df=new k,t}};function pf(t,e){gf.point=vf,uf=ff=t,lf=hf=e}function vf(t,e){ff-=t,hf-=e,df.add(tc(ff*ff+hf*hf)),ff=t,hf=e}function xf(){this._string=[]}function yf(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function _f(i){return function(t){var e,n=new mf;for(e in i)n[e]=i[e];return n.stream=t,n}}function mf(){}function bf(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),fc(n,t.stream(Nl)),e(Nl.result()),null!=i&&t.clipExtent(i),t}function wf(r,a,t){return bf(r,function(t){var e=a[1][0]-a[0][0],n=a[1][1]-a[0][1],i=Math.min(e/(t[1][0]-t[0][0]),n/(t[1][1]-t[0][1])),e=+a[0][0]+(e-i*(t[1][0]+t[0][0]))/2,t=+a[0][1]+(n-i*(t[1][1]+t[0][1]))/2;r.scale(150*i).translate([e,t])},t)}function Tf(t,e,n){return wf(t,[[0,0],e],n)}function Af(i,r,t){return bf(i,function(t){var e=+r,n=e/(t[1][0]-t[0][0]),e=(e-n*(t[1][0]+t[0][0]))/2,t=-n*t[0][1];i.scale(150*n).translate([e,t])},t)}function Mf(r,a,t){return bf(r,function(t){var e=+a,n=e/(t[1][1]-t[0][1]),i=-n*t[0][0],t=(e-n*(t[1][1]+t[0][1]))/2;r.scale(150*n).translate([i,t])},t)}xf.prototype={_radius:4.5,_circle:yf(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=yf(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},mf.prototype={constructor:mf,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Sf=16,kf=Us(30*Ys);function Ef(t,e){return+e?(k=t,E=e,function(i){var n,r,a,o,s,c,u,l,f,h,d,g,p={point:t,lineStart:e,lineEnd:x,polygonStart:function(){i.polygonStart(),p.lineStart=y},polygonEnd:function(){i.polygonEnd(),p.lineStart=e}};function t(t,e){t=k(t,e),i.point(t[0],t[1])}function e(){l=NaN,p.point=v,i.lineStart()}function v(t,e){var n=Nc([t,e]),e=k(t,e);C(l,f,u,h,d,g,l=e[0],f=e[1],u=t,h=n[0],d=n[1],g=n[2],Sf,i),i.point(l,f)}function x(){p.point=t,i.lineEnd()}function y(){e(),p.point=_,p.lineEnd=m}function _(t,e){v(n=t,e),r=l,a=f,o=h,s=d,c=g,p.point=v}function m(){C(l,f,u,h,d,g,r,a,n,o,s,c,Sf,i),p.lineEnd=x,x()}return p}):(n=t,_f({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}}));var n,k,E;function C(t,e,n,i,r,a,o,s,c,u,l,f,h,d){var g,p,v,x,y,_,m,b,w,T,A=o-t,M=s-e,S=A*A+M*M;4*E<S&&h--&&(v=a+f,w=ic(v/=x=tc((g=i+u)*g+(p=r+l)*p+v*v)),y=js(js(v)-1)<zs||js(n-c)<zs?(n+c)/2:Hs(p,g),_=(T=k(y,w))[0],m=T[1],(E<(T=M*(b=_-t)-A*(w=m-e))*T/S||.3<js((A*b+M*w)/S-.5)||i*u+r*l+a*f<kf)&&(C(t,e,n,i,r,a,_,m,y,g/=x,p/=x,v,h,d),d.point(_,m),C(_,m,y,g,p,v,o,s,c,u,l,f,h,d)))}}var Cf=_f({point:function(t,e){this.stream.point(t*Ys,e*Ys)}});function Df(t,n,i,r,a,e){if(!e)return s=t,c=n,u=i,l=r,f=a,o.invert=function(t,e){return[(t-c)/s*l,(u-e)/s*f]},o;function o(t,e){return[c+s*(t*=l),u-s*(e*=f)]}var s,c,u,l,f,h=Us(e),e=Js(e),d=h*t,g=e*t,p=h/t,v=e/t,x=(e*i-h*n)/t,y=(e*n+h*i)/t;function _(t,e){return[d*(t*=r)-g*(e*=a)+n,i-g*t-d*e]}return _.invert=function(t,e){return[r*(p*t-v*e+x),a*(y-v*t-p*e)]},_}function Rf(t){return Of(function(){return t})()}function Of(t){var e,i,n,r,a,o,s,c,u,l,f=150,h=480,d=250,g=0,p=0,v=0,x=0,y=0,_=0,m=1,b=1,w=null,T=Uu,A=null,M=Al,S=.5;function k(t){return c(t[0]*Ys,t[1]*Ys)}function E(t){return(t=c.invert(t[0],t[1]))&&[t[0]*$s,t[1]*$s]}function C(){var t=Df(f,0,0,m,b,_).apply(null,e(g,p)),t=Df(f,h-t[0],d-t[1],m,b,_);return i=Cu(v,x,y),s=ku(e,t),c=ku(i,s),o=Ef(s,S),D()}function D(){return u=l=null,k}return k.stream=function(t){return u&&l===t?u:u=Cf((n=i,_f({point:function(t,e){e=n(t,e);return this.stream.point(e[0],e[1])}})(T(o(M(l=t))))));var n},k.preclip=function(t){return arguments.length?(T=t,w=void 0,D()):T},k.postclip=function(t){return arguments.length?(M=t,A=n=r=a=null,D()):M},k.clipAngle=function(t){return arguments.length?(T=+t?Vu(w=t*Ys):(w=null,Uu),D()):w*$s},k.clipExtent=function(t){return arguments.length?(M=null==t?(A=n=r=a=null,Al):tl(A=+t[0][0],n=+t[0][1],r=+t[1][0],a=+t[1][1]),D()):null==A?null:[[A,n],[r,a]]},k.scale=function(t){return arguments.length?(f=+t,C()):f},k.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],C()):[h,d]},k.center=function(t){return arguments.length?(g=t[0]%360*Ys,p=t[1]%360*Ys,C()):[g*$s,p*$s]},k.rotate=function(t){return arguments.length?(v=t[0]%360*Ys,x=t[1]%360*Ys,y=2<t.length?t[2]%360*Ys:0,C()):[v*$s,x*$s,y*$s]},k.angle=function(t){return arguments.length?(_=t%360*Ys,C()):_*$s},k.reflectX=function(t){return arguments.length?(m=t?-1:1,C()):m<0},k.reflectY=function(t){return arguments.length?(b=t?-1:1,C()):b<0},k.precision=function(t){return arguments.length?(o=Ef(s,S=t*t),D()):tc(S)},k.fitExtent=function(t,e){return wf(k,t,e)},k.fitSize=function(t,e){return Tf(k,t,e)},k.fitWidth=function(t,e){return Af(k,t,e)},k.fitHeight=function(t,e){return Mf(k,t,e)},function(){return e=t.apply(this,arguments),k.invert=e.invert&&E,C()}}function Lf(t){var e=0,n=Is/3,i=Of(t),t=i(e,n);return t.parallels=function(t){return arguments.length?i(e=t[0]*Ys,n=t[1]*Ys):[e*$s,n*$s]},t}function Pf(t,e){var n,i=Js(t),r=(i+Js(e))/2;if(js(r)<zs)return n=Us(t),a.invert=function(t,e){return[t/n,ic(e*n)]},a;function a(t,e){return[t*n,Js(e)/n]}var o=1+i*(2*r-i),s=tc(o)/r;function c(t,e){e=tc(o-2*r*Js(e))/r;return[e*Js(t*=r),s-e*Us(t)]}return c.invert=function(t,e){var n=s-e,e=Hs(t,js(n))*Qs(n);return n*r<0&&(e-=Is*Qs(t)*Qs(n)),[e/r,ic((o-(t*t+n*n)*r*r)/(2*r))]},c}function zf(){return Lf(Pf).scale(155.424).center([0,33.6442])}function Nf(){return zf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function If(r){return function(t,e){var n=Us(t),i=Us(e),n=r(n*i);return n===1/0?[2,0]:[n*i*Js(t),n*Js(e)]}}function Ff(a){return function(t,e){var n=tc(t*t+e*e),i=a(n),r=Js(i),i=Us(i);return[Hs(t*r,n*i),ic(n&&e*r/n)]}}var Xf=If(function(t){return tc(2/(1+t))});Xf.invert=Ff(function(t){return 2*ic(t/2)});var Bf=If(function(t){return(t=nc(t))&&t/Js(t)});function $f(t,e){return[t,Zs(ec((Fs+e)/2))]}function Yf(n){var i,r,a,o=Rf(n),e=o.center,s=o.scale,c=o.translate,u=o.clipExtent,l=null;function f(){var t=Is*s(),e=o(Lu(o.rotate()).invert([0,0]));return u(null==l?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:n===$f?[[Math.max(e[0]-t,l),i],[Math.min(e[0]+t,r),a]]:[[l,Math.max(e[1]-t,i)],[r,Math.min(e[1]+t,a)]])}return o.scale=function(t){return arguments.length?(s(t),f()):s()},o.translate=function(t){return arguments.length?(c(t),f()):c()},o.center=function(t){return arguments.length?(e(t),f()):e()},o.clipExtent=function(t){return arguments.length?(null==t?l=i=r=a=null:(l=+t[0][0],i=+t[0][1],r=+t[1][0],a=+t[1][1]),f()):null==l?null:[[l,i],[r,a]]},f()}function jf(t){return ec((Fs+t)/2)}function Gf(t,e){var n=Us(t),r=t===e?Js(t):Zs(n/Us(e))/Zs(jf(e)/jf(t)),a=n*Ks(jf(t),r)/r;return r?(i.invert=function(t,e){var n=a-e,i=Qs(r)*tc(t*t+n*n),e=Hs(t,js(n))*Qs(n);return n*r<0&&(e-=Is*Qs(t)*Qs(n)),[e/r,2*Gs(Ks(a/i,1/r))-Fs]},i):$f;function i(t,e){0<a?e<-Fs+zs&&(e=-Fs+zs):Fs-zs<e&&(e=Fs-zs);e=a/Ks(jf(e),r);return[e*Js(r*t),a-e*Us(r*t)]}}function Hf(t,e){return[t,e]}function Uf(t,e){var n=Us(t),i=t===e?Js(t):(n-Us(e))/(e-t),r=n/i+t;return js(i)<zs?Hf:(a.invert=function(t,e){var n=r-e,e=Hs(t,js(n))*Qs(n);return n*i<0&&(e-=Is*Qs(t)*Qs(n)),[e/i,r-Qs(i)*tc(t*t+n*n)]},a);function a(t,e){e=r-e,t*=i;return[e*Js(t),r-e*Us(t)]}}Bf.invert=Ff(function(t){return t}),$f.invert=function(t,e){return[t,2*Gs(qs(e))-Fs]},Hf.invert=Hf;var Vf=1.340264,qf=-.081106,Wf=893e-6,Zf=.003796,Kf=tc(3)/2;function Jf(t,e){var n=ic(Kf*Js(e)),i=n*n,e=i*i*i;return[t*Us(n)/(Kf*(Vf+3*qf*i+e*(7*Wf+9*Zf*i))),n*(Vf+qf*i+e*(Wf+Zf*i))]}function Qf(t,e){var n=Us(e),i=Us(t)*n;return[n*Js(t)/i,Js(e)/i]}function th(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function eh(t,e){return[Us(e)*Js(t),Js(e)]}function nh(t,e){var n=Us(e),i=1+Us(t)*n;return[n*Js(t)/i,Js(e)/i]}function ih(t,e){return[Zs(ec((Fs+e)/2)),-t]}function rh(t,e){return t.parent===e.parent?1:2}function ah(t,e){return t+e.x}function oh(t,e){return Math.max(t,e.y)}function sh(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;0<=--i;)e+=n[i].value;else e=1;t.value=e}Jf.invert=function(t,e){for(var n,i=e,r=i*i,a=r*r*r,o=0;o<12&&(a=(r=(i-=n=(i*(Vf+qf*r+a*(Wf+Zf*r))-e)/(Vf+3*qf*r+a*(7*Wf+9*Zf*r)))*i)*r*r,!(js(n)<Ns));++o);return[Kf*t*(Vf+3*qf*r+a*(7*Wf+9*Zf*r))/Us(i),ic(Js(i)/Kf)]},Qf.invert=Ff(Gs),th.invert=function(t,e){var n=e,i=25;do{var r=n*n,a=r*r}while(n-=a=(n*(1.007226+r*(.015085+a*(.028874*r-.044475-.005916*a)))-e)/(1.007226+r*(.045255+a*(.259866*r-.311325-.005916*11*a))),js(a)>zs&&0<--i);return[t/(.8707+(r=n*n)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),n]},eh.invert=Ff(ic),nh.invert=Ff(function(t){return 2*Gs(t)}),ih.invert=function(t,e){return[-e,2*Gs(qs(t))-Fs]};function ch(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=lh)):void 0===e&&(e=uh);for(var n,i,r,a,o,t=new dh(t),s=[t];n=s.pop();)if((r=e(n.data))&&(o=(r=Array.from(r)).length))for(n.children=r,a=o-1;0<=a;--a)s.push(i=r[a]=new dh(r[a])),i.parent=n,i.depth=n.depth+1;return t.eachBefore(hh)}function uh(t){return t.children}function lh(t){return Array.isArray(t)?t[1]:null}function fh(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function hh(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function dh(t){this.data=t,this.depth=this.height=0,this.parent=null}function gh(t){for(var e,n,i=0,r=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(Array.from(t))).length,a=[];i<r;)e=t[i],n&&vh(n,e)?++i:(n=function(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return yh(t[0],t[1]);case 3:return _h(t[0],t[1],t[2])}}(a=function(t,e){var n,i;if(xh(e,t))return[e];for(n=0;n<t.length;++n)if(ph(e,t[n])&&xh(yh(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(ph(yh(t[n],t[i]),e)&&ph(yh(t[n],e),t[i])&&ph(yh(t[i],e),t[n])&&xh(_h(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}(a,e)),i=0);return n}function ph(t,e){var n=t.r-e.r,i=e.x-t.x,t=e.y-t.y;return n<0||n*n<i*i+t*t}function vh(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),i=e.x-t.x,t=e.y-t.y;return 0<n&&i*i+t*t<n*n}function xh(t,e){for(var n=0;n<e.length;++n)if(!vh(t,e[n]))return;return 1}function yh(t,e){var n=t.x,i=t.y,r=t.r,a=e.x,o=e.y,s=e.r,c=a-n,u=o-i,t=s-r,e=Math.sqrt(c*c+u*u);return{x:(n+a+c/e*t)/2,y:(i+o+u/e*t)/2,r:(e+r+s)/2}}function _h(t,e,n){var i=t.x,r=t.y,a=t.r,o=e.x,s=e.y,c=e.r,u=n.x,l=n.y,f=n.r,h=i-o,d=i-u,g=r-s,p=r-l,t=c-a,e=f-a,n=i*i+r*r-a*a,c=n-o*o-s*s+c*c,u=n-u*u-l*l+f*f,l=d*g-h*p,f=(g*u-p*c)/(2*l)-i,g=(p*t-g*e)/l,u=(d*c-h*u)/(2*l)-r,d=(h*e-d*t)/l,t=g*g+d*d-1,l=2*(a+f*g+u*d),a=f*f+u*u-a*a,l=-(t?(l+Math.sqrt(l*l-4*t*a))/(2*t):a/l);return{x:i+f+g*l,y:r+u+d*l,r:l}}function mh(t,e,n){var i,r,a,o,s=t.x-e.x,c=t.y-e.y,u=s*s+c*c;u?(r=e.r+n.r,o=t.r+n.r,(o*=o)<(r*=r)?(i=(u+o-r)/(2*u),a=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x-i*s-a*c,n.y=t.y-i*c+a*s):(i=(u+r-o)/(2*u),a=Math.sqrt(Math.max(0,r/u-i*i)),n.x=e.x+i*s-a*c,n.y=e.y+i*c+a*s)):(n.x=e.x+n.r,n.y=e.y)}function bh(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,t=e.y-t.y;return 0<n&&i*i+t*t<n*n}function wh(t){var e=t._,n=t.next._,i=e.r+n.r,t=(e.x*n.r+n.x*e.r)/i,i=(e.y*n.r+n.y*e.r)/i;return t*t+i*i}function Th(t){this._=t,this.next=null,this.previous=null}function Ah(t){if(!(r=(t="object"==typeof(e=t)&&"length"in e?e:Array.from(e)).length))return 0;var e,n,i,r,a,o,s,c,u,l,f,h=t[0];if(h.x=0,h.y=0,!(1<r))return h.r;if(n=t[1],h.x=-n.r,n.x=h.r,n.y=0,!(2<r))return h.r+n.r;mh(n,h,i=t[2]),h=new Th(h),n=new Th(n),i=new Th(i),((h.next=i.previous=n).next=h.previous=i).next=n.previous=h;t:for(s=3;s<r;++s){mh(h._,n._,i=t[s]),i=new Th(i),c=n.next,u=h.previous,l=n._.r,f=h._.r;do{if(l<=f){if(bh(c._,i._)){(h.next=n=c).previous=h,--s;continue t}l+=c._.r,c=c.next}else{if(bh(u._,i._)){((h=u).next=n).previous=h,--s;continue t}f+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=h,i.next=n,h.next=n.previous=n=i,a=wh(h);(i=i.next)!==n;)(o=wh(i))<a&&(h=i,a=o);n=h.next}for(h=[n._],i=n;(i=i.next)!==n;)h.push(i._);for(i=gh(h),s=0;s<r;++s)(h=t[s]).x-=i.x,h.y-=i.y;return i.r}function Mh(t){if("function"!=typeof t)throw new Error;return t}function Sh(){return 0}function kh(t){return function(){return t}}function Eh(t){return Math.sqrt(t.value)}function Ch(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Dh(o,s){return function(t){if(e=t.children){var e,n,i,r=e.length,a=o(t)*s||0;if(a)for(n=0;n<r;++n)e[n].r+=a;if(i=Ah(e),a)for(n=0;n<r;++n)e[n].r-=a;t.r=i+a}}}function Rh(n){return function(t){var e=t.parent;t.r*=n,e&&(t.x=e.x+n*t.x,t.y=e.y+n*t.y)}}function Oh(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Lh(t,e,n,i,r){for(var a,o=t.children,s=-1,c=o.length,u=t.value&&(i-e)/t.value;++s<c;)(a=o[s]).y0=n,a.y1=r,a.x0=e,a.x1=e+=a.value*u}dh.prototype=ch.prototype={constructor:dh,count:function(){return this.eachAfter(sh)},each:function(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this},eachAfter:function(t,e){for(var n,i,r,a=this,o=[a],s=[],c=-1;a=o.pop();)if(s.push(a),n=a.children)for(i=0,r=n.length;i<r;++i)o.push(n[i]);for(;a=s.pop();)t.call(e,a,++c,this);return this},eachBefore:function(t,e){for(var n,i,r,a=[this],o=-1;n=a.pop();)if(t.call(e,n,++o,this),i=n.children)for(r=i.length-1;0<=r;--r)a.push(i[r]);return this},find:function(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i},sum:function(r){return this.eachAfter(function(t){for(var e=+r(t.data)||0,n=t.children,i=n&&n.length;0<=--i;)e+=n[i].value;t.value=e})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;t=n.pop(),e=i.pop();for(;t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n},copy:function(){return ch(this).eachBefore(fh)},[Symbol.iterator]:function*(){var t,e,n,i,r,a=[this];do{for(e=a.reverse(),a=[];t=e.pop();)if(yield t,n=t.children)for(i=0,r=n.length;i<r;++i)a.push(n[i])}while(a.length)}};var Ph={depth:-1},zh={};function Nh(t){return t.id}function Ih(t){return t.parentId}function Fh(t,e){return t.parent===e.parent?1:2}function Xh(t){var e=t.children;return e?e[0]:t.t}function Bh(t){var e=t.children;return e?e[e.length-1]:t.t}function $h(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Yh(t,e,n,i,r){for(var a,o=t.children,s=-1,c=o.length,u=t.value&&(r-n)/t.value;++s<c;)(a=o[s]).x0=e,a.x1=i,a.y0=n,a.y1=n+=a.value*u}$h.prototype=Object.create(dh.prototype);var jh=(1+Math.sqrt(5))/2;function Gh(t,e,n,i,r,a){for(var o,s,c,u,l,f,h,d,g,p,v,x=[],y=e.children,_=0,m=0,b=y.length,w=e.value;_<b;){for(c=r-n,u=a-i;l=y[m++].value,!l&&m<b;);for(v=(f=h=l)*l*(p=Math.max(u/c,c/u)/(w*t)),g=Math.max(h/v,v/f);m<b;++m){if(l+=s=y[m].value,s<f&&(f=s),h<s&&(h=s),v=l*l*p,g<(d=Math.max(h/v,v/f))){l-=s;break}g=d}x.push(o={value:l,dice:c<u,children:y.slice(_,m)}),o.dice?Lh(o,n,i,r,w?i+=u*l/w:a):Yh(o,n,i,w?n+=c*l/w:r,a),w-=l,_=m}return x}var Hh=function e(a){function t(t,e,n,i,r){Gh(a,t,e,n,i,r)}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(jh);var Uh=function e(d){function t(t,e,n,i,r){if((a=t._squarify)&&a.ratio===d)for(var a,o,s,c,u,l=-1,f=a.length,h=t.value;++l<f;){for(s=(o=a[l]).children,c=o.value=0,u=s.length;c<u;++c)o.value+=s[c].value;o.dice?Lh(o,e,n,i,h?n+=(r-n)*o.value/h:r):Yh(o,e,n,h?e+=(i-e)*o.value/h:i,r),h-=o.value}else t._squarify=a=Gh(d,t,e,n,i,r),a.ratio=d}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(jh);function Vh(t,e){return t[0]-e[0]||t[1]-e[1]}function qh(t){const e=t.length,n=[0,1];let i=2,r;for(r=2;r<e;++r){for(;1<i&&(a=t[n[i-2]],o=t[n[i-1]],s=t[r],(o[0]-a[0])*(s[1]-a[1])-(o[1]-a[1])*(s[0]-a[0])<=0);)--i;n[i++]=r}var a,o,s;return n.slice(0,i)}var Wh=Math.random,Zh=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(Wh),Kh=function t(n){function e(t,e){return arguments.length<2&&(e=t,t=0),t=Math.floor(t),e=Math.floor(e)-t,function(){return Math.floor(n()*e+t)}}return e.source=t,e}(Wh),Jh=function t(a){function e(e,n){var i,r;return e=null==e?0:+e,n=null==n?1:+n,function(){var t;if(null!=i)t=i,i=null;else for(;i=2*a()-1,t=2*a()-1,r=i*i+t*t,!r||1<r;);return e+n*t*Math.sqrt(-2*Math.log(r)/r)}}return e.source=t,e}(Wh),Qh=function t(e){var n=Jh.source(e);function i(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return i.source=t,i}(Wh),td=function t(i){function e(n){return(n=+n)<=0?()=>0:function(){for(var t=0,e=n;1<e;--e)t+=i();return t+e*i()}}return e.source=t,e}(Wh),ed=function t(n){var i=td.source(n);function e(t){if(0==(t=+t))return n;var e=i(t);return function(){return e()/t}}return e.source=t,e}(Wh),nd=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(Wh),id=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(Wh),rd=function t(e){function n(t){if((t=+t)<0||1<t)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(Wh),ad=function t(e){function n(t){if((t=+t)<0||1<t)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(Wh),od=function t(s){var c=Jh.source(s)();function e(t,i){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(i=null==i?1:+i,1===t)return()=>-Math.log1p(-s())*i;var r=(t<1?t+1:t)-1/3,a=1/(3*Math.sqrt(r)),o=t<1?()=>Math.pow(s(),1/t):()=>1;return function(){do{do{var t=c(),e=1+a*t}while(e<=0);e*=e*e;var n=1-s()}while(1-.0331*t*t*t*t<=n&&Math.log(n)>=.5*t*t+r*(1-e+Math.log(e)));return r*e*o()*i}}return e.source=t,e}(Wh),sd=function t(e){var r=od.source(e);function n(t,e){var n=r(t),i=r(e);return function(){var t=n();return 0===t?0:t/(t+i())}}return n.source=t,n}(Wh),cd=function t(e){var f=ad.source(e),h=sd.source(e);function n(u,l){return u=+u,1<=(l=+l)?()=>u:l<=0?()=>0:function(){for(var t=0,e=u,n=l;16<e*n&&16<e*(1-n);){var i=Math.floor((e+1)*n),r=h(i,e-i+1)();r<=n?(t+=i,e-=i,n=(n-r)/(1-r)):(e=i-1,n/=r)}for(var a=n<.5,o=f(a?n:1-n),s=o(),c=0;s<=e;++c)s+=o();return t+(a?c:e-c)}}return n.source=t,n}(Wh),ud=function t(r){function e(e,t,n){var i=0==(e=+e)?t=>-Math.log(t):(e=1/e,t=>Math.pow(t,e));return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*i(-Math.log1p(-r()))}}return e.source=t,e}(Wh),ld=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){return t+e*Math.tan(Math.PI*n())}}return e.source=t,e}(Wh),fd=function t(i){function e(e,n){return e=null==e?0:+e,n=null==n?1:+n,function(){var t=i();return e+n*Math.log(t/(1-t))}}return e.source=t,e}(Wh),hd=function t(s){var c=od.source(s),u=cd.source(s);function e(o){return function(){for(var t=0,e=o;16<e;){var n=Math.floor(.875*e),i=c(n)();if(e<i)return t+u(n-1,e/i)();t+=n,e-=i}for(var r=-Math.log1p(-s()),a=0;r<=e;++a)r-=Math.log1p(-s());return t+a}}return e.source=t,e}(Wh);const dd=1/4294967296;function gd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function pd(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const vd=Symbol("implicit");function xd(){var i=new Map,r=[],a=[],o=vd;function s(t){var e=t+"",n=i.get(e);if(!n){if(o!==vd)return o;i.set(e,n=r.push(t))}return a[(n-1)%a.length]}return s.domain=function(t){if(!arguments.length)return r.slice();r=[],i=new Map;for(const n of t){var e=n+"";i.has(e)||i.set(e,r.push(n))}return s},s.range=function(t){return arguments.length?(a=Array.from(t),s):a.slice()},s.unknown=function(t){return arguments.length?(o=t,s):o},s.copy=function(){return xd(r,a).unknown(o)},gd.apply(s,arguments),s}function yd(){var r,a,t=xd().unknown(void 0),o=t.domain,s=t.range,c=0,u=1,l=!1,f=0,h=0,d=.5;function e(){var t=o().length,e=u<c,n=e?u:c,i=e?c:u;r=(i-n)/Math.max(1,t-f+2*h),l&&(r=Math.floor(r)),n+=(i-n-r*(t-f))*d,a=r*(1-f),l&&(n=Math.round(n),a=Math.round(a));t=W(t).map(function(t){return n+r*t});return s(e?t.reverse():t)}return delete t.unknown,t.domain=function(t){return arguments.length?(o(t),e()):o()},t.range=function(t){return arguments.length?([c,u]=t,c=+c,u=+u,e()):[c,u]},t.rangeRound=function(t){return[c,u]=t,c=+c,u=+u,l=!0,e()},t.bandwidth=function(){return a},t.step=function(){return r},t.round=function(t){return arguments.length?(l=!!t,e()):l},t.padding=function(t){return arguments.length?(f=Math.min(1,h=+t),e()):f},t.paddingInner=function(t){return arguments.length?(f=Math.min(1,t),e()):f},t.paddingOuter=function(t){return arguments.length?(h=+t,e()):h},t.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},t.copy=function(){return yd(o(),[c,u]).round(l).paddingInner(f).paddingOuter(h).align(d)},gd.apply(e(),arguments)}function _d(t){return+t}var md=[0,1];function bd(t){return t}function wd(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function Td(t,e,n){var i=t[0],t=t[1],r=e[0],e=e[1],r=t<i?(i=wd(t,i),n(e,r)):(i=wd(i,t),n(r,e));return function(t){return r(i(t))}}function Ad(n,t,e){var i=Math.min(n.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=wd(n[o],n[o+1]),a[o]=e(t[o],t[o+1]);return function(t){var e=v(n,t,1,i)-1;return a[e](r[e](t))}}function Md(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Sd(){var n,i,e,r,a,o,s=md,c=md,u=Jn,l=bd;function f(){var e,n,t,i=Math.min(s.length,c.length);return l!==bd&&(e=s[0],(n=s[i-1])<e&&(t=e,e=n,n=t),l=function(t){return Math.max(e,Math.min(n,t))}),r=2<i?Ad:Td,a=o=null,h}function h(t){return null==t||isNaN(t=+t)?e:(a=a||r(s.map(n),c,u))(n(l(t)))}return h.invert=function(t){return l(i((o=o||r(c,s.map(n),Vn))(t)))},h.domain=function(t){return arguments.length?(s=Array.from(t,_d),f()):s.slice()},h.range=function(t){return arguments.length?(c=Array.from(t),f()):c.slice()},h.rangeRound=function(t){return c=Array.from(t),u=Qn,f()},h.clamp=function(t){return arguments.length?(l=!!t||bd,f()):l!==bd},h.interpolate=function(t){return arguments.length?(u=t,f()):u},h.unknown=function(t){return arguments.length?(e=t,h):e},function(t,e){return n=t,i=e,f()}}function kd(){return Sd()(bd,bd)}function Ed(t,e,n,i){var r,a=N(t,e,n);switch((i=ws(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=Ls(a,o))||(i.precision=r),s.formatPrefix(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=Ps(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=Os(a))||(i.precision=r-2*("%"===i.type))}return s.format(i)}function Cd(u){var l=u.domain;return u.ticks=function(t){var e=l();return P(e[0],e[e.length-1],null==t?10:t)},u.tickFormat=function(t,e){var n=l();return Ed(n[0],n[n.length-1],null==t?10:t,e)},u.nice=function(t){null==t&&(t=10);var e,n,i=l(),r=0,a=i.length-1,o=i[r],s=i[a],c=10;for(s<o&&(n=o,o=s,s=n,n=r,r=a,a=n);0<c--;){if((n=z(o,s,t))===e)return i[r]=o,i[a]=s,l(i);if(0<n)o=Math.floor(o/n)*n,s=Math.ceil(s/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,s=Math.floor(s*n)/n}e=n}return u},u}function Dd(t,e){var n,i=0,r=(t=t.slice()).length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function Rd(t){return Math.log(t)}function Od(t){return Math.exp(t)}function Ld(t){return-Math.log(-t)}function Pd(t){return-Math.exp(-t)}function zd(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Nd(e){return function(t){return-e(-t)}}function Id(t){var l,f,r=t(Rd,Od),h=r.domain,d=10;function e(){var e,n;return l=(n=d)===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n}),f=10===(e=d)?zd:e===Math.E?Math.exp:function(t){return Math.pow(e,t)},h()[0]<0?(l=Nd(l),f=Nd(f),t(Ld,Pd)):t(Rd,Od),r}return r.base=function(t){return arguments.length?(d=+t,e()):d},r.domain=function(t){return arguments.length?(h(t),e()):h()},r.ticks=function(t){var e=h(),n=e[0],i=e[e.length-1];(e=i<n)&&(s=n,n=i,i=s);var r,a,o,s=l(n),c=l(i),t=null==t?10:+t,u=[];if(!(d%1)&&c-s<t){if(s=Math.floor(s),c=Math.ceil(c),0<n){for(;s<=c;++s)for(a=1,r=f(s);a<d;++a)if(!((o=r*a)<n)){if(i<o)break;u.push(o)}}else for(;s<=c;++s)for(a=d-1,r=f(s);1<=a;--a)if(!((o=r*a)<n)){if(i<o)break;u.push(o)}2*u.length<t&&(u=P(n,i,t))}else u=P(s,c,Math.min(c-s,t)).map(f);return e?u.reverse():u},r.tickFormat=function(t,n){if("function"!=typeof(n=null==n?10===d?".0e":",":n)&&(n=s.format(n)),t===1/0)return n;null==t&&(t=10);var i=Math.max(1,d*t/r.ticks().length);return function(t){var e=t/f(Math.round(l(t)));return e*d<d-.5&&(e*=d),e<=i?n(t):""}},r.nice=function(){return h(Dd(h(),{floor:function(t){return f(Math.floor(l(t)))},ceil:function(t){return f(Math.ceil(l(t)))}}))},r}function Fd(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Xd(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Bd(e){var n=1,t=e(Fd(n),Xd(n));return t.constant=function(t){return arguments.length?e(Fd(n=+t),Xd(n)):n},Cd(t)}function $d(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Yd(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function jd(t){return t<0?-t*t:t*t}function Gd(e){var t=e(bd,bd),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(bd,bd):.5===n?e(Yd,jd):e($d(n),$d(1/n)):n},Cd(t)}function Hd(){var t=Gd(Sd());return t.copy=function(){return Md(t,Hd()).exponent(t.exponent())},gd.apply(t,arguments),t}function Ud(t){return Math.sign(t)*t*t}var Vd=new Date,qd=new Date;function Wd(a,o,n,i){function s(t){return a(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return a(t=new Date(+t)),t},s.ceil=function(t){return a(t=new Date(t-1)),o(t,1),a(t),t},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return o(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(t,e,n){var i,r=[];if(t=s.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return r;for(;r.push(i=new Date(+t)),o(t,n),a(t),i<t&&t<e;);return r},s.filter=function(n){return Wd(function(t){if(t<=t)for(;a(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!n(t););else for(;0<=--e;)for(;o(t,1),!n(t););})},n&&(s.count=function(t,e){return Vd.setTime(+t),qd.setTime(+e),a(Vd),a(qd),Math.floor(n(Vd,qd))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?s.filter(i?function(t){return i(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var Zd=Wd(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Zd.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?Wd(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):Zd:null};var Kd=Zd.range;const Jd=1e3,Qd=6e4,tg=36e5,eg=864e5,ng=7*eg,ig=(eg,365*eg);var rg=Wd(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*Jd)},function(t,e){return(e-t)/Jd},function(t){return t.getUTCSeconds()}),ag=rg.range,og=Wd(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jd)},function(t,e){t.setTime(+t+e*Qd)},function(t,e){return(e-t)/Qd},function(t){return t.getMinutes()}),sg=og.range,cg=Wd(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Jd-t.getMinutes()*Qd)},function(t,e){t.setTime(+t+e*tg)},function(t,e){return(e-t)/tg},function(t){return t.getHours()}),ug=cg.range,lg=Wd(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Qd)/eg,t=>t.getDate()-1),fg=lg.range;function hg(e){return Wd(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Qd)/ng})}var dg=hg(0),gg=hg(1),pg=hg(2),vg=hg(3),xg=hg(4),yg=hg(5),_g=hg(6),mg=dg.range,bg=gg.range,wg=pg.range,Tg=vg.range,Ag=xg.range,Mg=yg.range,Sg=_g.range,kg=Wd(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Eg=kg.range,Cg=Wd(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Cg.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Wd(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var Dg=Cg.range,Rg=Wd(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Qd)},function(t,e){return(e-t)/Qd},function(t){return t.getUTCMinutes()}),Og=Rg.range,Lg=Wd(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*tg)},function(t,e){return(e-t)/tg},function(t){return t.getUTCHours()}),Pg=Lg.range,zg=Wd(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/eg},function(t){return t.getUTCDate()-1}),Ng=zg.range;function Ig(e){return Wd(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/ng})}var Fg=Ig(0),Xg=Ig(1),Bg=Ig(2),$g=Ig(3),Yg=Ig(4),jg=Ig(5),Gg=Ig(6),Hg=Fg.range,Ug=Xg.range,Vg=Bg.range,qg=$g.range,Wg=Yg.range,Zg=jg.range,Kg=Gg.range,Jg=Wd(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Qg=Jg.range,tp=Wd(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});tp.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Wd(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var ep=tp.range;function np(s,t,e,n,i,r){const c=[[rg,1,Jd],[rg,5,5e3],[rg,15,15e3],[rg,30,3e4],[r,1,Qd],[r,5,3e5],[r,15,9e5],[r,30,18e5],[i,1,tg],[i,3,3*tg],[i,6,6*tg],[i,12,432e5],[n,1,eg],[n,2,2*eg],[e,1,ng],[t,1,2592e6],[t,3,7776e6],[s,1,ig]];function o(t,e,n){var i=Math.abs(e-t)/n,r=u(([,,t])=>t).right(c,i);if(r===c.length)return s.every(N(t/ig,e/ig,n));if(0===r)return Zd.every(Math.max(N(t,e,n),1));const[a,o]=c[i/c[r-1][2]<c[r][2]/i?r-1:r];return a.every(o)}return[function(t,e,n){var i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:o(t,e,n),a=r?r.range(t,+e+1):[];return i?a.reverse():a},o]}const[ip,rp]=np(tp,Jg,Fg,zg,Lg,Rg),[ap,op]=np(Cg,kg,dg,lg,cg,og);function sp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function cp(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function up(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function lp(t){var i=t.dateTime,r=t.date,a=t.time,e=t.periods,n=t.days,o=t.shortDays,s=t.months,c=t.shortMonths,u=yp(e),l=_p(e),f=yp(n),h=_p(n),d=yp(o),g=_p(o),p=yp(s),v=_p(s),x=yp(c),y=_p(c),_={a:function(t){return o[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Bp,e:Bp,f:Hp,g:nv,G:rv,H:$p,I:Yp,j:jp,L:Gp,m:Up,M:Vp,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:kv,s:Ev,S:qp,u:Wp,U:Zp,V:Jp,w:Qp,W:tv,x:null,X:null,y:ev,Y:iv,Z:av,"%":Sv},m={a:function(t){return o[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:ov,e:ov,f:fv,g:wv,G:Av,H:sv,I:cv,j:uv,L:lv,m:hv,M:dv,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:kv,s:Ev,S:gv,u:pv,U:vv,V:yv,w:_v,W:mv,x:null,X:null,y:bv,Y:Tv,Z:Mv,"%":Sv},b={a:function(t,e,n){e=d.exec(e.slice(n));return e?(t.w=g.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){e=f.exec(e.slice(n));return e?(t.w=h.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){e=x.exec(e.slice(n));return e?(t.m=y.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){e=p.exec(e.slice(n));return e?(t.m=v.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return A(t,i,e,n)},d:Dp,e:Dp,f:Np,g:Sp,G:Mp,H:Op,I:Op,j:Rp,L:zp,m:Cp,M:Lp,p:function(t,e,n){e=u.exec(e.slice(n));return e?(t.p=l.get(e[0].toLowerCase()),n+e[0].length):-1},q:Ep,Q:Fp,s:Xp,S:Pp,u:bp,U:wp,V:Tp,w:mp,W:Ap,x:function(t,e,n){return A(t,r,e,n)},X:function(t,e,n){return A(t,a,e,n)},y:Sp,Y:Mp,Z:kp,"%":Ip};function w(c,u){return function(t){var e,n,i,r=[],a=-1,o=0,s=c.length;for(t instanceof Date||(t=new Date(+t));++a<s;)37===c.charCodeAt(a)&&(r.push(c.slice(o,a)),null!=(n=hp[e=c.charAt(++a)])?e=c.charAt(++a):n="e"===e?" ":"0",(i=u[e])&&(e=i(t,n)),r.push(e),o=a+1);return r.push(c.slice(o,a)),r.join("")}}function T(r,a){return function(t){var e,n,i=up(1900,void 0,1);if(A(i,r,t+="",0)!=t.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(!a||"Z"in i||(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||53<i.V)return null;"w"in i||(i.w=1),"Z"in i?(e=4<(n=(e=cp(up(i.y,0,1))).getUTCDay())||0===n?Xg.ceil(e):Xg(e),e=zg.offset(e,7*(i.V-1)),i.y=e.getUTCFullYear(),i.m=e.getUTCMonth(),i.d=e.getUTCDate()+(i.w+6)%7):(e=4<(n=(e=sp(up(i.y,0,1))).getDay())||0===n?gg.ceil(e):gg(e),e=lg.offset(e,7*(i.V-1)),i.y=e.getFullYear(),i.m=e.getMonth(),i.d=e.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),n="Z"in i?cp(up(i.y,0,1)).getUTCDay():sp(up(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(n+5)%7:i.w+7*i.U-(n+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,cp(i)):sp(i)}}function A(t,e,n,i){for(var r,a,o=0,s=e.length,c=n.length;o<s;){if(c<=i)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(a=b[r in hp?e.charAt(o++):r])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return _.x=w(r,_),_.X=w(a,_),_.c=w(i,_),m.x=w(r,m),m.X=w(a,m),m.c=w(i,m),{format:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=T(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",m);return e.toString=function(){return t},e},utcParse:function(t){var e=T(t+="",!0);return e.toString=function(){return t},e}}}var fp,hp={"-":"",_:" ",0:"0"},dp=/^\s*\d+/,gp=/^%/,pp=/[\\^$*+?|[\]().{}]/g;function vp(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",t=r.length;return i+(t<n?new Array(n-t+1).join(e)+r:r)}function xp(t){return t.replace(pp,"\\$&")}function yp(t){return new RegExp("^(?:"+t.map(xp).join("|")+")","i")}function _p(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function mp(t,e,n){e=dp.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function bp(t,e,n){e=dp.exec(e.slice(n,n+1));return e?(t.u=+e[0],n+e[0].length):-1}function wp(t,e,n){e=dp.exec(e.slice(n,n+2));return e?(t.U=+e[0],n+e[0].length):-1}function Tp(t,e,n){e=dp.exec(e.slice(n,n+2));return e?(t.V=+e[0],n+e[0].length):-1}function Ap(t,e,n){e=dp.exec(e.slice(n,n+2));return e?(t.W=+e[0],n+e[0].length):-1}function Mp(t,e,n){e=dp.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function Sp(t,e,n){e=dp.exec(e.slice(n,n+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function kp(t,e,n){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function Ep(t,e,n){e=dp.exec(e.slice(n,n+1));return e?(t.q=3*e[0]-3,n+e[0].length):-1}function Cp(t,e,n){e=dp.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function Dp(t,e,n){e=dp.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function Rp(t,e,n){e=dp.exec(e.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function Op(t,e,n){e=dp.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function Lp(t,e,n){e=dp.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function Pp(t,e,n){e=dp.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function zp(t,e,n){e=dp.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function Np(t,e,n){e=dp.exec(e.slice(n,n+6));return e?(t.L=Math.floor(e[0]/1e3),n+e[0].length):-1}function Ip(t,e,n){e=gp.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function Fp(t,e,n){e=dp.exec(e.slice(n));return e?(t.Q=+e[0],n+e[0].length):-1}function Xp(t,e,n){e=dp.exec(e.slice(n));return e?(t.s=+e[0],n+e[0].length):-1}function Bp(t,e){return vp(t.getDate(),e,2)}function $p(t,e){return vp(t.getHours(),e,2)}function Yp(t,e){return vp(t.getHours()%12||12,e,2)}function jp(t,e){return vp(1+lg.count(Cg(t),t),e,3)}function Gp(t,e){return vp(t.getMilliseconds(),e,3)}function Hp(t,e){return Gp(t,e)+"000"}function Up(t,e){return vp(t.getMonth()+1,e,2)}function Vp(t,e){return vp(t.getMinutes(),e,2)}function qp(t,e){return vp(t.getSeconds(),e,2)}function Wp(t){t=t.getDay();return 0===t?7:t}function Zp(t,e){return vp(dg.count(Cg(t)-1,t),e,2)}function Kp(t){var e=t.getDay();return 4<=e||0===e?xg(t):xg.ceil(t)}function Jp(t,e){return t=Kp(t),vp(xg.count(Cg(t),t)+(4===Cg(t).getDay()),e,2)}function Qp(t){return t.getDay()}function tv(t,e){return vp(gg.count(Cg(t)-1,t),e,2)}function ev(t,e){return vp(t.getFullYear()%100,e,2)}function nv(t,e){return vp((t=Kp(t)).getFullYear()%100,e,2)}function iv(t,e){return vp(t.getFullYear()%1e4,e,4)}function rv(t,e){var n=t.getDay();return vp((t=4<=n||0===n?xg(t):xg.ceil(t)).getFullYear()%1e4,e,4)}function av(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+vp(t/60|0,"0",2)+vp(t%60,"0",2)}function ov(t,e){return vp(t.getUTCDate(),e,2)}function sv(t,e){return vp(t.getUTCHours(),e,2)}function cv(t,e){return vp(t.getUTCHours()%12||12,e,2)}function uv(t,e){return vp(1+zg.count(tp(t),t),e,3)}function lv(t,e){return vp(t.getUTCMilliseconds(),e,3)}function fv(t,e){return lv(t,e)+"000"}function hv(t,e){return vp(t.getUTCMonth()+1,e,2)}function dv(t,e){return vp(t.getUTCMinutes(),e,2)}function gv(t,e){return vp(t.getUTCSeconds(),e,2)}function pv(t){t=t.getUTCDay();return 0===t?7:t}function vv(t,e){return vp(Fg.count(tp(t)-1,t),e,2)}function xv(t){var e=t.getUTCDay();return 4<=e||0===e?Yg(t):Yg.ceil(t)}function yv(t,e){return t=xv(t),vp(Yg.count(tp(t),t)+(4===tp(t).getUTCDay()),e,2)}function _v(t){return t.getUTCDay()}function mv(t,e){return vp(Xg.count(tp(t)-1,t),e,2)}function bv(t,e){return vp(t.getUTCFullYear()%100,e,2)}function wv(t,e){return vp((t=xv(t)).getUTCFullYear()%100,e,2)}function Tv(t,e){return vp(t.getUTCFullYear()%1e4,e,4)}function Av(t,e){var n=t.getUTCDay();return vp((t=4<=n||0===n?Yg(t):Yg.ceil(t)).getUTCFullYear()%1e4,e,4)}function Mv(){return"+0000"}function Sv(){return"%"}function kv(t){return+t}function Ev(t){return Math.floor(+t/1e3)}function Cv(t){return fp=lp(t),s.timeFormat=fp.format,s.timeParse=fp.parse,s.utcFormat=fp.utcFormat,s.utcParse=fp.utcParse,fp}s.timeFormat=void 0,s.timeParse=void 0,s.utcFormat=void 0,s.utcParse=void 0,Cv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Dv="%Y-%m-%dT%H:%M:%S.%LZ";var Rv=Date.prototype.toISOString?function(t){return t.toISOString()}:s.utcFormat(Dv);var Ov=+new Date("2000-01-01T00:00:00.000Z")?function(t){return t=new Date(t),isNaN(t)?null:t}:s.utcParse(Dv);function Lv(t){return new Date(t)}function Pv(t){return t instanceof Date?+t:+new Date(+t)}function zv(n,i,e,r,a,o,s,c,u,l){var f=kd(),h=f.invert,d=f.domain,g=l(".%L"),p=l(":%S"),v=l("%I:%M"),x=l("%I %p"),y=l("%a %d"),_=l("%b %d"),m=l("%B"),b=l("%Y");function w(t){return(u(t)<t?g:c(t)<t?p:s(t)<t?v:o(t)<t?x:r(t)<t?a(t)<t?y:_:e(t)<t?m:b)(t)}return f.invert=function(t){return new Date(h(t))},f.domain=function(t){return arguments.length?d(Array.from(t,Pv)):d().map(Lv)},f.ticks=function(t){var e=d();return n(e[0],e[e.length-1],null==t?10:t)},f.tickFormat=function(t,e){return null==e?w:l(e)},f.nice=function(t){var e=d();return(t=!t||"function"!=typeof t.range?i(e[0],e[e.length-1],null==t?10:t):t)?d(Dd(e,t)):f},f.copy=function(){return Md(f,zv(n,i,e,r,a,o,s,c,u,l))},f}function Nv(){var e,n,i,r,a,o=0,s=1,c=bd,u=!1;function l(t){return null==t||isNaN(t=+t)?a:c(0===i?.5:(t=(r(t)-e)*i,u?Math.max(0,Math.min(1,t)):t))}function t(n){return function(t){var e;return arguments.length?([e,t]=t,c=n(e,t),l):[c(0),c(1)]}}return l.domain=function(t){return arguments.length?([o,s]=t,e=r(o=+o),n=r(s=+s),i=e===n?0:1/(n-e),l):[o,s]},l.clamp=function(t){return arguments.length?(u=!!t,l):u},l.interpolator=function(t){return arguments.length?(c=t,l):c},l.range=t(Jn),l.rangeRound=t(Qn),l.unknown=function(t){return arguments.length?(a=t,l):a},function(t){return e=(r=t)(o),n=t(s),i=e===n?0:1/(n-e),l}}function Iv(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Fv(){var t=Gd(Nv());return t.copy=function(){return Iv(t,Fv()).exponent(t.exponent())},pd.apply(t,arguments)}function Xv(){var e,n,i,r,a,o,s,c=0,u=.5,l=1,f=1,h=bd,d=!1;function g(t){return isNaN(t=+t)?s:(t=.5+((t=+o(t))-n)*(f*t<f*n?r:a),h(d?Math.max(0,Math.min(1,t)):t))}function t(i){return function(t){var e,n;return arguments.length?([e,n,t]=t,h=yi(i,[e,n,t]),g):[h(0),h(.5),h(1)]}}return g.domain=function(t){return arguments.length?([c,u,l]=t,e=o(c=+c),n=o(u=+u),i=o(l=+l),r=e===n?0:.5/(n-e),a=n===i?0:.5/(i-n),f=n<e?-1:1,g):[c,u,l]},g.clamp=function(t){return arguments.length?(d=!!t,g):d},g.interpolator=function(t){return arguments.length?(h=t,g):h},g.range=t(Jn),g.rangeRound=t(Qn),g.unknown=function(t){return arguments.length?(s=t,g):s},function(t){return e=(o=t)(c),n=t(u),i=t(l),r=e===n?0:.5/(n-e),a=n===i?0:.5/(i-n),f=n<e?-1:1,g}}function Bv(){var t=Gd(Xv());return t.copy=function(){return Iv(t,Bv()).exponent(t.exponent())},pd.apply(t,arguments)}function $v(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}var Yv=$v("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),jv=$v("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Gv=$v("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Hv=$v("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Uv=$v("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Vv=$v("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),qv=$v("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Wv=$v("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Zv=$v("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Kv=$v("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Jv=t=>$n(t[t.length-1]),Qv=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map($v),tx=Jv(Qv),ex=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map($v),nx=Jv(ex),ix=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map($v),rx=Jv(ix),ax=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map($v),ox=Jv(ax),sx=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map($v),cx=Jv(sx),ux=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map($v),lx=Jv(ux),fx=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map($v),hx=Jv(fx),dx=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map($v),gx=Jv(dx),px=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map($v),vx=Jv(px),xx=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map($v),yx=Jv(xx),_x=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map($v),mx=Jv(_x),bx=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map($v),wx=Jv(bx),Tx=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map($v),Ax=Jv(Tx),Mx=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map($v),Sx=Jv(Mx),kx=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map($v),Ex=Jv(kx),Cx=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map($v),Dx=Jv(Cx),Rx=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map($v),Ox=Jv(Rx),Lx=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map($v),Px=Jv(Lx),zx=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map($v),Nx=Jv(zx),Ix=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map($v),Fx=Jv(Ix),Xx=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map($v),Bx=Jv(Xx),$x=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map($v),Yx=Jv($x),jx=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map($v),Gx=Jv(jx),Hx=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map($v),Ux=Jv(Hx),Vx=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map($v),qx=Jv(Vx),Wx=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map($v),Zx=Jv(Wx),Kx=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map($v),Jx=Jv(Kx);var Qx=xi(Cn(300,.5,0),Cn(-240,.5,1)),ty=xi(Cn(-100,.75,.35),Cn(80,1.5,.8)),ey=xi(Cn(260,.75,.35),Cn(80,1.5,.8)),ny=Cn();var iy=He(),ry=Math.PI/3,ay=2*Math.PI/3;function oy(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var sy=oy($v("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),cy=oy($v("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),uy=oy($v("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ly=oy($v("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function fy(t){return function(){return t}}var hy=Math.abs,dy=Math.atan2,gy=Math.cos,py=Math.max,vy=Math.min,xy=Math.sin,yy=Math.sqrt,_y=1e-12,my=Math.PI,by=my/2,wy=2*my;function Ty(t){return 1<=t?by:t<=-1?-by:Math.asin(t)}function Ay(t){return t.innerRadius}function My(t){return t.outerRadius}function Sy(t){return t.startAngle}function ky(t){return t.endAngle}function Ey(t){return t&&t.padAngle}function Cy(t,e,n,i,r,a,o){var s=t-n,c=e-i,u=(o?a:-a)/yy(s*s+c*c),l=u*c,f=-u*s,h=t+l,d=e+f,o=n+l,c=i+f,u=(h+o)/2,s=(d+c)/2,t=o-h,e=c-d,n=t*t+e*e,i=r-a,a=h*c-o*d,h=(e<0?-1:1)*yy(py(0,i*i*n-a*a)),c=(a*e-t*h)/n,o=(-a*t-e*h)/n,d=(a*e+t*h)/n,e=(-a*t+e*h)/n,h=c-u,n=o-s,u=d-u,s=e-s;return u*u+s*s<h*h+n*n&&(c=d,o=e),{cx:c,cy:o,x01:-l,y01:-f,x11:c*(r/i-1),y11:o*(r/i-1)}}var Dy=Array.prototype.slice;function Ry(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Oy(t){this._context=t}function Ly(t){return new Oy(t)}function Py(t){return t[0]}function zy(t){return t[1]}function Ny(o,s){var c=fy(!0),u=null,l=Ly,f=null;function e(t){var e,n,i,r=(t=Ry(t)).length,a=!1;for(null==u&&(f=l(i=Da())),e=0;e<=r;++e)!(e<r&&c(n=t[e],e,t))===a&&((a=!a)?f.lineStart():f.lineEnd()),a&&f.point(+o(n,e,t),+s(n,e,t));if(i)return f=null,i+""||null}return o="function"==typeof o?o:void 0===o?Py:fy(o),s="function"==typeof s?s:void 0===s?zy:fy(s),e.x=function(t){return arguments.length?(o="function"==typeof t?t:fy(+t),e):o},e.y=function(t){return arguments.length?(s="function"==typeof t?t:fy(+t),e):s},e.defined=function(t){return arguments.length?(c="function"==typeof t?t:fy(!!t),e):c},e.curve=function(t){return arguments.length?(l=t,null!=u&&(f=l(u)),e):l},e.context=function(t){return arguments.length?(null==t?u=f=null:f=l(u=t),e):u},e}function Iy(l,f,h){var d=null,g=fy(!0),p=null,v=Ly,x=null;function e(t){var e,n,i,r,a,o=(t=Ry(t)).length,s=!1,c=new Array(o),u=new Array(o);for(null==p&&(x=v(a=Da())),e=0;e<=o;++e){if(!(e<o&&g(r=t[e],e,t))===s)if(s=!s)n=e,x.areaStart(),x.lineStart();else{for(x.lineEnd(),x.lineStart(),i=e-1;n<=i;--i)x.point(c[i],u[i]);x.lineEnd(),x.areaEnd()}s&&(c[e]=+l(r,e,t),u[e]=+f(r,e,t),x.point(d?+d(r,e,t):c[e],h?+h(r,e,t):u[e]))}if(a)return x=null,a+""||null}function t(){return Ny().defined(g).curve(v).context(p)}return l="function"==typeof l?l:void 0===l?Py:fy(+l),f="function"==typeof f?f:fy(void 0===f?0:+f),h="function"==typeof h?h:void 0===h?zy:fy(+h),e.x=function(t){return arguments.length?(l="function"==typeof t?t:fy(+t),d=null,e):l},e.x0=function(t){return arguments.length?(l="function"==typeof t?t:fy(+t),e):l},e.x1=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:fy(+t),e):d},e.y=function(t){return arguments.length?(f="function"==typeof t?t:fy(+t),h=null,e):f},e.y0=function(t){return arguments.length?(f="function"==typeof t?t:fy(+t),e):f},e.y1=function(t){return arguments.length?(h=null==t?null:"function"==typeof t?t:fy(+t),e):h},e.lineX0=e.lineY0=function(){return t().x(l).y(f)},e.lineY1=function(){return t().x(l).y(h)},e.lineX1=function(){return t().x(d).y(f)},e.defined=function(t){return arguments.length?(g="function"==typeof t?t:fy(!!t),e):g},e.curve=function(t){return arguments.length?(v=t,null!=p&&(x=v(p)),e):v},e.context=function(t){return arguments.length?(null==t?p=x=null:x=v(p=t),e):p},e}function Fy(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function Xy(t){return t}Oy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var By=Yy(Ly);function $y(t){this._curve=t}function Yy(e){function t(t){return new $y(e(t))}return t._curve=e,t}function jy(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Yy(t)):e()._curve},t}function Gy(){return jy(Ny().curve(By))}function Hy(){var t=Iy().curve(By),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return jy(n())},delete t.lineX0,t.lineEndAngle=function(){return jy(i())},delete t.lineX1,t.lineInnerRadius=function(){return jy(r())},delete t.lineY0,t.lineOuterRadius=function(){return jy(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Yy(t)):e()._curve},t}function Uy(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}function Vy(t){return t.source}function qy(t){return t.target}function Wy(r){var a=Vy,o=qy,s=Py,c=zy,u=null;function e(){var t,e=Dy.call(arguments),n=a.apply(this,e),i=o.apply(this,e);if(u=u||(t=Da()),r(u,+s.apply(this,(e[0]=n,e)),+c.apply(this,e),+s.apply(this,(e[0]=i,e)),+c.apply(this,e)),t)return u=null,t+""||null}return e.source=function(t){return arguments.length?(a=t,e):a},e.target=function(t){return arguments.length?(o=t,e):o},e.x=function(t){return arguments.length?(s="function"==typeof t?t:fy(+t),e):s},e.y=function(t){return arguments.length?(c="function"==typeof t?t:fy(+t),e):c},e.context=function(t){return arguments.length?(u=null==t?null:t,e):u},e}function Zy(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,r,i,r)}function Ky(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,i,n,i,r)}function Jy(t,e,n,i,r){var a=Uy(e,n),e=Uy(e,n=(n+r)/2),n=Uy(i,n),r=Uy(i,r);t.moveTo(a[0],a[1]),t.bezierCurveTo(e[0],e[1],n[0],n[1],r[0],r[1])}$y.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Qy={draw:function(t,e){e=Math.sqrt(e/my);t.moveTo(e,0),t.arc(0,0,e,0,wy)}},t={draw:function(t,e){e=Math.sqrt(e/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},t_=Math.sqrt(1/3),e_=2*t_,Ee={draw:function(t,e){var n=Math.sqrt(e/e_),e=n*t_;t.moveTo(0,-n),t.lineTo(e,0),t.lineTo(0,n),t.lineTo(-e,0),t.closePath()}},De=Math.sin(my/10)/Math.sin(7*my/10),n_=Math.sin(wy/10)*De,i_=-Math.cos(wy/10)*De,Ce={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=n_*n,r=i_*n;t.moveTo(0,-n),t.lineTo(i,r);for(var a=1;a<5;++a){var o=wy*a/5,s=Math.cos(o),o=Math.sin(o);t.lineTo(o*n,-s*n),t.lineTo(s*i-o*r,o*i+s*r)}t.closePath()}},lr={draw:function(t,e){var n=Math.sqrt(e),e=-n/2;t.rect(e,e,n,n)}},r_=Math.sqrt(3),Lr={draw:function(t,e){e=-Math.sqrt(e/(3*r_));t.moveTo(0,2*e),t.lineTo(-r_*e,-e),t.lineTo(r_*e,-e),t.closePath()}},a_=-.5,o_=Math.sqrt(3)/2,s_=1/Math.sqrt(12),c_=3*(s_/2+1),ya={draw:function(t,e){var n=Math.sqrt(e/c_),i=n/2,r=n*s_,a=i,o=n*s_+n,e=-a,n=o;t.moveTo(i,r),t.lineTo(a,o),t.lineTo(e,n),t.lineTo(a_*i-o_*r,o_*i+a_*r),t.lineTo(a_*a-o_*o,o_*a+a_*o),t.lineTo(a_*e-o_*n,o_*e+a_*n),t.lineTo(a_*i+o_*r,a_*r-o_*i),t.lineTo(a_*a+o_*o,a_*o-o_*a),t.lineTo(a_*e+o_*n,a_*n-o_*e),t.closePath()}},To=[Qy,t,Ee,lr,Ce,Lr,ya];function u_(){}function l_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function f_(t){this._context=t}function h_(t){this._context=t}function d_(t){this._context=t}f_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:l_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:l_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},h_.prototype={areaStart:u_,areaEnd:u_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:l_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},d_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:l_(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};class g_{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function p_(t,e){this._basis=new f_(t),this._beta=e}p_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(0<n)for(var i,r=t[0],a=e[0],o=t[n]-r,s=e[n]-a,c=-1;++c<=n;)this._basis.point(this._beta*t[c]+(1-this._beta)*(r+(i=c/n)*o),this._beta*e[c]+(1-this._beta)*(a+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};Ro=function e(n){function t(t){return 1===n?new f_(t):new p_(t,n)}return t.beta=function(t){return e(+t)},t}(.85);function v_(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function x_(t,e){this._context=t,this._k=(1-e)/6}x_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:v_(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:v_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};as=function e(n){function t(t){return new x_(t,n)}return t.tension=function(t){return e(+t)},t}(0);function y_(t,e){this._context=t,this._k=(1-e)/6}y_.prototype={areaStart:u_,areaEnd:u_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:v_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};jh=function e(n){function t(t){return new y_(t,n)}return t.tension=function(t){return e(+t)},t}(0);function __(t,e){this._context=t,this._k=(1-e)/6}__.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:v_(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};Wh=function e(n){function t(t){return new __(t,n)}return t.tension=function(t){return e(+t)},t}(0);function m_(t,e,n){var i,r,a=t._x1,o=t._y1,s=t._x2,c=t._y2;t._l01_a>_y&&(i=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,r=3*t._l01_a*(t._l01_a+t._l12_a),a=(a*i-t._x0*t._l12_2a+t._x2*t._l01_2a)/r,o=(o*i-t._y0*t._l12_2a+t._y2*t._l01_2a)/r),t._l23_a>_y&&(i=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,r=3*t._l23_a*(t._l23_a+t._l12_a),s=(s*i+t._x1*t._l23_2a-e*t._l12_2a)/r,c=(c*i+t._y1*t._l23_2a-n*t._l12_2a)/r),t._context.bezierCurveTo(a,o,s,c,t._x2,t._y2)}function b_(t,e){this._context=t,this._alpha=e}b_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n,i;switch(t=+t,e=+e,this._point&&(n=this._x2-t,i=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:m_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};Dv=function e(n){function t(t){return n?new b_(t,n):new x_(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function w_(t,e){this._context=t,this._alpha=e}w_.prototype={areaStart:u_,areaEnd:u_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){var n,i;switch(t=+t,e=+e,this._point&&(n=this._x2-t,i=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))),this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:m_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};Jv=function e(n){function t(t){return n?new w_(t,n):new y_(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function T_(t,e){this._context=t,this._alpha=e}T_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n,i;switch(t=+t,e=+e,this._point&&(n=this._x2-t,i=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))),this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:m_(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};De=function e(n){function t(t){return n?new T_(t,n):new __(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function A_(t){this._context=t}function M_(t){return t<0?-1:1}function S_(t,e,n){var i=t._x1-t._x0,r=e-t._x1,e=(t._y1-t._y0)/(i||r<0&&-0),t=(n-t._y1)/(r||i<0&&-0),r=(e*r+t*i)/(i+r);return(M_(e)+M_(t))*Math.min(Math.abs(e),Math.abs(t),.5*Math.abs(r))||0}function k_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function E_(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function C_(t){this._context=t}function D_(t){this._context=new R_(t)}function R_(t){this._context=t}function O_(t){this._context=t}function L_(t){var e,n,i=t.length-1,r=new Array(i),a=new Array(i),o=new Array(i);for(a[r[0]=0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,a[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/a[i-1],e=i-2;0<=e;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function P_(t,e){this._context=t,this._t=e}function z_(t,e){if(1<(r=t.length))for(var n,i,r,a=1,o=t[e[0]],s=o.length;a<r;++a)for(i=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function N_(t){for(var e=t.length,n=new Array(e);0<=--e;)n[e]=e;return n}function I_(t,e){return t[e]}function F_(t){const e=[];return e.key=t,e}function X_(t){var n=t.map(B_);return N_(t).sort(function(t,e){return n[t]-n[e]})}function B_(t){for(var e,n=-1,i=0,r=t.length,a=-1/0;++n<r;)(e=+t[n][1])>a&&(a=e,i=n);return i}function $_(t){var n=t.map(Y_);return N_(t).sort(function(t,e){return n[t]-n[e]})}function Y_(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}A_.prototype={areaStart:u_,areaEnd:u_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},C_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:E_(this,this._t0,k_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,E_(this,k_(this,n=S_(this,t,e)),n);break;default:E_(this,this._t0,n=S_(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(D_.prototype=Object.create(C_.prototype)).point=function(t,e){C_.prototype.point.call(this,e,t)},R_.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}},O_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=L_(t),r=L_(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},P_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:var n;this._t<=0?(this._context.lineTo(this._x,e),this._context.lineTo(t,e)):(n=this._x*(1-this._t)+t*this._t,this._context.lineTo(n,this._y),this._context.lineTo(n,e))}this._x=t,this._y=e}};var j_=t=>()=>t;function G_(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function H_(t,e,n){this.k=t,this.x=e,this.y=n}H_.prototype={constructor:H_,scale:function(t){return 1===t?this:new H_(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new H_(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var U_=new H_(1,0,0);function V_(t){for(;!t.__zoom;)if(!(t=t.parentNode))return U_;return t.__zoom}function q_(t){t.stopImmediatePropagation()}function W_(t){t.preventDefault(),t.stopImmediatePropagation()}function Z_(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function K_(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function J_(){return this.__zoom||U_}function Q_(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function tm(){return navigator.maxTouchPoints||"ontouchstart"in this}function em(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],n=t.invertY(e[1][1])-n[1][1];return t.translate(i<r?(i+r)/2:Math.min(0,i)||Math.max(0,r),a<n?(a+n)/2:Math.min(0,a)||Math.max(0,n))}V_.prototype=H_.prototype,s.Adder=k,s.Delaunay=class r{static from(t,e=function(t){return t[0]},n=function(t){return t[1]},i){return new r("length"in t?function(e,n,i,r){const a=e.length,o=new Float64Array(2*a);for(let t=0;t<a;++t){var s=e[t];o[2*t]=n.call(r,s,t,e),o[2*t+1]=i.call(r,s,t,e)}return o}(t,e,n,i):Float64Array.from(function*(t,e,n,i){let r=0;for(const a of t)yield e.call(i,a,r,t),yield n.call(i,a,r,t),++r}(t,e,n,i)))}constructor(t){this._delaunator=new eo(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&2<t.hull.length&&function(t){var{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){var i=2*e[t],r=2*e[t+1],a=2*e[t+2];if(1e-10<(n[a]-n[i])*(n[1+r]-n[1+i])-(n[r]-n[i])*(n[1+a]-n[1+i]))return}return 1}(t)){this.collinear=Int32Array.from({length:n.length/2},(t,e)=>e).sort((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]);var e=this.collinear[0],i=this.collinear[this.collinear.length-1],i=[n[2*e],n[2*e+1],n[2*i],n[2*i+1]],r=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let t=0,e=n.length/2;t<e;++t)a=n[2*t],o=n[2*t+1],s=r,s=[a+Math.sin(a+o)*s,o+Math.cos(a-o)*s],n[2*t]=s[0],n[2*t+1]=s[1];this._delaunator=new eo(n)}else delete this.collinear;var a,o,s,c=this.halfedges=this._delaunator.halfedges,u=this.hull=this._delaunator.hull,l=this.triangles=this._delaunator.triangles;const f=this.inedges.fill(-1),h=this._hullIndex.fill(-1);for(let t=0,e=c.length;t<e;++t){var d=l[t%3==2?t-2:t+1];-1!==c[t]&&-1!==f[d]||(f[d]=t)}for(let t=0,e=u.length;t<e;++t)h[u[t]]=t;u.length<=2&&0<u.length&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=u[0],this.triangles[1]=u[1],this.triangles[2]=u[1],f[u[0]]=1,2===u.length&&(f[u[1]]=0))}voronoi(t){return new uo(this,t)}*neighbors(n){const{inedges:t,hull:i,_hullIndex:r,halfedges:a,triangles:o,collinear:e}=this;if(e){var s=e.indexOf(n);return 0<s&&(yield e[s-1]),void(s<e.length-1&&(yield e[s+1]))}var c=t[n];if(-1!==c){let t=c,e;do{if(yield e=o[t],t=t%3==2?t-2:t+1,o[t]!==n)return;if(t=a[t],-1===t){var u=i[(r[n]+1)%i.length];return void(u!==e&&(yield u))}}while(t!==c)}}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;var i=n;let r;for(;0<=(r=this._step(n,t,e))&&r!==n&&r!==i;)n=r;return r}_step(t,e,n){var{inedges:i,hull:r,_hullIndex:a,halfedges:o,triangles:s,points:c}=this;if(-1===i[t]||!c.length)return(t+1)%(c.length>>1);let u=t,l=fo(e-c[2*t],2)+fo(n-c[2*t+1],2);var f=i[t];let h=f;do{var d=s[h],g=fo(e-c[2*d],2)+fo(n-c[2*d+1],2);if(g<l&&(l=g,u=d),h=h%3==2?h-2:h+1,s[h]!==t)break;if(h=o[h],-1===h){if(h=r[(a[t]+1)%r.length],h!==d&&fo(e-c[2*h],2)+fo(n-c[2*h+1],2)<l)return h;break}}while(h!==f);return u}render(n){const t=null==n?n=new so:void 0;var{points:i,halfedges:r,triangles:a}=this;for(let t=0,e=r.length;t<e;++t){var o,s=r[t];s<t||(o=2*a[t],s=2*a[s],n.moveTo(i[o],i[1+o]),n.lineTo(i[s],i[1+s]))}return this.renderHull(n),t&&t.value()}renderPoints(n,i=2){const t=null==n?n=new so:void 0;var{points:r}=this;for(let t=0,e=r.length;t<e;t+=2){var a=r[t],o=r[t+1];n.moveTo(a+i,o),n.arc(a,o,i,0,lo)}return t&&t.value()}renderHull(e){const t=null==e?e=new so:void 0;var{hull:n,points:i}=this;const r=2*n[0],a=n.length;e.moveTo(i[r],i[r+1]);for(let t=1;t<a;++t){const r=2*n[t];e.lineTo(i[r],i[1+r])}return e.closePath(),t&&t.value()}hullPolygon(){const t=new co;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new so:void 0;var{points:i,triangles:r}=this,a=2*r[t*=3],o=2*r[t+1],t=2*r[t+2];return e.moveTo(i[a],i[1+a]),e.lineTo(i[o],i[1+o]),e.lineTo(i[t],i[1+t]),e.closePath(),n&&n.value()}*trianglePolygons(){var{triangles:n}=this;for(let t=0,e=n.length/3;t<e;++t)yield this.trianglePolygon(t)}trianglePolygon(t){const e=new co;return this.renderTriangle(t,e),e.value()}},s.FormatSpecifier=Ts,s.InternMap=d,s.InternSet=g,s.Voronoi=uo,s.active=function(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>Yi&&n.name===e)return new cr([[t]],Yr,e,+i);return null},s.arc=function(){var E=Ay,C=My,D=fy(0),R=null,O=Sy,L=ky,P=Ey,z=null;function e(){var t,e,n,i,r,a,o,s,c,u,l,f,h,d,g,p,v,x,y,_,m,b,w=+E.apply(this,arguments),T=+C.apply(this,arguments),A=O.apply(this,arguments)-by,M=L.apply(this,arguments)-by,S=hy(M-A),k=A<M;if(z=z||(t=Da()),T<w&&(l=T,T=w,w=l),_y<T?wy-_y<S?(z.moveTo(T*gy(A),T*xy(A)),z.arc(0,0,T,A,M,!k),_y<w&&(z.moveTo(w*gy(M),w*xy(M)),z.arc(0,0,w,M,A,k))):(i=e=A,r=n=M,o=a=S,h=P.apply(this,arguments)/2,f=_y<h&&(R?+R.apply(this,arguments):yy(w*w+T*T)),b=m=s=vy(hy(T-w)/2,+D.apply(this,arguments)),_y<f&&(d=Ty(f/w*xy(h)),y=Ty(f/T*xy(h)),(a-=2*d)>_y?(i+=d*=k?1:-1,r-=d):(a=0,i=r=(A+M)/2),(o-=2*y)>_y?(e+=y*=k?1:-1,n-=y):(o=0,e=n=(A+M)/2)),l=T*gy(e),f=T*xy(e),h=w*gy(r),d=w*xy(r),_y<s&&(g=T*gy(n),p=T*xy(n),v=w*gy(i),x=w*xy(i),S<my&&(_=function(t,e,n,i,r,a,o,s){var c=n-t,n=i-e,i=o-r;if(!((s=(o=s-a)*c-i*n)*s<_y))return[t+(s=(i*(e-a)-o*(t-r))/s)*c,e+s*n]}(l,f,v,x,g,p,h,d))&&(y=l-_[0],A=f-_[1],M=g-_[0],S=p-_[1],S=1/xy((1<(S=(y*M+A*S)/(yy(y*y+A*A)*yy(M*M+S*S)))?0:S<-1?my:Math.acos(S))/2),_=yy(_[0]*_[0]+_[1]*_[1]),m=vy(s,(w-_)/(S-1)),b=vy(s,(T-_)/(1+S)))),_y<o?_y<b?(c=Cy(v,x,l,f,T,b,k),u=Cy(g,p,h,d,T,b,k),z.moveTo(c.cx+c.x01,c.cy+c.y01),b<s?z.arc(c.cx,c.cy,b,dy(c.y01,c.x01),dy(u.y01,u.x01),!k):(z.arc(c.cx,c.cy,b,dy(c.y01,c.x01),dy(c.y11,c.x11),!k),z.arc(0,0,T,dy(c.cy+c.y11,c.cx+c.x11),dy(u.cy+u.y11,u.cx+u.x11),!k),z.arc(u.cx,u.cy,b,dy(u.y11,u.x11),dy(u.y01,u.x01),!k))):(z.moveTo(l,f),z.arc(0,0,T,e,n,!k)):z.moveTo(l,f),_y<w&&_y<a?_y<m?(c=Cy(h,d,g,p,w,-m,k),u=Cy(l,f,v,x,w,-m,k),z.lineTo(c.cx+c.x01,c.cy+c.y01),m<s?z.arc(c.cx,c.cy,m,dy(c.y01,c.x01),dy(u.y01,u.x01),!k):(z.arc(c.cx,c.cy,m,dy(c.y01,c.x01),dy(c.y11,c.x11),!k),z.arc(0,0,w,dy(c.cy+c.y11,c.cx+c.x11),dy(u.cy+u.y11,u.cx+u.x11),k),z.arc(u.cx,u.cy,m,dy(u.y11,u.x11),dy(u.y01,u.x01),!k))):z.arc(0,0,w,r,i,k):z.lineTo(h,d)):z.moveTo(0,0),z.closePath(),t)return z=null,t+""||null}return e.centroid=function(){var t=(+E.apply(this,arguments)+ +C.apply(this,arguments))/2,e=(+O.apply(this,arguments)+ +L.apply(this,arguments))/2-my/2;return[gy(e)*t,xy(e)*t]},e.innerRadius=function(t){return arguments.length?(E="function"==typeof t?t:fy(+t),e):E},e.outerRadius=function(t){return arguments.length?(C="function"==typeof t?t:fy(+t),e):C},e.cornerRadius=function(t){return arguments.length?(D="function"==typeof t?t:fy(+t),e):D},e.padRadius=function(t){return arguments.length?(R=null==t?null:"function"==typeof t?t:fy(+t),e):R},e.startAngle=function(t){return arguments.length?(O="function"==typeof t?t:fy(+t),e):O},e.endAngle=function(t){return arguments.length?(L="function"==typeof t?t:fy(+t),e):L},e.padAngle=function(t){return arguments.length?(P="function"==typeof t?t:fy(+t),e):P},e.context=function(t){return arguments.length?(z=null==t?null:t,e):z},e},s.area=Iy,s.areaRadial=Hy,s.ascending=h,s.autoType=function(t){for(var e in t){var n,i,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Xo&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;t[e]=r}return t},s.axisBottom=function(t){return pt(st,t)},s.axisLeft=function(t){return pt(ct,t)},s.axisRight=function(t){return pt(ot,t)},s.axisTop=function(t){return pt(at,t)},s.bin=X,s.bisect=v,s.bisectCenter=n,s.bisectLeft=e,s.bisectRight=v,s.bisector=u,s.blob=function(t,e){return fetch(t,e).then(Bo)},s.brush=function(){return ga(ia)},s.brushSelection=function(t){return(t=t.__brush)?t.dim.output(t.selection):null},s.brushX=function(){return ga(ea)},s.brushY=function(){return ga(na)},s.buffer=function(t,e){return fetch(t,e).then($o)},s.chord=function(){return Aa(!1,!1)},s.chordDirected=function(){return Aa(!0,!1)},s.chordTranspose=function(){return Aa(!1,!0)},s.cluster=function(){var s=rh,c=1,u=1,l=!1;function e(e){var i,r=0;e.eachAfter(function(t){var e,n=t.children;n?(t.x=(e=n).reduce(ah,0)/e.length,t.y=1+n.reduce(oh,0)):(t.x=i?r+=s(t,i):0,t.y=0,i=t)});var t=function(t){for(var e;e=t.children;)t=e[0];return t}(e),n=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(e),a=t.x-s(t,n)/2,o=n.x+s(n,t)/2;return e.eachAfter(l?function(t){t.x=(t.x-e.x)*c,t.y=(e.y-t.y)*u}:function(t){t.x=(t.x-a)/(o-a)*c,t.y=(1-(e.y?t.y/e.y:1))*u})}return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(l=!1,c=+t[0],u=+t[1],e):l?null:[c,u]},e.nodeSize=function(t){return arguments.length?(l=!0,c=+t[0],u=+t[1],e):l?[c,u]:null},e},s.color=$e,s.contourDensity=function(){var o=Za,s=Ka,c=Ja,n=960,i=500,r=20,u=2,l=3*r,f=n+2*l>>u,h=i+2*l>>u,d=ja(20);function e(t){var a=new Float32Array(f*h),e=new Float32Array(f*h);t.forEach(function(t,e,n){var i=+o(t,e,n)+l>>u,r=+s(t,e,n)+l>>u,n=+c(t,e,n);0<=i&&i<f&&0<=r&&r<h&&(a[i+r*f]+=n)}),qa({width:f,height:h,data:a},{width:f,height:h,data:e},r>>u),Wa({width:f,height:h,data:e},{width:f,height:h,data:a},r>>u),qa({width:f,height:h,data:a},{width:f,height:h,data:e},r>>u),Wa({width:f,height:h,data:e},{width:f,height:h,data:a},r>>u),qa({width:f,height:h,data:a},{width:f,height:h,data:e},r>>u),Wa({width:f,height:h,data:e},{width:f,height:h,data:a},r>>u);t=d(a);return Array.isArray(t)||(t=N(0,e=B(a),t),(t=W(0,Math.floor(e/t)*t,t)).shift()),Va().thresholds(t).size([f,h])(a).map(g)}function g(t){return t.value*=Math.pow(2,-2*u),t.coordinates.forEach(a),t}function a(t){t.forEach(p)}function p(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,u)-l,t[1]=t[1]*Math.pow(2,u)-l}function x(){return f=n+2*(l=3*r)>>u,h=i+2*l>>u,e}return e.x=function(t){return arguments.length?(o="function"==typeof t?t:ja(+t),e):o},e.y=function(t){return arguments.length?(s="function"==typeof t?t:ja(+t),e):s},e.weight=function(t){return arguments.length?(c="function"==typeof t?t:ja(+t),e):c},e.size=function(t){if(!arguments.length)return[n,i];var e=+t[0],t=+t[1];if(!(0<=e&&0<=t))throw new Error("invalid size");return n=e,i=t,x()},e.cellSize=function(t){if(!arguments.length)return 1<<u;if(!(1<=(t=+t)))throw new Error("invalid cell size");return u=Math.floor(Math.log(t)/Math.LN2),x()},e.thresholds=function(t){return arguments.length?(d="function"==typeof t?t:Array.isArray(t)?ja($a.call(t)):ja(t),e):d},e.bandwidth=function(t){if(!arguments.length)return Math.sqrt(r*(r+1));if(!(0<=(t=+t)))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*t*t+1)-1)/2),x()},e},s.contours=Va,s.count=i,s.create=function(t){return ce(Tt(t).call(document.documentElement))},s.creator=Tt,s.cross=function(...n){var e,i="function"==typeof n[n.length-1]&&(e=n.pop(),t=>e(...t));const r=(n=n.map(f)).map(c);var a=n.length-1;const o=new Array(1+a).fill(0),s=[];if(a<0||r.some(l))return s;for(;;){s.push(o.map((t,e)=>n[e][t]));let t=a;for(;++o[t]===r[t];){if(0===t)return i?s.map(i):s;o[t--]=0}}},s.csv=Ho,s.csvFormat=So,s.csvFormatBody=ko,s.csvFormatRow=Co,s.csvFormatRows=Eo,s.csvFormatValue=Do,s.csvParse=Ao,s.csvParseRows=Mo,s.cubehelix=Cn,s.cumsum=function(e,n){var i=0,r=0;return Float64Array.from(e,void 0===n?t=>i+=+t||0:t=>i+=+n(t,r++,e)||0)},s.curveBasis=function(t){return new f_(t)},s.curveBasisClosed=function(t){return new h_(t)},s.curveBasisOpen=function(t){return new d_(t)},s.curveBumpX=function(t){return new g_(t,!0)},s.curveBumpY=function(t){return new g_(t,!1)},s.curveBundle=Ro,s.curveCardinal=as,s.curveCardinalClosed=jh,s.curveCardinalOpen=Wh,s.curveCatmullRom=Dv,s.curveCatmullRomClosed=Jv,s.curveCatmullRomOpen=De,s.curveLinear=Ly,s.curveLinearClosed=function(t){return new A_(t)},s.curveMonotoneX=function(t){return new C_(t)},s.curveMonotoneY=function(t){return new D_(t)},s.curveNatural=function(t){return new O_(t)},s.curveStep=function(t){return new P_(t,.5)},s.curveStepAfter=function(t){return new P_(t,1)},s.curveStepBefore=function(t){return new P_(t,0)},s.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},s.deviation=o,s.difference=function(t,...e){t=new Set(t);for(const n of e)for(const i of n)t.delete(i);return t},s.disjoint=function(t,e){const n=e[Symbol.iterator](),i=new Set;for(const o of t){if(i.has(o))return!1;for(var r,a;({value:r,done:a}=n.next())&&!a;){if(Object.is(o,r))return!1;i.add(r)}}return!0},s.dispatch=xt,s.drag=function(){var i,r,a,o,s=me,c=be,n=we,e=Te,p={},v=xt("start","drag","end"),x=0,u=0;function y(t){t.on("mousedown.drag",l).filter(e).on("touchstart.drag",d).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(t,e){o||!s.call(this,t,e)||(e=m(this,c.call(this,t,e),t,e,"mouse"))&&(ce(t.view).on("mousemove.drag",f,!0).on("mouseup.drag",h,!0),ve(t.view),ge(t),a=!1,i=t.clientX,r=t.clientY,e("start",t))}function f(t){var e,n;pe(t),a||(e=t.clientX-i,n=t.clientY-r,a=u<e*e+n*n),p.mouse("drag",t)}function h(t){ce(t.view).on("mousemove.drag mouseup.drag",null),xe(t.view,a),pe(t),p.mouse("end",t)}function d(t,e){if(s.call(this,t,e))for(var n,i=t.changedTouches,r=c.call(this,t,e),a=i.length,o=0;o<a;++o)(n=m(this,r,t,e,i[o].identifier,i[o]))&&(ge(t),n("start",t,i[o]))}function g(t){for(var e,n=t.changedTouches,i=n.length,r=0;r<i;++r)(e=p[n[r].identifier])&&(pe(t),e("drag",t,n[r]))}function _(t){var e,n,i=t.changedTouches,r=i.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<r;++e)(n=p[i[e].identifier])&&(ge(t),n("end",t,i[e]))}function m(o,s,t,c,u,e){var l,f,h,d=v.copy(),g=de(e||t,s);if(null!=(h=n.call(o,new _e("beforestart",{sourceEvent:t,target:y,identifier:u,active:x,x:g[0],y:g[1],dx:0,dy:0,dispatch:d}),c)))return l=h.x-g[0]||0,f=h.y-g[1]||0,function t(e,n,i){var r,a=g;switch(e){case"start":p[u]=t,r=x++;break;case"end":delete p[u],--x;case"drag":g=de(i||n,s),r=x}d.call(e,o,new _e(e,{sourceEvent:n,subject:h,target:y,identifier:u,active:r,x:g[0]+l,y:g[1]+f,dx:g[0]-a[0],dy:g[1]-a[1],dispatch:d}),c)}}return y.filter=function(t){return arguments.length?(s="function"==typeof t?t:ye(!!t),y):s},y.container=function(t){return arguments.length?(c="function"==typeof t?t:ye(t),y):c},y.subject=function(t){return arguments.length?(n="function"==typeof t?t:ye(t),y):n},y.touchable=function(t){return arguments.length?(e="function"==typeof t?t:ye(!!t),y):e},y.on=function(){var t=v.on.apply(v,arguments);return t===v?y:t},y.clickDistance=function(t){return arguments.length?(u=(t=+t)*t,y):Math.sqrt(u)},y},s.dragDisable=ve,s.dragEnable=xe,s.dsv=function(t,e,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=wo(t);return jo(e,n).then(function(t){return r.parse(t,i)})},s.dsvFormat=wo,s.easeBack=Nr,s.easeBackIn=Pr,s.easeBackInOut=Nr,s.easeBackOut=zr,s.easeBounce=Or,s.easeBounceIn=function(t){return 1-Or(1-t)},s.easeBounceInOut=function(t){return((t*=2)<=1?1-Or(1-t):Or(t-1)+1)/2},s.easeBounceOut=Or,s.easeCircle=br,s.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},s.easeCircleInOut=br,s.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},s.easeCubic=hr,s.easeCubicIn=function(t){return t*t*t},s.easeCubicInOut=hr,s.easeCubicOut=function(t){return--t*t*t+1},s.easeElastic=Xr,s.easeElasticIn=Fr,s.easeElasticInOut=Br,s.easeElasticOut=Xr,s.easeExp=mr,s.easeExpIn=function(t){return _r(1-+t)},s.easeExpInOut=mr,s.easeExpOut=function(t){return 1-_r(t)},s.easeLinear=t=>+t,s.easePoly=pr,s.easePolyIn=dr,s.easePolyInOut=pr,s.easePolyOut=gr,s.easeQuad=fr,s.easeQuadIn=function(t){return t*t},s.easeQuadInOut=fr,s.easeQuadOut=function(t){return t*(2-t)},s.easeSin=yr,s.easeSinIn=function(t){return 1==+t?1:1-Math.cos(t*xr)},s.easeSinInOut=yr,s.easeSinOut=function(t){return Math.sin(t*xr)},s.every=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(!e(i,++n,t))return!1;return!0},s.extent=x,s.fcumsum=function(e,n){const i=new k;let r=-1;return Float64Array.from(e,void 0===n?t=>i.add(+t||0):t=>i.add(+n(t,++r,e)||0))},s.filter=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let i=-1;for(const r of t)e(r,++i,t)&&n.push(r);return n},s.forceCenter=function(a,o){var s,c=1;function e(){for(var t,e=s.length,n=0,i=0,r=0;r<e;++r)n+=(t=s[r]).x,i+=t.y;for(n=(n/e-a)*c,i=(i/e-o)*c,r=0;r<e;++r)(t=s[r]).x-=n,t.y-=i}return null==a&&(a=0),null==o&&(o=0),e.initialize=function(t){s=t},e.x=function(t){return arguments.length?(a=+t,e):a},e.y=function(t){return arguments.length?(o=+t,e):o},e.strength=function(t){return arguments.length?(c=+t,e):c},e},s.forceCollide=function(i){var a,o,h,d=1,g=1;function e(){for(var t,e,s,c,u,l,f,n=a.length,i=0;i<g;++i)for(e=ns(a,cs,us).visitAfter(p),t=0;t<n;++t)s=a[t],l=o[s.index],f=l*l,c=s.x+s.vx,u=s.y+s.vy,e.visit(r);function r(t,e,n,i,r){var a=t.data,o=t.r,t=l+o;if(!a)return c+t<e||i<c-t||u+t<n||r<u-t;a.index>s.index&&((r=(i=c-a.x-a.vx)*i+(n=u-a.y-a.vy)*n)<t*t&&(0===i&&(r+=(i=ss(h))*i),0===n&&(r+=(n=ss(h))*n),r=(t-(r=Math.sqrt(r)))/r*d,s.vx+=(i*=r)*(t=(o*=o)/(f+o)),s.vy+=(n*=r)*t,a.vx-=i*(t=1-t),a.vy-=n*t))}}function p(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function n(){if(a){var t,e,n=a.length;for(o=new Array(n),t=0;t<n;++t)e=a[t],o[e.index]=+i(e,t,a)}}return"function"!=typeof i&&(i=os(null==i?1:+i)),e.initialize=function(t,e){a=t,h=e,n()},e.iterations=function(t){return arguments.length?(g=+t,e):g},e.strength=function(t){return arguments.length?(d=+t,e):d},e.radius=function(t){return arguments.length?(i="function"==typeof t?t:os(+t),n(),e):i},e},s.forceLink=function(u){var l,f,a,o,h,d,s=ls,n=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},i=os(30),g=1;function e(t){for(var e=0,n=u.length;e<g;++e)for(var i,r,a,o,s,c=0;c<n;++c)i=(s=u[c]).source,a=(r=s.target).x+r.vx-i.x-i.vx||ss(d),o=r.y+r.vy-i.y-i.vy||ss(d),a*=s=((s=Math.sqrt(a*a+o*o))-f[c])/s*t*l[c],o*=s,r.vx-=a*(s=h[c]),r.vy-=o*s,i.vx+=a*(s=1-s),i.vy+=o*s}function r(){if(a){var t,e=a.length,n=u.length,i=new Map(a.map((t,e)=>[s(t,e,a),t])),r=0;for(o=new Array(e);r<n;++r)(t=u[r]).index=r,"object"!=typeof t.source&&(t.source=fs(i,t.source)),"object"!=typeof t.target&&(t.target=fs(i,t.target)),o[t.source.index]=(o[t.source.index]||0)+1,o[t.target.index]=(o[t.target.index]||0)+1;for(r=0,h=new Array(n);r<n;++r)t=u[r],h[r]=o[t.source.index]/(o[t.source.index]+o[t.target.index]);l=new Array(n),c(),f=new Array(n),p()}}function c(){if(a)for(var t=0,e=u.length;t<e;++t)l[t]=+n(u[t],t,u)}function p(){if(a)for(var t=0,e=u.length;t<e;++t)f[t]=+i(u[t],t,u)}return null==u&&(u=[]),e.initialize=function(t,e){a=t,d=e,r()},e.links=function(t){return arguments.length?(u=t,r(),e):u},e.id=function(t){return arguments.length?(s=t,e):s},e.iterations=function(t){return arguments.length?(g=+t,e):g},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:os(+t),c(),e):n},e.distance=function(t){return arguments.length?(i="function"==typeof t?t:os(+t),p(),e):i},e},s.forceManyBody=function(){var r,c,u,l,f,i=os(-30),h=1,d=1/0,g=.81;function e(t){var e,n=r.length,i=ns(r,ps,vs).visitAfter(a);for(l=t,e=0;e<n;++e)c=r[e],i.visit(o)}function n(){if(r){var t,e,n=r.length;for(f=new Array(n),t=0;t<n;++t)e=r[t],f[e.index]=+i(e,t,r)}}function a(t){var e,n,i,r,a,o=0,s=0;if(t.length){for(i=r=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(o+=e.value,s+=n,i+=n*e.x,r+=n*e.y);t.x=i/s,t.y=r/s}else for(e=t,e.x=e.data.x,e.y=e.data.y;o+=f[e.data.index],e=e.next;);t.value=o}function o(t,e,n,i){if(!t.value)return!0;var r=t.x-c.x,a=t.y-c.y,o=i-e,s=r*r+a*a;if(o*o/g<s)return s<d&&(0===r&&(s+=(r=ss(u))*r),0===a&&(s+=(a=ss(u))*a),s<h&&(s=Math.sqrt(h*s)),c.vx+=r*t.value*l/s,c.vy+=a*t.value*l/s),!0;if(!(t.length||d<=s))for(t.data===c&&!t.next||(0===r&&(s+=(r=ss(u))*r),0===a&&(s+=(a=ss(u))*a),s<h&&(s=Math.sqrt(h*s)));t.data!==c&&(o=f[t.data.index]*l/s,c.vx+=r*o,c.vy+=a*o),t=t.next;);}return e.initialize=function(t,e){r=t,u=e,n()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:os(+t),n(),e):i},e.distanceMin=function(t){return arguments.length?(h=t*t,e):Math.sqrt(h)},e.distanceMax=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)},e.theta=function(t){return arguments.length?(g=t*t,e):Math.sqrt(g)},e},s.forceRadial=function(n,s,c){var u,l,f,i=os(.1);function e(t){for(var e=0,n=u.length;e<n;++e){var i=u[e],r=i.x-s||1e-6,a=i.y-c||1e-6,o=Math.sqrt(r*r+a*a),o=(f[e]-o)*l[e]*t/o;i.vx+=r*o,i.vy+=a*o}}function r(){if(u){var t,e=u.length;for(l=new Array(e),f=new Array(e),t=0;t<e;++t)f[t]=+n(u[t],t,u),l[t]=isNaN(f[t])?0:+i(u[t],t,u)}}return"function"!=typeof n&&(n=os(+n)),null==s&&(s=0),null==c&&(c=0),e.initialize=function(t){u=t,r()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:os(+t),r(),e):i},e.radius=function(t){return arguments.length?(n="function"==typeof t?t:os(+t),r(),e):n},e.x=function(t){return arguments.length?(s=+t,e):s},e.y=function(t){return arguments.length?(c=+t,e):c},e},s.forceSimulation=function(c){var a,o=1,e=.001,s=1-Math.pow(e,1/300),u=0,l=.6,f=new Map,t=Li(r),n=xt("tick","end"),i=function(){let t=1;return()=>(t=(hs*t+ds)%gs)/gs}();function r(){h(),n.call("tick",a),o<e&&(t.stop(),n.call("end",a))}function h(t){var e,n,i=c.length;void 0===t&&(t=1);for(var r=0;r<t;++r)for(o+=(u-o)*s,f.forEach(function(t){t(o)}),e=0;e<i;++e)null==(n=c[e]).fx?n.x+=n.vx*=l:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=l:(n.y=n.fy,n.vy=0);return a}function d(){for(var t,e,n,i=0,r=c.length;i<r;++i)(n=c[i]).index=i,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),(isNaN(n.x)||isNaN(n.y))&&(t=10*Math.sqrt(.5+i),e=i*xs,n.x=t*Math.cos(e),n.y=t*Math.sin(e)),(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}function g(t){return t.initialize&&t.initialize(c,i),t}return null==c&&(c=[]),d(),a={tick:h,restart:function(){return t.restart(r),a},stop:function(){return t.stop(),a},nodes:function(t){return arguments.length?(c=t,d(),f.forEach(g),a):c},alpha:function(t){return arguments.length?(o=+t,a):o},alphaMin:function(t){return arguments.length?(e=+t,a):e},alphaDecay:function(t){return arguments.length?(s=+t,a):+s},alphaTarget:function(t){return arguments.length?(u=+t,a):u},velocityDecay:function(t){return arguments.length?(l=1-t,a):1-l},randomSource:function(t){return arguments.length?(i=t,f.forEach(g),a):i},force:function(t,e){return 1<arguments.length?(null==e?f.delete(t):f.set(t,g(e)),a):f.get(t)},find:function(t,e,n){var i,r,a,o=0,s=c.length;for(null==n?n=1/0:n*=n,o=0;o<s;++o)(i=(i=t-(r=c[o]).x)*i+(i=e-r.y)*i)<n&&(a=r,n=i);return a},on:function(t,e){return 1<arguments.length?(n.on(t,e),a):n.on(t)}}},s.forceX=function(n){var r,a,o,i=os(.1);function e(t){for(var e,n=0,i=r.length;n<i;++n)(e=r[n]).vx+=(o[n]-e.x)*a[n]*t}function s(){if(r){var t,e=r.length;for(a=new Array(e),o=new Array(e),t=0;t<e;++t)a[t]=isNaN(o[t]=+n(r[t],t,r))?0:+i(r[t],t,r)}}return"function"!=typeof n&&(n=os(null==n?0:+n)),e.initialize=function(t){r=t,s()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:os(+t),s(),e):i},e.x=function(t){return arguments.length?(n="function"==typeof t?t:os(+t),s(),e):n},e},s.forceY=function(n){var r,a,o,i=os(.1);function e(t){for(var e,n=0,i=r.length;n<i;++n)(e=r[n]).vy+=(o[n]-e.y)*a[n]*t}function s(){if(r){var t,e=r.length;for(a=new Array(e),o=new Array(e),t=0;t<e;++t)a[t]=isNaN(o[t]=+n(r[t],t,r))?0:+i(r[t],t,r)}}return"function"!=typeof n&&(n=os(null==n?0:+n)),e.initialize=function(t){r=t,s()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:os(+t),s(),e):i},e.y=function(t){return arguments.length?(n="function"==typeof t?t:os(+t),s(),e):n},e},s.formatDefaultLocale=Rs,s.formatLocale=Ds,s.formatSpecifier=ws,s.fsum=function(e,n){const i=new k;if(void 0===n)for(var t of e)(t=+t)&&i.add(t);else{let t=-1;for(var r of e)(r=+n(r,++t,e))&&i.add(r)}return+i},s.geoAlbers=Nf,s.geoAlbersUsa=function(){var e,n,r,a,o,i,s=Nf(),c=zf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=zf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){i=[t,e]}};function f(t){var e=t[0],t=t[1];return i=null,r.point(e,t),i||(a.point(e,t),i)||(o.point(e,t),i)}function h(){return e=n=null,f}return f.invert=function(t){var e=s.scale(),n=s.translate(),i=(t[0]-n[0])/e,e=(t[1]-n[1])/e;return(.12<=e&&e<.234&&-.425<=i&&i<-.214?c:.166<=e&&e<.234&&-.214<=i&&i<-.115?u:s).invert(t)},f.stream=function(t){return e&&n===t?e:(i=[s.stream(n=t),c.stream(t),u.stream(t)],r=i.length,e={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},f.precision=function(t){return arguments.length?(s.precision(t),c.precision(t),u.precision(t),h()):s.precision()},f.scale=function(t){return arguments.length?(s.scale(t),c.scale(.35*t),u.scale(t),f.translate(s.translate())):s.scale()},f.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),n=+t[0],i=+t[1];return r=s.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(l),a=c.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+zs,i+.12*e+zs],[n-.214*e-zs,i+.234*e-zs]]).stream(l),o=u.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+zs,i+.166*e+zs],[n-.115*e-zs,i+.234*e-zs]]).stream(l),h()},f.fitExtent=function(t,e){return wf(f,t,e)},f.fitSize=function(t,e){return Tf(f,t,e)},f.fitWidth=function(t,e){return Af(f,t,e)},f.fitHeight=function(t,e){return Mf(f,t,e)},f.scale(1070)},s.geoArea=function(t){return Cc=new k,fc(t,Dc),2*Cc},s.geoAzimuthalEqualArea=function(){return Rf(Xf).scale(124.75).clipAngle(179.999)},s.geoAzimuthalEqualAreaRaw=Xf,s.geoAzimuthalEquidistant=function(){return Rf(Bf).scale(79.4188).clipAngle(179.999)},s.geoAzimuthalEquidistantRaw=Bf,s.geoBounds=function(t){var e,n,i,r,a,o,s;if(mc=_c=-(xc=yc=1/0),Sc=[],fc(t,ru),n=Sc.length){for(Sc.sort(du),e=1,a=[i=Sc[0]];e<n;++e)gu(i,(r=Sc[e])[0])||gu(i,r[1])?(hu(i[0],r[1])>hu(i[0],i[1])&&(i[1]=r[1]),hu(r[0],i[1])>hu(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-1/0,e=0,i=a[n=a.length-1];e<=n;i=r,++e)r=a[e],(s=hu(i[1],r[0]))>o&&(o=s,xc=r[0],_c=i[1])}return Sc=kc=null,xc===1/0||yc===1/0?[[NaN,NaN],[NaN,NaN]]:[[xc,yc],[_c,mc]]},s.geoCentroid=function(t){Yc=jc=Gc=Hc=Uc=Vc=qc=Wc=0,Zc=new k,Kc=new k,Jc=new k,fc(t,pu);var e=+Zc,n=+Kc,i=+Jc;return(t=Ws(e,n,i))<Ns&&(e=Vc,n=qc,i=Wc,jc<zs&&(e=Gc,n=Hc,i=Uc),(t=Ws(e,n,i))<Ns)?[NaN,NaN]:[Hs(n,e)*$s,ic(i/t)*$s]},s.geoCircle=function(){var i,r,a=Su([0,0]),o=Su(90),s=Su(6),c={point:function(t,e){i.push(t=r(t,e)),t[0]*=$s,t[1]*=$s}};function e(){var t=a.apply(this,arguments),e=o.apply(this,arguments)*Ys,n=s.apply(this,arguments)*Ys;return i=[],r=Cu(-t[0]*Ys,-t[1]*Ys,0).invert,Pu(c,e,n,1),t={type:"Polygon",coordinates:[i]},i=r=null,t}return e.center=function(t){return arguments.length?(a="function"==typeof t?t:Su([+t[0],+t[1]]),e):a},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:Su(+t),e):o},e.precision=function(t){return arguments.length?(s="function"==typeof t?t:Su(+t),e):s},e},s.geoClipAntimeridian=Uu,s.geoClipCircle=Vu,s.geoClipExtent=function(){var e,n,i,r=0,a=0,o=960,s=500;return i={stream:function(t){return e&&n===t?e:e=tl(r,a,o,s)(n=t)},extent:function(t){return arguments.length?(r=+t[0][0],a=+t[0][1],o=+t[1][0],s=+t[1][1],e=n=null,i):[[r,a],[o,s]]}}},s.geoClipRectangle=tl,s.geoConicConformal=function(){return Lf(Gf).scale(109.5).parallels([30,30])},s.geoConicConformalRaw=Gf,s.geoConicEqualArea=zf,s.geoConicEqualAreaRaw=Pf,s.geoConicEquidistant=function(){return Lf(Uf).scale(131.154).center([0,13.9389])},s.geoConicEquidistantRaw=Uf,s.geoContains=function(t,e){return(t&&ul.hasOwnProperty(t.type)?ul[t.type]:fl)(t,e)},s.geoDistance=cl,s.geoEqualEarth=function(){return Rf(Jf).scale(177.158)},s.geoEqualEarthRaw=Jf,s.geoEquirectangular=function(){return Rf(Hf).scale(152.63)},s.geoEquirectangularRaw=Hf,s.geoGnomonic=function(){return Rf(Qf).scale(144.049).clipAngle(60)},s.geoGnomonicRaw=Qf,s.geoGraticule=_l,s.geoGraticule10=function(){return _l()()},s.geoIdentity=function(){var i,r,e,n,a,o,s,c=1,u=0,l=0,f=1,h=1,d=0,g=null,p=1,v=1,x=_f({point:function(t,e){e=m([t,e]);this.stream.point(e[0],e[1])}}),y=Al;function _(){return p=c*f,v=c*h,o=s=null,m}function m(t){var e=t[0]*p,n=t[1]*v;return d&&(t=n*i-e*r,e=e*i+n*r,n=t),[e+u,n+l]}return m.invert=function(t){var e=t[0]-u,n=t[1]-l;return d&&(t=n*i+e*r,e=e*i-n*r,n=t),[e/p,n/v]},m.stream=function(t){return o&&s===t?o:o=x(y(s=t))},m.postclip=function(t){return arguments.length?(y=t,g=e=n=a=null,_()):y},m.clipExtent=function(t){return arguments.length?(y=null==t?(g=e=n=a=null,Al):tl(g=+t[0][0],e=+t[0][1],n=+t[1][0],a=+t[1][1]),_()):null==g?null:[[g,e],[n,a]]},m.scale=function(t){return arguments.length?(c=+t,_()):c},m.translate=function(t){return arguments.length?(u=+t[0],l=+t[1],_()):[u,l]},m.angle=function(t){return arguments.length?(r=Js(d=t%360*Ys),i=Us(d),_()):d*$s},m.reflectX=function(t){return arguments.length?(f=t?-1:1,_()):f<0},m.reflectY=function(t){return arguments.length?(h=t?-1:1,_()):h<0},m.fitExtent=function(t,e){return wf(m,t,e)},m.fitSize=function(t,e){return Tf(m,t,e)},m.fitWidth=function(t,e){return Af(m,t,e)},m.fitHeight=function(t,e){return Mf(m,t,e)},m},s.geoInterpolate=function(t,e){var n=t[0]*Ys,i=t[1]*Ys,r=e[0]*Ys,a=e[1]*Ys,t=Us(i),o=Js(i),e=Us(a),s=Js(a),c=t*Us(n),u=t*Js(n),l=e*Us(r),f=e*Js(r),h=2*ic(tc(rc(a-i)+t*e*rc(r-n))),d=Js(h);return(r=h?function(t){var e=Js(t*=h)/d,n=Js(h-t)/d,i=n*c+e*l,t=n*u+e*f,e=n*o+e*s;return[Hs(t,i)*$s,Hs(e,tc(i*i+t*t))*$s]}:function(){return[n*$s,i*$s]}).distance=h,r},s.geoLength=al,s.geoMercator=function(){return Yf($f).scale(961/Bs)},s.geoMercatorRaw=$f,s.geoNaturalEarth1=function(){return Rf(th).scale(175.295)},s.geoNaturalEarth1Raw=th,s.geoOrthographic=function(){return Rf(eh).scale(249.5).clipAngle(90+zs)},s.geoOrthographicRaw=eh,s.geoPath=function(e,n){var i,r,a=4.5;function o(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),fc(t,i(r))),r.result()}return o.area=function(t){return fc(t,i(kl)),kl.result()},o.measure=function(t){return fc(t,i(gf)),gf.result()},o.bounds=function(t){return fc(t,i(Nl)),Nl.result()},o.centroid=function(t){return fc(t,i(Zl)),Zl.result()},o.projection=function(t){return arguments.length?(i=null==t?(e=null,Al):(e=t).stream,o):e},o.context=function(t){return arguments.length?(r=null==t?(n=null,new xf):new sf(n=t),"function"!=typeof a&&r.pointRadius(a),o):n},o.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),o):a},o.projection(e).context(n)},s.geoProjection=Rf,s.geoProjectionMutator=Of,s.geoRotation=Lu,s.geoStereographic=function(){return Rf(nh).scale(250).clipAngle(142)},s.geoStereographicRaw=nh,s.geoStream=fc,s.geoTransform=function(t){return{stream:_f(t)}},s.geoTransverseMercator=function(){var t=Yf(ih),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},s.geoTransverseMercatorRaw=ih,s.gray=function(t,e){return new dn(t,0,0,null==e?1:e)},s.greatest=function(e,n=h){let i,r=!1;if(1===n.length){let t;for(const o of e){var a=n(o);(r?0<h(a,t):0===h(a,a))&&(i=o,t=a,r=!0)}}else for(const t of e)(r?0<n(t,i):0===n(t,t))&&(i=t,r=!0);return i},s.greatestIndex=function(t,e=h){if(1===e.length)return U(t,e);let n,i=-1,r=-1;for(const a of t)++r,(i<0?0===e(a,a):0<e(a,n))&&(n=a,i=r);return i},s.group=w,s.groupSort=function(t,r,e){return(1===r.length?E(T(t,r,e),([t,e],[n,i])=>h(e,i)||h(t,n)):E(w(t,e),([t,e],[n,i])=>r(e,i)||h(t,n))).map(([t])=>t)},s.groups=function(t,...e){return M(t,Array.from,b,e)},s.hcl=_n,s.hierarchy=ch,s.histogram=X,s.hsl=Je,s.html=Zo,s.image=function(r,a){return new Promise(function(t,e){var n,i=new Image;for(n in a)i[n]=a[n];i.onerror=e,i.onload=function(){t(i)},i.src=r})},s.index=function(t,...e){return M(t,b,A,e)},s.indexes=function(t,...e){return M(t,Array.from,A,e)},s.interpolate=Jn,s.interpolateArray=function(t,e){return(Gn(e)?jn:Hn)(t,e)},s.interpolateBasis=On,s.interpolateBasisClosed=Ln,s.interpolateBlues=Yx,s.interpolateBrBG=tx,s.interpolateBuGn=yx,s.interpolateBuPu=mx,s.interpolateCividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},s.interpolateCool=ey,s.interpolateCubehelix=vi,s.interpolateCubehelixDefault=Qx,s.interpolateCubehelixLong=xi,s.interpolateDate=Un,s.interpolateDiscrete=function(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}},s.interpolateGnBu=wx,s.interpolateGreens=Gx,s.interpolateGreys=Ux,s.interpolateHcl=di,s.interpolateHclLong=gi,s.interpolateHsl=li,s.interpolateHslLong=fi,s.interpolateHue=function(t,e){var n=Nn(+t,+e);return function(t){t=n(t);return t-360*Math.floor(t/360)}},s.interpolateInferno=uy,s.interpolateLab=function(e,t){var n=Fn((e=hn(e)).l,(t=hn(t)).l),i=Fn(e.a,t.a),r=Fn(e.b,t.b),a=Fn(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=i(t),e.b=r(t),e.opacity=a(t),e+""}},s.interpolateMagma=cy,s.interpolateNumber=Vn,s.interpolateNumberArray=jn,s.interpolateObject=qn,s.interpolateOrRd=Ax,s.interpolateOranges=Jx,s.interpolatePRGn=nx,s.interpolatePiYG=rx,s.interpolatePlasma=ly,s.interpolatePuBu=Ex,s.interpolatePuBuGn=Sx,s.interpolatePuOr=ox,s.interpolatePuRd=Dx,s.interpolatePurples=qx,s.interpolateRainbow=function(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return ny.h=360*t-100,ny.s=1.5-1.5*e,ny.l=.8-.9*e,ny+""},s.interpolateRdBu=cx,s.interpolateRdGy=lx,s.interpolateRdPu=Ox,s.interpolateRdYlBu=hx,s.interpolateRdYlGn=gx,s.interpolateReds=Zx,s.interpolateRgb=Xn,s.interpolateRgbBasis=$n,s.interpolateRgbBasisClosed=Yn,s.interpolateRound=Qn,s.interpolateSinebow=function(t){var e;return t=(.5-t)*Math.PI,iy.r=255*(e=Math.sin(t))*e,iy.g=255*(e=Math.sin(t+ry))*e,iy.b=255*(e=Math.sin(t+ay))*e,iy+""},s.interpolateSpectral=vx,s.interpolateString=Kn,s.interpolateTransformCss=ai,s.interpolateTransformSvg=oi,s.interpolateTurbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},s.interpolateViridis=sy,s.interpolateWarm=ty,s.interpolateYlGn=Nx,s.interpolateYlGnBu=Px,s.interpolateYlOrBr=Fx,s.interpolateYlOrRd=Bx,s.interpolateZoom=ci,s.interrupt=Ji,s.intersection=function(t,...e){t=new Set(t),e=e.map(et);t:for(const n of t)for(const i of e)if(!i.has(n)){t.delete(n);continue t}return t},s.interval=function(t,e,n){var a=new Oi,o=e;return null==e||(a._restart=a.restart,a.restart=function(n,i,r){i=+i,r=null==r?Di():+r,a._restart(function t(e){e+=o,a._restart(t,o+=i,r),n(e)},i,r)}),a.restart(t,e,n),a},s.isoFormat=Rv,s.isoParse=Ov,s.json=function(t,e){return fetch(t,e).then(Vo)},s.lab=hn,s.lch=function(t,e,n,i){return 1===arguments.length?yn(t):new mn(n,e,t,null==i?1:i)},s.least=function(e,n=h){let i,r=!1;if(1===n.length){let t;for(const o of e){var a=n(o);(r?h(a,t)<0:0===h(a,a))&&(i=o,t=a,r=!0)}}else for(const t of e)(r?n(t,i)<0:0===n(t,t))&&(i=t,r=!0);return i},s.leastIndex=Z,s.line=Ny,s.lineRadial=Gy,s.linkHorizontal=function(){return Wy(Zy)},s.linkRadial=function(){var t=Wy(Jy);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},s.linkVertical=function(){return Wy(Ky)},s.local=le,s.map=function(n,i){if("function"!=typeof n[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof i)throw new TypeError("mapper is not a function");return Array.from(n,(t,e)=>i(t,e,n))},s.matcher=Ct,s.max=B,s.maxIndex=U,s.mean=function(e,n){let i=0,r=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(++i,r+=t);else{let t=-1;for(var a of e)null!=(a=n(a,++t,e))&&(a=+a)>=a&&(++i,r+=a)}if(i)return r/i},s.median=function(t,e){return G(t,.5,e)},s.merge=V,s.min=$,s.minIndex=q,s.namespace=wt,s.namespaces=bt,s.nice=I,s.now=Di,s.pack=function(){var e=null,n=1,i=1,r=Sh;function a(t){return t.x=n/2,t.y=i/2,e?t.eachBefore(Ch(e)).eachAfter(Dh(r,.5)).eachBefore(Rh(1)):t.eachBefore(Ch(Eh)).eachAfter(Dh(Sh,1)).eachAfter(Dh(r,t.r/Math.min(n,i))).eachBefore(Rh(Math.min(n,i)/(2*t.r))),t}return a.radius=function(t){return arguments.length?(e=null==(t=t)?null:Mh(t),a):e},a.size=function(t){return arguments.length?(n=+t[0],i=+t[1],a):[n,i]},a.padding=function(t){return arguments.length?(r="function"==typeof t?t:kh(+t),a):r},a},s.packEnclose=gh,s.packSiblings=function(t){return Ah(t),t},s.pairs=function(t,e=function(t,e){return[t,e]}){const n=[];let i,r=!1;for(const a of t)r&&n.push(e(i,a)),i=a,r=!0;return n},s.partition=function(){var n=1,i=1,s=0,r=!1;function e(t){var a,o,e=t.height+1;return t.x0=t.y0=s,t.x1=n,t.y1=i/e,t.eachBefore((a=i,o=e,function(t){t.children&&Lh(t,t.x0,a*(t.depth+1)/o,t.x1,a*(t.depth+2)/o);var e=t.x0,n=t.y0,i=t.x1-s,r=t.y1-s;i<e&&(e=i=(e+i)/2),r<n&&(n=r=(n+r)/2),t.x0=e,t.y0=n,t.x1=i,t.y1=r})),r&&t.eachBefore(Oh),t}return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(n=+t[0],i=+t[1],e):[n,i]},e.padding=function(t){return arguments.length?(s=+t,e):s},e},s.path=Da,s.permute=S,s.pie=function(){var d=Xy,g=Fy,p=null,v=fy(0),x=fy(wy),y=fy(0);function e(n){for(var t,e,i,r=(n=Ry(n)).length,a=0,o=new Array(r),s=new Array(r),c=+v.apply(this,arguments),u=Math.min(wy,Math.max(-wy,x.apply(this,arguments)-c)),l=Math.min(Math.abs(u)/r,y.apply(this,arguments)),f=l*(u<0?-1:1),h=0;h<r;++h)0<(i=s[o[h]=h]=+d(n[h],h,n))&&(a+=i);for(null!=g?o.sort(function(t,e){return g(s[t],s[e])}):null!=p&&o.sort(function(t,e){return p(n[t],n[e])}),h=0,t=a?(u-r*f)/a:0;h<r;++h,c=e)e=o[h],i=s[e],s[e]={data:n[e],index:h,value:i,startAngle:c,endAngle:e=c+(0<i?i*t:0)+f,padAngle:l};return s}return e.value=function(t){return arguments.length?(d="function"==typeof t?t:fy(+t),e):d},e.sortValues=function(t){return arguments.length?(g=t,p=null,e):g},e.sort=function(t){return arguments.length?(p=t,g=null,e):p},e.startAngle=function(t){return arguments.length?(v="function"==typeof t?t:fy(+t),e):v},e.endAngle=function(t){return arguments.length?(x="function"==typeof t?t:fy(+t),e):x},e.padAngle=function(t){return arguments.length?(y="function"==typeof t?t:fy(+t),e):y},e},s.piecewise=yi,s.pointRadial=Uy,s.pointer=de,s.pointers=function(t,e){return t.target&&(t=he(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,t=>de(t,e))},s.polygonArea=function(t){for(var e,n=-1,i=t.length,r=t[i-1],a=0;++n<i;)e=r,r=t[n],a+=e[1]*r[0]-e[0]*r[1];return a/2},s.polygonCentroid=function(t){for(var e,n,i=-1,r=t.length,a=0,o=0,s=t[r-1],c=0;++i<r;)e=s,s=t[i],c+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(c*=3),o/c]},s.polygonContains=function(t,e){for(var n,i,r=t.length,a=t[r-1],o=e[0],s=e[1],c=a[0],u=a[1],l=!1,f=0;f<r;++f)n=(a=t[f])[0],s<(i=a[1])!=s<u&&o<(c-n)*(s-i)/(u-i)+n&&(l=!l),c=n,u=i;return l},s.polygonHull=function(t){if((e=t.length)<3)return null;for(var e,n=new Array(e),i=new Array(e),r=0;r<e;++r)n[r]=[+t[r][0],+t[r][1],r];for(n.sort(Vh),r=0;r<e;++r)i[r]=[n[r][0],-n[r][1]];var a=qh(n),o=qh(i),s=o[0]===a[0],c=o[o.length-1]===a[a.length-1],u=[];for(r=a.length-1;0<=r;--r)u.push(t[n[a[r]][2]]);for(r=+s;r<o.length-c;++r)u.push(t[n[o[r]][2]]);return u},s.polygonLength=function(t){for(var e,n,i=-1,r=t.length,a=t[r-1],o=a[0],s=a[1],c=0;++i<r;)e=o,n=s,e-=o=(a=t[i])[0],n-=s=a[1],c+=Math.hypot(e,n);return c},s.precisionFixed=Os,s.precisionPrefix=Ls,s.precisionRound=Ps,s.quadtree=ns,s.quantile=G,s.quantileSorted=H,s.quantize=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},s.quickselect=Y,s.radialArea=Hy,s.radialLine=Gy,s.randomBates=ed,s.randomBernoulli=rd,s.randomBeta=sd,s.randomBinomial=cd,s.randomCauchy=ld,s.randomExponential=nd,s.randomGamma=od,s.randomGeometric=ad,s.randomInt=Kh,s.randomIrwinHall=td,s.randomLcg=function(t=Math.random()){let e=0|(0<=t&&t<1?t/dd:Math.abs(t));return()=>(e=1664525*e+1013904223|0,dd*(e>>>0))},s.randomLogNormal=Qh,s.randomLogistic=fd,s.randomNormal=Jh,s.randomPareto=id,s.randomPoisson=hd,s.randomUniform=Zh,s.randomWeibull=ud,s.range=W,s.reduce=function(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const i=t[Symbol.iterator]();let r,a,o=-1;if(arguments.length<3){if({done:r,value:n}=i.next(),r)return;++o}for(;{done:r,value:a}=i.next(),!r;)n=e(n,a,++o,t);return n},s.reverse=function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},s.rgb=He,s.ribbon=function(){return Ba()},s.ribbonArrow=function(){return Ba(Xa)},s.rollup=T,s.rollups=function(t,e,...n){return M(t,Array.from,e,n)},s.scaleBand=yd,s.scaleDiverging=function t(){var e=Cd(Xv()(bd));return e.copy=function(){return Iv(e,t())},pd.apply(e,arguments)},s.scaleDivergingLog=function t(){var e=Id(Xv()).domain([.1,1,10]);return e.copy=function(){return Iv(e,t()).base(e.base())},pd.apply(e,arguments)},s.scaleDivergingPow=Bv,s.scaleDivergingSqrt=function(){return Bv.apply(null,arguments).exponent(.5)},s.scaleDivergingSymlog=function t(){var e=Bd(Xv());return e.copy=function(){return Iv(e,t()).constant(e.constant())},pd.apply(e,arguments)},s.scaleIdentity=function t(e){var n;function i(t){return null==t||isNaN(t=+t)?n:t}return(i.invert=i).domain=i.range=function(t){return arguments.length?(e=Array.from(t,_d),i):e.slice()},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,_d):[0,1],Cd(i)},s.scaleImplicit=vd,s.scaleLinear=function t(){var e=kd();return e.copy=function(){return Md(e,t())},gd.apply(e,arguments),Cd(e)},s.scaleLog=function t(){var e=Id(Sd()).domain([1,10]);return e.copy=function(){return Md(e,t()).base(e.base())},gd.apply(e,arguments),e},s.scaleOrdinal=xd,s.scalePoint=function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(yd.apply(null,arguments).paddingInner(1))},s.scalePow=Hd,s.scaleQuantile=function t(){var e,n=[],i=[],r=[];function a(){var t=0,e=Math.max(1,i.length);for(r=new Array(e-1);++t<e;)r[t-1]=H(n,t/e);return o}function o(t){return null==t||isNaN(t=+t)?e:i[v(r,t)]}return o.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]},o.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(h),a()},o.range=function(t){return arguments.length?(i=Array.from(t),a()):i.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return t().domain(n).range(i).unknown(e)},gd.apply(o,arguments)},s.scaleQuantize=function t(){var e,n=0,i=1,r=1,a=[.5],o=[0,1];function s(t){return null!=t&&t<=t?o[v(a,t,0,r)]:e}function c(){var t=-1;for(a=new Array(r);++t<r;)a[t]=((t+1)*i-(t-r)*n)/(r+1);return s}return s.domain=function(t){return arguments.length?([n,i]=t,n=+n,i=+i,c()):[n,i]},s.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,c()):o.slice()},s.invertExtent=function(t){return(t=o.indexOf(t))<0?[NaN,NaN]:t<1?[n,a[0]]:r<=t?[a[r-1],i]:[a[t-1],a[t]]},s.unknown=function(t){return arguments.length&&(e=t),s},s.thresholds=function(){return a.slice()},s.copy=function(){return t().domain([n,i]).range(o).unknown(e)},gd.apply(Cd(s),arguments)},s.scaleRadial=function t(){var e,n=kd(),i=[0,1],r=!1;function a(t){return t=n(t),t=Math.sign(t)*Math.sqrt(Math.abs(t)),isNaN(t)?e:r?Math.round(t):t}return a.invert=function(t){return n.invert(Ud(t))},a.domain=function(t){return arguments.length?(n.domain(t),a):n.domain()},a.range=function(t){return arguments.length?(n.range((i=Array.from(t,_d)).map(Ud)),a):i.slice()},a.rangeRound=function(t){return a.range(t).round(!0)},a.round=function(t){return arguments.length?(r=!!t,a):r},a.clamp=function(t){return arguments.length?(n.clamp(t),a):n.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t(n.domain(),i).round(r).clamp(n.clamp()).unknown(e)},gd.apply(a,arguments),Cd(a)},s.scaleSequential=function t(){var e=Cd(Nv()(bd));return e.copy=function(){return Iv(e,t())},pd.apply(e,arguments)},s.scaleSequentialLog=function t(){var e=Id(Nv()).domain([1,10]);return e.copy=function(){return Iv(e,t()).base(e.base())},pd.apply(e,arguments)},s.scaleSequentialPow=Fv,s.scaleSequentialQuantile=function t(){var i=[],n=bd;function r(t){if(null!=t&&!isNaN(t=+t))return n((v(i,t,1)-1)/(i.length-1))}return r.domain=function(t){if(!arguments.length)return i.slice();i=[];for(var e of t)null==e||isNaN(e=+e)||i.push(e);return i.sort(h),r},r.interpolator=function(t){return arguments.length?(n=t,r):n},r.range=function(){return i.map((t,e)=>n(e/(i.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(t,e)=>G(i,e/n))},r.copy=function(){return t(n).domain(i)},pd.apply(r,arguments)},s.scaleSequentialSqrt=function(){return Fv.apply(null,arguments).exponent(.5)},s.scaleSequentialSymlog=function t(){var e=Bd(Nv());return e.copy=function(){return Iv(e,t()).constant(e.constant())},pd.apply(e,arguments)},s.scaleSqrt=function(){return Hd.apply(null,arguments).exponent(.5)},s.scaleSymlog=function t(){var e=Bd(Sd());return e.copy=function(){return Md(e,t()).constant(e.constant())},gd.apply(e,arguments)},s.scaleThreshold=function t(){var e,n=[.5],i=[0,1],r=1;function a(t){return null!=t&&t<=t?i[v(n,t,0,r)]:e}return a.domain=function(t){return arguments.length?(n=Array.from(t),r=Math.min(n.length,i.length-1),a):n.slice()},a.range=function(t){return arguments.length?(i=Array.from(t),r=Math.min(n.length,i.length-1),a):i.slice()},a.invertExtent=function(t){return t=i.indexOf(t),[n[t-1],n[t]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(n).range(i).unknown(e)},gd.apply(a,arguments)},s.scaleTime=function(){return gd.apply(zv(ap,op,Cg,kg,dg,lg,cg,og,rg,s.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},s.scaleUtc=function(){return gd.apply(zv(ip,rp,tp,Jg,Fg,zg,Lg,Rg,rg,s.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},s.scan=function(t,e){return(e=Z(t,e))<0?void 0:e},s.schemeAccent=jv,s.schemeBlues=$x,s.schemeBrBG=Qv,s.schemeBuGn=xx,s.schemeBuPu=_x,s.schemeCategory10=Yv,s.schemeDark2=Gv,s.schemeGnBu=bx,s.schemeGreens=jx,s.schemeGreys=Hx,s.schemeOrRd=Tx,s.schemeOranges=Kx,s.schemePRGn=ex,s.schemePaired=Hv,s.schemePastel1=Uv,s.schemePastel2=Vv,s.schemePiYG=ix,s.schemePuBu=kx,s.schemePuBuGn=Mx,s.schemePuOr=ax,s.schemePuRd=Cx,s.schemePurples=Vx,s.schemeRdBu=sx,s.schemeRdGy=ux,s.schemeRdPu=Rx,s.schemeRdYlBu=fx,s.schemeRdYlGn=dx,s.schemeReds=Wx,s.schemeSet1=qv,s.schemeSet2=Wv,s.schemeSet3=Zv,s.schemeSpectral=px,s.schemeTableau10=Kv,s.schemeYlGn=zx,s.schemeYlGnBu=Lx,s.schemeYlOrBr=Ix,s.schemeYlOrRd=Xx,s.select=ce,s.selectAll=function(t){return"string"==typeof t?new oe([document.querySelectorAll(t)],[document.documentElement]):new oe([null==t?[]:St(t)],ae)},s.selection=se,s.selector=Mt,s.selectorAll=Et,s.shuffle=K,s.shuffler=J,s.some=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(e(i,++n,t))return!0;return!1},s.sort=E,s.stack=function(){var s=fy([]),c=N_,u=z_,l=I_;function e(t){var e,n,i=Array.from(s.apply(this,arguments),F_),r=i.length,a=-1;for(const o of t)for(e=0,++a;e<r;++e)(i[e][a]=[0,+l(o,i[e].key,a,t)]).data=o;for(e=0,n=Ry(c(i));e<r;++e)i[n[e]].index=e;return u(i,n),i}return e.keys=function(t){return arguments.length?(s="function"==typeof t?t:fy(Array.from(t)),e):s},e.value=function(t){return arguments.length?(l="function"==typeof t?t:fy(+t),e):l},e.order=function(t){return arguments.length?(c=null==t?N_:"function"==typeof t?t:fy(Array.from(t)),e):c},e.offset=function(t){return arguments.length?(u=null==t?z_:t,e):u},e},s.stackOffsetDiverging=function(t,e){if(0<(s=t.length))for(var n,i,r,a,o,s,c=0,u=t[e[0]].length;c<u;++c)for(n=a=o=0;n<s;++n)0<(r=(i=t[e[n]][c])[1]-i[0])?(i[0]=a,i[1]=a+=r):r<0?(i[1]=o,i[0]=o+=r):(i[0]=0,i[1]=r)},s.stackOffsetExpand=function(t,e){if(0<(i=t.length)){for(var n,i,r,a=0,o=t[0].length;a<o;++a){for(r=n=0;n<i;++n)r+=t[n][a][1]||0;if(r)for(n=0;n<i;++n)t[n][a][1]/=r}z_(t,e)}},s.stackOffsetNone=z_,s.stackOffsetSilhouette=function(t,e){if(0<(n=t.length)){for(var n,i=0,r=t[e[0]],a=r.length;i<a;++i){for(var o=0,s=0;o<n;++o)s+=t[o][i][1]||0;r[i][1]+=r[i][0]=-s/2}z_(t,e)}},s.stackOffsetWiggle=function(t,e){if(0<(r=t.length)&&0<(i=(n=t[e[0]]).length)){for(var n,i,r,a=0,o=1;o<i;++o){for(var s=0,c=0,u=0;s<r;++s){for(var l=t[e[s]],f=l[o][1]||0,h=(f-(l[o-1][1]||0))/2,d=0;d<s;++d){var g=t[e[d]];h+=(g[o][1]||0)-(g[o-1][1]||0)}c+=f,u+=h*f}n[o-1][1]+=n[o-1][0]=a,c&&(a-=u/c)}n[o-1][1]+=n[o-1][0]=a,z_(t,e)}},s.stackOrderAppearance=X_,s.stackOrderAscending=$_,s.stackOrderDescending=function(t){return $_(t).reverse()},s.stackOrderInsideOut=function(t){for(var e,n=t.length,i=t.map(Y_),r=X_(t),a=0,o=0,s=[],c=[],u=0;u<n;++u)e=r[u],a<o?(a+=i[e],s.push(e)):(o+=i[e],c.push(e));return c.reverse().concat(s)},s.stackOrderNone=N_,s.stackOrderReverse=function(t){return N_(t).reverse()},s.stratify=function(){var f=Nh,h=Ih;function e(t){for(var e,n,i,r,a,o,s=Array.from(t),c=s.length,u=new Map,l=0;l<c;++l)e=s[l],r=s[l]=new dh(e),null!=(a=f(e,l,t))&&(a+="")&&(o=r.id=a,u.set(o,u.has(o)?zh:r)),null!=(a=h(e,l,t))&&(a+="")&&(r.parent=a);for(l=0;l<c;++l)if(a=(r=s[l]).parent){if(!(i=u.get(a)))throw new Error("missing: "+a);if(i===zh)throw new Error("ambiguous: "+a);i.children?i.children.push(r):i.children=[r],r.parent=i}else{if(n)throw new Error("multiple roots");n=r}if(!n)throw new Error("no root");if(n.parent=Ph,n.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(hh),n.parent=null,0<c)throw new Error("cycle");return n}return e.id=function(t){return arguments.length?(f=Mh(t),e):f},e.parentId=function(t){return arguments.length?(h=Mh(t),e):h},e},s.style=Yt,s.subset=function(t,e){return nt(e,t)},s.sum=function(e,n){let i=0;if(void 0===n)for(var t of e)(t=+t)&&(i+=t);else{let t=-1;for(var r of e)(r=+n(r,++t,e))&&(i+=r)}return i},s.superset=nt,s.svg=Ko,s.symbol=function(e,n){var i=null;function r(){var t;if(i=i||(t=Da()),e.apply(this,arguments).draw(i,+n.apply(this,arguments)),t)return i=null,t+""||null}return e="function"==typeof e?e:fy(e||Qy),n="function"==typeof n?n:fy(void 0===n?64:+n),r.type=function(t){return arguments.length?(e="function"==typeof t?t:fy(t),r):e},r.size=function(t){return arguments.length?(n="function"==typeof t?t:fy(+t),r):n},r.context=function(t){return arguments.length?(i=null==t?null:t,r):i},r},s.symbolCircle=Qy,s.symbolCross=t,s.symbolDiamond=Ee,s.symbolSquare=lr,s.symbolStar=Ce,s.symbolTriangle=Lr,s.symbolWye=ya,s.symbols=To,s.text=jo,s.thresholdFreedmanDiaconis=function(t,e,n){return Math.ceil((n-e)/(2*(G(t,.75)-G(t,.25))*Math.pow(i(t),-1/3)))},s.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*o(t)*Math.pow(i(t),-1/3)))},s.thresholdSturges=F,s.tickFormat=Ed,s.tickIncrement=z,s.tickStep=N,s.ticks=P,s.timeDay=lg,s.timeDays=fg,s.timeFormatDefaultLocale=Cv,s.timeFormatLocale=lp,s.timeFriday=yg,s.timeFridays=Mg,s.timeHour=cg,s.timeHours=ug,s.timeInterval=Wd,s.timeMillisecond=Zd,s.timeMilliseconds=Kd,s.timeMinute=og,s.timeMinutes=sg,s.timeMonday=gg,s.timeMondays=bg,s.timeMonth=kg,s.timeMonths=Eg,s.timeSaturday=_g,s.timeSaturdays=Sg,s.timeSecond=rg,s.timeSeconds=ag,s.timeSunday=dg,s.timeSundays=mg,s.timeThursday=xg,s.timeThursdays=Ag,s.timeTickInterval=op,s.timeTicks=ap,s.timeTuesday=pg,s.timeTuesdays=wg,s.timeWednesday=vg,s.timeWednesdays=Tg,s.timeWeek=dg,s.timeWeeks=mg,s.timeYear=Cg,s.timeYears=Dg,s.timeout=Fi,s.timer=Li,s.timerFlush=Pi,s.transition=ur,s.transpose=Q,s.tree=function(){var h=Fh,c=1,u=1,l=null;function e(t){var e,n,i,r,a,o,s=function(t){for(var e,n,i,r,a,o=[t=new $h(t,0)];e=o.pop();)if(i=e._.children)for(e.children=new Array(a=i.length),r=a-1;0<=r;--r)o.push(n=e.children[r]=new $h(i[r],r)),n.parent=e;return(t.parent=new $h(null,0)).children=[t],t}(t);return s.eachAfter(f),s.parent.m=-s.z,s.eachBefore(d),l?t.eachBefore(g):((i=n=e=t).eachBefore(function(t){t.x<e.x&&(e=t),t.x>n.x&&(n=t),t.depth>i.depth&&(i=t)}),s=e===n?1:h(e,n)/2,r=s-e.x,a=c/(n.x+s+r),o=u/(i.depth||1),t.eachBefore(function(t){t.x=(t.x+r)*a,t.y=t.depth*o})),t}function f(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;e?(function(t){for(var e,n=0,i=0,r=t.children,a=r.length;0<=--a;)(e=r[a]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t),e=(e[0].z+e[e.length-1].z)/2,i?(t.z=i.z+h(t._,i._),t.m=t.z-e):t.z=e):i&&(t.z=i.z+h(t._,i._)),t.parent.A=function(t,e,n){if(e){for(var i,r=t,a=t,o=e,s=r.parent.children[0],c=r.m,u=a.m,l=o.m,f=s.m;o=Bh(o),r=Xh(r),o&&r;)s=Xh(s),(a=Bh(a)).a=t,0<(i=o.z+l-r.z-c+h(o._,r._))&&(function(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}(function(t,e,n){return t.a.parent===e.parent?t.a:n}(o,t,n),t,i),c+=i,u+=i),l+=o.m,c+=r.m,f+=s.m,u+=a.m;o&&!Bh(a)&&(a.t=o,a.m+=l-u),r&&!Xh(s)&&(s.t=r,s.m+=c-f,n=t)}return n}(t,i,t.parent.A||n[0])}function d(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function g(t){t.x*=c,t.y=t.depth*u}return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(l=!1,c=+t[0],u=+t[1],e):l?null:[c,u]},e.nodeSize=function(t){return arguments.length?(l=!0,c=+t[0],u=+t[1],e):l?[c,u]:null},e},s.treemap=function(){var o=Hh,e=!1,n=1,i=1,s=[0],c=Sh,u=Sh,l=Sh,f=Sh,h=Sh;function r(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(a),s=[0],e&&t.eachBefore(Oh),t}function a(t){var e=s[t.depth],n=t.x0+e,i=t.y0+e,r=t.x1-e,a=t.y1-e;r<n&&(n=r=(n+r)/2),a<i&&(i=a=(i+a)/2),t.x0=n,t.y0=i,t.x1=r,t.y1=a,t.children&&(e=s[t.depth+1]=c(t)/2,n+=h(t)-e,i+=u(t)-e,(r-=l(t)-e)<n&&(n=r=(n+r)/2),(a-=f(t)-e)<i&&(i=a=(i+a)/2),o(t,n,i,r,a))}return r.round=function(t){return arguments.length?(e=!!t,r):e},r.size=function(t){return arguments.length?(n=+t[0],i=+t[1],r):[n,i]},r.tile=function(t){return arguments.length?(o=Mh(t),r):o},r.padding=function(t){return arguments.length?r.paddingInner(t).paddingOuter(t):r.paddingInner()},r.paddingInner=function(t){return arguments.length?(c="function"==typeof t?t:kh(+t),r):c},r.paddingOuter=function(t){return arguments.length?r.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):r.paddingTop()},r.paddingTop=function(t){return arguments.length?(u="function"==typeof t?t:kh(+t),r):u},r.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:kh(+t),r):l},r.paddingBottom=function(t){return arguments.length?(f="function"==typeof t?t:kh(+t),r):f},r.paddingLeft=function(t){return arguments.length?(h="function"==typeof t?t:kh(+t),r):h},r},s.treemapBinary=function(t,e,n,i,r){var a,o,p=t.children,s=p.length,v=new Array(s+1);for(v[0]=o=a=0;a<s;++a)v[a+1]=o+=p[a].value;!function t(e,n,i,r,a,o,s){if(n-1<=e){var c=p[e];return c.x0=r,c.y0=a,c.x1=o,void(c.y1=s)}var u=v[e],l=i/2+u,f=e+1,h=n-1;for(;f<h;){var d=f+h>>>1;v[d]<l?f=1+d:h=d}l-v[f-1]<v[f]-l&&e+1<f&&--f;var g=v[f]-u,c=i-g;s-a<o-r?(t(e,f,g,r,a,u=i?(r*c+o*g)/i:o,s),t(f,n,c,u,a,o,s)):(t(e,f,g,r,a,o,i=i?(a*c+s*g)/i:s),t(f,n,c,r,i,o,s))}(0,s,t.value,e,n,i,r)},s.treemapDice=Lh,s.treemapResquarify=Uh,s.treemapSlice=Yh,s.treemapSliceDice=function(t,e,n,i,r){(1&t.depth?Yh:Lh)(t,e,n,i,r)},s.treemapSquarify=Hh,s.tsv=Uo,s.tsvFormat=Po,s.tsvFormatBody=zo,s.tsvFormatRow=Io,s.tsvFormatRows=No,s.tsvFormatValue=Fo,s.tsvParse=Oo,s.tsvParseRows=Lo,s.union=function(...t){const e=new Set;for(const n of t)for(const i of n)e.add(i);return e},s.utcDay=zg,s.utcDays=Ng,s.utcFriday=jg,s.utcFridays=Zg,s.utcHour=Lg,s.utcHours=Pg,s.utcMillisecond=Zd,s.utcMilliseconds=Kd,s.utcMinute=Rg,s.utcMinutes=Og,s.utcMonday=Xg,s.utcMondays=Ug,s.utcMonth=Jg,s.utcMonths=Qg,s.utcSaturday=Gg,s.utcSaturdays=Kg,s.utcSecond=rg,s.utcSeconds=ag,s.utcSunday=Fg,s.utcSundays=Hg,s.utcThursday=Yg,s.utcThursdays=Wg,s.utcTickInterval=rp,s.utcTicks=ip,s.utcTuesday=Bg,s.utcTuesdays=Vg,s.utcWednesday=$g,s.utcWednesdays=qg,s.utcWeek=Fg,s.utcWeeks=Hg,s.utcYear=tp,s.utcYears=ep,s.variance=r,s.version="6.7.0",s.window=$t,s.xml=Wo,s.zip=function(){return Q(arguments)},s.zoom=function(){var u,l,s,f=Z_,h=K_,d=em,a=Q_,e=tm,o=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],c=250,p=ci,n=xt("start","zoom","end"),v=500,x=150,y=0,_=10;function m(t){t.property("__zoom",J_).on("wheel.zoom",r).on("mousedown.zoom",S).on("dblclick.zoom",k).filter(e).on("touchstart.zoom",E).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(t,e){return(e=Math.max(o[0],Math.min(o[1],e)))===t.k?t:new H_(e,t.x,t.y)}function w(t,e,n){var i=e[0]-n[0]*t.k,n=e[1]-n[1]*t.k;return i===t.x&&n===t.y?t:new H_(t.k,i,n)}function T(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function A(t,n,c,u){t.on("start.zoom",function(){M(this,arguments).event(u).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(u).end()}).tween("zoom",function(){var t=arguments,i=M(this,t).event(u),e=h.apply(this,t),r=null==c?T(e):"function"==typeof c?c.apply(this,t):c,a=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),e=this.__zoom,o="function"==typeof n?n.apply(this,t):n,s=p(e.invert(r).concat(a/e.k),o.invert(r).concat(a/o.k));return function(t){var e,n;t=1===t?o:(e=s(t),new H_(n=a/e[2],r[0]-e[0]*n,r[1]-e[1]*n)),i.zoom(null,t)}})}function M(t,e,n){return!n&&t.__zooming||new i(t,e)}function i(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=h.apply(t,e),this.taps=0}function r(t,...e){if(f.apply(this,arguments)){var n=M(this,e).event(t),i=this.__zoom,r=Math.max(o[0],Math.min(o[1],i.k*Math.pow(2,a.apply(this,arguments)))),e=de(t);if(n.wheel)n.mouse[0][0]===e[0]&&n.mouse[0][1]===e[1]||(n.mouse[1]=i.invert(n.mouse[0]=e)),clearTimeout(n.wheel);else{if(i.k===r)return;n.mouse=[e,i.invert(e)],Ji(this),n.start()}W_(t),n.wheel=setTimeout(function(){n.wheel=null,n.end()},x),n.zoom("mouse",d(w(b(i,r),n.mouse[0],n.mouse[1]),n.extent,g))}}function S(t,...e){var i,n,r,a,o;!s&&f.apply(this,arguments)&&(i=M(this,e,!0).event(t),n=ce(t.view).on("mousemove.zoom",function(t){{var e,n;W_(t),i.moved||(e=t.clientX-a,n=t.clientY-o,i.moved=y<e*e+n*n)}i.event(t).zoom("mouse",d(w(i.that.__zoom,i.mouse[0]=de(t,r),i.mouse[1]),i.extent,g))},!0).on("mouseup.zoom",function(t){n.on("mousemove.zoom mouseup.zoom",null),xe(t.view,i.moved),W_(t),i.event(t).end()},!0),e=de(t,r),r=t.currentTarget,a=t.clientX,o=t.clientY,ve(t.view),q_(t),i.mouse=[e,this.__zoom.invert(e)],Ji(this),i.start())}function k(t,...e){var n,i,r,a;f.apply(this,arguments)&&(n=this.__zoom,i=de(t.changedTouches?t.changedTouches[0]:t,this),r=n.invert(i),a=n.k*(t.shiftKey?.5:2),e=d(w(b(n,a),i,r),h.apply(this,e),g),W_(t),0<c?ce(this).transition().duration(c).call(A,e,i,t):ce(this).call(m.transform,e,i,t))}function E(t,...e){if(f.apply(this,arguments)){var n,i,r,a,o=t.touches,s=o.length,c=M(this,e,t.changedTouches.length===s).event(t);for(q_(t),i=0;i<s;++i)a=[a=de(r=o[i],this),this.__zoom.invert(a),r.identifier],c.touch0?c.touch1||c.touch0[2]===a[2]||(c.touch1=a,c.taps=0):(c.touch0=a,n=!0,c.taps=1+!!u);u=u&&clearTimeout(u),n&&(c.taps<2&&(l=a[0],u=setTimeout(function(){u=null},v)),Ji(this),c.start())}}function C(t,...e){if(this.__zooming){var n,i=M(this,e).event(t),r=t.changedTouches,a=r.length;for(W_(t),n=0;n<a;++n)f=de(l=r[n],this),i.touch0&&i.touch0[2]===l.identifier?i.touch0[0]=f:i.touch1&&i.touch1[2]===l.identifier&&(i.touch1[0]=f);if(l=i.that.__zoom,i.touch1)var o=i.touch0[0],s=i.touch0[1],c=i.touch1[0],u=i.touch1[1],e=(e=c[0]-o[0])*e+(e=c[1]-o[1])*e,t=(t=u[0]-s[0])*t+(t=u[1]-s[1])*t,l=b(l,Math.sqrt(e/t)),f=[(o[0]+c[0])/2,(o[1]+c[1])/2],u=[(s[0]+u[0])/2,(s[1]+u[1])/2];else{if(!i.touch0)return;f=i.touch0[0],u=i.touch0[1]}i.zoom("touch",d(w(l,f,u),i.extent,g))}}function D(t,...e){if(this.__zooming){var n,i,r=M(this,e).event(t),a=t.changedTouches,o=a.length;for(q_(t),s&&clearTimeout(s),s=setTimeout(function(){s=null},v),n=0;n<o;++n)i=a[n],r.touch0&&r.touch0[2]===i.identifier?delete r.touch0:r.touch1&&r.touch1[2]===i.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0?r.touch0[1]=this.__zoom.invert(r.touch0[0]):(r.end(),2===r.taps&&(i=de(i,this),Math.hypot(l[0]-i[0],l[1]-i[1])<_&&((t=ce(this).on("dblclick.zoom"))&&t.apply(this,arguments))))}}return m.transform=function(t,e,n,i){var r=t.selection?t.selection():t;r.property("__zoom",J_),t!==r?A(t,e,n,i):r.interrupt().each(function(){M(this,arguments).event(i).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},m.scaleBy=function(t,e,n,i){m.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n,i)},m.scaleTo=function(t,a,o,e){m.transform(t,function(){var t=h.apply(this,arguments),e=this.__zoom,n=null==o?T(t):"function"==typeof o?o.apply(this,arguments):o,i=e.invert(n),r="function"==typeof a?a.apply(this,arguments):a;return d(w(b(e,r),n,i),t,g)},o,e)},m.translateBy=function(t,e,n,i){m.transform(t,function(){return d(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),h.apply(this,arguments),g)},null,i)},m.translateTo=function(t,i,r,a,e){m.transform(t,function(){var t=h.apply(this,arguments),e=this.__zoom,n=null==a?T(t):"function"==typeof a?a.apply(this,arguments):a;return d(U_.translate(n[0],n[1]).scale(e.k).translate("function"==typeof i?-i.apply(this,arguments):-i,"function"==typeof r?-r.apply(this,arguments):-r),t,g)},a,e)},i.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=ce(this.that).datum();n.call(t,this.that,new G_(t,{sourceEvent:this.sourceEvent,target:m,type:t,transform:this.that.__zoom,dispatch:n}),e)}},m.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:j_(+t),m):a},m.filter=function(t){return arguments.length?(f="function"==typeof t?t:j_(!!t),m):f},m.touchable=function(t){return arguments.length?(e="function"==typeof t?t:j_(!!t),m):e},m.extent=function(t){return arguments.length?(h="function"==typeof t?t:j_([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):h},m.scaleExtent=function(t){return arguments.length?(o[0]=+t[0],o[1]=+t[1],m):[o[0],o[1]]},m.translateExtent=function(t){return arguments.length?(g[0][0]=+t[0][0],g[1][0]=+t[1][0],g[0][1]=+t[0][1],g[1][1]=+t[1][1],m):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},m.constrain=function(t){return arguments.length?(d=t,m):d},m.duration=function(t){return arguments.length?(c=+t,m):c},m.interpolate=function(t){return arguments.length?(p=t,m):p},m.on=function(){var t=n.on.apply(n,arguments);return t===n?m:t},m.clickDistance=function(t){return arguments.length?(y=(t=+t)*t,m):Math.sqrt(y)},m.tapDistance=function(t){return arguments.length?(_=+t,m):_},m},s.zoomIdentity=U_,s.zoomTransform=V_,Object.defineProperty(s,"__esModule",{value:!0})}),function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-axis"),require("d3-brush"),require("d3-color"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom"));else if("function"==typeof define&&define.amd)define(["d3-axis","d3-brush","d3-color","d3-drag","d3-dsv","d3-ease","d3-interpolate","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","d3-zoom"],e);else{var n,i="object"==typeof exports?e(require("d3-axis"),require("d3-brush"),require("d3-color"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,function(e,r,a,o,s,c,u,l,f,h,d,g,p){return function(){"use strict";var n=[,,function(t){t.exports=f},function(t){t.exports=r},function(t){t.exports=d},function(t){t.exports=s},function(t){t.exports=l},function(t){t.exports=o},function(t){t.exports=g},function(t){t.exports=h},function(t){t.exports=e},function(t){t.exports=c},function(t){t.exports=u},function(t){t.exports=a},function(t){t.exports=p}],i={};function Dn(t){var e=i[t];if(void 0!==e)return e.exports;e=i[t]={exports:{}};return n[t](e,e.exports,Dn),e.exports}Dn.d=function(t,e){for(var n in e)Dn.o(e,n)&&!Dn.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},Dn.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},Dn.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var Rn={};return function(){Dn.r(Rn),Dn.d(Rn,{bb:function(){return Cn},default:function(){return Cn}});var e={};Dn.r(e),Dn.d(e,{area:function(){return We},areaLineRange:function(){return Ze},areaSpline:function(){return Ke},areaSplineRange:function(){return Je},areaStep:function(){return Qe},bar:function(){return cn},bubble:function(){return un},candlestick:function(){return ln},donut:function(){return rn},gauge:function(){return an},line:function(){return tn},pie:function(){return on},radar:function(){return sn},scatter:function(){return fn},spline:function(){return en},step:function(){return nn}});var n={};Dn.r(n),Dn.d(n,{selection:function(){return Mn},subchart:function(){return Sn},zoom:function(){return kn}});var s=Dn(4),O=Dn(2),L={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",chartCircles:"bb-chart-circles",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",main:"bb-main",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",subchart:"bb-subchart",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",valueDown:"bb-value-down",valueUp:"bb-value-up",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridFocus:"bb-ygrid-focus",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_",TextOverlapping:"text-overlapping"},i={element:function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null}},state:function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}},r=function(){function t(){var e=this;Object.keys(i).forEach(function(t){e[t]=new i[t]})}return t.prototype.getStore=function(t){return this[t]},t}();function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:350,plugins:[],render:{},regions:[]},c={data_x:void 0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_color:void 0,data_colors:{},data_labels:{},data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},u={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},l={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},f={legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1},h={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},d={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null},g=Dn(3),p="object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis||"object"==typeof global&&null!==global&&global.Object===Object&&global||"object"==typeof self&&null!==self&&self.Object===Object&&self||Function("return this")(),P=p&&p.document;function v(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function x(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?v(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function z(t){return t||0===t}function R(t){return"function"==typeof t}function N(t){return void 0===t}function I(t){return void 0!==t}function y(t){return"boolean"==typeof t}function _(t){return 10*Math.ceil(t/10)}function m(t){return Math.ceil(t)+.5}function M(t){return t[1]-t[0]}function b(t){return"object"==typeof t}function w(t){return N(t)||null===t||T(t)&&0===t.length||b(t)&&!(t instanceof Date)&&0===Object.keys(t).length||F(t)&&isNaN(t)}var T=function(t){return"string"==typeof t},F=function(t){return"number"==typeof t},X=function(t){return!w(t)},B=function(t){return Array.isArray(t)},$=function(t){return t&&!t.nodeType&&b(t)&&!B(t)};function A(t,e,n){return I(t[e])?t[e]:n}function S(t){for(var e=R(t),n=arguments.length,i=Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e&&t.call.apply(t,i),e}function k(t,i){var r=0;t.each(function(){return++r}).on("end",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];--r||i.apply.apply(i,[this].concat(e))})}function Y(t){return T(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function E(n,t,i,e){var r,a;void 0===i&&(i=[-1,1]),void 0===e&&(e=!1),n&&T(t)&&(-1===t.indexOf("\n")?n.text(t):(r=[n.text(),t].map(function(t){return t.replace(/[\s\n]/g,"")}))[0]!==r[1]&&(t=t.split("\n"),a=e?t.length-1:1,n.html(""),t.forEach(function(t,e){n.append("tspan").attr("x",0).attr("dy",(0===e?i[0]*a:i[1])+"em").text(t)})))}function C(t){var e=t.getBBox(),n=e.x,i=e.y,t=e.width,e=e.height;return[{x:n,y:i+e},{x:n,y:i},{x:n+t,y:i},{x:n+t,y:i+e}]}function D(t,e){var n=t&&(t.touches||t.sourceEvent&&t.sourceEvent.touches);return t?(0,O.pointer)(n?n[0]:t,e):[0,0]}function j(t){var e,n=t.event,t=t.$el,t=t.subchart.main||t.main;return n&&"brush"===n.type?e=n.selection:t&&(e=t.select("."+L.brush).node())&&(e=(0,g.brushSelection)(e)),e}function G(t){return!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width")?t.rect=t.getBoundingClientRect():t.rect}function H(t){void 0===t&&(t=!0);var e=Math.random();return t?e+"":e}function U(t){t=j(t);return!t||t[0]===t[1]}function V(e,t){for(var n in void 0===e&&(e={}),B(t)&&t.forEach(function(t){return V(e,t)}),t)/^\d+$/.test(n)||n in e||(e[n]=t[n]);return e}function q(t){return t.charAt(0).toUpperCase()+t.slice(1)}var W=function(t){return[].slice.call(t)};function Z(t){return(t=(t=t?t.transform:null)&&t.baseVal)&&t.numberOfItems?t.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function K(t){var e=t[0]instanceof Date,t=(e?t.map(Number):t).filter(function(t,e,n){return n.indexOf(t)===e});return e?t.map(function(t){return new Date(t)}):t}function J(t){return t&&t.length?t.reduce(function(t,e){return t.concat(e)}):[]}function Q(n){for(var t=arguments.length,e=Array(1<t?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];if(!e.length||1===e.length&&!e[0])return n;var r=e.shift();return $(n)&&$(r)&&Object.keys(r).forEach(function(t){var e=r[t];$(e)?(n[t]||(n[t]={}),n[t]=Q(n[t],e)):n[t]=B(e)?e.concat():e}),Q.apply(void 0,[n].concat(e))}function tt(t,e){var n;return void 0===e&&(e=!0),t[0]instanceof Date?n=e?function(t,e){return t-e}:function(t,e){return e-t}:e&&!t.every(isNaN)?n=function(t,e){return t-e}:e||(n=function(t,e){return(e<t?-1:t<e&&1)||t===e&&0}),t.concat().sort(n)}function et(t,e){e=e.filter(function(t){return X(t)});return e.length?F(e[0])?e=Math[t].apply(Math,e):e[0]instanceof Date&&(e=tt(e,"min"===t)[0]):e=void 0,e}function nt(t,e,n){void 0===n&&(n=1);for(var i=[],r=0|Math.max(0,Math.ceil((e-t)/n)),a=t;a<r;a++)i.push(t+a*n);return i}var it={mouse:function(){function r(){return{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}}try{return new MouseEvent("t"),function(t,e,n){void 0===n&&(n=r()),t.dispatchEvent(new MouseEvent(e,n))}}catch(t){return function(t,e,n){void 0===n&&(n=r());var i=P.createEvent("MouseEvent");i.initMouseEvent(e,n.bubbles,n.cancelable,p,0,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}}(),touch:function(t,e,n){n=new Touch(Q({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[n],targetTouches:[],changedTouches:[n]}))}};function rt(t,e){var n,i=t;for(n in e)i=i.replace(new RegExp("{="+n+"}","g"),e[n]);return i}function at(t){var e,n;return t instanceof Date?n=t:T(t)?(e=this.config,n=this.format.dataTime(e.data_xFormat)(t)):F(t)&&!isNaN(t)&&(n=new Date(+t)),(!n||isNaN(+n))&&console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),n}function ot(){return!P.hidden}function st(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function ct(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?st(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var ut=function(){function t(){return function(){for(var t,i=(t=function(t){if($(t)&&t.constructor){var e,n=new t.constructor;for(e in t)n[e]=i(t[e]);return n}return t},a.toString=function(){return t.toString()},a),e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];function a(){return t.apply(this,arguments)}return n.map(function(t){return i(t)}).reduce(function(t,e){return x(x({},t),e)})}(o,c,u,l,f,h,d,t.data)}return t.setOptions=function(t){this.data=t.reduce(function(t,e){return ct(ct({},t),e)},this.data)},t}();ut.data={};var lt="$baseLength",ft="__colorPattern__",ht="$dataMinMax",dt="$dataTotalSum",t="$totalPerIndex",gt="legendItemTextBox",pt="$radarPoints",vt="setOverOut",xt="callOverOutForTouch",yt="textRect",_t=function(){function t(){this.cache={}}var e=t.prototype;return e.add=function(t,e,n){return this.cache[t]=(n=void 0===n?!1:n)?this.cloneTarget(e):e,this.cache[t]},e.remove=function(t){var e=this;W(t).forEach(function(t){return delete e.cache[t]})},e.get=function(t,e){if(e=void 0===e?!1:e){for(var n,i=[],r=0;n=t[r];r++)n in this.cache&&i.push(this.cloneTarget(this.cache[n]));return i}e=this.cache[t];return z(e)?e:null},e.reset=function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)},e.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},t}(),mt=p.setTimeout,bt=p.clearTimeout;function wt(){function t(t,r){var a;!function t(){for(var e,n=0,i=0;e=o[i];i++)if(!0===e||e.empty&&e.empty())n++;else try{e.transition()}catch(t){n++}a&&bt(a),n===o.length?r&&r():a=mt(t,50)}()}var o=[];return t.add=function(t){B(t)?o=o.concat(t):o.push(t)},t}var Tt=Dn(5),At={convertData:function(n,t){var i;if(n.bindto?(i={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(t){var e="data_"+t;e in n&&(i[t]=n[e])})):i=n,i.url&&t)this.convertUrlToData(i.url,i.mimeType,i.headers,i.keys,t);else if(i.json)i=this.convertJsonToData(i.json,i.keys);else if(i.rows)i=this.convertRowsToData(i.rows);else if(i.columns)i=this.convertColumnsToData(i.columns);else if(n.bindto)throw Error("url or json or rows or columns is required.");return B(i)&&i},convertUrlToData:function(e,n,i,r,a){var o=this;void 0===n&&(n="csv");var s=new XMLHttpRequest;s.open("GET",e),i&&Object.keys(i).forEach(function(t){s.setRequestHeader(t,i[t])}),s.onreadystatechange=function(){if(4===s.readyState){if(200!==s.status)throw new Error(e+": Something went wrong loading!");var t=s.responseText;t&&a.call(o,o["convert"+q(n)+"ToData"]("json"===n?JSON.parse(t):t,r))}},s.send()},convertCsvTsvToData:function(t,e){var n,i=t.rows(e);return 1===i.length?(n=[{}],i[0].forEach(function(t){n[0][t]=null})):n=t.parse(e),n},convertCsvToData:function(t){return this.convertCsvTsvToData({rows:Tt.csvParseRows,parse:Tt.csvParse},t)},convertTsvToData:function(t){return this.convertCsvTsvToData({rows:Tt.tsvParseRows,parse:Tt.tsvParse},t)},convertJsonToData:function(n,t){var i,r=this,e=this.config,a=[],o=B(n)?((o=t||e.data_keys).x?(i=o.value.concat(o.x),e.data_x=o.x):i=o.value,a.push(i),n.forEach(function(e){var t=i.map(function(t){t=r.findValueInJson(e,t);return t=N(t)?null:t});a.push(t)}),this.convertRowsToData(a)):(Object.keys(n).forEach(function(t){var e=n[t].concat();e.unshift(t),a.push(e)}),this.convertColumnsToData(a));return o},findValueInJson:function(t,e){if(void 0!==t[e])return t[e];var e=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),n=t;return e.some(function(t){return!(n=n&&t in n?n[t]:void 0)}),n},convertRowsToData:function(t){var r=t[0],e=[];return t.forEach(function(t,n){var i;0<n&&(i={},t.forEach(function(t,e){if(N(t))throw new Error("Source data is missing a component at ("+n+", "+e+")!");i[r[e]]=t}),e.push(i))}),e},convertColumnsToData:function(t){var r=[];return t.forEach(function(t,n){var i=t[0];t.forEach(function(t,e){if(0<e){if(N(r[e-1])&&(r[e-1]={}),N(t))throw new Error("Source data is missing a component at ("+n+", "+e+")!");r[e-1][i]=t}})}),r},convertDataToTargets:function(t,i){var r=this,l=this,e=l.axis,f=l.config,h=l.state,n=!1,a=!1,d=!1;e&&(n=e.isCategorized(),a=e.isTimeSeries(),d=e.isCustomX());var o,s=Object.keys(t[0]||{}),e=s.length?s.filter(l.isNotX,l):[],c=s.length?s.filter(l.isX,l):[];e.forEach(function(n){var e=r.getXKey(n);d||a?0<=c.indexOf(e)?o=(i&&l.data.xs[n]||[]).concat(t.map(function(t){return t[e]}).filter(z).map(function(t,e){return l.generateTargetX(t,n,e)})):f.data_x?o=r.getOtherTargetXs():X(f.data_xs)&&(o=l.getXValuesOfXKey(e,l.data.targets)):o=t.map(function(t,e){return e}),o&&(r.data.xs[n]=o)}),e.forEach(function(t){if(!r.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')});e=e.map(function(r,a){var o=f.data_idConverter.bind(l.api)(r),s=l.getXKey(r),c=d&&n,u=c&&t.map(function(t){return t.x}).every(function(t){return-1<f.axis_x_categories.indexOf(t)});return{id:o,id_org:r,values:t.map(function(t,e){var n,i=t[s],t=null===(t=t[r])||isNaN(t)||$(t)?B(t)||$(t)?t:null:+t;return!c&&!h.hasRadar||0!==a||N(i)?n=l.generateTargetX(i,r,e):(u||0!==a||0!==e||(f.axis_x_categories=[]),-1===(n=f.axis_x_categories.indexOf(i))&&(n=f.axis_x_categories.length,f.axis_x_categories.push(i))),{x:n=N(t)||l.data.xs[r].length<=e?void 0:n,value:t,id:o}}).filter(function(t){return I(t.x)})}});return e.forEach(function(t){f.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),t.values.forEach(function(t,e){return t.index=e}),l.data.xs[t.id].sort(function(t,e){return t-e})}),h.hasNegativeValue=l.hasNegativeValueInTargets(e),h.hasPositiveValue=l.hasPositiveValueInTargets(e),f.data_type&&l.setTargetType(l.mapToIds(e).filter(function(t){return!(t in f.data_types)}),f.data_type),e.forEach(function(t){return l.cache.add(t.id_org,t,!0)}),e}},Mt={isX:function(t){var e,n,i,r=this.config,a=r.data_x&&t===r.data_x,t=X(r.data_xs)&&(e=r.data_xs,n=t,i=!1,Object.keys(e).forEach(function(t){return e[t]===n&&(i=!0)}),i);return a||t},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!(!t.data_stack_normalize||!t.data_groups.length)},isGrouped:function(e){var t=this.config.data_groups;return e?t.some(function(t){return 0<=t.indexOf(e)&&1<t.length}):0<t.length},getXKey:function(t){var e=this.config;return e.data_x||(X(e.data_xs)?e.data_xs[t]:null)},getXValuesOfXKey:function(e,t){var n,i=this;return(t&&X(t)?i.mapToIds(t):[]).forEach(function(t){i.getXKey(t)===e&&(n=i.data.xs[t])}),n},getIndexByX:function(t,e){return e?e.indexOf(T(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){return t in this.data.xs&&this.data.xs[t]&&z(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(e){var n=this.config;Object.keys(e).forEach(function(t){n.data_xs[t]=e[t]})},isMultipleX:function(){return X(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e=this.config;return t&&(e=e.data_names[t.id],t.name=void 0===e?t.id:e),t},getAllValuesOnIndex:function(e,t){void 0===t&&(t=!1);var n=this,i=n.filterTargetsToShow(n.data.targets).map(function(t){return n.addName(n.getValueOnIndex(t.values,e))});return i=t?i.filter(function(t){return z(t.value)}):i},getValueOnIndex:function(t,e){t=t.filter(function(t){return t.index===e});return t.length?t[0]:null},updateTargetX:function(t,i){var r=this;t.forEach(function(n){n.values.forEach(function(t,e){t.x=r.generateTargetX(i[e],n.id,e)}),r.data.xs[n.id]=i})},updateTargetXs:function(t,e){var n=this;t.forEach(function(t){e[t.id]&&n.updateTargetX([t],e[t.id])})},generateTargetX:function(t,e,n){var i=this.axis,r=(!i||!i.isCategorized())&&t||n;return i&&i.isTimeSeries()?r=at.bind(this)(t||this.getXValue(e,n)):i&&i.isCustomX()&&!i.isCategorized()&&(r=z(t)?+t:this.getXValue(e,n)),r},updateXs:function(t){t.length&&(this.axis.xs=t.map(function(t){return t.x}))},getPrevX:function(t){t=this.axis.xs[t-1];return I(t)?t:null},getNextX:function(t){t=this.axis.xs[t+1];return I(t)?t:null},getBaseValue:function(t){var e=this.state.hasAxis,n=t.value;return n&&e&&(this.isAreaRangeType(t)?n=this.getRangedData(t,"mid"):this.isBubbleZType(t)&&(n=this.getBubbleZData(n,"y"))),n},getMinMaxValue:function(t){var n,i,r=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return t.values})).forEach(function(t,e){t=t.map(r).filter(F);n=Math.min.apply(Math,[e?n:1/0].concat(t)),i=Math.max.apply(Math,[e?i:-1/0].concat(t))}),{min:n,max:i}},getMinMaxData:function(){var t,n,i,r,a=this,e=ht,o=a.cache.get(e);return o||(t=a.data.targets.map(function(t){return t.values}),n=a.getMinMaxValue(t),i=[],r=[],t.forEach(function(t){var e=a.getFilteredDataByValue(t,n.min),t=a.getFilteredDataByValue(t,n.max);e.length&&(i=i.concat(e)),t.length&&(r=r.concat(t))}),a.cache.add(e,o={min:i,max:r})),o},getTotalPerIndex:function(){var n=this.cache.get(t);return this.isStackNormalized()&&!n&&(n=[],this.data.targets.forEach(function(t){t.values.forEach(function(t,e){n[e]||(n[e]=0),n[e]+=F(t.value)?t.value:0})})),n},getTotalDataSum:function(t){var e,n=dt,i=this.cache.get(n);return F(i)||(e=J(this.data.targets.map(function(t){return t.values})).map(function(t){return t.value}).reduce(function(t,e){return t+e}),this.cache.add(n,i=e)),t&&(i-=this.getHiddenTotalDataSum()),i},getHiddenTotalDataSum:function(){var t=this.api,e=this.state.hiddenTargetIds,n=0;return n=e.length?t.data.values.bind(t)(e).reduce(function(t,e){return t+e}):n},getFilteredDataByValue:function(t,e){var n=this;return t.filter(function(t){return n.getBaseValue(t)===e})},getMaxDataCount:function(){return Math.max.apply(Math,this.data.targets.map(function(t){return t.values.length}))},getMaxDataCountTarget:function(){var t=this.filterTargetsToShow()||[],e=t.length;return 1<e?t=tt(K(t=t.map(function(t){return t.values}).reduce(function(t,e){return t.concat(e)}).map(function(t){return t.x}))).map(function(t,e){return{x:t,index:e}}):e&&(t=t[0].values),t},mapToIds:function(t){return t.map(function(t){return t.id})},mapToTargetIds:function(t){return t?B(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var n,i=this.mapToIds(t),r=0;n=i[r];r++)if(n===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return(t||e.data.targets).filter(function(t){return e.isTargetToShow(t.id)})},mapTargetsToUniqueXs:function(t){var e=this.axis,n=[];return t&&t.length&&(n=K(J(t.map(function(t){return t.values.map(function(t){return+t.x})}))),n=e&&e.isTimeSeries()?n.map(function(t){return new Date(+t)}):n.map(function(t){return+t})),tt(n)},addHiddenTargetIds:function(t){this.state.hiddenTargetIds=this.state.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function(e){this.state.hiddenTargetIds=this.state.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},addHiddenLegendIds:function(t){this.state.hiddenLegendIds=this.state.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function(e){this.state.hiddenLegendIds=this.state.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},getValuesAsIdKeyed:function(t){var i=this,r=i.state.hasAxis,e={},a=i.isMultipleX(),o=a?i.mapTargetsToUniqueXs(t).map(function(t){return T(t)?t:+t}):null;return t.forEach(function(t){var n=[];t.values.filter(function(t){return z(t.value)}).forEach(function(t){var e=t.value;i.isCandlestickType(t)&&(e=B(e)?e.slice(0,4):[e.open,e.high,e.low,e.close]),B(e)?n.push.apply(n,e):$(e)&&"high"in e?n.push.apply(n,Object.values(e)):i.isBubbleZType(t)?n.push(r&&i.getBubbleZData(e,"y")):a?n[i.getIndexByX(t.x,o)]=e:n.push(e)}),e[t.id]=n}),e},checkValueInTargets:function(t,e){for(var n=Object.keys(t),i=0;i<n.length;i++)for(var r=t[n[i]].values,a=0;a<r.length;a++)if(e(r[a].value))return!0;return!1},hasMultiTargets:function(){return 1<this.filterTargetsToShow().length},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return t<0})},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return 0<t})},_checkOrder:function(t){var e=this.config.data_order;return T(e)&&e.toLowerCase()===t},isOrderDesc:function(){return this._checkOrder("desc")},isOrderAsc:function(){return this._checkOrder("asc")},orderTargets:function(t){var e=[].concat(t),t=this.getSortCompareFn();return t&&e.sort(t),e},getSortCompareFn:function(i){void 0===i&&(i=!1);var t,e=this.config,r=this.isOrderAsc(),n=this.isOrderDesc();return r||n?t=function(t,e){var n=function(t,e){return t+Math.abs(e.value)},t=t.values.reduce(n,0),n=e.values.reduce(n,0);return i?r?t-n:n-t:r?n-t:t-n}:R(e.data_order)&&(t=e.data_order.bind(this.api)),t||null},filterByX:function(t,e){return J(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},filterRemoveNull:function(t){var e=this;return t.filter(function(t){return z(e.getBaseValue(t))})},filterByXDomain:function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},hasDataLabel:function(){var t=this.config.data_labels;return y(t)&&t||b(t)&&X(t)},getDataIndexFromEvent:function(t){var e=this.config,n=this.state,i=n.inputType,r=n.eventReceiver,n=r.coords,r=r.rect,e=e.axis_rotated,t="touch"===i&&t.changedTouches?t.changedTouches[0]:t;return function t(e,n,i,r,a){if(r<i)return-1;var o=Math.floor((i+r)/2),s=e[o],c=s.x,s=s.w,s=void 0===s?0:s;return a&&(c=e[o].y,s=e[o].h),c<=n&&n<=c+s?o:n<c?t(e,n,i,o-1,a):t(e,n,o+1,r,a)}(n,e?t.clientY-r.top:t.clientX-r.left,0,n.length-1,e)},getDataLabelLength:function(t,e,n){var i=this,r=[0,0];return i.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i.dataLabelFormat(t.id)(t)}).each(function(t,e){r[e]=1.3*this.getBoundingClientRect()[n]}).remove(),r},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){for(var n=t[e].x,i=[],r=e-1;0<=r&&n===t[r].x;r--)i.push(t[r]);for(r=e;r<t.length&&n===t[r].x;r++)i.push(t[r]);return i},findClosestFromTargets:function(t,e){var n=this,t=t.map(function(t){return n.findClosest(t.values,e)});return n.findClosest(t,e)},findClosest:function(t,n){var i,r=this,e=r.config,a=r.$el.main,t=t.filter(function(t){return t&&z(t.value)}),o=e.point_sensitivity;return t.filter(function(t){return r.isBarType(t.id)}).forEach(function(t){var e=a.select("."+L.bars+r.getTargetSelectorSuffix(t.id)+" ."+L.bar+"-"+t.index).node();!i&&r.isWithinBar(e)&&(i=t)}),t.filter(function(t){return!r.isBarType(t.id)}).forEach(function(t){var e=r.dist(t,n);e<o&&(o=e,i=t)}),i},dist:function(t,e){var n=this.config.axis_rotated,i=this.scale,r=n?1:0,a=n?0:1,n=this.circleY(t,t.index),t=(i.zoom||i.x)(t.x);return Math.sqrt(Math.pow(t-e[r],2)+Math.pow(n-e[a],2))},convertValuesToStep:function(t){var e=this.axis,n=this.config.line_step_type,i=!!e&&e.isCategorized(),r=B(t)?t.concat():[t];if(!i&&!/step\-(after|before)/.test(n))return t;var a=r[0],o=r[r.length-1],e=a.id,t=a.x;return r.unshift({x:--t,value:a.value,id:e}),i&&"step-after"===n&&r.unshift({x:--t,value:a.value,id:e}),t=o.x,r.push({x:++t,value:o.value,id:e}),i&&"step-before"===n&&r.push({x:++t,value:o.value,id:e}),r},convertValuesToRange:function(t){var t=B(t)?t.concat():[t],i=[];return t.forEach(function(t){var e=t.x,n=t.id;i.push({x:e,id:n,value:t.value[0]}),i.push({x:e,id:n,value:t.value[2]})}),i},updateDataAttributes:function(t,e){var n=this.config["data_"+t];return N(e)||(Object.keys(e).forEach(function(t){n[t]=e[t]}),this.redraw({withLegend:!0})),n},getRangedData:function(t,e,n){void 0===e&&(e=""),void 0===n&&(n="areaRange");t=null==t?void 0:t.value;if(B(t)){n={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[n].indexOf(e);return 0<=n&&t?t[n]:void 0}return t&&t[e]},getRatio:function(t,e,n){var i,r,a=this,o=a.config,s=a.state,c=a.api,u=0;return e&&c.data.shown().length&&(u=e.ratio||e.value,"arc"===t?u=a.pie.padAngle()()?e.value/a.getTotalDataSum(!0):(i=o.gauge_fullCircle?a.getArcLength():-2*a.getStartAngle(),i=a.hasType("gauge")?i:2*Math.PI,(e.endAngle-e.startAngle)/i):"index"===t?(i=c.data.values.bind(c),c=this.getTotalPerIndex(),!s.hiddenTargetIds.length||(r=i(s.hiddenTargetIds,!1)).length&&(r=r.reduce(function(t,n){return t.map(function(t,e){return(F(t)?t:0)+n[e]})}),c=c.map(function(t,e){return t-r[e]})),e.ratio=F(e.value)&&c&&0<c[e.index]?e.value/c[e.index]:0,u=e.ratio):"radar"===t?u=parseFloat(Math.max(e.value,0)+"")/s.current.dataMax*o.radar_size_ratio:"bar"===t&&(a=a.getYScaleById.bind(a)(e.id).domain().reduce(function(t,e){return e-t}),u=Math.abs(e.value)/a)),n&&u?100*u:u},updateDataIndexByX:function(t){var i=t.reduce(function(t,e,n){return t[+e.x]=n,t},{});this.data.targets.forEach(function(t){t.values.forEach(function(t,e){var n=i[+t.x];t.index=n=void 0===n?e:n})})},isBubbleZType:function(t){return this.isBubbleType(t)&&($(t.value)&&("z"in t.value||"y"in t.value)||B(t.value)&&2===t.value.length)},getDataById:function(t){t=this.cache.get(t)||this.api.data(t);return B(t)?t[0]:t}},St={load:function(t,n){var i=this,r=t;r&&(n.filter&&(r=r.filter(n.filter)),(n.type||n.types)&&r.forEach(function(t){var e=n.types&&n.types[t.id]||n.type;i.setTargetType(t.id,e)}),i.data.targets.forEach(function(t){for(var e=0;e<r.length;e++)if(t.id===r[e].id){t.values=r[e].values,r.splice(e,1);break}}),i.data.targets=i.data.targets.concat(r)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.updateTypesElements(),n.done&&n.done.call(i.api)},loadFromArgs:function(e){var t,n=this;n.config&&(n.cache.reset(),(t=e.data||n.convertData(e,function(t){return n.load(n.convertDataToTargets(t),e)}))&&n.load(n.convertDataToTargets(t),e))},unload:function(t,e){var n=this,i=n.state,r=n.$el,e=e,t=t;return n.cache.reset(),e=e||function(){},(t=t.filter(function(t){return n.hasTarget(n.data.targets,t)}))&&0!==t.length?(r.svg.selectAll(t.map(function(t){return n.selectorTarget(t)})).transition().style("opacity","0").remove().call(k,e),t.forEach(function(e){i.withoutFadeIn[e]=!1,r.legend&&r.legend.selectAll("."+L.legendItem+n.getTargetSelectorSuffix(e)).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})}),void n.updateTypesElements()):void e()}},kt=Dn(7),Et={selectRectForSingle:function(n,i,r){var a=this,t=a.config,e=a.$el.main,o=t.data_selection_enabled,s=t.data_selection_grouped,c=t.data_selection_isselectable,u=t.tooltip_grouped,t=a.getAllValuesOnIndex(r);u&&(a.showTooltip(t,n),a.showGridFocus&&a.showGridFocus(t),!o||s)||e.selectAll("."+L.shape+"-"+r).each(function(){(0,O.select)(this).classed(L.EXPANDED,!0),o&&i.style("cursor",s?"pointer":null),u||(a.hideGridFocus&&a.hideGridFocus(),a.hideTooltip(),s||a.expandCirclesBars(r))}).filter(function(t){return a.isWithinShape(this,t)}).call(function(t){var e=t.data();o&&(s||c&&c.bind(a.api)(e))&&i.style("cursor","pointer"),u||(a.showTooltip(e,n),a.showGridFocus&&a.showGridFocus(e),a.unexpandCircles&&a.unexpandCircles(),t.each(function(t){return a.expandCirclesBars(r,t.id)}))})},expandCirclesBars:function(t,e,n){var i=this.config,r=this.$el,a=r.bar;r.circle&&i.point_focus_expand_enabled&&this.expandCircles(t,e,n),a&&this.expandBars(t,e,n)},setOverOut:function(t,e){var n,i,r=this,a=r.config,o=r.state.hasRadar,s=r.$el.main,c=$(e);!c&&-1===e||(n=a[t?"data_onover":"data_onout"].bind(r.api),a.color_onover&&r.setOverColor(t,e,c),c?n(e,s.select("."+L.arc+r.getTargetSelectorSuffix(e.id)).node()):a.tooltip_grouped?(t&&(a.point_focus_only&&o?r.showCircleFocus(r.getAllValuesOnIndex(e,!0)):r.expandCirclesBars(e,null,!0)),r.isMultipleX()||s.selectAll("."+L.shape+"-"+e).each(function(t){n(t,this)})):(i=r.cache.get(vt)||[],(e=s.selectAll("."+L.shape+"-"+e).filter(function(t){return r.isWithinShape(this,t)})).each(function(t){var e=this;0!==i.length&&!i.every(function(t){return t!==e})||(n(t,this),i.push(this))}),0<i.length&&e.empty()&&(n=a.data_onout.bind(r.api),i.forEach(function(t){return n((0,O.select)(t).datum(),t)}),i=[]),r.cache.add(vt,i)))},callOverOutForTouch:function(t){var e=this.cache.get(xt);($(t)&&e?t.id!==e.id:t!==e)&&((e||F(e))&&this.setOverOut(!1,e),(t||F(t))&&this.setOverOut(!0,t),this.cache.add(xt,t))},getDraggableSelection:function(){var e=this,t=e.config,n=e.state;return t.interaction_enabled&&t.data_selection_draggable&&e.drag?(0,kt.drag)().on("drag",function(t){n.event=t,e.drag(D(t,this))}).on("start",function(t){n.event=t,e.dragstart(D(t,this))}).on("end",function(t){n.event=t,e.dragend()}):function(){}},dispatchEvent:function(t,n,e){var i=this.config,r=this.state,a=r.eventReceiver,o=r.hasAxis,s=r.hasRadar,c=this.$el,u=c.eventRect,l=c.arcs,f=c.radar,r=this.isMultipleX(),c=(s?f.axes.select("."+L.axis+"-"+n+" text"):u||l.selectAll("."+L.target+" path").filter(function(t,e){return e===n})).node(),f=c.getBoundingClientRect(),u=f.width,l=f.left,f=f.top;!o||s||r||(u=(a=a.coords[n]).w,l+=a.x,f+=a.y);u=l+(e?e[0]:0)+(r||i.axis_rotated?0:u/2),e=f+(e?e[1]:0);it[/^(mouse|click)/.test(t)?"mouse":"touch"](c,t,{screenX:u,screenY:e,clientX:u,clientY:e})},setDragStatus:function(t){this.state.dragging=t}},Ct={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},getClass:function(e,n){var i=this,r=/s$/.test(e),a=/^(area|arc|line)s?$/.test(e),o=r?"id":"index";return function(t){t=t.data||t;return((n?i.generateClass(L[r?"shapes":"shape"],t[o]):"")+i.generateClass(L[e],t[a?"id":o])).trim()}},getChartClass:function(e){var n=this;return function(t){return L["chart"+e]+n.classTarget((t.data||t).id)}},generateExtraLineClass:function(){var e=this.config.line_classes||[],n=[];return function(t){t=t.id||t.data&&t.data.id||t;return n.indexOf(t)<0&&n.push(t),e[n.indexOf(t)%e.length]}},classRegion:function(t,e){return this.generateClass(L.region,e)+" "+("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],n="";return e&&(n=" "+L.target+"-"+e),this.generateClass(L.target,t)+n},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(0<=this.state.focusedTargetIds.indexOf(t.id)?L.focused:"")},classDefocused:function(t){return" "+(0<=this.state.defocusedTargetIds.indexOf(t.id)?L.defocused:"")},getTargetSelectorSuffix:function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function(t,e){e=e||"",t=this.getTargetSelectorSuffix(t);return e+"."+(L.target+t)+", "+e+"."+(L.circles+t)},selectorTargets:function(t,e){var n=this,t=t||[];return t.length?t.map(function(t){return n.selectorTarget(t,e)}):null},selectorLegend:function(t){return"."+(L.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null}},Dt=Dn(6),Rt=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Ot={getColorFromCss:function(){var t,e,n=ft,i=P.body,r=i[n];return r||((t=P.createElement("span")).className=L.colorPattern,t.style.display="none",i.appendChild(t),e=p.getComputedStyle(t).backgroundImage,t.parentNode.removeChild(t),-1<e.indexOf(";")&&(r=e.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return t.trim().replace(/[\"'\s]/g,"")}).filter(Boolean),i[n]=r)),r},generateColor:function(){var i,t,r=this,a=r.config,o=a.data_colors,s=a.data_color,c=[],u=X(a.color_pattern)?a.color_pattern:(0,Dt.scaleOrdinal)(r.getColorFromCss()||Rt).range(),l=u;return R(a.color_tiles)&&(i=a.color_tiles.bind(r.api)(),u=(t=u.map(function(t,e){var n=t.replace(/[#\(\)\s,]/g,""),n=r.state.datetimeId+"-pattern-"+n+"-"+e;return function(t,e,n){t=(0,O.select)(t.cloneNode(!0));return t.attr("id",n).insert("rect",":first-child").attr("width",t.attr("width")).attr("height",t.attr("height")).style("fill",e),{id:n,node:t.node()}}(i[e%i.length],t,n)})).map(function(t){return"url(#"+t.id+")"}),r.patterns=t),function(t){var e,n=t.id||t.data&&t.data.id||t,i=r.isTypeOf(n,["line","spline","step"])||!a.data_types[n];return R(o[n])?e=o[n].bind(r.api)(t):o[n]?e=o[n]:(c.indexOf(n)<0&&c.push(n),e=i?l[c.indexOf(n)%l.length]:u[c.indexOf(n)%u.length],o[n]=e),R(s)?s.bind(r.api)(e,t):e}},generateLevelColor:function(){var t=this.config,a=t.color_pattern,t=t.color_threshold,o="value"===t.unit,s=t.max||100,c=t.values&&t.values.length?t.values:[];return X(t)?function(t){for(var e=o?t:100*t/s,n=a[a.length-1],i=0,r=c.length;i<r;i++)if(e<=c[i]){n=a[i];break}return n}:null},setOverColor:function(t,e){var n=this,i=n.config,r=n.$el.main,a=i.color_onover,t=t?a:n.color;$(t)?t=function(t){t=t.id;return t in a?a[t]:n.color(t)}:T(t)?t=function(){return a}:R(a)&&(t=t.bind(n.api)),r.selectAll($(e)?"."+L.arc+n.getTargetSelectorSuffix(e.id):"."+L.shape+"-"+e).style("fill",t)}},Lt={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step"},Pt={Area:[Lt.AREA,Lt.AREA_SPLINE,Lt.AREA_SPLINE_RANGE,Lt.AREA_LINE_RANGE,Lt.AREA_STEP],AreaRange:[Lt.AREA_SPLINE_RANGE,Lt.AREA_LINE_RANGE],Arc:[Lt.PIE,Lt.DONUT,Lt.GAUGE,Lt.RADAR],Line:[Lt.LINE,Lt.SPLINE,Lt.AREA,Lt.AREA_SPLINE,Lt.AREA_SPLINE_RANGE,Lt.AREA_LINE_RANGE,Lt.STEP,Lt.AREA_STEP],Step:[Lt.STEP,Lt.AREA_STEP],Spline:[Lt.SPLINE,Lt.AREA_SPLINE,Lt.AREA_SPLINE_RANGE]},zt={getYDomainMinMax:function(e,n){var i=this,s=i.axis,t=i.config,c="min"===n,r=t.data_groups,u=i.mapToIds(e),l=i.getValuesAsIdKeyed(e);return 0<r.length&&function(){for(var a,o=i["has"+(c?"Negative":"Positive")+"ValueInTargets"](e),t=0;a=r[t];t++)(function(t){if(0===(t=t.filter(function(t){return 0<=u.indexOf(t)})).length)return a=t;var i=t[0],r=s.getId(i);o&&l[i]&&(l[i]=l[i].map(function(t){return(c?t<0:0<t)?t:0}));for(var e,n=1;e=t[n];n++)(function(t){if(!l[t])return;var n=s.getId(t);l[t].forEach(function(t,e){t=+t;n!==r||o&&(c?0<t:t<0)||(l[i][e]+=t)})})(e);a=t})(a)}(),et(n,Object.keys(l).map(function(t){return et(n,l[t])}))},getYDomainMin:function(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function(t){return this.getYDomainMinMax(t,"max")},isHiddenTargetWithYDomain:function(e){var n=this;return n.state.hiddenTargetIds.some(function(t){return n.axis.getId(t)===e})},getYDomain:function(t,e,n){var i=this,r=i.axis,a=i.config,o=i.scale,s="axis_"+e;if(i.isStackNormalized())return[0,100];var c=o&&o[e]&&"log"===o[e].type,u=t.filter(function(t){return r.getId(t.id)===e}),l=n?i.filterByXDomain(u,n):u;if(0===l.length)return i.isHiddenTargetWithYDomain(e)?o[e].domain():"y2"===e?o.y.domain():i.getYDomain(t,"y2",n);var f=a[s+"_min"],h=a[s+"_max"],d=i.getYDomainMin(l),g=i.getYDomainMax(l),p=a[s+"_center"],v=[Lt.BAR,Lt.BUBBLE,Lt.SCATTER].concat(Pt.Line).some(function(t){var e=-1<t.indexOf("area")?"area":t;return i.hasType(t,l)&&a[e+"_zerobased"]}),x=a[s+"_inverted"],y=i.hasDataLabel()&&a.axis_rotated,u=i.hasDataLabel()&&!a.axis_rotated;d=z(f)?f:!z(h)||d<h?d:h-10,g=z(h)?h:!z(f)||f<g?g:f+10,(d=isNaN(d)?0:d)===(g=isNaN(g)?d:g)&&(d<0?g=0:d=0);t=0<=d&&0<=g,n=d<=0&&g<=0;(v=z(f)&&t||z(h)&&n?!1:v)&&(t&&(d=0),n&&(g=0));var _,m,b,w=Math.abs(g-d),T={top:.1*w,bottom:.1*w};I(p)&&(g=p+(h=Math.max(Math.abs(d),Math.abs(g))),d=p-h),y?(_=M(o.y.range()),m=i.getDataLabelLength(d,g,"width").map(function(t){return t/_}),["bottom","top"].forEach(function(t,e){T[t]+=w*(m[e]/(1-m[0]-m[1]))})):u&&(b=i.getDataLabelLength(d,g,"height"),["bottom","top"].forEach(function(t,e){T[t]+=r.convertPixelsToAxisPadding(b[e],w)}));var A=a[s+"_padding"];X(A)&&["bottom","top"].forEach(function(t){T[t]=r.getPadding(A,t,T[t],w)}),v&&(t&&(T.bottom=d),n&&(T.top=-g));g=c?[d,g].map(function(t){return t<0?0:t}):[d-T.bottom,g+T.top];return x?g.reverse():g},getXDomainMinMax:function(t,e){var n=this.config["axis_x_"+e],i=et(e,t.map(function(t){return et(e,t.values.map(function(t){return t.x}))})),t=$(n)?n.value:n,t=I(t)&&this.axis.isTimeSeries()?at.bind(this)(t):t;return $(n)&&n.fit&&("min"===e&&t<i||"max"===e&&i<t)&&(t=void 0),I(t)?t:i},getXDomainMin:function(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function(t){var e=this.axis,n=this.config,i=t[1]-t[0],t=n.axis_x_padding,e=e.isCategorized()?0:this.hasType("bar")?1<(r=this.getMaxDataCount())?i/(r-1)/2:.5:.01*i,r=e,i=e;return $(t)&&X(t)?(r=z(t.left)?t.left:e,i=z(t.right)?t.right:e):F(n.axis_x_padding)&&(i=r=t),{left:r,right:i}},getXDomain:function(t){var e,n,i="log"===this.scale.x.type,r=[this.getXDomainMin(t),this.getXDomainMax(t)],a=0,o=0;return i?(a=r[0],o=r[1]):(e=this.axis.isCategorized(),n=this.axis.isTimeSeries(),t=this.getXDomainPadding(r),(i=r[0])-(r=r[1])!=0||e||(r=n?(i=new Date(.5*i.getTime()),new Date(1.5*r.getTime())):(i=0===i?1:.5*i,0===r?-1:1.5*r)),!i&&0!==i||(a=n?new Date(i.getTime()-t.left):i-t.left),!r&&0!==r||(o=n?new Date(r.getTime()+t.right):r+t.right)),[a,o]},updateXDomain:function(t,e,n,i,r){var a=this,o=a.config,s=a.org,c=a.scale,u=c.x,c=c.subX,o=o.zoom_enabled;return n&&(u.domain(r||tt(a.getXDomain(t))),s.xDomain=u.domain(),o&&a.zoom.updateScaleExtent(),c.domain(u.domain()),a.brush&&a.brush.scale(c)),e&&(c=r||!a.brush||U(a)?s.xDomain:j(a).map(c.invert),u.domain(c),o&&a.zoom.updateScaleExtent()),i&&u.domain(a.trimXDomain(u.orgDomain())),u.domain()},trimXDomain:function(t){var e=this.getZoomDomain(),n=e[0],e=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),e<=t[1]&&(t[0]=+t[0]-(t[1]-e),t[1]=e),t},getZoomDomain:function(){var t=this.config,e=this.org.xDomain,n=e[0],e=e[1];return[n=I(t.zoom_x_min)?et("min",[n,t.zoom_x_min]):n,e=I(t.zoom_x_max)?et("max",[e,t.zoom_x_max]):e]}};function Nt(t,e,n){var i=t.config,e="axis_"+e+"_tick_format";return(i[e]||t.defaultValueFormat)(n)}var It={getYFormat:function(t){var i=this,r=i.yFormat,a=i.y2Format;return t&&!i.hasType("gauge")&&(r=i.defaultArcValueFormat,a=i.defaultArcValueFormat),function(t,e,n){return(i.axis&&"y2"===i.axis.getId(n)?a:r).call(i,t,e)}},yFormat:function(t){return Nt(this,"y",t)},y2Format:function(t){return Nt(this,"y2",t)},defaultValueFormat:function(t){return z(t)?+t:""},defaultArcValueFormat:function(t,e){return(100*e).toFixed(1)+"%"},dataLabelFormat:function(t){function e(t){return z(t)?+t:""}var n=this.config.data_labels,i=e;return R(n.format)?i=n.format:b(n.format)&&(i=n.format[t]?!0===n.format[t]?e:n.format[t]:function(){return""}),i.bind(this.api)}},Ft={initLegend:function(){var t=this,e=t.config,n=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(n.legend=t.$el.svg.append("g").classed(L.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,n){var i=this,r=i.config,a=i.state,o=i.scale,s=i.$el,e=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};e.withTransition=A(e,"withTransition",!0),e.withTransitionForTransform=A(e,"withTransitionForTransform",!0),r.legend_contents_bindto&&r.legend_contents_template?i.updateLegendTemplate():i.updateLegendElement(t||i.mapToIds(i.data.targets),e,n),s.legend.selectAll("."+L.legendItem).classed(L.legendItemHidden,function(t){t=!i.isTargetToShow(t);return t&&(this.style.opacity=null),t}),i.updateScales(!1,!o.zoom),i.updateSvgSize(),i.transformAll(e.withTransitionForTransform,n),a.legendHasRendered=!0},updateLegendTemplate:function(){var n,i,r=this,t=r.config,e=r.$el,a=(0,O.select)(t.legend_contents_bindto),o=t.legend_contents_template;a.empty()||(t=r.mapToIds(r.data.targets),n=[],i="",t.forEach(function(t){var e=R(o)?o.bind(r.api)(t,r.color(t),r.api.data(t)[0].values):rt(o,{COLOR:r.color(t),TITLE:t});e&&(n.push(t),i+=e)}),t=a.html(i).selectAll(function(){return this.childNodes}).data(n),r.setLegendItem(t),e.legend=a)},updateSizeForLegend:function(t){var e=this.config,n=this.state,i=n.isLegendTop,r=n.isLegendLeft,a=n.isLegendRight,o=n.isLegendInset,s=n.current,n=t.width,t=t.height,e={top:i?this.getCurrentPaddingTop()+e.legend_inset_y+5.5:s.height-t-this.getCurrentPaddingBottom()-e.legend_inset_y,left:r?this.getCurrentPaddingLeft()+e.legend_inset_x+.5:s.width-n-this.getCurrentPaddingRight()-e.legend_inset_x+.5};this.state.margin3={top:a?0:o?e.top:s.height-t,right:NaN,bottom:0,left:a?s.width-n:o?e.left:0}},transformLegend:function(t){var e=this.$el.legend;(t?e.transition():e).attr("transform",this.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var n=this.$el.legend;n&&n.select("."+L.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){var t=this.state,e=t.current.width,n=t.isLegendRight,i=t.isLegendInset,r=t.legendItemWidth,t=t.legendStep;return this.config.legend_show?n||i?r*(t+1):e:0},getLegendHeight:function(){var t=this.state,e=t.current,n=t.isLegendRight,i=t.legendItemHeight,t=t.legendStep;return this.config.legend_show?n?e.height:Math.max(20,i)*(t+1):0},opacityForLegend:function(t){return t.classed(L.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function(t){return t.classed(L.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var n=this,i=n.$el.legend,r=n.mapToTargetIds(t);i&&i.selectAll("."+L.legendItem).filter(function(t){return 0<=r.indexOf(t)}).classed(L.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,(0,O.select)(this))})},revertLegend:function(){var t=this,e=t.$el.legend;e&&e.selectAll("."+L.legendItem).classed(L.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend((0,O.select)(this))})},showLegend:function(t){var e=this,n=e.config,i=e.$el;n.legend_show||(n.legend_show=!0,i.legend?i.legend.style("visibility","visible"):e.initLegend(),e.state.legendHasRendered||e.updateLegend()),e.removeHiddenLegendIds(t),i.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend((0,O.select)(this))})},hideLegend:function(t){var e=this.config,n=this.$el.legend;e.legend_show&&w(t)&&(e.legend_show=!1,n.style("visibility","hidden")),this.addHiddenLegendIds(t),n.selectAll(this.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var n,i=this.cache,r=this.state,a=gt;return t&&((n=!r.redrawing&&i.get(a)||{})[t]||(n[t]=this.getTextRect(e,L.legendItem),i.add(a,n)),n=n[t]),n},setLegendItem:function(t){var n=this,i=n.api,r=n.config,a=n.state,o="touch"===a.inputType,s=n.hasType("gauge");t.attr("class",function(t){var e=(0,O.select)(this);return(!e.empty()&&e.attr("class")||"")+n.generateClass(L.legendItem,t)}).style("visibility",function(t){return n.isLegendToShow(t)?"visible":"hidden"}),r.interaction_enabled&&(t.style("cursor","pointer").on("click",function(t,e){S(r.legend_item_onclick,i,e)||(t.altKey?(i.hide(),i.show(e)):(i.toggle(e),(0,O.select)(this).classed(L.legendItemFocused,!1).style("opacity",null))),o&&n.hideTooltip()}),o||t.on("mouseout",function(t,e){S(r.legend_item_onout,i,e)||((0,O.select)(this).classed(L.legendItemFocused,!1),s&&n.undoMarkOverlapped(n,"."+L.gaugeValue),n.api.revert())}).on("mouseover",function(t,e){S(r.legend_item_onover,i,e)||((0,O.select)(this).classed(L.legendItemFocused,!0),s&&n.markOverlapped(e,n,"."+L.gaugeValue),!a.transiting&&n.isTargetToShow(e)&&i.focus(e))}))},updateLegendElement:function(t,e){function n(t,e,n){function i(t,e){e||(r=(s-g-o)/2)<10&&(r=(s-o)/2,g=0,m++),_[t]=m,y[m]=u.isLegendInset?10:r,p[t]=g,g+=o}var r,a=n===w.length-1,a=(t=c.getLegendItemTextBox(e,t)).width+f+(a&&!b?0:10)+l.legend_padding,t=t.height+4,o=b?t:a,s=b?c.getLegendHeight():c.getLegendWidth();if(0===n&&(d=h=m=g=0),l.legend_show&&!c.isLegendToShow(e))return v[e]=0,x[e]=0,_[e]=0,p[e]=0;v[e]=a,x[e]=t,(!h||h<=a)&&(h=a),(!d||d<=t)&&(d=t),t=b?d:h,l.legend_equally?(Object.keys(v).forEach(function(t){return v[t]=h}),Object.keys(x).forEach(function(t){return x[t]=d}),(r=(s-t*w.length)/2)<10?(m=g=0,w.forEach(function(t){return i(t)})):i(e,!0)):i(e)}var i,c=this,l=c.config,u=c.state,r=c.$el.legend,f=l.legend_item_tile_width+5,h=0,d=0,g=0,p={},v={},x={},y=[0],_={},m=0,b=u.isLegendRight||u.isLegendInset,w=t.filter(function(t){return!I(l.data_names[t])||null!==l.data_names[t]}),a=e.withTransition;u.isLegendInset&&(m=l.legend_inset_step||w.length,c.updateLegendStep(m));function o(t,e){return i(t,e)+4+l.legend_item_tile_width}function s(t,e){return i(t,e)}function T(t,e){return i(t,e)-2}function A(t,e){return i(t,e)-2+l.legend_item_tile_width}function M(t,e){return k(t,e)-5}function S(t,e){return k(t,e)+4}var k=u.isLegendRight?(i=function(t){return h*_[t]},function(t){return y[_[t]]+p[t]}):u.isLegendInset?(i=function(t){return h*_[t]+10},function(t){return y[_[t]]+p[t]}):(i=function(t){return y[_[t]]+p[t]},function(t){return d*_[t]}),E=function(t,e){return k(t,e)+9},C=r.selectAll("."+L.legendItem).data(w).enter().append("g");c.setLegendItem(C),C.append("text").text(function(t){return I(l.data_names[t])?l.data_names[t]:t}).each(function(t,e){n(this,t,e)}).style("pointer-events","none").attr("x",b?o:-200).attr("y",b?-200:E),C.append("rect").attr("class",L.legendItemEvent).style("fill-opacity","0").attr("x",b?s:-200).attr("y",b?-200:M);function D(t){return t=c.getDataById(t),c.levelColor?c.levelColor(t.values[0].value):c.color(t)}var R,t=l.legend_usePoint;t?(R=[],C.append(function(t){var e=X(l.point_pattern)?l.point_pattern:[l.point_type];-1===R.indexOf(t)&&R.push(t);e=e[R.indexOf(t)%e.length];return"rectangle"===e&&(e="rect"),P.createElementNS(O.namespaces.svg,"hasValidPointType"in c&&c.hasValidPointType(e)?e:"use")}).attr("class",L.legendItemPoint).style("fill",D).style("pointer-events","none").attr("href",function(t,e,n){return"use"===n[e].nodeName.toLowerCase()?"#"+u.datetimeId+"-point-"+t:void 0})):C.append("line").attr("class",L.legendItemTile).style("stroke",D).style("pointer-events","none").attr("x1",b?T:-200).attr("y1",b?-200:S).attr("x2",b?A:-200).attr("y2",b?-200:S).attr("stroke-width",l.legend_item_tile_height),e=r.select("."+L.legendBackground+" rect"),u.isLegendInset&&0<h&&0===e.size()&&(e=r.insert("g","."+L.legendItem).attr("class",L.legendBackground).append("rect"));C=r.selectAll("text").data(w).text(function(t){return I(l.data_names[t])?l.data_names[t]:t}).each(function(t,e){n(this,t,e)});(a?C.transition():C).attr("x",o).attr("y",E);E=r.selectAll("rect."+L.legendItemEvent).data(w);(a?E.transition():E).attr("width",function(t){return v[t]}).attr("height",function(t){return x[t]}).attr("x",s).attr("y",M),t?(t=r.selectAll("."+L.legendItemPoint).data(w),(a?t.transition():t).each(function(){var t,e,n,i,r=this.nodeName.toLowerCase(),a=l.point_r,o="x",s="y",c=2,u=2.5;"circle"===r?(o="cx",s="cy",e=a+(t=.2*a),c=2*a,u=-t):"rect"===r&&(i=n=2.5*a,u=3),(0,O.select)(this).attr(o,function(t){return T(t)+c}).attr(s,function(t){return S(t)-u}).attr("r",e).attr("width",n).attr("height",i)})):(r=r.selectAll("line."+L.legendItemTile).data(w),(a?r.transition():r).style("stroke",D).attr("x1",T).attr("y1",S).attr("x2",A).attr("y2",S)),e&&(a?e.transition():e).attr("height",c.getLegendHeight()-12).attr("width",h*(m+1)+10),c.updateLegendItemWidth(h),c.updateLegendItemHeight(d),c.updateLegendStep(m)}},Xt=Dn(8),Bt={redraw:function(t){void 0===t&&(t={});var n=this,e=n.config,i=n.state,r=n.$el,a=r.main;i.redrawing=!0;var o=n.filterTargetsToShow(n.data.targets),s=t.initializing,c=t.flow,u=n.getWithOption(t),l=u.Transition?e.transition_duration:0,f=u.TransitionForExit?l:0,h=u.TransitionForAxis?l:0,h=n.axis&&n.axis.generateTransitions(h);n.updateSizes(s),u.Legend&&e.legend_show?(t.withTransition=!!l,n.updateLegend(n.mapToIds(n.data.targets),t,h)):u.Dimension&&n.updateDimension(!0),n.hasArcType()&&!i.hasRadar||!n.updateCircleY||(n.circleY=n.updateCircleY()),i.hasAxis?(n.axis.redrawAxis(o,u,h,c,s),e.data_empty_label_text&&a.select("text."+L.text+"."+L.empty).attr("x",i.width/2).attr("y",i.height/2).text(e.data_empty_label_text).style("display",o.length?"none":null),n.hasGrid()&&n.updateGrid(l),e.regions.length&&n.updateRegion(l),["bar","candlestick","line","area"].forEach(function(t){var e=q(t);(/^(line|area)$/.test(t)&&n.hasTypeOf(e)||n.hasType(t))&&n["update"+e](f)}),r.text&&a.selectAll("."+L.selectedCircles).filter(n.isBarType.bind(n)).selectAll("circle").remove(),e.interaction_enabled&&!c&&u.EventRect&&(n.redrawEventRect(),n.bindZoomEvent&&n.bindZoomEvent())):(r.arcs&&n.redrawArc(l,f,u.Transform),r.radar&&n.redrawRadar(f)),i.resizing||!n.hasPointType()&&!i.hasRadar||n.updateCircle(),n.hasDataLabel()&&!n.hasArcType(null,["radar"])&&n.updateText(f),n.redrawTitle&&n.redrawTitle(),s&&n.updateTypesElements(),n.generateRedrawList(o,c,l,u.Subchart),n.callPluginHook("$redraw",t,l)},generateRedrawList:function(t,e,n,i){var r=this,a=r.config,o=r.state,s=r.getDrawShape();o.hasAxis&&a.subchart_show&&r.redrawSubchart(i,n,s);var c,u=e&&r.generateFlow({targets:t,flow:e,duration:e.duration,shape:s,xv:r.xv.bind(r)}),t=(n||u)&&ot(),l=r.getRedrawList(s,e,u,t),e=e||a.onrendered?function(){u&&u(),o.redrawing=!1,S(a.onrendered,r.api)}:null;e&&(t&&l.length?(c=wt(),(0,Xt.transition)().duration(n).each(function(){l.reduce(function(t,e){return t.concat(e)},[]).forEach(function(t){return c.add(t)})}).call(c,e)):o.transiting||e()),r.mapToIds(r.data.targets).forEach(function(t){o.withoutFadeIn[t]=!0})},getRedrawList:function(i,t,e,r){var a=this,n=a.config,o=a.state,s=o.hasAxis,c=o.hasRadar,u=a.$el.grid,l=i.pos,f=l.cx,h=l.cy,o=l.xForText,l=l.yForText,d=[];return s&&((n.grid_x_lines.length||n.grid_y_lines.length)&&d.push(a.redrawGrid(r)),n.regions.length&&d.push(a.redrawRegion(r)),Object.keys(i.type).forEach(function(t){var e=q(t),n=i.type[t];(/^(area|line)$/.test(t)&&a.hasTypeOf(e)||a.hasType(t))&&d.push(a["redraw"+e](n,r))}),!t&&u.main&&d.push(a.updateGridFocus())),a.hasArcType()&&!c||!X(n.data_labels)||!1===n.data_labels||d.push(a.redrawText(o,l,t,r)),(a.hasPointType()||c)&&!n.point_focus_only&&a.redrawCircle&&d.push(a.redrawCircle(f,h,r,e)),d},updateAndRedraw:function(t){var e,n=this.config,i=this.state;(t=void 0===t?{}:t).withTransition=A(t,"withTransition",!0),t.withTransform=A(t,"withTransform",!1),t.withLegend=A(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=A(t,"withTransitionForTransform",t.withTransition),t.withLegend&&n.legend_show||(i.hasAxis&&(e=this.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0)),this.updateScales(),this.updateSvgSize(),this.transformAll(t.withTransitionForTransform,e)),this.redraw(t,e)},redrawWithoutRescale:function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}};function $t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=1);var i={linear:Dt.scaleLinear,log:Dt.scaleSymlog,_log:Dt.scaleLog,time:Dt.scaleTime}[t=void 0===t?"linear":t]();return i.type=t,/_?log/.test(t)&&i.clamp(!0),i.range([e,n])}var Yt={getXScale:function(t,e,n,i){e=this.scale.zoom||$t(this.axis.getAxisType("x"),t,e);return this.getCustomizedScale(n?e.domain(n):e,i)},getYScale:function(t,e,n,i){n=$t(this.axis.getAxisType(t),e,n);return i&&n.domain(i),n},getYScaleById:function(t,e){void 0===e&&(e=!1);t="y2"===this.axis.getId(t);return this.scale[e?t?"subY2":"subY":t?"y2":"y"]},getCustomizedScale:function(n,t){function e(t,e){return t=n(t)+a(),e?t:Math.ceil(t)}var i,r=this,a=t||function(){return r.axis.x.tickOffset()};for(i in n)e[i]=n[i];return e.orgDomain=function(){return n.domain()},e.orgScale=function(){return n},r.axis.isCategorized()&&(e.domain=function(t){return arguments.length?(n.domain(t),e):[(t=this.orgDomain())[0],t[1]+1]}),e},updateScales:function(t,e){void 0===e&&(e=!0);var n=this,i=n.axis,r=n.config,a=n.format,o=n.org,s=n.scale,c=n.state,u=c.width,l=c.height,f=c.width2,h=c.height2;c.hasAxis?(h={x:(c=r.axis_rotated)?1:0,y:c?0:l,subX:c?1:0,subY:c?0:h},c={x:c?l:u,y:c?u:1,subX:c?l:u,subY:c?f:1},f=e&&s.x&&s.x.orgDomain(),o=e&&o.xDomain,s.x=n.getXScale(h.x,c.x,f,function(){return i.x.tickOffset()}),s.subX=n.getXScale(h.x,c.x,o,function(t){return t%1?0:i.subX.tickOffset()}),a.xAxisTick=i.getXAxisTickFormat(),i.setAxis("x",s.x,r.axis_x_tick_outer,t),r.subchart_show&&i.setAxis("subX",s.subX,r.axis_x_tick_outer,t),s.y=n.getYScale("y",h.y,c.y,s.y?s.y.domain():r.axis_y_default),s.subY=n.getYScale("y",h.subY,c.subY,s.subY?s.subY.domain():r.axis_y_default),i.setAxis("y",s.y,r.axis_y_tick_outer,t),r.axis_y2_show&&(s.y2=n.getYScale("y2",h.y,c.y,s.y2?s.y2.domain():r.axis_y2_default),s.subY2=n.getYScale("y2",h.subY,c.subY,s.subY2?s.subY2.domain():r.axis_y2_default),i.setAxis("y2",s.y2,r.axis_y2_tick_outer,t))):n.updateArc&&n.updateArc()},xx:function(t){var e=this.config,n=this.scale,i=n.x,n=n.zoom,i=e.zoom_enabled&&n?n:i;return t?i(z(t.x)?t.x:t):null},xv:function(t){var e=this.axis,n=this.config,i=this.scale.x,t=this.getBaseValue(t);return e.isTimeSeries()?t=at.call(this,t):e.isCategorized()&&T(t)&&(t=n.axis_x_categories.indexOf(t)),Math.ceil(i(t))},yv:function(t){var e=this.scale,n=e.y,e=e.y2,n=t.axis&&"y2"===t.axis?e:n;return Math.ceil(n(this.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},jt=Dn(9),Gt={getDrawShape:function(){var t,i=this,e=i.config.axis_rotated,n=i.state.hasRadar,r={type:{},indices:{},pos:{}};return["bar","candlestick","line","area"].forEach(function(t){var e,n=q(/^(bubble|scatter)$/.test(t)?"line":t);(i.hasType(t)||i.hasTypeOf(n)||"line"===t&&(i.hasType("bubble")||i.hasType("scatter")))&&(e=i.getShapeIndices(i["is"+n+"Type"]),n=i["generateDraw"+n],r.indices[t]=e,r.type[t]=n?n.bind(i)(e,!1):void 0)}),i.hasArcType()&&!n||(t=n?i.radarCircleX:e?i.circleY:i.circleX,e=n?i.radarCircleY:e?i.circleX:i.circleY,r.pos={xForText:i.generateXYForText(r.indices,!0),yForText:i.generateXYForText(r.indices,!1),cx:(t||function(){}).bind(i),cy:(e||function(){}).bind(i)}),r},getShapeIndices:function(t){var s=this.config,c=s.data_xs,e=X(c),u={},l=e?{}:0;return e&&K(Object.keys(c).map(function(t){return c[t]})).forEach(function(t){l[t]=0,u[t]={}}),this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(var e,n=(t.id in c?c[t.id]:""),i=n?u[n]:u,r=0;e=s.data_groups[r];r++)if(!(e.indexOf(t.id)<0))for(var a,o=0;a=e[o];o++)if(a in i){i[t.id]=i[a];break}N(i[t.id])&&(i[t.id]=n?l[n]++:l++,i.__max__=(n?l[n]:l)-1)}),u},getIndices:function(t,e){var n=this.config.data_xs;return X(n)?t[n[e]]:t},getIndicesMax:function(e){return X(this.config.data_xs)?Object.keys(e).map(function(t){return e[t].__max__||0}).reduce(function(t,e){return t+e}):e.__max__},getShapeX:function(a,o,t){function s(t,e){return t+e}var c=this,e=c.config,n=c.scale,u=t?n.subX:n.zoom||n.x,l=e.bar_padding,f=b(a)&&(a._$total.length?a._$total.reduce(s)/2:0);return function(t){var e=c.getIndices(o,t.id),n=t.id in e?e[t.id]:0,i=(e.__max__||0)+1,r=0;return X(t.x)&&(e=u(t.x,!0),r=f?e-(a[t.id]||a._$width)+a._$total.slice(0,n+1).reduce(s)-f:e-(F(a)?a:a._$width)*(i/2-n)),a&&r&&1<i&&l&&(n&&(r+=l*n),2<i?r-=(i-1)*l/2:2===i&&(r-=l/2)),r}},getShapeY:function(n){var i=this,r=i.isStackNormalized();return function(t){var e=t.value;return F(t)?e=t:r?e=i.getRatio("index",t,!0):i.isBubbleZType(t)&&(e=i.getBubbleZData(t.value,"y")),i.getYScaleById(t.id,n)(e)}},getShapeYMin:function(t){var e=this.scale[this.axis.getId(t)].domain()[0];return!this.isGrouped(t)&&0<e?e:0},getShapeOffsetData:function(t){var r=this,e=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(t,r))),a=r.isStackNormalized(),t=e.map(function(t){var e=t.values,i={},n=(e=r.isStepType(t)?r.convertValuesToStep(e):e).reduce(function(t,e){var n=+e.x;return t[n]=e,i[n]=a?r.getRatio("index",e,!0):e.value,t},{});return{id:t.id,rowValues:e,rowValueMapByXValue:n,values:i}});return{indexMapByTargetId:e.reduce(function(t,e,n){return t[e.id]=n,t},{}),shapeOffsetTargets:t}},getShapeOffset:function(t,e,u){var l=this,t=l.getShapeOffsetData(t),f=t.shapeOffsetTargets,h=t.indexMapByTargetId;return function(n,i){var r=l.getIndices(e,n.id),a=l.getYScaleById(n.id,u),o=a(l.getShapeYMin(n.id)),s=+n.x,c=o;return f.filter(function(t){return t.id!==n.id}).forEach(function(t){var e;r[t.id]===r[n.id]&&h[t.id]<h[n.id]&&((e=!(e=t.rowValues[i])||+e.x!=s?t.rowValueMapByXValue[s]:e)&&0<=e.value*n.value&&(c+=a(t.values[s])-o))}),c}},getBarW:function(t,e,i){function n(t){var e=t?r[u][t]:r[u],n=t?e.ratio:r[u+"_ratio"],t=t?e.max:r[u+"_max"],n=F(e)?e:i?l*n/i:0;return t&&t<n?t:n}var r=this.config,a=this.org,o=this.scale,s=this.getMaxDataCount(),c="bar"===t&&r.data_groups.length,u=t+"_width",l=o.zoom&&!this.axis.isCategorized()?a.xDomain.map(function(t){return o.zoom(t)}).reduce(function(t,e){return Math.abs(t)+e})/s:e.tickInterval(s),f=n();return!c&&b(r[u])&&(f={_$width:f,_$total:[]},this.filterTargetsToShow(this.data.targets).forEach(function(t){r[u][t.id]&&(f[t.id]=n(t.id),f._$total.push(f[t.id]||f._$width))})),f},isWithinShape:function(t,e){var n,i=this,r=(0,O.select)(t);return i.isTargetToShow(e.id)?"hasValidPointType"in i&&i.hasValidPointType(t.nodeName)?n=i.isStepType(e)?i.isWithinStep(t,i.getYScaleById(e.id)(e.value)):i.isWithinCircle(t,i.isBubbleType(e)?1.5*i.pointSelectR(e):0):"path"===t.nodeName&&(n=!r.classed(L.bar)||i.isWithinBar(t)):n=!1,n},getInterpolate:function(t){t=this.getInterpolateType(t);return{basis:jt.curveBasis,"basis-closed":jt.curveBasisClosed,"basis-open":jt.curveBasisOpen,bundle:jt.curveBundle,cardinal:jt.curveCardinal,"cardinal-closed":jt.curveCardinalClosed,"cardinal-open":jt.curveCardinalOpen,"catmull-rom":jt.curveCatmullRom,"catmull-rom-closed":jt.curveCatmullRomClosed,"catmull-rom-open":jt.curveCatmullRomOpen,"monotone-x":jt.curveMonotoneX,"monotone-y":jt.curveMonotoneY,natural:jt.curveNatural,"linear-closed":jt.curveLinearClosed,linear:jt.curveLinear,step:jt.curveStep,"step-after":jt.curveStepAfter,"step-before":jt.curveStepBefore}[t]},getInterpolateType:function(t){var e=this.config,n=e.spline_interpolation_type,n=this.isInterpolationType(n)?n:"cardinal";return this.isSplineType(t)?n:this.isStepType(t)?e.line_step_type:"linear"}},Ht={setContainerSize:function(){var t=this.state;t.current.width=this.getCurrentWidth(),t.current.height=this.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this.config,e=t.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var t=this.config,e=this.state.hasAxis,n=this.$el,i=e?t.axis_y2_axes.length:0,e=z(t.padding_top)?t.padding_top:0;return n.title&&n.title.node()&&(e+=this.getTitlePadding()),i&&t.axis_rotated&&(e+=this.getHorizontalAxisHeight("y2")*i),e},getCurrentPaddingBottom:function(){var t=this.config,e=this.state.hasAxis,n=t.axis_rotated?"y":"x",e=e?t["axis_"+n+"_axes"].length:0;return(z(t.padding_bottom)?t.padding_bottom:0)+(e?this.getHorizontalAxisHeight(n)*e:0)},getCurrentPaddingLeft:function(t){var e=this.config,n=this.state.hasAxis,i=e.axis_rotated,r=i?"x":"y",a=n?e["axis_"+r+"_axes"].length:0,t=n?this.getAxisWidthByAxisId(r,t):0;return(z(e.padding_left)?e.padding_left:n&&i?e.axis_x_show?Math.max(_(t),40):1:!n||e.axis_y_show&&!e.axis_y_inner?_(t):this.axis.getAxisLabelPosition("y").isOuter?30:1)+t*a},getCurrentPaddingRight:function(t){void 0===t&&(t=!1);var e=this.config,n=this.state.hasAxis,i=this.state.isLegendRight?this.getLegendWidth()+20:0,r=n?e.axis_y2_axes.length:0,n=n?this.getAxisWidthByAxisId("y2"):0,t=t?this.axis.getXAxisTickTextY2Overflow(10):0;return(z(e.padding_right)?e.padding_right+1:this.axis&&e.axis_rotated?10+i:!this.axis||e.axis_y2_show&&!e.axis_y2_inner?Math.max(_(n)+i,t):Math.max(2+i+(this.axis.getAxisLabelPosition("y2").isOuter?20:0),t))+n*r},getParentRectValue:function(t){for(var e,n,i="offset"+q(t),r=this.$el.chart.node();!e&&r&&"BODY"!==r.tagName;){try{e=r.getBoundingClientRect()[t]}catch(t){i in r&&(e=r[i])}r=r.parentNode}return"width"!==t||(n=P.body.offsetWidth)<e&&(e=n),e},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height");return 0<t.indexOf("px")?parseInt(t,10):0},getSvgLeft:function(t){var e=this.config,n=this.$el,i=e.axis_rotated||!e.axis_rotated&&!e.axis_y_inner,e=e.axis_rotated?L.axisX:L.axisY,e=n.main.select("."+e).node(),i=e&&i?e.getBoundingClientRect():{right:0},e=n.chart.node().getBoundingClientRect(),n=this.hasArcType(),t=i.right-e.left-(n?0:this.getCurrentPaddingLeft(t));return 0<t?t:0},updateDimension:function(t){var e=this.config,n=this.state.hasAxis,i=this.$el;n&&!t&&this.axis.x&&e.axis_rotated&&this.axis.subX&&this.axis.subX.create(i.axis.subX),this.updateScales(t),this.updateSvgSize(),this.transformAll(!1)},updateSvgSize:function(){var t=this.state,e=t.clip,n=t.current,i=t.hasAxis,r=t.width,a=t.height,t=this.$el.svg;t.attr("width",n.width).attr("height",n.height),i&&(n={width:0,height:0},(i=t.select("."+L.brush+" .overlay")).size()&&(n.width=+i.attr("width"),n.height=+i.attr("height")),t.selectAll(["#"+e.id,"#"+e.idGrid]).select("rect").attr("width",r).attr("height",a),t.select("#"+e.idXAxis).select("rect").call(this.setXAxisClipPath.bind(this)),t.select("#"+e.idYAxis).select("rect").call(this.setYAxisClipPath.bind(this)),e.idSubchart&&t.select("#"+e.idSubchart).select("rect").attr("width",r).attr("height",n.height))},updateSizes:function(t){var e=this,n=e.config,i=e.state,r=e.$el.legend,a=n.axis_rotated,o=e.hasArcType();t||e.setContainerSize();var s={width:r?e.getLegendWidth():0,height:r?e.getLegendHeight():0};!o&&n.axis_x_show&&n.axis_x_tick_autorotate&&e.updateXAxisTickClip();var c=i.isLegendRight||i.isLegendInset?0:s.height,u=a||o?0:e.getHorizontalAxisHeight("x"),t=n.subchart_axis_x_show&&n.subchart_axis_x_tick_text_show?u:30,r=n.subchart_show&&!o?n.subchart_size_height+t:0;i.margin=!o&&a?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(!0),bottom:e.getHorizontalAxisHeight("y")+c+e.getCurrentPaddingBottom(),left:r+(o?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:o?0:e.getCurrentPaddingRight(!0),bottom:u+r+c+e.getCurrentPaddingBottom(),left:o?0:e.getCurrentPaddingLeft()},i.margin2=a?{top:i.margin.top,right:NaN,bottom:20+c,left:e.state.rotatedPadding.left}:{top:i.current.height-r-c,right:NaN,bottom:t+c,left:i.margin.left},i.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(s),i.width=i.current.width-i.margin.left-i.margin.right,i.height=i.current.height-i.margin.top-i.margin.bottom,i.width<0&&(i.width=0),i.height<0&&(i.height=0),i.width2=a?i.margin.left-i.rotatedPadding.left-i.rotatedPadding.right:i.width,i.height2=a?i.height:i.current.height-i.margin2.top-i.margin2.bottom,i.width2<0&&(i.width2=0),i.height2<0&&(i.height2=0);c=e.hasType("gauge"),a=n.legend_show&&i.isLegendRight;i.arcWidth=i.width-(a?s.width+10:0),i.arcHeight=i.height-(a&&!c?0:10),c&&!n.gauge_fullCircle&&(i.arcHeight+=i.height-e.getPaddingBottomForGauge()),e.updateRadius&&e.updateRadius(),i.isLegendRight&&o&&(i.margin3.left=i.arcWidth/2+1.1*i.radiusExpanded)}},Ut={opacityForText:function(t){return(!this.isBarType(t)||this.meetsLabelThreshold(Math.abs(this.getRatio("bar",t)),"bar"))&&this.hasDataLabel?"1":"0"},initText:function(){this.$el.main.select("."+L.chart).append("g").attr("class",L.chartTexts)},updateTargetsForText:function(t){var e=this.getChartClass("Text"),n=this.getClass("texts","id"),i=this.classFocus.bind(this);this.$el.main.select("."+L.chartTexts).selectAll("."+L.chartText).data(t).attr("class",function(t){return e(t)+i(t)}).enter().append("g").style("opacity","0").attr("class",e).style("pointer-events","none").append("g").attr("class",n)},updateText:function(t){var o=this,n=o.config,e=o.$el,i=o.getClass("text","index"),r=e.main.selectAll("."+L.texts).selectAll("."+L.text).data(o.labelishData.bind(o));r.exit().transition().duration(t).style("fill-opacity","0").remove(),e.text=r.enter().append("text").merge(r).attr("class",i).attr("text-anchor",function(t){var e=t.value<0;return o.isCandlestickType(t)&&(e=(t=o.getCandlestickData(t))&&!t._isUp),n.axis_rotated?e?"end":"start":"middle"}).style("fill",o.updateTextColor.bind(o)).style("fill-opacity","0").each(function(t,e,n){var i,r=(0,O.select)(this),a=t.value;o.isBubbleZType(t)?a=o.getBubbleZData(a,"z"):!o.isCandlestickType(t)||(i=o.getCandlestickData(t))&&(a=i.close),a=o.dataLabelFormat(t.id)(a,t.id,e,n),F(a)?this.textContent=a:E(r,a)})},updateTextColor:function(t){var e,n=this.config,i=n.data_labels_colors,r=this.isArcType(t)&&!this.isRadarType(t)?null:this.color(t);return T(i)?e=i:$(i)?e=i[(t.data||t).id]:R(i)&&(e=i.bind(this.api)(r,t)),!this.isCandlestickType(t)||R(i)||(i=this.getCandlestickData(t))&&!i._isUp&&(n=n.candlestick_color_down,e=$(n)?n[t.id]:n),e||r},redrawText:function(r,a,t,o){var s=H(!0);return this.$el.text.style("fill",this.updateTextColor.bind(this)).style("fill-opacity",t?0:this.opacityForText.bind(this)).each(function(t,e){var n=o&&this.getAttribute("x")?(0,O.select)(this).transition(s):(0,O.select)(this),i=r.bind(this)(t,e),e=a.bind(this)(t,e);this.childElementCount?n.attr("transform","translate("+i+" "+e+")"):n.attr("x",i).attr("y",e)}),!0},getTextRect:function(t,e){var n=t.node?t.node():t,i=(n=!/text/i.test(n.tagName)?n.querySelector("text"):n).textContent,t=yt+"-"+i.replace(/\W/g,"_"),r=this.cache.get(t);return r||(this.$el.svg.append("text").style("visibility","hidden").style("font",(0,O.select)(n).style("font")).classed(e,!0).text(i).call(function(t){r=G(t.node())}).remove(),this.cache.add(t,r)),r},generateXYForText:function(e,t){var i=this,n=Object.keys(e),r={},a=t?i.getXForText:i.getYForText;return i.hasType("radar")&&n.push("radar"),n.forEach(function(t){r[t]=i["generateGet"+q(t)+"Points"](e[t],!1)}),function(t,e){var n=(i.isAreaType(t)?"area":i.isBarType(t)&&"bar")||i.isCandlestickType(t)&&"candlestick"||i.isRadarType(t)&&"radar"||"line";return a.call(i,r[n](t,e),t,this)}},getCenteredTextPos:function(t,e,n){var i=this.config,r=i.axis_rotated;if(i.data_labels.centered&&this.isBarType(t)){n=G(n),t=0<=t.value;if(r){r=(t?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+n.width/2;return t?-r-3:2+r}n=(t?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+n.height/2;return t?n:-n-2}return 0},getTextPos:function(t,e){var n=this.config.data_labels_position;return(t in n?n[t]:n)[e]||0},getXForText:function(t,e,n){var i,r=this.config,a=this.state,o=r.axis_rotated,r=t[0][0];return this.hasType("candlestick")?o?r=this.getCandlestickData(e)._isUp?t[2][2]+4:t[2][1]-4:r+=(t[1][0]-r)/2:r=o?(i=this.isBarType(e)?4:6,t[2][1]+i*(e.value<0?-1:1)):this.hasType("bar")?(t[2][0]+t[0][0])/2:r,null===e.value&&(r>a.width?(i=G(n).width,r=a.width-i):r<0&&(r=4)),o&&(r+=this.getCenteredTextPos(e,t,n)),r+this.getTextPos(e.id,"x")},getYForText:function(t,e,n){var i,r=this,a=r.config,o=r.state,s=a.axis_rotated,c=a.point_r,u=G(n),l=e.value,f=3;return r.isCandlestickType(e)?(l=r.getCandlestickData(e),s?(i=t[0][0],i+=(t[1][0]-i)/2+f):i=l&&l._isUp?t[2][2]-f:t[2][1]+4*f):s?i=(t[0][0]+t[2][0]+.6*u.height)/2:(i=t[2][1],F(c)&&5<c&&(r.isLineType(e)||r.isScatterType(e))&&(f+=a.point_r/2.3),l<0||0===l&&!o.hasPositiveValue&&o.hasNegativeValue?i+=u.height+(r.isBarType(e)?-f:f):(l=2*-f,r.isBarType(e)?l=-f:r.isBubbleType(e)&&(l=f),i+=l)),null!==e.value||s||(i<(u=u.height)?i=u:i>o.height&&(i=o.height-4)),s||(i+=r.getCenteredTextPos(e,t,n)),i+r.getTextPos(e.id,"y")},markOverlapped:function(e,t,n){function i(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}var t=t.$el.arcs.selectAll(n),n=t.filter(function(t){return t.data.id!==e}),r=t.filter(function(t){return t.data.id===e}),a=Z(r.node());r.node()&&n.each(function(){var t=Z(this),e=(0,O.select)(this),n=i(a.e,a.f)>i(t.e,t.f)?r:e,n=Math.ceil(Math.abs(a.e-t.e))<Math.ceil(n.node().getComputedTextLength()),t=Math.ceil(Math.abs(a.f-t.f))<parseInt(r.style("font-size"),10);e.classed(L.TextOverlapping,n&&t)})},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each(function(){(0,O.selectAll)([this,this.previousSibling]).classed(L.TextOverlapping,!1)})},meetsLabelThreshold:function(t,e){return(this.config[e+"_label_threshold"]||0)<=(t=void 0===t?0:t)}};function Vt(t,e){void 0===t&&(t="left");var n=F(e);return-1<t.indexOf("center")?n?e/2:"middle":-1<t.indexOf("right")?n?e:"end":n?0:"start"}var qt={initTitle:function(){var t=this.config,e=this.$el;t.title_text&&(e.title=e.svg.append("g"),E(e.title.append("text").style("text-anchor",Vt(t.title_position)).attr("class",L.title),t.title_text,[.3,1.5]))},redrawTitle:function(){var t,e=this.config,n=this.state.current,i=this.$el.title;i&&(t=this.yForTitle.call(this),/g/i.test(i.node().tagName)?i.attr("transform","translate("+Vt(e.title_position,n.width)+", "+t+")"):i.attr("x",this.xForTitle.call(this)).attr("y",t))},xForTitle:function(){var t,e=this.config,n=this.state.current,i=e.title_position||"left",r=this.getTextRect(this.$el.title,L.title).width;return/(right|center)/.test(i)?(t=n.width-r,0<=i.indexOf("right")?t=n.width-r-e.title_padding.right:0<=i.indexOf("center")&&(t=(n.width-r)/2)):t=e.title_padding.left||0,t},yForTitle:function(){return(this.config.title_padding.top||0)+this.getTextRect(this.$el.title,L.title).height},getTitlePadding:function(){return this.yForTitle()+(this.config.title_padding.bottom||0)}},Wt={initTooltip:function(){var t=this.config,e=this.$el;e.tooltip=(0,O.select)(t.tooltip_contents.bindto),e.tooltip.empty()&&(e.tooltip=e.chart.style("position","relative").append("div").attr("class",L.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),this.bindTooltipResizePos()},initShowTooltip:function(){var n=this,i=n.config,t=n.$el,e=n.state,r=e.hasAxis,e=e.hasRadar;if(i.tooltip_init_show){var a=!(r&&e);if(n.axis&&n.axis.isTimeSeries()&&T(i.tooltip_init_x)){var o,s,c=n.data.targets[0];for(i.tooltip_init_x=at.call(n,i.tooltip_init_x),o=0;(s=c.values[o])&&s.x-i.tooltip_init_x!=0;o++);i.tooltip_init_x=o}e=n.data.targets.map(function(t){var e=a?0:i.tooltip_init_x;return n.addName(t.values[e])});a&&(e=[e[i.tooltip_init_x]]),t.tooltip.html(n.getTooltipHTML(e,n.axis&&n.axis.getXAxisTickFormat(),n.getYFormat(n.hasArcType(null,["radar"])),n.color)),i.tooltip_contents.bindto||t.tooltip.style("top",i.tooltip_init_position.top).style("left",i.tooltip_init_position.left).style("display","block")}},getTooltipHTML:function(){var t=this.api,e=this.config;return R(e.tooltip_contents)?e.tooltip_contents.bind(t).apply(void 0,arguments):this.getTooltipContent.apply(this,arguments)},getTooltipContent:function(t,e,n,i){function r(t){return o.axis&&o.isBubbleZType(t)?o.getBubbleZData(t.value,"z"):o.getBaseValue(t)}var a,o=this,s=o.api,c=o.config,u=o.state,l=["title","name","value"].map(function(t){t=c["tooltip_format_"+t];return R(t)?t.bind(s):t}),f=l[0],h=l[1],d=l[2],f=f||e,h=h||function(t){return t},d=d||(o.isStackNormalized()?function(t,e){return(100*e).toFixed(2)+"%"}:n),g=c.tooltip_order,p=o.levelColor?function(t){return o.levelColor(t.value)}:function(t){return i(t)},v=c.tooltip_contents,x=v.template,y=o.mapToTargetIds();null===g&&c.data_groups.length?(a=o.orderTargets(o.data.targets).map(function(t){return t.id}).reverse(),t.sort(function(t,e){var n=t?t.value:null,i=e?e.value:null;return 0<n&&0<i&&(n=t.id?a.indexOf(t.id):null,i=e.id?a.indexOf(e.id):null),n-i})):/^(asc|desc)$/.test(g)?t.sort(function(t,e){t=t?r(t):null,e=e?r(e):null;return"asc"===g?t-e:e-t}):R(g)&&t.sort(g.bind(s));for(var _,m,b,w,T,A,M,S,k,E=o.getTooltipContentTemplate(x),C=t.length,D=0;D<C;D++)if((_=t[D])&&(r(_)||0===r(_)))if(N(b)&&(T=(u.hasAxis||u.hasRadar)&&Y(f?f(_.x):_.x),b=rt(E[0],{CLASS_TOOLTIP:L.tooltip,TITLE:z(T)?x?T:'<tr><th colspan="2">'+T+"</th></tr>":""})),!_.ratio&&o.$el.arcs&&(_.ratio=o.getRatio("arc",o.$el.arcs.select("path."+L.arc+"-"+_.id).data()[0])),m=[_.ratio,_.id,_.index,t],w=Y(d.apply(void 0,[r(_)].concat(m))),o.isAreaRangeType(_)?(M=(A=["high","low"].map(function(t){return Y(d.apply(void 0,[o.getRangedData(_,t)].concat(m)))}))[0],S=A[1],w="<b>Mid:</b> "+w+" <b>High:</b> "+M+" <b>Low:</b> "+S):o.isCandlestickType(_)&&(T=(k=["open","high","low","close","volume"].map(function(t){return Y(d.apply(void 0,[o.getRangedData(_,t,"candlestick")].concat(m)))}))[0],A=k[1],M=k[2],S=k[3],k=k[4],w="<b>Open:</b> "+T+" <b>High:</b> "+A+" <b>Low:</b> "+M+" <b>Close:</b> "+S+(k?" <b>Volume:</b> "+k:"")),void 0!==w)if("continue"===function(){if(null===_.name)return"continue";var e,t=Y(h.apply(void 0,[_.name].concat(m))),n=p(_),i={CLASS_TOOLTIP_NAME:L.tooltipName+o.getTargetSelectorSuffix(_.id),COLOR:x||!o.patterns?n:'<svg><rect style="fill:'+n+'" width="10" height="10"></rect></svg>',NAME:t,VALUE:w};x&&$(v.text)&&(e=y.indexOf(_.id),Object.keys(v.text).forEach(function(t){i[t]=v.text[t][e]})),b+=rt(E[1],i)}())continue;return b+"</table>"},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+'{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>').replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(t,e,n,i){var r=this,a=r.config,o=r.scale,s=r.state,c=s.width,u=s.height,l=s.current,f=s.isLegendRight,h=s.inputType,d=s.event,g=r.hasType("gauge")&&!a.gauge_fullCircle,p=r.getSvgLeft(!0),v=p+l.width-r.getCurrentPaddingRight(),s=r.getCurrentPaddingLeft(!0),d=D(d,i),i=d[0],d=d[1];r.hasArcType()?"touch"===h||r.hasType("radar")||(d+=g?u:u/2,i+=(c-(f?r.getLegendWidth():0))/2):(t=o.x(t[0].x),a.axis_rotated?(d=t+20,i+=p+100,v-=p):(d-=5,i=p+s+20+(r.zoomScale?i:t))),v<i+e+15&&(i-=e+s),d+n>l.height&&(d-=g?3*n:n+30);var x={top:d,left:i};return Object.keys(x).forEach(function(t){x[t]<0&&(x[t]=0)}),x},showTooltip:function(t,e){var n,i,r,a,o,s,c=this,u=c.config,l=c.state,f=c.$el.tooltip,h=u.tooltip_contents.bindto,d=c.hasArcType(null,["radar"]),g=t.filter(function(t){return t&&z(c.getBaseValue(t))});f&&0!==g.length&&u.tooltip_show&&(i=void 0===(r=(a=(n=f.datum())||{}).width)?0:r,r=void 0===(o=a.height)?0:o,a=JSON.stringify(t),n&&n.current===a||(o=t.concat().sort()[0].index,S(u.tooltip_onshow,c.api,t),f.html(c.getTooltipHTML(t,c.axis?c.axis.getXAxisTickFormat():c.categoryName.bind(c),c.getYFormat(d),c.color)).style("display",null).style("visibility",null).datum(n={index:o,current:a,width:i=f.property("offsetWidth"),height:r=f.property("offsetHeight")}),S(u.tooltip_onshown,c.api,t),c._handleLinkedCharts(!0,o)),h||(s=(u.tooltip_position||c.tooltipPosition).call(this,g,i,r,e),["top","left"].forEach(function(t){var e=s[t];f.style(t,e+"px"),"left"!==t||n.xPosInPercent||(n.xPosInPercent=e/l.current.width*100)})))},bindTooltipResizePos:function(){var t=this.resizeFunction,i=this.state,r=this.$el.tooltip;t.add(function(){var t,e,n;"block"===r.style("display")&&(t=i.current,n=(e=r.datum()).width,e=e.xPosInPercent,e=t.width/100*e,(n=t.width-(e+n))<0&&(e+=n),r.style("left",e+"px"))})},hideTooltip:function(t){var e=this.api,n=this.config,i=this.$el.tooltip;!i||"none"===i.style("display")||n.tooltip_doNotHide&&!t||(t=JSON.parse(i.datum().current),S(n.tooltip_onhide,e,t),i.style("display","none").style("visibility","hidden").datum(null),S(n.tooltip_onhidden,e,t))},_handleLinkedCharts:function(a,o){var s,e=this,t=e.charts,n=e.config,i=e.state.event;i&&i.isTrusted&&n.tooltip_linked&&1<t.length&&(s=n.tooltip_linked_name,t.filter(function(t){return t!==e.api}).forEach(function(t){var e=t.internal,n=e.config,i=e.$el,r=n.tooltip_linked,e=n.tooltip_linked_name,n=P.body.contains(i.chart.node());if(r&&s===e&&n){i=i.tooltip.data()[0],i=o!==(i&&i.index);try{t.tooltip[a&&i?"show":"hide"]({index:o})}catch(t){}}}))}},Zt={getTranslate:function(t,e){var n,i,r=this.config,a=this.state,o=r.axis_rotated,r=0;return(e=void 0===e?0:e)&&/^(x|y2?)$/.test(t)&&(r=this.getAxisSize(t)*e),"main"===t?(n=m(a.margin.left),i=m(a.margin.top)):"context"===t?(n=m(a.margin2.left),i=m(a.margin2.top)):"legend"===t?(n=a.margin3.left,i=a.margin3.top):"x"===t?(n=o?-r:0,i=o?0:a.height+r):"y"===t?(n=o?0:-r,i=o?a.height+r:0):"y2"===t?(n=o?0:a.width+r,i=o?1-r:0):"subX"===t?(n=0,i=o?0:a.height2):"arc"===t?(n=a.arcWidth/2,i=a.arcHeight/2):"radar"===t&&(t=this.getRadarSize()[0],n=a.width/2-t,i=m(a.margin.top)),"translate("+n+", "+i+")"},transformMain:function(t,e){var n,i,r,a=this.$el.main;e&&e.axisX?n=e.axisX:(n=a.select("."+L.axisX),t&&(n=n.transition())),e&&e.axisY?i=e.axisY:(i=a.select("."+L.axisY),t&&(i=i.transition())),e&&e.axisY2?r=e.axisY2:(r=a.select("."+L.axisY2),t&&(r=r.transition())),(t?a.transition():a).attr("transform",this.getTranslate("main")),n.attr("transform",this.getTranslate("x")),i.attr("transform",this.getTranslate("y")),r.attr("transform",this.getTranslate("y2")),a.select("."+L.chartArcs).attr("transform",this.getTranslate("arc"))},transformAll:function(t,e){var n=this.config,i=this.state.hasAxis,r=this.$el;this.transformMain(t,e),i&&n.subchart_show&&this.transformContext(t,e),r.legend&&this.transformLegend(t)}},Kt={setTargetType:function(t,e){var n=this.config,i=this.state.withoutFadeIn;this.mapToTargetIds(t).forEach(function(t){i[t]=e===n.data_types[t],n.data_types[t]=e}),t||(n.data_type=e)},updateTypesElements:function(){var i=this,r=i.state.current;Object.keys(Lt).forEach(function(t){var e=Lt[t],n=i.hasType(e,null,!0),t=r.types.indexOf(e);-1===t&&n?r.types.push(e):-1<t&&!n&&r.types.splice(t,1)}),i.setChartElements()},hasType:function(e,t,n){var i=this.config,r=this.state.current,a=i.data_types,t=t||this.data.targets,o=!1;return!(n=void 0===n?!1:n)&&r.types.length&&-1<r.types.indexOf(e)?o=!0:t&&t.length?t.forEach(function(t){t=a[t.id];t!==e&&(t||"line"!==e)||(o=!0)}):Object.keys(a).length?Object.keys(a).forEach(function(t){a[t]===e&&(o=!0)}):o=i.data_type===e,o},hasTypeOf:function(t,e,n){var i=this;return void 0===n&&(n=[]),!!(t in Pt)&&!Pt[t].filter(function(t){return-1===n.indexOf(t)}).every(function(t){return!i.hasType(t,e)})},isTypeOf:function(t,e){t=T(t)?t:t.id,t=this.config.data_types[t]||this.config.data_type;return B(e)?0<=e.indexOf(t):t===e},hasPointType:function(){return this.hasTypeOf("Line")||this.hasType("bubble")||this.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){t=T(t)?t:t.id;return!this.config.data_types[t]||this.isTypeOf(t,Pt.Line)},isStepType:function(t){return this.isTypeOf(t,Pt.Step)},isSplineType:function(t){return this.isTypeOf(t,Pt.Spline)},isAreaType:function(t){return this.isTypeOf(t,Pt.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,Pt.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,n=e.point_pattern;return!(!t||"circle"!==t.tagName)||"circle"===e.point_type&&(!n||B(n)&&0===n.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isRadarType(t)?t.values.filter(function(t){return F(t.value)||!!t.value}):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return 0<=["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)}},Jt=function(){function t(t){this.api=void 0,this.config=void 0,this.cache=void 0,this.$el=void 0,this.state=void 0,this.charts=void 0,this.data={xs:{},targets:[]},this.axis=void 0,this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.color=void 0,this.patterns=void 0,this.levelColor=void 0,this.point=void 0,this.brush=void 0,this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};this.api=t,this.config=new ut,this.cache=new _t;t=new r;this.$el=t.getStore("element"),this.state=t.getStore("state")}var e=t.prototype;return e.beforeInit=function(){this.callPluginHook("$beforeInit"),S(this.config.onbeforeinit,this.api)},e.afterInit=function(){this.callPluginHook("$afterInit"),S(this.config.onafterinit,this.api)},e.init=function(){var t=this.config,e=this.state,n=this.$el;e.hasAxis=!this.hasArcType(),e.hasRadar=!e.hasAxis&&this.hasType("radar"),this.initParams();e={element:t.bindto,classname:"bb"};$(t.bindto)&&(e.element=t.bindto.element||"#chart",e.classname=t.bindto.classname||e.classname),n.chart=R(e.element.node)?t.bindto.element:(0,O.select)(e.element||[]),n.chart.empty()&&(n.chart=(0,O.select)(P.body.appendChild(P.createElement("div")))),n.chart.html("").classed(e.classname,!0),this.initToRender()},e.initToRender=function(t){function n(){return"none"===a.style("display")||"hidden"===a.style("visibility")}var i=this,e=i.config,r=i.state,a=i.$el.chart,o=e.render.lazy||n(),s=p.MutationObserver;o&&s&&!1!==e.render.observe&&!t&&new s(function(t,e){n()||(e.disconnect(),r.rendered||i.initToRender(!0))}).observe(a.node(),{attributes:!0,attributeFilter:["class","style"]}),o&&!t||((e=i.convertData(e,i.initWithData))&&i.initWithData(e),i.afterInit())},e.initParams=function(){var i,t,r=this,e=r.config,a=r.format,n=r.state,o=e.axis_rotated;n.datetimeId="bb-"+ +new Date,r.color=r.generateColor(),r.levelColor=r.generateLevelColor(),r.hasPointType()&&(r.point=r.generatePoint()),n.hasAxis&&(r.initClip(),a.extraLineClasses=r.generateExtraLineClass(),a.dataTime=e.data_xLocaltime?s.timeParse:s.utcParse,a.axisTime=e.axis_x_localtime?s.timeFormat:s.utcFormat,i=r.config.zoom_enabled&&"drag"===r.config.zoom_type,a.defaultAxisTime=function(t){var e=r.scale,n=e.x,e=e.zoom,e=i?e:e&&n.orgDomain().toString()!==e.domain().toString(),e=(t.getMilliseconds()?".%L":t.getSeconds()&&".:%S")||t.getMinutes()&&"%I:%M"||t.getHours()&&"%I %p"||1!==t.getDate()&&"%b %d"||e&&1===t.getDate()&&"%b'%y"||t.getMonth()&&"%-m/%-d"||"%Y";return a.axisTime(e)(t)}),n.isLegendRight="right"===e.legend_position,n.isLegendInset="inset"===e.legend_position,n.isLegendTop="top-left"===e.legend_inset_anchor||"top-right"===e.legend_inset_anchor,n.isLegendLeft="top-left"===e.legend_inset_anchor||"bottom-left"===e.legend_inset_anchor,n.rotatedPaddingRight=o&&!e.axis_x_show?0:30,n.inputType=(t=e.interaction_inputType_mouse,o=e.interaction_inputType_touch,n=!1,/Mobi/.test(p.navigator.userAgent)&&o&&(e=p.navigator&&"maxTouchPoints"in p.navigator&&0<p.navigator.maxTouchPoints,o="ontouchmove"in p||p.DocumentTouch&&P instanceof p.DocumentTouch,n=e||o),(!(!t||n)&&"onmouseover"in p?"mouse":n&&"touch")||null)},e.initWithData=function(t){var e=this,n=e.config,i=e.scale,r=e.state,a=e.$el,o=e.org,s=r.hasAxis,c=n.interaction_enabled;s&&(e.axis=e.getAxisInstance(),n.zoom_enabled&&e.initZoom()),e.data.xs={},e.data.targets=e.convertDataToTargets(t),n.data_filter&&(e.data.targets=e.data.targets.filter(n.data_filter.bind(e.api))),n.data_hide&&e.addHiddenTargetIds(!0===n.data_hide?e.mapToIds(e.data.targets):n.data_hide),n.legend_hide&&e.addHiddenLegendIds(!0===n.legend_hide?e.mapToIds(e.data.targets):n.legend_hide),e.updateSizes(),e.updateScales(!0);var u=i.x,l=i.y,f=i.y2,h=i.subX,t=i.subY,i=i.subY2;u&&(u.domain(tt(e.getXDomain(e.data.targets))),h.domain(u.domain()),o.xDomain=u.domain()),l&&(l.domain(e.getYDomain(e.data.targets,"y")),t.domain(l.domain())),f&&(f.domain(e.getYDomain(e.data.targets,"y2")),i&&i.domain(f.domain())),a.svg=a.chart.append("svg").style("overflow","hidden").style("display","block"),c&&r.inputType&&(d="touch"===r.inputType,a.svg.on(d?"touchstart":"mouseenter",function(){return S(n.onover,e.api)}).on(d?"touchend":"mouseleave",function(){return S(n.onout,e.api)})),n.svg_classname&&a.svg.attr("class",n.svg_classname);var d=R(n.color_tiles)&&e.patterns;(s||d)&&(a.defs=a.svg.append("defs"),s&&["id","idXAxis","idYAxis","idGrid"].forEach(function(t){e.appendClip(a.defs,r.clip[t])}),d&&e.patterns.forEach(function(t){return a.defs.append(function(){return t.node})})),e.updateSvgSize(),e.bindResize();d=a.svg.append("g").classed(L.main,!0).attr("transform",e.getTranslate("main"));a.main=d,n.subchart_show&&e.initSubchart(),n.tooltip_show&&e.initTooltip(),n.title_text&&e.initTitle(),n.legend_show&&e.initLegend(),n.data_empty_label_text&&d.append("text").attr("class",L.text+" "+L.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),s&&(n.regions.length&&e.initRegion(),n.clipPath||e.axis.init()),d.append("g").attr("class",L.chart).attr("clip-path",r.clip.path),e.callPluginHook("$init"),s&&(c&&e.initEventRect&&e.initEventRect(),e.initGrid(),n.clipPath&&e.axis&&e.axis.init()),e.initChartElements(),e.updateTargets(e.data.targets),e.updateDimension(),S(n.oninit,e.api),e.setBackground(),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),(n.data_onmin||n.data_onmax)&&(c=e.getMinMaxData(),S(n.data_onmin,e.api,c.min),S(n.data_onmax,e.api,c.max)),n.tooltip_show&&e.initShowTooltip(),r.rendered=!0},e.initChartElements=function(){var n=this,t=n.state,e=t.hasAxis,t=t.hasRadar,i=[];e?["bar","bubble","candlestick","line"].forEach(function(t){var e=q(t);("line"===t&&n.hasTypeOf(e)||n.hasType(t))&&i.push(e)}):(t||i.push("Arc","Pie"),n.hasType("gauge")?i.push("Gauge"):t&&i.push("Radar")),i.forEach(function(t){n["init"+t]()}),X(n.config.data_labels)&&!n.hasArcType(null,["radar"])&&n.initText()},e.setChartElements=function(){var t=this.$el,e=t.chart,n=t.svg,i=t.defs,r=t.main,a=t.tooltip,o=t.legend,s=t.title,c=t.grid,u=t.arcs,l=t.circle,f=t.bar,h=t.candlestick,d=t.line,g=t.area,t=t.text;this.api.$={chart:e,svg:n,defs:i,main:r,tooltip:a,legend:o,title:s,grid:c,arc:u,circles:l,bar:{bars:f},candlestick:h,line:{lines:d,areas:g},text:{texts:t}}},e.setBackground=function(){var t=this.config.background,e=this.state,n=this.$el.svg;X(t)&&(n=n.select("g").insert(t.imgUrl?"image":"rect",":first-child"),t.imgUrl?n.attr("href",t.imgUrl):t.color&&n.style("fill",t.color).attr("clip-path",e.clip.path),n.attr("class",t.class||null).attr("width","100%").attr("height","100%"))},e.updateTargets=function(n){var i=this,t=i.state,e=t.hasAxis,t=t.hasRadar;i.updateTargetsForText(n),e?(["bar","candlestick","line"].forEach(function(t){var e=q(t);("line"===t&&i.hasTypeOf(e)||i.hasType(t))&&i["updateTargetsFor"+e](n.filter(i["is"+e+"Type"].bind(i)))}),i.updateTargetsForSubchart&&i.updateTargetsForSubchart(n)):i.hasArcType(n)&&(t?i.updateTargetsForRadar(n.filter(i.isRadarType.bind(i))):i.updateTargetsForArc(n.filter(i.isArcType.bind(i)))),(i.hasType("bubble")||i.hasType("scatter"))&&i.updateTargetForCircle&&i.updateTargetForCircle(),i.showTargets()},e.showTargets=function(){var e=this,t=e.config;e.$el.svg.selectAll("."+L.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(t.transition_duration).style("opacity","1")},e.getWithOption=function(n){var i={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(i).forEach(function(t){var e=i[t];T(e)&&(e=i[e]),i[t]=A(n,"with"+t,e)}),i},e.initialOpacity=function(t){var e=this.state.withoutFadeIn;return null!==this.getBaseValue(t)&&e[t.id]?"1":"0"},e.bindResize=function(){var t,e,n,i=this,r=i.config,a=i.state,o=(e=[],(n=function(){n.clear(),t=mt(function(){e.forEach(function(t){return t()})},200)}).clear=function(){t&&(bt(t),t=null)},n.add=function(t){return e.push(t)},n.remove=function(t){return e.splice(e.indexOf(t),1)},n),s=[];s.push(function(){return S(r.onresize,i,i.api)}),r.resize_auto&&s.push(function(){a.resizing=!0,i.api.flush(!1)}),s.push(function(){S(r.onresized,i,i.api),a.resizing=!1}),s.forEach(function(t){return o.add(t)}),i.resizeFunction=o,p.addEventListener("resize",i.resizeFunction=o)},e.callPluginHook=function(e){for(var n=this,t=arguments.length,i=Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.config.plugins.forEach(function(t){"$beforeInit"===e&&(t.$$=n).api.plugins.push(t),t[e].apply(t,i)})},t}();V(Jt.prototype,[At,Mt,St,{categoryName:function(t){var e=this.config.axis_x_categories;return e&&t<e.length?e[t]:t}},Ct,Ot,zt,Et,It,Ft,Bt,Yt,Gt,Ht,Ut,qt,Wt,Zt,Kt]);St={resize:function(t){var e=this.internal,n=e.config,i=e.state;i.rendered&&(n.size_width=t?t.width:null,n.size_height=t?t.height:null,i.resizing=!0,this.flush(!1,!0),e.resizeFunction())},flush:function(t){var e=this.internal,n=e.state;n.rendered?(n.resizing?e.brush&&e.brush.updateResize():e.axis&&e.axis.setOrient(),e.scale.zoom=null,t?e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!n.resizing&&e.brush&&(e.brush.getSelection().call(e.brush.move),e.unselectRect())):e.initToRender(!0)},destroy:function(){var e=this,n=this.internal,t=n.$el,i=t.chart,t=t.svg;if(X(n))for(var r in n.callPluginHook("$willDestroy"),n.charts.splice(n.charts.indexOf(this),1),t.select("*").interrupt(),n.resizeFunction.clear(),p.removeEventListener("resize",n.resizeFunction),i.classed("bb",!1).html(""),Object.keys(this).forEach(function(t){"internal"===t&&Object.keys(n).forEach(function(t){n[t]=null}),e[t]=null,delete e[t]}),this)this[r]=function(){};return null},config:function(t,e,n){var i,r=this.internal.config,t=t&&t.replace(/\./g,"_");return t in r&&(I(e)?(i=r[t]=e,n&&this.flush()):i=r[t]),i}};function Qt(t){var e=this.internal.data.targets;if(N(t))return e;var n=B(t)?t:[t];return e.filter(function(e){return n.some(function(t){return t===e.id})})}V(Qt,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,e){void 0===e&&(e=!0);var n=null;return!t||(t=this.data(t))&&B(t)&&(n=[],t.forEach(function(t){t=t.values.map(function(t){return t.value});e?n=n.concat(t):n.push(t)})),n},names:function(t){return this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});function te(t,e,n){var i,r=e||n,a=r.width,o=r.height,s=new XMLSerializer,c=t.cloneNode(!0),t=(r=W(P.styleSheets),i=[],r.forEach(function(e){try{e.cssRules&&e.cssRules.length&&(i=i.concat(W(e.cssRules)))}catch(t){console.error("Error while reading rules from "+e.href+": "+t.toString())}}),i.filter(function(t){return t.cssText}).map(function(t){return t.cssText}));c.setAttribute("xmlns",O.namespaces.xhtml);r=s.serializeToString(c),c=P.createElement("style");c.appendChild(P.createTextNode(t.join("\n")));c=s.serializeToString(c),r=('<svg xmlns="'+O.namespaces.svg+'" width="'+a+'" height="'+o+'" \n\t\tviewBox="0 0 '+n.width+" "+n.height+'" \n\t\tpreserveAspectRatio="'+(e&&!1===e.preserveAspectRatio?"none":"xMinYMid meet")+'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t'+c+"\n\t\t\t\t"+r.replace(/(url\()[^#]+/g,"$1")+"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,"+btoa(encodeURIComponent(r).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(+("0x"+e))}))}function ee(t,e,n){var i=this.internal,e=i.mapToTargetIds(e);i.state.toggling=!0,i[(t?"remove":"add")+"HiddenTargetIds"](e);var r=i.$el.svg.selectAll(i.selectorTargets(e)),a=t?"1":"0";t&&r.style("display",null),r.transition().style("opacity",a,"important").call(k,function(){t||r.style("display","none"),r.style("opacity",a)}),n.withLegend&&i[(t?"show":"hide")+"Legend"](e),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.state.toggling=!1}var ne=function t(e){this.plugins=[],this.internal=void 0;var n=new Jt(this);this.internal=n,function r(a,o,s){Object.keys(a).forEach(function(t){var e=R(a[t]),n=o!==s,i=0<Object.keys(a[t]).length;e&&(!n&&i||n)?o[t]=a[t].bind(s):e||(o[t]={}),i&&r(a[t],o[t],s)})}(t.prototype,this,this),function(e){var n,i,r,a=this.config,o=function(){var t=i.shift();return t&&n&&b(n)&&t in n?(n=n[t],o()):t?void 0:n};Object.keys(a).forEach(function(t){n=e,i=t.split("_"),r=o(),I(r)&&(a[t]=r)})}.call(n,e),n.beforeInit(),n.init()};function ie(t,e,n){var i=t.config,r="axis_y_"+e,a="axis_y2_"+e;I(n)&&(b(n)?(z(n.x)&&(i["axis_x_"+e]=n.x),z(n.y)&&(i[r]=n.y),z(n.y2)&&(i[a]=n.y2)):(i[r]=n,i[a]=n),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function re(t,e){t=t.config;return{x:t["axis_x_"+e],y:t["axis_y_"+e],y2:t["axis_y2_"+e]}}V(ne.prototype,[St,{color:function(t){return this.internal.color(t)}},{data:Qt},{export:function(t,n){var i,r=this,e=this.internal,a=e.state,e=e.$el.chart,a=a.current,o=a.width,s=a.height,c=Q({width:o,height:s,preserveAspectRatio:!0,mimeType:"image/png"},t),e=te(e.node(),c,{width:o,height:s});return n&&R(n)&&((i=new Image).crossOrigin="Anonymous",i.onload=function(){var t=P.createElement("canvas"),e=t.getContext("2d");t.width=c.width||o,t.height=c.height||s,e.drawImage(i,0,0),n.bind(r)(t.toDataURL(c.mimeType))},i.src=e),e}},{focus:function(t){var e=this.internal,n=e.state,i=e.mapToTargetIds(t),r=e.$el.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),r.classed(L.focused,!0).classed(L.defocused,!1),e.hasArcType()&&!n.hasRadar&&(e.expandArc(i),e.hasType("gauge")&&e.markOverlapped(t,e,"."+L.gaugeValue)),e.toggleFocusLegend(i,!0),n.focusedTargetIds=i,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return i.indexOf(t)<0})},defocus:function(t){var e=this.internal,n=e.state,i=e.mapToTargetIds(t);e.$el.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e))).classed(L.focused,!1).classed(L.defocused,!0),e.hasArcType()&&(e.unexpandArc(i),e.hasType("gauge")&&e.undoMarkOverlapped(e,"."+L.gaugeValue)),e.toggleFocusLegend(i,!1),n.focusedTargetIds=n.focusedTargetIds.filter(function(t){return i.indexOf(t)<0}),n.defocusedTargetIds=i},revert:function(t){var e=this.internal,n=e.config,i=e.state,r=e.$el,t=e.mapToTargetIds(t);r.svg.selectAll(e.selectorTargets(t)).classed(L.focused,!1).classed(L.defocused,!1),e.hasArcType()&&e.unexpandArc(t),n.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),r.legend.selectAll(e.selectorLegends(t)).filter(function(){return(0,O.select)(this).classed(L.legendItemFocused)}).classed(L.legendItemFocused,!1)),i.focusedTargetIds=[],i.defocusedTargetIds=[]}},{legend:{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}}},{load:function(e){var t=this.internal,n=t.config;e.xs&&t.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){n.data_classes[t]=e.classes[t]}),"categories"in e&&t.axis.isCategorized()&&(n.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){n.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){n.data_colors[t]=e.colors[t]}),"unload"in e&&!1!==e.unload?t.unload(t.mapToTargetIds(!0===e.unload?null:e.unload),function(){return t.loadFromArgs(e)}):t.loadFromArgs(e)},unload:function(t){var e=this,n=this.internal,i=t||{};B(i)?i={ids:i}:T(i)&&(i={ids:[i]});var r=n.mapToTargetIds(i.ids);n.unload(r,function(){n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.cache.remove(r),i.done&&i.done.call(e)})}},{show:function(t,e){ee.call(this,!0,t,e=void 0===e?{}:e)},hide:function(t,e){ee.call(this,!1,t,e=void 0===e?{}:e)},toggle:function(t,e){var n=this;void 0===e&&(e={});var i=this.internal,r={show:[],hide:[]};i.mapToTargetIds(t).forEach(function(t){return r[i.isTargetToShow(t)?"hide":"show"].push(t)}),r.show.length&&this.show(r.show,e),r.hide.length&&setTimeout(function(){return n.hide(r.hide,e)},0)}},{tooltip:{show:function(t){var e,n,i,r,a=this.internal,o=a.config,s=a.state.inputType;t.mouse&&(n=t.mouse),t.data?(i=t.data,r=a.getYScaleById(i.id)(i.value),a.isMultipleX()?n=[a.scale.x(i.x),r]:(o.tooltip_grouped||(n=[0,r]),e=z(i.index)?i.index:a.getIndexByX(i.x))):I(t.x)?e=a.getIndexByX(t.x):I(t.index)&&(e=t.index),("mouse"===s?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){a.dispatchEvent(t,e,n)})},hide:function(){var e,n=this.internal,t=n.state.inputType,i=n.$el.tooltip,i=i&&i.datum();i&&(e=JSON.parse(i.current)[0].index,("mouse"===t?["mouseout"]:["touchend"]).forEach(function(t){n.dispatchEvent(t,e)})),"touch"===t&&n.callOverOutForTouch(),n.hideTooltip(!0),n.hideGridFocus(),n.unexpandCircles&&n.unexpandCircles(),n.unexpandBars&&n.unexpandBars()}}}]);Ct={axis:{labels:function(e){var n,i=this.internal;return e&&(Object.keys(e).forEach(function(t){i.axis.setLabelText(t,e[t])}),i.axis.updateLabels()),["x","y","y2"].forEach(function(t){var e=i.axis.getLabelText(t);e&&((n=!n?{}:n)[t]=e)}),n},min:function(t){var e=this.internal;return z(t)?ie(e,"min",t):re(e,"min")},max:function(t){var e=this.internal;return arguments.length?ie(e,"max",t):re(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};I(t.max)&&e.max(t.max),I(t.min)&&e.min(t.min)}}};function ae(t){var e=this.internal,n=e.config;return t&&(n.grid_x_lines=t,e.redrawWithoutRescale()),n.grid_x_lines}V(ae,{add:function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!0)}});Ot={xgrids:ae};function oe(t){var e=this.internal,n=e.config;return t&&(n.grid_y_lines=t,e.redrawWithoutRescale()),n.grid_y_lines}V(oe,{add:function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!1)}});zt={ygrids:oe},Et={groups:function(t){var e=this.internal,n=e.config;return N(t)||(n.data_groups=t,e.redraw()),n.data_groups}};function se(t){var e=this.internal,n=e.config;return t?(n.regions=t,e.redrawWithoutRescale(),t):n.regions}V(se,{add:function(t){var e=this.internal,n=e.config;return t&&(n.regions=n.regions.concat(t),e.redrawWithoutRescale()),n.regions},remove:function(t){var e=this.internal,n=e.config,i=t||{},t=A(i,"duration",n.transition_duration),r=A(i,"classes",[L.region]),e=e.$el.main.select("."+L.regions).selectAll(r.map(function(t){return"."+t}));return(t?e.transition().duration(t):e).style("opacity","0").remove(),e=n.regions,Object.keys(i).length?(e=e.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){0<=r.indexOf(t)&&(e=!0)}),!e)}),n.regions=e):n.regions=[],e}});function ce(t){return z(t.position)||"end"}function ue(t){return"start"===t.position?4:"middle"===t.position?0:-4}var It={regions:se},Ft={x:function(t){var e=this.internal,n=e.axis,i=e.data,n=n.isCustomX()&&n.isCategorized();return B(t)&&(n?this.categories(t):(e.updateTargetX(i.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),n?this.categories():i.xs},xs:function(t){var e=this.internal;return $(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},Bt={flow:function(t){var e,n,i,r,a,o,s,c,u,l=this.internal,f=0,h=0;(u=t.json||t.rows||t.columns?l.convertData(t):u)&&ot()&&(r=[],a=l.getMaxDataCount(),o=l.convertDataToTargets(u,!0),s=l.axis.isTimeSeries(),l.data.targets.forEach(function(t){for(var e=!1,n=0;n<o.length;n++)if(t.id===o[n].id){e=!0,t.values[t.values.length-1]&&(h=t.values[t.values.length-1].index+1),f=o[n].values.length;for(var i=0;i<f;i++)o[n].values[i].index=h+i,s||(o[n].values[i].x=h+i);t.values=t.values.concat(o[n].values),o.splice(n,1);break}e||r.push(t.id)}),l.data.targets.forEach(function(t){for(var e=0;e<r.length;e++)if(t.id===r[e]){h=t.values[t.values.length-1].index+1;for(var n=0;n<f;n++)t.values.push({id:t.id,index:h+n,x:s?l.getOtherTargetX(h+n):h+n,value:null})}}),l.data.targets.length&&o.forEach(function(t){for(var e=[],n=l.data.targets[0].values[0].index;n<h;n++)e.push({id:t.id,index:n,x:s?l.getOtherTargetX(n):n,value:null});t.values.forEach(function(t){t.index+=h,s||(t.x+=h)}),t.values=e.concat(t.values)}),l.data.targets=l.data.targets.concat(o),u=(c=l.data.targets[0]).values[0],I(t.to)?(f=0,i=s?at.call(l,t.to):t.to,c.values.forEach(function(t){t.x<i&&f++})):I(t.length)&&(f=t.length),a?1===a&&s&&(n=(c.values[c.values.length-1].x-u.x)/2,e=[new Date(+u.x-n),new Date(+u.x+n)]):(n=s?1<c.values.length?c.values[c.values.length-1].x-u.x:u.x-l.getXDomain(l.data.targets)[0]:1,e=[u.x-n,u.x]),e&&l.updateXDomain(null,!0,!0,!1,e),l.updateTargets(l.data.targets),l.redraw({flow:{index:u.index,length:f,duration:z(t.duration)?t.duration:l.config.transition_duration,done:t.done,orgDataCount:a},withLegend:!0,withTransition:1<a,withTrimXDomain:!1,withUpdateXAxis:!0}))}},le=Dn(10),fe=function(){function t(t){this.owner=void 0,this.config=void 0,this.scale=void 0;var e=$t(),n=t.config,i=t.params;this.owner=t,this.config=n,this.scale=e,!n.noTransition&&i.config.transition_duration||(n.withoutTransition=!0),n.range=this.scaleExtent((i.orgXScale||e).range())}t.getSizeFor1Char=function(t){var r={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){try{var e=t.node().getBBox(),n=e.width,i=e.height;n&&i&&(r.w=n,r.h=i)}catch(t){}finally{t.text("")}}),this.getSizeFor1Char=function(){return r},r};var e=t.prototype;return e.getTickTransformSetter=function(t){var e=this.config,n="x"===t?function(t){return"translate("+(t+e.tickOffset)+",0)"}:function(t){return"translate(0,"+t+")"};return function(t,e){t.attr("transform",function(t){return n(Math.ceil(e(t)))})}},e.scaleExtent=function(t){var e=t[0],t=t[t.length-1];return e<t?[e,t]:[t,e]},e.generateTicks=function(t,e){var n=this.owner.params.tickStepSize,i=t.domain(),r=i[0],a=i[1],o=[];if(e&&n)for(var s=r;s<=a;)o.push(s),s+=n;else if(t.ticks){e=this.config.tickArguments;if("log"!==t.type||e)o=t.ticks.apply(t,this.config.tickArguments||[]);else{for(var c=$t("_log").domain([0<r?r:1,a]).range(t.range()),o=c.ticks(),u=a.toFixed().length;15<o.length;u--)o=c.ticks(u);o.splice(0,1,r),o.splice(o.length-1,1,a)}o=o.map(function(t){return T(t)&&F(t)&&!isNaN(t)&&Math.round(10*t)/10||t})}else{for(var l=Math.ceil(r);l<a;l++)o.push(l);0<o.length&&0<o[0]&&o.unshift(o[0]-(o[1]-o[0]))}return o},e.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},e.textFormatted=function(t){var e=this.config.tickFormat,t=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,t=e?e(t):t;return I(t)?t:""},e.transitionise=function(t){var e=this.config;return e.withoutTransition?t.interrupt():t.transition(e.transition)},t}(),he=function(){function t(t){void 0===t&&(t={}),this.helper=void 0,this.config=void 0,this.params=void 0,this.g=void 0;var e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.config=e,this.params=t,this.helper=new fe(this)}var e=t.prototype;return e.create=function(t){var h=this,d=this.config,g=this.helper,p=this.params,v=g.scale,x=d.orient,y=this.splitTickText.bind(this),_=/^(left|right)$/.test(x),m=/^(top|bottom)$/.test(x),b=g.getTickTransformSetter(m?"x":"y"),w=b===g.axisX?"y":"x",T=/^(top|left)$/.test(x)?-1:1,A=p.tickTextRotate;this.config.range=v.rangeExtent?v.rangeExtent():g.scaleExtent((p.orgXScale||v).range());var M,S=d.innerTickSize,k=d.tickLength,E=d.range,e=p.id,C=e&&/^(x|y|y2)$/.test(e)?p.config["axis_"+e+"_tick_text_position"]:{x:0,y:0},n="subX"===e?"subchart_axis_x":"axis_"+e,e=p.config[n+"_show"],D=!!e&&p.config[n+"_tick_show"],R=!!e&&p.config[n+"_tick_text_show"];t.each(function(){var t=(0,O.select)(this),e=this.__chart__||v,n=g.copyScale();M=t,this.__chart__=n,d.tickOffset=p.isCategory?Math.ceil((n(1)-n(0))/2):0;var i,r,a,o,s,c,u,l,f=t.selectAll(".domain").data([0]);f.enter().append("path").attr("class","domain").merge(g.transitionise(f).selection()).attr("d",function(){var t=d.outerTickSize*T;return m?"M"+E[0]+","+t+"V0H"+E[1]+"V"+t:"M"+t+","+E[0]+"H0V"+E[1]+"H"+t}),(D||R)&&(i=d.tickValues||g.generateTicks(n,_),r=(o=t.selectAll(".tick").data(i,n)).enter().insert("g",".domain").attr("class","tick").style("opacity","1"),a=o.exit().remove(),o=r.merge(o),D&&r.append("line"),R&&r.append("text"),s=fe.getSizeFor1Char(o),c=[],(f=o.select("text").selectAll("tspan").data(function(t,e){t=p.tickMultiline?y(t,n,i,_,s.w):B(g.textFormatted(t))?g.textFormatted(t).concat():[g.textFormatted(t)];return c[e]=t.length,t.map(function(t){return{index:e,splitted:t}})})).exit().remove(),(f=f.enter().append("tspan").merge(f).text(function(t){return t.splitted})).attr("x",m?0:k*T).attr("dx",(t=0,(t=/(top|bottom)/.test(x)&&A?8*Math.sin(Math.PI*(A/180))*("top"===x?-1:1):t)+(C.x||0))).attr("dy",function(t,e){var n=0;return"top"!==x&&(n=s.h,0===e&&(n=_?-((c[t.index]-1)*(s.h/2)-3):0===C.y?".71em":0)),F(n)&&C.y?n+C.y:n||".71em"}),f=o.select("line"),t=o.select("text"),r.select("line").attr(w+"2",S*T),r.select("text").attr(w,k*T),h.setTickLineTextPosition(f,t),p.tickTitle&&((f=t.select("title")).empty()?t.append("title"):f).text(function(t){return p.tickTitle[t]}),n.bandwidth?(l=(u=n).bandwidth()/2,n=e=function(t){return u(t)+l}):e.bandwidth?e=n:b(a,n),b(r,e),b(g.transitionise(o).style("opacity","1"),n))}),this.g=M},e.getTickXY=function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e},e.getTickSize=function(t){var e=this.helper.scale,n=this.config,i=n.innerTickSize,r=n.range,n=e(t)+(n.tickCentered?0:n.tickOffset);return r[0]<n&&n<r[1]?i:0},e.setTickLineTextPosition=function(t,e){function n(t){var e=["start","end"];return"top"===s&&e.reverse(),t?0<t?e[0]:e[1]:"middle"}function i(t){return t?"rotate("+t+")":null}var r=this.getTickXY(),a=this.config,o=a.innerTickSize,s=a.orient,c=a.tickLength,u=a.tickOffset,l=this.params.tickTextRotate,a=function(t){return t?11.5-2.5*(t/("bottom"===s?15:23))*(0<t?1:-1):c};"bottom"===s?(t.attr("x1",r.x).attr("x2",r.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",a(l)).style("text-anchor",n(l)).attr("transform",i(l))):"top"===s?(t.attr("x2",0).attr("y2",-o),e.attr("x",0).attr("y",2*-a(l)).style("text-anchor",n(l)).attr("transform",i(l))):"left"===s?(t.attr("x2",-o).attr("y1",r.y).attr("y2",r.y),e.attr("x",-c).attr("y",u).style("text-anchor","end")):"right"===s&&(t.attr("x2",o).attr("y2",0),e.attr("x",c).attr("y",0).style("text-anchor","start"))},e.splitTickText=function(t,e,n,i,o){var r=this.params,a=this.helper.textFormatted(t),t=T(a)&&-1<a.indexOf("\n")?a.split("\n"):[];if(t.length)return t;if(B(a))return a;var s=r.tickWidth;return(!s||s<=0)&&(s=i?95:r.isCategory?Math.ceil(e(n[1])-e(n[0]))-12:110),function t(e,n){for(var i,r,a=1;a<n.length;a++)if(" "===n.charAt(a)&&(i=a),r=n.substr(0,a+1),r=o*r.length,s<r)return t(e.concat(n.substr(0,i||a)),n.slice(i?i+1:a));return e.concat(n)}(t,a+"")},e.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},e.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient},e.tickFormat=function(t){var e=this.config;return arguments.length?(e.tickFormat=t,this):e.tickFormat},e.tickCentered=function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered},e.tickOffset=function(){return this.config.tickOffset},e.tickInterval=function(t){var e,i=this;return(e=this.params.isCategory?2*this.config.tickOffset:(e=(this.g.select("path.domain").node().getTotalLength()-2*this.config.outerTickSize)/(t||this.g.selectAll("line").size()),t=this.config.tickValues.map(function(t,e,n){e+=1;return e<n.length?i.helper.scale(n[e])-i.helper.scale(t):null}).filter(Boolean),Math.min.apply(Math,t.concat([e]))))===1/0?0:e},e.ticks=function(){for(var t=this.config,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.length?(t.tickArguments=W(n),this):t.tickArguments},e.tickCulling=function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling},e.tickValues=function(t){var e=this,n=this.config;if(R(t))n.tickValues=function(){return t(e.helper.scale.domain())};else{if(!arguments.length)return n.tickValues;n.tickValues=t}return this},e.setTransition=function(t){return this.config.transition=t,this},t}(),Yt={getAxisInstance:function(){return this.axis||new de(this)}},de=function(){function t(t){this.owner=void 0,this.x=void 0,this.subX=void 0,this.y=void 0,this.y2=void 0,this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}var e=t.prototype;return e.getAxisClassName=function(t){return L.axis+" "+L["axis"+q(t)]},e.isHorizontal=function(t,e){t=t.config.axis_rotated;return e?t:!t},e.isCategorized=function(){var t=this.owner,e=t.config,t=t.state;return 0<=e.axis_x_type.indexOf("category")||t.hasRadar},e.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||X(t.data_xs))},e.isTimeSeries=function(t){return"timeseries"===this.owner.config["axis_"+(t=void 0===t?"x":t)+"_type"]},e.isLog=function(t){return"log"===this.owner.config["axis_"+(t=void 0===t?"x":t)+"_type"]},e.isTimeSeriesY=function(){return this.isTimeSeries("y")},e.getAxisType=function(t){var e="linear";return this.isTimeSeries(t=void 0===t?"x":t)?e="time":this.isLog(t)&&(e="log"),e},e.init=function(){var i=this,r=this.owner,a=r.config,t=r.$el,o=t.main,s=t.axis,c=r.state.clip,u=a.axis_rotated,t=["x","y"];a.axis_y2_show&&t.push("y2"),t.forEach(function(e){var t=i.getAxisClassName(e),n=L["axis"+e.toUpperCase()+"Label"];s[e]=o.append("g").attr("class",t).attr("clip-path",function(){var t=null;return"x"===e?t=c.pathXAxis:"y"===e&&(t=c.pathYAxis),t}).attr("transform",r.getTranslate(e)).style("visibility",a["axis_"+e+"_show"]?"visible":"hidden"),s[e].append("text").attr("class",n).attr("transform",["rotate(-90)",null]["x"===e?+!u:+u]).style("text-anchor",function(){return i.textAnchorForAxisLabel(e)}),i.generateAxes(e)})},e.setOrient=function(){var t=this.owner.config,e=t.axis_rotated,n=t.axis_y_inner,t=t.axis_y2_inner;this.orient={x:e?"left":"bottom",y:e?n?"top":"bottom":n?"right":"left",y2:e?t?"bottom":"top":t?"left":"right",subX:e?"left":"bottom"}},e.generateAxes=function(i){var r,a=this.owner,t=a.config,o=[],e=t["axis_"+i+"_axes"],t=t.axis_rotated;"x"===i?r=t?le.axisLeft:le.axisBottom:"y"===i?r=t?le.axisBottom:le.axisLeft:"y2"===i&&(r=t?le.axisTop:le.axisRight),e.length&&e.forEach(function(t){var e=t.tick||{},n=a.scale[i].copy();t.domain&&n.domain(t.domain),o.push(r(n).ticks(e.count).tickFormat(R(e.format)?e.format.bind(a.api):function(t){return t}).tickValues(e.values).tickSizeOuter(!1===e.outer?0:6))}),this.axesList[i]=o},e.updateAxes=function(){var u=this,l=this.owner,f=l.config,h=l.$el.main;Object.keys(this.axesList).forEach(function(a){var o=f["axis_"+a+"_axes"],s=l.scale[a].copy(),c=s.range();u.axesList[a].forEach(function(t,e){var n=t.scale().range();c.every(function(t,e){return t===n[e]})||t.scale().range(c);var i=u.getAxisClassName(a)+"-"+(e+1),r=h.select("."+i.replace(/\s/,"."));r.empty()?r=h.append("g").attr("class",i).style("visibility",f["axis_"+a+"_show"]?"visible":"hidden").call(t):(o[e].domain&&s.domain(o[e].domain),u.x.helper.transitionise(r).call(t.scale(s))),r.attr("transform",l.getTranslate(a,e+1))})})},e.setAxis=function(t,e,n,i){var r=this.owner;"subX"!==t&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,e,n,!("x"!==t||!(r.scale.zoom||r.config.subchart_show||r.state.resizing))||i)},e.getAxis=function(t,e,n,i,r){var a,o=this.owner,s=o.config,c=/^(x|subX)$/.test(t),u=c?"x":t,l=c&&this.isCategorized(),f=this.orient[t],r=r?0:o.getAxisTickRotate(u);c?a=o.format.xAxisTick:(h=s["axis_"+t+"_tick_format"],R(h)&&(a=h.bind(o.api)));var h=this.tick[u],r=Q({outerTick:n,noTransition:i,config:s,id:t,tickTextRotate:r},c&&{isCategory:l,tickMultiline:s.axis_x_tick_multiline,tickWidth:s.axis_x_tick_width,tickTitle:l&&s.axis_x_tick_tooltip&&o.api.categories(),orgXScale:o.scale.x});c||(r.tickStepSize=s["axis_"+u+"_tick_stepSize"]);var d,f=new he(r).scale(c&&o.scale.zoom||e).orient(f);c&&this.isTimeSeries()&&h&&!R(h)?(d=at.bind(o),h=h.map(function(t){return d(t)})):!c&&this.isTimeSeriesY()&&(f.ticks(s.axis_y_tick_time_value),h=null),h&&f.tickValues(h),f.tickFormat(a||!c&&o.isStackNormalized()&&function(t){return t+"%"}),l&&(f.tickCentered(s.axis_x_tick_centered),w(s.axis_x_tick_culling)&&(s.axis_x_tick_culling=!1));u=s["axis_"+u+"_tick_count"];return u&&f.ticks(u),f},e.updateXAxisTickValues=function(t,e){var n,i=this.owner,r=i.config,a=r.axis_x_tick_fit,r=r.axis_x_tick_count;return(a||r&&a)&&(n=i.mapTargetsToUniqueXs(t),this.isCategorized()&&r>n.length&&(r=n.length),n=this.generateTickValues(n,r,this.isTimeSeries())),e?e.tickValues(n):this.x&&(this.x.tickValues(n),this.subX&&this.subX.tickValues(n)),n},e.getId=function(t){var e=this.owner,n=e.config,e=e.scale,t=n.data_axes[t];return t=!t||!e[t]?"y":t},e.getXAxisTickFormat=function(){var e,n=this.owner,t=n.config,i=n.format,r=t.axis_x_tick_format,t=this.isTimeSeries(),a=this.isCategorized();return r?R(r)?e=r.bind(n.api):t&&(e=function(t){return t?i.axisTime(r)(t):""}):e=t?i.defaultAxisTime:a?n.categoryName:function(t){return t<0?t.toFixed(0):t},R(e)?function(t){return e.apply(n,a?[t,n.categoryName(t)]:[t])}:e},e.getTickValues=function(t){var e=this.owner,n=e.config["axis_"+t+"_tick_values"],t=e[t+"Axis"];return(R(n)?n.call(e.api):n)||(t?t.tickValues():void 0)},e.getLabelOptionByAxisId=function(t){return this.owner.config["axis_"+t+"_label"]},e.getLabelText=function(t){t=this.getLabelOptionByAxisId(t);return T(t)?t:t?t.text:null},e.setLabelText=function(t,e){var n=this.owner.config,i=this.getLabelOptionByAxisId(t);T(i)?n["axis_"+t+"_label"]=e:i&&(i.text=e)},e.getLabelPosition=function(t,e){var n=this.owner.config.axis_rotated,t=this.getLabelOptionByAxisId(t),i=b(t)&&t.position?t.position:e[+!n],n=function(t){return!!~i.indexOf(t)};return{isInner:n("inner"),isOuter:n("outer"),isLeft:n("left"),isCenter:n("center"),isRight:n("right"),isTop:n("top"),isMiddle:n("middle"),isBottom:n("bottom")}},e.getAxisLabelPosition=function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])},e.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},e.xForAxisLabel=function(t){var e=this.owner,n=e.state,i=n.width,r=n.height,a=this.getAxisLabelPosition(t),n=a.isMiddle?-r/2:0;return this.isHorizontal(e,"x"!==t)?n=a.isLeft?0:a.isCenter?i/2:i:a.isBottom&&(n=-r),n},e.dxForAxisLabel=function(t){var e=this.owner,n=this.getAxisLabelPosition(t),i=n.isBottom?"0.5em":"0";return this.isHorizontal(e,"x"!==t)?i=n.isLeft?"0.5em":n.isRight?"-0.5em":"0":n.isTop&&(i="-0.5em"),i},e.textAnchorForAxisLabel=function(t){var e=this.owner,n=this.getAxisLabelPosition(t),i=n.isMiddle?"middle":"end";return this.isHorizontal(e,"x"!==t)?i=n.isLeft?"start":n.isCenter?"middle":"end":n.isBottom&&(i="start"),i},e.dyForAxisLabel=function(t){var e,n=this.owner,i=n.config,r=i.axis_rotated,a=this.getAxisLabelPosition(t).isInner,o=i["axis_"+t+"_tick_rotate"]?n.getHorizontalAxisHeight(t):0,s=this.getMaxTickWidth(t);return e="x"===t?(n=i.axis_x_height,r?a?"1.2em":-25-s:a?"-0.5em":n?n-10:o?o-10:"3em"):(e={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],r?a?e[0]:o?o*("y2"===t?-1:1)-e[1]:e[2]:a?e[3]:(e[4]+(i["axis_"+t+"_inner"]?0:s+e[4]))*("y"===t?-1:1))},e.getMaxTickWidth=function(t,e){var n=this.owner,i=n.config,r=n.state.current,a=n.$el,o=a.svg,s=a.chart,c=r.maxTickWidths[t],u=0;if(e||!i["axis_"+t+"_show"]||0===n.filterTargetsToShow().length)return c.size;if(o){var l=/^y2?$/.test(t),a=n.filterTargetsToShow(n.data.targets),r=n.scale[t].copy().domain(n["get"+(l?"Y":"X")+"Domain"](a,t)),e=r.domain(),o=e[0]===e[1]&&e.every(function(t){return 0<t}),n=B(c.domain)&&c.domain[0]===c.domain[1]&&c.domain.every(function(t){return 0<t});if(o||n)return c.size;c.domain=e,l||c.ticks.splice(0);n=this.getAxis(t,r,!1,!1,!0),r=i["axis_"+t+"_tick_count"];!i["axis_"+t+"_tick_values"]&&r&&n.tickValues(this.generateTickValues(e,r,l?this.isTimeSeriesY():this.isTimeSeries())),l||this.updateXAxisTickValues(a,n);s=s.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");n.create(s),s.selectAll("text").each(function(t,e){var n=this.getBoundingClientRect().width;u=Math.max(u,n),l||(c.ticks[e]=n)}),s.remove()}return 0<u&&(c.size=u),c.size},e.getXAxisTickTextY2Overflow=function(t){var e=this.owner,n=e.axis,i=e.config,r=e.state,a=e.getAxisTickRotate("x");if((n.isCategorized()||n.isTimeSeries())&&i.axis_x_tick_fit&&!i.axis_x_tick_culling&&!i.axis_x_tick_multiline&&0<a&&a<90){e=r.current.width-e.getCurrentPaddingLeft(),a=this.getXAxisTickMaxOverflow(a,e-t),t=Math.max(0,a)+t;return Math.min(t,e/2)}return 0},e.getXAxisTickMaxOverflow=function(t,e){for(var n=this.owner,i=n.axis,r=n.config,a=n.state,o=i.isTimeSeries(),s=a.current.maxTickWidths.x.ticks,c=s.length,i=a.axis.x.padding,u=i.left,l=i.right,f=0,h=c-(o&&r.axis_x_tick_fit?.5:0),d=0;d<c;d++){var g=d+1,p=Math.cos(Math.PI*t/180)*s[d],v=g-(o?1:.5)+u;v<=0||(v=(e-p)/v,f=Math.max(f,p-v/2-((h-g)*v+l*v)))}a=n.filterTargetsToShow(n.data.targets),i=0;return!o&&r.axis_x_tick_count<=a.length&&a[0].values.length&&(n=$t(n.axis.getAxisType("x"),0,e-f).domain([-1*u,n.getXDomainMax(n.data.targets)+1+l]),i=Math.ceil((n(1)-n(0))/2)),f+i},e.getXAxisPadding=function(t){var e,n,i,r=this.owner,a=r.config.axis_x_padding;return w(a)?a={left:0,right:0}:(a.left=a.left||0,a.right=a.right||0),r.axis.isTimeSeries()&&(i=+r.getXDomainMin(r.data.targets),n=(e=+r.getXDomainMax(r.data.targets)-i)+a.left+a.right,i=r=0,t&&n&&(r=a.left/n/(t=e/t/n),i=a.right/n/t),a={left:r,right:i}),a},e.updateLabels=function(n){var i=this,t=this.owner.$el.main,r={x:t.select("."+L.axisX+" ."+L.axisXLabel),y:t.select("."+L.axisY+" ."+L.axisYLabel),y2:t.select("."+L.axisY2+" ."+L.axisY2Label)};Object.keys(r).filter(function(t){return!r[t].empty()}).forEach(function(t){var e=r[t];(n?e.transition():e).attr("x",function(){return i.xForAxisLabel(t)}).attr("dx",function(){return i.dxForAxisLabel(t)}).attr("dy",function(){return i.dyForAxisLabel(t)}).text(function(){return i.getLabelText(t)})})},e.getPadding=function(t,e,n,i){e=F(t)?t:t[e];return z(e)?this.convertPixelsToAxisPadding(e,i):n},e.convertPixelsToAxisPadding=function(t,e){var n=this.owner,i=n.config,r=n.state,n=r.width,r=r.height;return e*(t/(i.axis_rotated?n:r))},e.generateTickValues=function(t,e,n){var i=t;if(e){e=R(e)?e():e;if(1===e)i=[t[0]];else if(2===e)i=[t[0],t[t.length-1]];else if(2<e){for(var r,a=this.isCategorized(),o=e-2,s=t[0],c=t[t.length-1],i=[s],u=0;u<o;u++)r=+s+(c-s)/(1+o)*(u+1),i.push(n?new Date(r):a?Math.round(r):r);i.push(c)}}return i=!n?i.sort(function(t,e){return t-e}):i},e.generateTransitions=function(e){var n=this.owner.$el.axis,t=["x","y","y2","subX"].map(function(t){t=n[t];return t=t&&e?t.transition().duration(e):t});return{axisX:t[0],axisY:t[1],axisY2:t[2],axisSubX:t[3]}},e.redraw=function(i,t,r){var a=this,e=this.owner,o=e.config,s=e.$el,c=t?"0":"1";["x","y","y2","subX"].forEach(function(t){var e=a[t],n=s.axis[t];e&&n&&(r||o.transition_duration||(e.config.withoutTransition=!0),n.style("opacity",c),e.create(i["axis"+q(t)]))}),this.updateAxes()},e.redrawAxis=function(r,t,e,n,i){var a,o=this,s=this.owner,c=s.config,u=s.scale,l=s.$el,f=!!u.zoom;!f&&this.isCategorized()&&0===r.length&&u.x.domain([0,l.axis.x.selectAll(".tick").size()]),u.x&&r.length?(f||s.updateXDomain(r,t.UpdateXDomain,t.UpdateOrgXDomain,t.TrimXDomain),c.axis_x_tick_values||this.updateXAxisTickValues(r)):this.x&&(this.x.tickValues([]),this.subX&&this.subX.tickValues([])),c.zoom_rescale&&!n&&(a=u.x.orgDomain()),["y","y2"].forEach(function(t){var e,n,i=u[t];i&&(e=c["axis_"+t+"_tick_values"],n=c["axis_"+t+"_tick_count"],i.domain(s.getYDomain(r,t,a)),!e&&n&&(t=s.axis[t],i=i.domain(),t.tickValues(o.generateTickValues(i,i.every(function(t){return 0===t})?1:n,o.isTimeSeriesY()))))}),this.redraw(e,s.hasArcType(),i),this.updateLabels(t.Transition),(t.UpdateXDomain||t.UpdateXAxis||t.Y)&&r.length&&this.setCulling(),t.Y&&(u.subY&&u.subY.domain(s.getYDomain(r,"y")),u.subY2&&u.subY2.domain(s.getYDomain(r,"y2")))},e.setCulling=function(){var t=this.owner,u=t.config,e=t.state,l=e.clip,f=e.current,h=t.$el;["subX","x","y","y2"].forEach(function(t){var e=h.axis[t],n="subX"===t?"x":t,i=u["axis_"+n+"_tick_culling"];if(e&&i){var r,e=e.selectAll(".tick text"),a=tt(e.data()),o=a.length,s=u["axis_"+n+"_tick_culling_max"];if(o){for(var c=1;c<o;c++)if(o/c<s){r=c;break}e.each(function(t){this.style.display=a.indexOf(t)%r?"none":"block"})}else e.style("display","block");"x"===t&&(t=f.maxTickWidths.x.clipPath?l.pathXAxisTickTexts:null,h.svg.selectAll("."+L.axisX+" .tick text").attr("clip-path",t))}})},t}(),Gt={initEventRect:function(){this.$el.main.select("."+L.chart).append("g").attr("class",L.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t=this,e=t.config,n=t.state,i=t.$el,r=t.isMultipleX();i.eventRect?t.updateEventRect(i.eventRect,!0):(e=t.$el.main.select("."+L.eventRects).style("cursor",e.zoom_enabled&&"drag"!==e.zoom_type?e.axis_rotated?"ns-resize":"ew-resize":null).classed(L.eventRectsMultiple,r).classed(L.eventRectsSingle,!r).selectAll("."+L.eventRect).data([0]).enter().append("rect"),t.updateEventRect(e),r?t.generateEventRectsForMultipleXs(e):t.generateEventRectsForSingleX(e),e.call(t.getDraggableSelection()),i.eventRect=e,"touch"!==t.state.inputType||i.svg.on("touchstart.eventRect")||t.hasArcType()||t.bindTouchOnEventRect(r)),r||(r=t.getMaxDataCountTarget(),t.updateDataIndexByX(r),t.updateXs(r),t.updatePointClass&&t.updatePointClass(!0),n.eventReceiver.data=r),t.updateEventRectData()},bindTouchOnEventRect:function(i){function r(){o.unselectRect(),o.callOverOutForTouch()}var a,o=this,s=o.config,c=o.state,t=o.$el,u=t.eventRect,e=t.svg,t=s.interaction_inputType_touch.preventDefault,l=y(t)&&t||!1,f=!isNaN(t)&&t||null;u.on("touchstart",function(t){c.event=t,o.updateEventRect()}).on("touchstart.eventRect touchmove.eventRect",function(t){var e,n;c.event=t,!u.empty()&&u.classed(L.eventRect)?c.dragging||c.flowing||o.hasArcType()||1<t.touches.length||(n=(e=t).type,t=e.changedTouches[0]["client"+(s.axis_rotated?"Y":"X")],"touchstart"===n?l?e.preventDefault():null!==f&&(a=t):"touchmove"===n&&(l||!0===a||null!==f&&Math.abs(a-t)>=f)&&(a=!0,e.preventDefault()),t=u.node(),i?o.selectRectForMultipleXs(t):(e=o.getDataIndexFromEvent(c.event),o.callOverOutForTouch(e),-1===e?o.unselectRect():o.selectRectForSingle(t,u,e))):r()},!0).on("touchend.eventRect",function(t){c.event=t,!u.empty()&&u.classed(L.eventRect)&&(o.hasArcType()||!o.toggleShape||c.cancelClick)&&c.cancelClick&&(c.cancelClick=!1)},!0),e.on("touchstart",function(t){t=(c.event=t).target;t&&t!==u.node()&&r()})},updateEventRect:function(t,e){void 0===e&&(e=!1);var n=this.state,i=this.$el,r=n.eventReceiver,a=n.width,o=n.height,s=n.rendered,n=n.resizing,i=t||i.eventRect;s&&!n&&!e||(i.attr("x",0).attr("y",0).attr("width",a).attr("height",o),s||i.attr("class",L.eventRect)),r&&(r.rect=i.node().getBoundingClientRect())},updateEventRectData:function(){function n(t,e){return R(t)?t(e):t}var i,r,a,o,e,s=this,t=s.config,c=s.scale,u=s.state,l=c.zoom||c.x,f=t.axis_rotated,h=s.isMultipleX()?(r=i=0,a=u.width,u.height):(t=s.axis.isCategorized()?(e=s.getEventRectWidth(),function(t){return l(t.x)-e/2}):(o=function(t){t=t.index;return{prev:s.getPrevX(t),next:s.getNextX(t)}},e=function(t){t=o(t);return null===t.prev&&null===t.next?f?u.height:u.width:(null===t.prev&&(t.prev=l.domain()[0]),null===t.next&&(t.next=l.domain()[1]),Math.max(0,(l(t.next)-l(t.prev))/2))},function(t){var e=o(t),t=t.x;return null===e.prev&&null===e.next?0:(null===e.prev&&(e.prev=l.domain()[0]),(l(t)+l(e.prev))/2)}),i=f?0:t,r=f?t:0,a=f?u.width:e,f?e:u.height),d=u.eventReceiver;d.coords.splice(d.data.length),d.data.forEach(function(t,e){d.coords[e]={x:n(i,t),y:n(r,t),w:n(a,t),h:n(h,t)}})},selectRectForMultipleXs:function(t){var e,n,i=this,r=i.config,a=i.state,o=i.filterTargetsToShow(i.data.targets);a.dragging||i.hasArcType(o)||(e=D(a.event,t),n=i.findClosestFromTargets(o,e),!a.mouseover||n&&n.id===a.mouseover.id||(r.data_onout.call(i.api,a.mouseover),a.mouseover=void 0),n?(o=(i.isBubbleType(n)||i.isScatterType(n)||!r.tooltip_grouped?[n]:i.filterByX(o,n.x)).map(function(t){return i.addName(t)}),i.showTooltip(o,t),i.expandCirclesBars(n.index,n.id,!0),i.showGridFocus(o),(i.isBarType(n.id)||i.dist(n,e)<r.point_sensitivity)&&(i.$el.svg.select("."+L.eventRect).style("cursor","pointer"),a.mouseover||(r.data_onover.call(i.api,n),a.mouseover=n))):i.unselectRect())},unselectRect:function(){var t=this.config,e=this.$el,n=e.bar,i=e.circle,e=e.tooltip;this.$el.svg.select("."+L.eventRect).style("cursor",null),this.hideGridFocus(),e&&(this.hideTooltip(),this._handleLinkedCharts(!1)),i&&!t.point_focus_only&&this.unexpandCircles(),n&&this.unexpandBars()},generateEventRectsForSingleX:function(t){var i=this,r=i.config,a=i.state,o=a.eventReceiver,s=t.style("cursor",r.data_selection_enabled&&r.data_selection_grouped?"pointer":null).on("click",function(t){a.event=t;var e=o.currentIdx,e=o.data[-1===e?i.getDataIndexFromEvent(t):e];i.clickHandlerForSingleX.bind(this)(e,i)});return"mouse"===a.inputType&&s.on("mouseover",function(t){a.event=t,i.updateEventRect()}).on("mousemove",function(t){var e,n=function(t){t=t?i.getDataIndexFromEvent(t):o.currentIdx;return-1<t?o.data[t]:null}(t);a.event=t,a.dragging||a.flowing||i.hasArcType()||!n||r.tooltip_grouped&&n&&n.index===o.currentIdx||(e=n.index,i.isStepType(n)&&"step-after"===r.line_step_type&&D(t,this)[0]<i.scale.x(i.getXValue(n.id,e))&&--e,e!==o.currentIdx&&(i.setOverOut(!1,o.currentIdx),o.currentIdx=e),-1===e?i.unselectRect():i.selectRectForSingle(this,s,e),i.setOverOut(-1!==e,e))}).on("mouseout",function(t){a.event=t,!r||i.hasArcType()||-1===o.currentIdx||(i.unselectRect(),i.setOverOut(!1,o.currentIdx),o.currentIdx=-1)}),s},clickHandlerForSingleX:function(t,e){var n,i=e,r=i.config,a=i.state,e=i.$el.main;!t||i.hasArcType()||a.cancelClick?a.cancelClick&&(a.cancelClick=!1):(n=t.index,e.selectAll("."+L.shape+"-"+n).each(function(t){(r.data_selection_grouped||i.isWithinShape(this,t))&&(i.toggleShape&&i.toggleShape(this,t,n),r.data_onclick.bind(i.api)(t,this))}))},generateEventRectsForMultipleXs:function(t){var e=this,n=e.state;t.on("click",function(t){n.event=t,e.clickHandlerForMultipleXS.bind(this)(e)}),"mouse"===n.inputType&&t.on("mouseover mousemove",function(t){n.event=t,e.selectRectForMultipleXs(this)}).on("mouseout",function(t){n.event=t,!e.config||e.hasArcType()||e.unselectRect()})},clickHandlerForMultipleXS:function(t){var e,n=t,i=n.config,r=n.state,t=n.filterTargetsToShow(n.data.targets);n.hasArcType(t)||(r=D(r.event,this),!(e=n.findClosestFromTargets(t,r))||(n.isBarType(e.id)||n.dist(e,r)<i.point_sensitivity)&&n.$el.main.selectAll("."+L.shapes+n.getTargetSelectorSuffix(e.id)).selectAll("."+L.shape+"-"+e.index).each(function(){(i.data_selection_grouped||n.isWithinShape(this,e))&&(n.toggleShape&&n.toggleShape(this,e,e.index),i.data_onclick.bind(n.api)(e,this))}))}},ge=Dn(11),Ht={generateFlow:function(t){var n=this,r=n.data,a=n.state,o=n.$el;return function(){var e=t.flow.length;a.flowing=!0,r.targets.forEach(function(t){t.values.splice(0,e)}),n.updateXGrid&&n.updateXGrid(!0);var i={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(t){var e=t.split("."),n=o[e[0]];(n=n&&1<e.length?n[e[1]]:n)&&n.size()&&(i[t]=n)}),n.hideGridFocus(),n.setFlowList(i,t)}},setFlowList:function(e,t){var n,i=this,r=t.flow,a=t.targets,o=r.duration,s=void 0===o?t.duration:o,c=r.index,o=r.length,r=r.orgDataCount,u=i.getFlowTransform(a,r,c,o),o=wt();o.add(Object.keys(e).map(function(t){return n=e[t].transition().ease(ge.easeLinear).duration(s),n="axis.x"===t?n.call(function(t){i.axis.x.setTransition(t).create(t)}):("region.list"===t?n.filter(i.isRegionOnX):n).attr("transform",u)})),n.call(o,function(){i.cleanUpFlow(e,t)})},cleanUpFlow:function(n,t){var i=this,r=i.config,a=i.state,o=i.$el.svg,s=r.axis_rotated,e=t.flow,c=t.shape,u=t.xv,t=c.pos,l=t.cx,f=t.cy,h=t.xForText,d=t.yForText,t=e.done,t=void 0===t?function(){}:t,g=e.length;g&&(["circle","text","shape","eventRect"].forEach(function(t){for(var e=[],n=0;n<g;n++)e.push("."+L[t]+"-"+n);o.selectAll("."+L[t+"s"]).selectAll(e).remove()}),o.select("."+L.xgrid).remove()),Object.keys(n).forEach(function(t){var e=n[t];"axis.x"!==t&&e.attr("transform",null),"grid.x"===t?e.attr(a.xgridAttr):"gridLines.x"===t?e.attr("x1",s?0:u).attr("x2",s?a.width:u):"gridLines.x"===t?(e.select("line").attr("x1",s?0:u).attr("x2",s?a.width:u),e.select("text").attr("x",s?a.width:0).attr("y",u)):/^(area|bar|line)$/.test(t)?e.attr("d",c.type[t]):"text"===t?e.attr("x",h).attr("y",d).style("fill-opacity",i.opacityForText.bind(i)):"circle"!==t?"region.list"===t&&e.select("rect").filter(i.isRegionOnX).attr("x",i.regionX.bind(i)).attr("width",i.regionWidth.bind(i)):i.isCirclePoint()?e.attr("cx",l).attr("cy",f):e.attr("x",function(t){return l(t)-r.point_r}).attr("y",function(t){return f(t)-r.point_r}).attr("cx",l).attr("cy",f)}),r.interaction_enabled&&i.redrawEventRect(),t.call(i.api),a.flowing=!1},getFlowTransform:function(t,e,n,i){var r=this.data,a=this.scale.x,o=r.targets[0].values,r=this.getValueOnIndex(o,n),n=this.getValueOnIndex(o,n+i),i=a.domain(),t=this.updateXDomain(t,!0,!0),a=e?1===e||(r&&r.x)===(n&&n.x)||this.axis.isTimeSeries()?a(i[0])-a(t[0]):a(r.x)-a(n.x):1===o.length?this.axis.isTimeSeries()?(r=this.getValueOnIndex(o,0),n=this.getValueOnIndex(o,o.length-1),a(r.x)-a(n.x)):M(t)/2:a(i[0])-a(t[0]);return"translate("+a+",0) scale("+M(i)/M(t)+",1)"}},Ut={initClip:function(){var t=this.state.clip;t.id=this.state.datetimeId+"-clip",t.idXAxis=t.id+"-xaxis",t.idYAxis=t.id+"-yaxis",t.idGrid=t.id+"-grid",t.path=this.getClipPath(t.id),t.pathXAxis=this.getClipPath(t.idXAxis),t.pathYAxis=this.getClipPath(t.idYAxis),t.pathGrid=this.getClipPath(t.idGrid)},getClipPath:function(t){var e=this.config;return!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t)?null:"url("+(!!p.navigator&&0<=p.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":P.URL.split("#")[0])+"#"+t+")"},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this.config,n=this.state,i=n.margin,r=n.width,a=n.height,o=e.axis_rotated,s=Math.max(30,i.left)-(o?0:20),n=o?-(1+s):-(s-1),e=-Math.max(15,i.top),s=o?i.left+20:r+10+s,i=(o?i.top+a+10:i.bottom)+20;t.attr("x",n).attr("y",e).attr("width",s).attr("height",i)},setYAxisClipPath:function(t){var e=this.config,n=this.state,i=n.margin,r=n.width,a=n.height,o=e.axis_rotated,s=Math.max(30,i.left)-(o?20:0),n=e.axis_y_inner,e=-(o?20:i.top),r=(o?r+15+s:i.left+20)+(n?20:0),a=(o?i.bottom:i.top+a)+10;t.attr("x",n?-1:o?-(1+s):-(s-1)).attr("y",e).attr("width",r).attr("height",a)},updateXAxisTickClip:function(){var t=this,e=t.config,n=t.state,i=n.clip,r=n.xAxisHeight,a=t.$el.defs,o=t.getHorizontalAxisHeight("x");a&&!i.idXAxisTickTexts&&(n=i.id+"-xaxisticktexts",t.appendClip(a,n),i.pathXAxisTickTexts=t.getClipPath(i.idXAxisTickTexts),i.idXAxisTickTexts=n),!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&o!==r&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=o},setXAxisTickClipWidth:function(){var t=this.config,e=this.state.current.maxTickWidths,n=this.getAxisTickRotate("x");!t.axis_x_tick_multiline&&n?(n=Math.sin(Math.PI/180*Math.abs(n)),e.x.clipPath=(this.getHorizontalAxisHeight("x")-20)/n):e.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this.state,e=t.clip,n=t.current,t=this.$el.svg;t&&t.select("#"+e.idXAxisTickTexts+" rect").attr("width",n.maxTickWidths.x.clipPath).attr("height",30)}};function pe(n,i,r){return function(t){var e=n?0:i;return"start"===t.position?e=n?-r:0:"middle"===t.position&&(e=(n?-r:i)/2),e}}function ve(t,e){"grid"===e&&t.each(function(){var e=(0,O.select)(this);["x1","x2","y1","y2"].forEach(function(t){return e.attr(t,Math.ceil(+e.attr(t)))})})}qt={hasGrid:function(){var e=this.config;return["x","y"].some(function(t){return e["grid_"+t+"_show"]||e["grid_"+t+"_lines"].length})},initGrid:function(){this.hasGrid()&&this.initGridLines(),this.initFocusGrid()},initGridLines:function(){var t=this.config,e=this.state.clip,n=this.$el;(t.grid_x_lines.length||t.grid_y_lines.length)&&(n.gridLines.main=n.main.insert("g","."+L.chart+(t.grid_lines_front?" + *":"")).attr("clip-path",e.pathGrid).attr("class",L.grid+" "+L.gridLines),n.gridLines.main.append("g").attr("class",L.xgridLines),n.gridLines.main.append("g").attr("class",L.ygridLines),n.gridLines.x=(0,O.selectAll)([]))},updateXGrid:function(t){var e=this.config,n=this.scale,i=this.state,r=this.$el,a=r.main,o=r.grid,s=e.axis_rotated,r=this.generateGridData(e.grid_x_type,n.x),c=this.axis.isCategorized()?this.axis.x.tickOffset():0,e=function(t){return(n.zoom||n.x)(t)+c*(s?-1:1)};i.xgridAttr=s?{x1:0,x2:i.width,y1:e,y2:e}:{x1:e,x2:e,y1:0,y2:i.height},o.x=a.select("."+L.xgrids).selectAll("."+L.xgrid).data(r),o.x.exit().remove(),o.x=o.x.enter().append("line").attr("class",L.xgrid).merge(o.x),t||o.x.each(function(){var e=(0,O.select)(this);Object.keys(i.xgridAttr).forEach(function(t){e.attr(t,i.xgridAttr[t]).style("opacity",function(){return e.attr(s?"y1":"x1")===(s?i.height:0)?"0":"1"})})})},updateYGrid:function(){var e=this,t=e.config,n=e.state,i=e.$el,r=i.grid,a=i.main,o=t.axis_rotated,i=e.axis.y.tickValues()||e.scale.y.ticks(t.grid_y_ticks),t=function(t){return Math.ceil(e.scale.y(t))};r.y=a.select("."+L.ygrids).selectAll("."+L.ygrid).data(i),r.y.exit().remove(),r.y=r.y.enter().append("line").attr("class",L.ygrid).merge(r.y),r.y.attr("x1",o?t:0).attr("x2",o?t:n.width).attr("y1",o?0:t).attr("y2",o?n.height:t),ve(r.y,"grid")},updateGrid:function(t){var e=this.$el,n=e.grid;e.gridLines.main||this.initGridLines(),n.main.style("visibility",this.hasArcType()?"hidden":"visible"),this.hideGridFocus(),this.updateXGridLines(t),this.updateYGridLines(t)},updateXGridLines:function(t){var e=this.config,n=this.$el,i=n.gridLines,r=n.main,n=e.axis_rotated;e.grid_x_show&&this.updateXGrid();r=r.select("."+L.xgridLines).selectAll("."+L.xgridLine).data(e.grid_x_lines);r.exit().transition().duration(t).style("opacity","0").remove();e=r.enter().append("g");e.append("line").style("opacity","0"),e.append("text").attr("transform",n?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),(r=e.merge(r)).attr("class",function(t){return(L.xgridLine+" "+(t.class||"")).trim()}).select("text").attr("text-anchor",ce).attr("dx",ue).transition().duration(t).text(function(t){return t.text}).transition().style("opacity","1"),i.x=r},updateYGridLines:function(t){var e=this.config,n=this.state,i=n.width,r=n.height,a=this.$el,o=e.axis_rotated;e.grid_y_show&&this.updateYGrid(),(n=a.main.select("."+L.ygridLines).selectAll("."+L.ygridLine).data(e.grid_y_lines)).exit().transition().duration(t).style("opacity","0").remove();e=n.enter().append("g");e.append("line").style("opacity","0"),e.append("text").attr("transform",o?"rotate(-90)":"").style("opacity","0");n=e.merge(n),e=this.yv.bind(this);n.attr("class",function(t){return(L.ygridLine+" "+(t.class||"")).trim()}).select("line").transition().duration(t).attr("x1",o?e:0).attr("x2",o?e:i).attr("y1",o?0:e).attr("y2",o?r:e).transition().style("opacity","1"),n.select("text").attr("text-anchor",ce).attr("dx",ue).transition().duration(t).attr("dy",-5).attr("x",pe(o,i,r)).attr("y",e).text(function(t){return t.text}).transition().style("opacity","1"),a.gridLines.y=n},redrawGrid:function(t){var e=this.config.axis_rotated,n=this.state,i=n.width,r=n.height,a=this.$el.gridLines,o=this.xv.bind(this),n=a.x.select("line"),a=a.x.select("text"),n=(t?n.transition():n).attr("x1",e?0:o).attr("x2",e?i:o).attr("y1",e?o:0).attr("y2",e?o:r),a=(t?a.transition():a).attr("x",pe(!e,i,r)).attr("y",o).text(function(t){return t.text});return[n.style("opacity","1"),a.style("opacity","1")]},initFocusGrid:function(){var t=this.config,e=this.state.clip,n=this.$el,i=t.grid_front,i="."+L[i&&n.gridLines.main?"gridLines":"chart"]+(i?" + *":""),e=n.main.insert("g",i).attr("clip-path",e.pathGrid).attr("class",L.grid);n.grid.main=e,t.grid_x_show&&e.append("g").attr("class",L.xgrids),t.grid_y_show&&e.append("g").attr("class",L.ygrids),t.interaction_enabled&&t.grid_focus_show&&(e.append("g").attr("class",L.xgridFocus).append("line").attr("class",L.xgridFocus),t.grid_focus_y&&!t.tooltip_grouped&&e.append("g").attr("class",L.ygridFocus).append("line").attr("class",L.ygridFocus))},showGridFocus:function(t){var r,a,o=this,e=o.config,n=o.state,s=n.width,c=n.height,u=e.axis_rotated,i=o.$el.main.selectAll("line."+L.xgridFocus+", line."+L.ygridFocus),n=(t||[i.datum()]).filter(function(t){return t&&z(o.getBaseValue(t))});!e.tooltip_show||0===n.length||o.hasType("bubble")||o.hasArcType()||(r=e.grid_focus_edge&&!e.tooltip_grouped,a=o.xx.bind(o),i.style("visibility","visible").data(n.concat(n)).each(function(t){var n,i=(0,O.select)(this),e={x:a(t),y:o.getYScaleById(t.id)(t.value)};n=i.classed(L.xgridFocus)?u?[null,e.x,r?e.y:s,e.x]:[e.x,r?e.y:null,e.x,c]:(t="y2"===o.axis.getId(t.id),u?[e.y,r&&!t?e.x:null,e.y,r&&t?e.x:c]:[r&&t?e.x:null,e.y,r&&!t?e.x:s,e.y]),["x1","y1","x2","y2"].forEach(function(t,e){return i.attr(t,n[e])})}),ve(i,"grid"),o.showCircleFocus&&o.showCircleFocus(t))},hideGridFocus:function(){var t=this.state,e=t.inputType,n=t.resizing,t=this.$el.main;"mouse"!==e&&n||(t.selectAll("line."+L.xgridFocus+", line."+L.ygridFocus).style("visibility","hidden"),this.hideCircleFocus&&this.hideCircleFocus())},updateGridFocus:function(){var t=this.state,e=t.inputType,n=t.width,i=t.height,r=t.resizing,t=this.$el.grid.main.select("line."+L.xgridFocus);return"touch"===e?t.empty()?r&&this.showCircleFocus():this.showGridFocus():(r=this.config.axis_rotated,t.attr("x1",r?0:-10).attr("x2",r?n:-10).attr("y1",r?-10:0).attr("y2",r?-10:i)),!0},generateGridData:function(t,e){var n=this.$el.main.select("."+L.axisX).selectAll(".tick").size(),i=[];if("year"===t)for(var r=this.getXDomain(),t=r[0].getFullYear(),a=r[1].getFullYear(),o=t;o<=a;o++)i.push(new Date(o+"-01-01 00:00:00"));else(i=e.ticks(10)).length>n&&(i=i.filter(function(t){return(t+"").indexOf(".")<0}));return i},getGridFilterToRemove:function(t){return t?function(e){var n=!1;return(B(t)?t.concat():[t]).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)}),n}:function(){return!0}},removeGridLines:function(t,e){var n=this.config,i=this.getGridFilterToRemove(t),r=e?L.xgridLines:L.ygridLines,t=e?L.xgridLine:L.ygridLine;this.$el.main.select("."+r).selectAll("."+t).filter(i).transition().duration(n.transition_duration).style("opacity","0").remove();e="grid_"+(e?"x":"y")+"_lines";n[e]=n[e].filter(function(t){return!i(t)})}},Wt={initRegion:function(){var t=this.$el;t.region.main=t.main.append("g").attr("clip-path",this.state.clip.path).attr("class",L.regions)},updateRegion:function(t){var e=this.config,n=this.$el;n.region.main||this.initRegion(),n.region.main.style("visibility",this.hasArcType()?"hidden":"visible");e=n.main.select("."+L.regions).selectAll("."+L.region).data(e.regions);e.exit().transition().duration(t).style("opacity","0").remove(),(e=e.enter().append("g").merge(e).attr("class",this.classRegion.bind(this))).append("rect").style("fill-opacity","0"),n.region.list=e},redrawRegion:function(t){var e=this.$el.region.list.select("rect"),e=(t?e.transition():e).attr("x",this.regionX.bind(this)).attr("y",this.regionY.bind(this)).attr("width",this.regionWidth.bind(this)).attr("height",this.regionHeight.bind(this));return[(t?e.transition():e).style("fill-opacity",function(t){return z(t.opacity)?t.opacity:"0.1"}).on("end",function(){(0,O.select)(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(t,e){var n=this.config,i=this.scale,r=n.axis_rotated,a="x"===t,n="start",t=0;return"y"===e.axis||"y2"===e.axis?(a||(n="end"),(a?r:!r)&&n in e&&(t=(0,i[e.axis])(e[n]))):(a?!r:r)&&n in e&&(t=(i.zoom||i.x)(this.axis.isTimeSeries()?at.call(this,e[n]):e[n])),t},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var n=this.config,i=this.scale,r=this.state,a=n.axis_rotated,o="width"===t,s=this[o?"regionX":"regionY"](e),n="end",t=r[t];return"y"===e.axis||"y2"===e.axis?(o||(n="start"),(o?a:!a)&&n in e&&(t=(0,i[e.axis])(e[n]))):(o?!a:a)&&n in e&&(t=(i.zoom||i.x)(this.axis.isTimeSeries()?at.call(this,e[n]):e[n])),t<s?0:t-s},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}},Zt={getAxisSize:function(t){var e=this.config.axis_rotated;return e&&"x"===t||!e&&/y2?/.test(t)?this.getAxisWidthByAxisId(t,!0):this.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){if(this.axis){var n=this.axis&&this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)}return 40},getHorizontalAxisHeight:function(t){var e=this.config,n=this.state,i=n.current,r=n.rotatedPadding,a=n.isLegendRight,o=n.isLegendInset,s=e.axis_rotated,n=30;if("x"===t&&!e.axis_x_show)return 8;if("x"===t&&e.axis_x_height)return e.axis_x_height;if("y"===t&&!e.axis_y_show)return!e.legend_show||a||o?1:10;if("y2"===t&&!e.axis_y2_show)return r.top;r=this.getAxisTickRotate(t);return("x"===t&&!s||/y2?/.test(t)&&s)&&r&&(n=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(r))/180),!e.axis_x_tick_multiline&&i.height&&n>i.height/2&&(n=i.height/2)),n+(this.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||s?0:-10)},getEventRectWidth:function(){return Math.max(0,this.axis.x.tickInterval())},getAxisTickRotate:function(t){var e,n,i=this.axis,r=this.config,a=this.state,o=this.$el,s=r["axis_"+t+"_tick_rotate"];return"x"===t&&(e=i.isCategorized()||i.isTimeSeries(),r.axis_x_tick_fit&&e&&(n=r.axis_x_tick_count,t=a.current.maxTickWidths.x.ticks.length,i=0,n?i=t<n?t:n:t&&(i=t),i!==a.axis.x.tickCount&&(a.axis.x.padding=this.axis.getXAxisPadding(i)),a.axis.x.tickCount=i),o.svg&&r.axis_x_tick_fit&&!r.axis_x_tick_multiline&&!r.axis_x_tick_culling&&r.axis_x_tick_autorotate&&e&&(s=this.needToRotateXAxisTickTexts()?r.axis_x_tick_rotate:0)),s},needToRotateXAxisTickTexts:function(){var t=this.state,e=t.axis,t=t.current.width-this.getCurrentPaddingLeft(!1)-this.getCurrentPaddingRight(),e=e.x.tickCount+e.x.padding.left+e.x.padding.right;return(e?t/e:0)<this.axis.getMaxTickWidth("x")}},Kt={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},St={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]};function xe(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function ye(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?xe(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var St=ye(ye(ye({axis_rotated:!1},{axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]}),Kt),St),_e=[Ct,{category:function(t,e){var n=this.internal,i=n.config;return 1<arguments.length&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},categories:function(t){var e=this.internal,n=e.config;return arguments.length&&(n.axis_x_categories=t,e.redraw()),n.axis_x_categories}},Ot,zt,Bt,Et,It,Ft],me=[Yt,Ut,Gt,Ht,qt,Wt,Zt],be=[{data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},St,{grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0}],we=Dn(12),Te={initPie:function(){var t=this.config,e=t.data_type,n=t.pie_padding,i=t[e+"_startingAngle"]||0,e=(this.hasType("pie")&&n?.01*n:t[e+"_padAngle"])||0;this.pie=(0,jt.pie)().startAngle(i).endAngle(i+2*Math.PI).padAngle(e).value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}).sort(this.getSortCompareFn.bind(this)(!0))},updateRadius:function(){var t=this.config,e=this.state,n=t.pie_padding,i=t.gauge_width||t.donut_width,r=this.filterTargetsToShow(this.data.targets).length*t.gauge_arcs_minWidth;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2*(this.hasMultiArcGauge()?.85:1),e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=i?(e.radius-i)/e.radius:.6,e.gaugeArcWidth=i||(r<=e.radius-e.innerRadius?e.radius-e.innerRadius:r<=e.radius?r:e.radius);n=t.pie_innerRadius||(n?n*(e.innerRadiusRatio+.1):0);e.outerRadius=t.pie_outerRadius,e.innerRadius=this.hasType("donut")||this.hasType("gauge")?e.radius*e.innerRadiusRatio:n},getRadius:function(t){var e=t&&t.data,n=this.state,t=n.innerRadius,n=n.outerRadius;return!F(t)&&e&&(t=t[e.id]||0),$(n)&&e&&e.id in n?n=n[e.id]:F(n)||(n=this.state.radius),{innerRadius:t,outerRadius:n}},updateArc:function(){this.updateRadius(),this.svgArc=this.getSvgArc(),this.svgArcExpanded=this.getSvgArcExpanded()},getArcLength:function(){var t=3.6*this.config.gauge_arcLength,e=t/360*2;return t<-360?e=-2:360<t&&(e=2),e*Math.PI},getStartAngle:function(){var t=this.config,e=t.gauge_fullCircle,n=-1*Math.PI/2,i=Math.PI/2,t=t.gauge_startingAngle;return!e&&t<=n?t=n:!e&&i<=t?t=i:(t>Math.PI||t<-1*Math.PI)&&(t=Math.PI),t},updateAngle:function(t){var e=this,n=e.config,i=e.state,r=e.pie,a=t,o=!1;if(!n)return null;var s=e.getStartAngle(),t=n.gauge_fullCircle?e.getArcLength():-2*s;return a.data&&e.isGaugeType(a.data)&&!e.hasMultiArcGauge()&&(i=t*(e.getTotalDataSum(i.rendered)/(n.gauge_max-n.gauge_min)),r=r.startAngle(s).endAngle(i+s)),r(e.filterTargetsToShow()).forEach(function(t,e){o||t.data.id!==a.data.id||(o=!0,(a=t).index=e)}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),a.data&&e.hasMultiArcGauge()&&(r=n.gauge_min,e=n.gauge_max,n=a.value<r?0:a.value<e?a.value-r:e-r,a.startAngle=s,a.endAngle=s+t/(e-r)*n),o?a:null},getSvgArc:function(){function t(t,e){var n,i="M 0 0";return(t.value||t.data)&&(n=!e&&r.updateAngle(t),e?i=o(t):n&&(i=o(n))),i}var r=this,n=r.state,i=n.gaugeArcWidth/r.filterTargetsToShow(r.data.targets).length,a=r.hasMultiArcGauge(),o=(0,jt.arc)().innerRadius(function(t){var e=r.getRadius(t).innerRadius;return a?n.radius-i*(t.index+1):F(e)?e:0}).outerRadius(function(t){var e=r.getRadius(t).outerRadius;return a?n.radius-i*t.index:e});return t.centroid=o.centroid,t},getSvgArcExpanded:function(t){var n=this,i=n.state,r=t||1,a=i.gaugeArcWidth/n.filterTargetsToShow(n.data.targets).length,o=n.hasMultiArcGauge(),s=Math.min(i.radiusExpanded*r-i.radius,.8*a-100*(1-r)),e=(0,jt.arc)().innerRadius(function(t){return o?i.radius-a*(t.index+1):n.getRadius(t).innerRadius}).outerRadius(function(t){var e=o?i.radius-a*t.index+s:(t=n.getRadius(t).outerRadius,e=i.radiusExpanded,i.radius!==t&&(e-=Math.abs(i.radius-t)),e*r);return e});return function(t){t=n.updateAngle(t);return t?e(t):"M 0 0"}},getArc:function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e,n,i,r=this,a=r.config,o=r.state.radiusExpanded,s=r.updateAngle(t),c="";return s&&(r.hasMultiArcGauge()?(e=Math.sin(s.endAngle-Math.PI/2),c="translate("+(n=Math.cos(s.endAngle-Math.PI/2)*(o+25))+","+(i=e*(o+15-Math.abs(10*e))+3)+")"):(!r.hasType("gauge")||1<r.data.targets.length)&&(e=r.getRadius(t).outerRadius,s=this.svgArc.centroid(s),n=isNaN(s[0])?0:s[0],i=isNaN(s[1])?0:s[1],s=Math.sqrt(n*n+i*i),c="translate("+n*(a=(a=r.hasType("donut")&&a.donut_label_ratio||r.hasType("pie")&&a.pie_label_ratio)?R(a)?a.bind(r.api)(t,e,s):a:e&&(s?(.375<36/e?1.175-36/e:.8)*e/s:0))+","+i*a+")")),c},convertToArcData:function(t){return this.addName({id:(t.data||t).id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){var r=this,a=r.hasType("gauge");r.shouldShowArcLabel()&&t.style("fill",r.updateTextColor.bind(r)).each(function(t){var e=(0,O.select)(this),n=r.updateAngle(t),i=r.getRatio("arc",n);r.meetsLabelThreshold(i,(r.hasType("donut")?"donut":r.hasType("gauge")&&"gauge")||r.hasType("pie")&&"pie")?(n=(n||t).value,E(e,(r.getArcLabelFormat()||r.defaultArcValueFormat)(n,i,t.data.id).toString(),[-1,1],a)):e.text("")})},expandArc:function(t){var e,n,i=this,r=i.state.transiting,a=i.$el;r?e=setInterval(function(){r||(clearInterval(e),0<a.legend.selectAll("."+L.legendItemFocused).size()&&i.expandArc(t))},10):(n=i.mapToTargetIds(t),a.svg.selectAll(i.selectorTargets(n,"."+L.chartArc)).each(function(t){var e;i.shouldExpand(t.data.id)&&(e=i.getExpandConfig(t.data.id,"duration"),t=i.getSvgArcExpanded(i.getExpandConfig(t.data.id,"rate")),(0,O.select)(this).selectAll("path").transition().duration(e).attr("d",i.svgArcExpanded).transition().duration(2*e).attr("d",t))}))},unexpandArc:function(t){var e=this,n=e.state.transiting,i=e.$el.svg;n||(t=e.mapToTargetIds(t),i.selectAll(e.selectorTargets(t,"."+L.chartArc)).selectAll("path").transition().duration(function(t){return e.getExpandConfig(t.data.id,"duration")}).attr("d",e.svgArc),i.selectAll(""+L.arc).style("opacity","1"))},getExpandConfig:function(t,e){var n,i=this.config;return this.isDonutType(t)?n="donut":this.isGaugeType(t)?n="gauge":this.isPieType(t)&&(n="pie"),n?i[n+"_expand_"+e]:{duration:50,rate:.98}[e]},shouldExpand:function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},shouldShowArcLabel:function(){var e=this,n=e.config;return["pie","donut","gauge"].some(function(t){return e.hasType(t)&&n[t+"_label_show"]})},getArcLabelFormat:function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),R(e)?e.bind(this.api):e},getArcTitle:function(){var t=this.hasType("donut")?"donut":this.hasType("gauge")&&"gauge";return t?this.config[t+"_title"]:""},updateTargetsForArc:function(t){var e=this.$el,n=this.hasType("gauge"),i=this.getChartClass("Arc"),r=this.getClass("arcs",!0),a=this.classFocus.bind(this),o=e.main.select("."+L.chartArcs),s=o.selectAll("."+L.chartArc).data(this.pie(t)).attr("class",function(t){return i(t)+a(t.data)}),t=s.enter().append("g").attr("class",i);t.append("g").attr("class",r).merge(s),t.append("text").attr("dy",n&&!this.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none"),e.text=o.selectAll("."+L.target+" text")},initArc:function(){var t=this.$el;t.arcs=t.main.select("."+L.chart).append("g").attr("class",L.chartArcs).attr("transform",this.getTranslate("arc")),this.setArcTitle()},setArcTitle:function(){var t,e=this.getArcTitle(),n=this.hasType("gauge");e&&(t=this.$el.arcs.append("text").attr("class",L[n?"chartArcsGaugeTitle":"chartArcsTitle"]).style("text-anchor","middle"),n&&t.attr("dy","-0.3em").style("font-size","27px"),E(t,e,n?void 0:[-.6,1.35],!0))},redrawArc:function(t,e,n){var i=this,r=i.config,a=i.state,o=i.$el.main,s=r.interaction_enabled,c=s&&r.data_selection_isselectable,o=o.selectAll("."+L.arcs).selectAll("."+L.arc).data(i.arcData.bind(i));o.exit().transition().duration(e).style("opacity","0").remove(),o=o.enter().append("path").attr("class",i.getClass("arc",!0)).style("fill",function(t){return i.color(t.data)}).style("cursor",function(t){return c&&c.bind(i.api)(t)?"pointer":null}).style("opacity","0").each(function(t){i.isGaugeType(t.data)&&(t.startAngle=r.gauge_startingAngle,t.endAngle=r.gauge_startingAngle),this._current=t}).merge(o),i.hasType("gauge")&&(i.updateGaugeMax(),i.hasMultiArcGauge()&&i.redrawMultiArcGauge()),o.attr("transform",function(t){return!i.isGaugeType(t.data)&&n?"scale(0)":""}).style("opacity",function(t){return t===this._current?"0":"1"}).each(function(){a.transiting=!0}).transition().duration(t).attrTween("d",function(e){var t=i.updateAngle(e);if(!t)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var n=(0,we.interpolate)(this._current,t);return this._current=n(0),function(t){t=n(t);return t.data=e.data,i.getArc(t,!0)}}).attr("transform",n?"scale(1)":"").style("fill",function(t){var e;return i.levelColor?(e=i.levelColor(t.data.values[0].value),r.data_colors[t.data.id]=e):e=i.color(t.data),e}).style("opacity","1").call(k,function(){var t,e;i.levelColor&&(e=(t=(0,O.select)(this)).datum(),i.updateLegendItemColor(e.data.id,t.style("fill"))),a.transiting=!1,S(r.onrendered,i.api)}),s&&i.bindArcEvent(o),i.hasType("gauge")&&i.redrawBackgroundArcs(),i.redrawArcText(t)},redrawBackgroundArcs:function(){var e,n=this,i=n.config,r=n.state,t=n.hasMultiArcGauge(),a=i.gauge_fullCircle,o=n.getStartAngle(),s=a?o+n.getArcLength():-1*o,a=n.$el.arcs.select((t?"g":"")+"."+L.chartArcsBackground);t?(e=0,(a=a.selectAll("path."+L.chartArcsBackground).data(n.data.targets)).enter().append("path").attr("class",function(t,e){return L.chartArcsBackground+" "+L.chartArcsBackground+"-"+e}).merge(a).style("fill",i.gauge_background||null).attr("d",function(t){t=t.id;if(0<=r.hiddenTargetIds.indexOf(t))return"M 0 0";t={data:[{value:i.gauge_max}],startAngle:o,endAngle:s,index:e++};return n.getArc(t,!0,!0)}),a.exit().remove()):a.attr("d",function(){var t={data:[{value:i.gauge_max}],startAngle:o,endAngle:s};return n.getArc(t,!0,!0)})},bindArcEvent:function(t){function n(t,e,n){r.expandArc(n),r.api.focus(n),r.toggleFocusLegend(n,!0),r.showTooltip([e],t)}function i(t){t=t&&t.id||void 0;r.unexpandArc(t),r.api.revert(),r.revertLegend(),r.hideTooltip()}var r=this,a=r.config,o=r.state,e="touch"===o.inputType,s="mouse"===o.inputType;t.on("click",function(t,e,n){var e=r.updateAngle(e);e&&(e=r.convertToArcData(e),r.toggleShape&&r.toggleShape(this,e,n),a.data_onclick.bind(r.api)(e,this))}),s&&t.on("mouseover",function(t,e){o.transiting||(o.event=t,n(this,e=(e=r.updateAngle(e))?r.convertToArcData(e):null,e&&e.id||void 0),r.setOverOut(!0,e))}).on("mouseout",function(t,e){o.transiting||(o.event=t,e=(e=r.updateAngle(e))?r.convertToArcData(e):null,i(),r.setOverOut(!1,e))}).on("mousemove",function(t,e){e=r.updateAngle(e),e=e?r.convertToArcData(e):null;o.event=t,r.showTooltip([e],this)}),e&&r.hasArcType()&&!r.radars&&r.$el.svg.on("touchstart touchmove",function(t){var e;o.transiting||(t=(e=(t=(e=function(t){t=t.changedTouches[0];return(0,O.select)(P.elementFromPoint(t.clientX,t.clientY))}(t).datum())&&e.data&&e.data.id?r.updateAngle(e):null)?r.convertToArcData(t):null)&&e.id||void 0,r.callOverOutForTouch(e),N(t)?i():n(this,e,t))})},redrawArcText:function(t){var e,n=this,i=n.config,r=n.state,a=n.$el,o=a.main,s=a.arcs,a=n.hasType("gauge"),c=n.hasMultiArcGauge();a&&1===n.data.targets.length&&i.gauge_title||(e=o.selectAll("."+L.chartArc).select("text").style("opacity","0").attr("class",function(t){return n.isGaugeType(t.data)?L.gaugeValue:null}).call(n.textForArcLabel.bind(n)).attr("transform",n.transformForArcLabel.bind(n)).style("font-size",function(t){return n.isGaugeType(t.data)&&1===n.data.targets.length&&!c?Math.round(r.radius/5)+"px":null}).transition().duration(t).style("opacity",function(t){return n.isTargetToShow(t.data.id)&&n.isArcType(t.data)?"1":"0"}),c&&e.attr("dy","-.1em")),o.select("."+L.chartArcsTitle).style("opacity",n.hasType("donut")||a?"1":"0"),a&&((a=i.gauge_fullCircle)&&e&&e.attr("dy",""+(c?0:Math.round(r.radius/14))),i.gauge_label_show&&(s.select("."+L.chartArcsGaugeUnit).attr("dy",(a?1.5:.75)+"em").text(i.gauge_units),s.select("."+L.chartArcsGaugeMin).attr("dx",-1*(r.innerRadius+(r.radius-r.innerRadius)/(a?1:2))+"px").attr("dy","1.2em").text(n.textForGaugeMinMax(i.gauge_min,!1)),a||s.select("."+L.chartArcsGaugeMax).attr("dx",r.innerRadius+(r.radius-r.innerRadius)/2+"px").attr("dy","1.2em").text(n.textForGaugeMinMax(i.gauge_max,!0))))}},Ae={initArea:function(t){var e=this.config;t.insert("g","."+L[e.area_front?"circles":"lines"]).attr("class",this.getClass("areas",!0))},updateAreaGradient:function(){var s=this,c=s.config,u=s.state.datetimeId,l=s.$el.defs;s.data.targets.forEach(function(n){var i,t,e,r,a,o=u+"-areaGradient"+s.getTargetSelectorSuffix(n.id);s.isAreaType(n)&&l.select("#"+o).empty()&&(i=s.color(n),t=void 0===(e=(r=c.area_linearGradient).x)?[0,0]:e,e=void 0===(e=r.y)?[0,1]:e,r=void 0===(r=r.stops)?[[0,i,1],[1,i,0]]:r,a=l.append("linearGradient").attr("id",o).attr("x1",t[0]).attr("x2",t[1]).attr("y1",e[0]).attr("y2",e[1]),r.forEach(function(t){var e=R(t[1])?t[1].bind(s.api)(n.id):t[1];a.append("stop").attr("offset",t[0]).attr("stop-color",e||i).attr("stop-opacity",t[2])}))})},updateAreaColor:function(t){return this.config.area_linearGradient?"url(#"+this.state.datetimeId+"-areaGradient"+this.getTargetSelectorSuffix(t.id)+")":this.color(t)},updateArea:function(t,e){var n=this.config,i=this.state,r=this.$el,r=(e=void 0===e?!1:e)?r.subchart:r;n.area_linearGradient&&this.updateAreaGradient();n=r.main.selectAll("."+L.areas).selectAll("."+L.area).data(this.lineData.bind(this));n.exit().transition().duration(t).style("opacity","0").remove(),r.area=n.enter().append("path").attr("class",this.getClass("area",!0)).style("fill",this.updateAreaColor.bind(this)).style("opacity",function(){return i.orgAreaOpacity=(0,O.select)(this).style("opacity"),"0"}).merge(n),n.style("opacity",i.orgAreaOpacity)},redrawArea:function(t,e,n){var i=this,n=((n=void 0===n?!1:n)?this.$el.subchart:this.$el).area,r=i.state.orgAreaOpacity;return[(e?n.transition(H()):n).attr("d",t).style("fill",i.updateAreaColor.bind(i)).style("opacity",function(t){return(i.isAreaRangeType(t)?r/1.75:r)+""})]},generateDrawArea:function(t,n){function a(t){return(n?c.subxx:c.xx).call(c,t)}function o(t,e){return c.isGrouped(t.id)?i(t,e)[0][1]:r(t.id,n)(c.isAreaRangeType(t)?c.getRangedData(t,"high"):c.getShapeYMin(t.id))}function s(t,e){return c.isGrouped(t.id)?i(t,e)[1][1]:r(t.id,n)(c.isAreaRangeType(t)?c.getRangedData(t,"low"):t.value)}var c=this,u=c.config,l=u.line_connectNull,f=u.axis_rotated,i=c.generateGetAreaPoints(t,n),r=c.getYScaleById.bind(c);return function(t){var e,n=l?c.filterRemoveNull(t.values):t.values,i=0,r=0,r=c.isAreaType(t)?(e=(0,jt.area)(),e=f?e.y(a).x0(o).x1(s):e.x(a).y0(u.area_above?0:o).y1(s),l||(e=e.defined(function(t){return null!==c.getBaseValue(t)})),c.isStepType(t)&&(n=c.convertValuesToStep(n)),e.curve(c.getCurve(t))(n)):(n[0]&&(i=c.scale.x(n[0].x),r=c.getYScaleById(t.id)(n[0].value)),f?"M "+r+" "+i:"M "+i+" "+r);return r||"M 0 0"}},generateGetAreaPoints:function(t,a){var o=this,s=o.config,c=o.getShapeX(0,t,a),u=o.getShapeY(!!a),l=o.getShapeOffset(o.isAreaType,t,a),f=o.getYScaleById.bind(o);return function(t,e){var n=f.call(o,t.id,a)(o.getShapeYMin(t.id)),i=l(t,e)||n,r=c(t),e=u(t);return[[r,i],[r,(e=s.axis_rotated&&(0<t.value&&e<n||t.value<0&&n<e)?n:e)-(n-i)],[r,e-(n-i)],[r,i]]}}},Me={initBar:function(){var t=this.$el;t.bar=t.main.select("."+L.chart).insert("g",":first-child").attr("class",L.chartBars)},updateTargetsForBar:function(t){var e=this,n=e.config,i=e.$el,r=e.getChartClass("Bar"),a=e.getClass("bars",!0),o=e.classFocus.bind(e),s=n.interaction_enabled&&n.data_selection_isselectable;i.bar||e.initBar(),e.$el.main.select("."+L.chartBars).selectAll("."+L.chartBar).data(t).attr("class",function(t){return r(t)+o(t)}).enter().append("g").attr("class",r).style("opacity","0").style("pointer-events","none").append("g").attr("class",a).style("cursor",function(t){return s&&s.bind(e.api)(t)?"pointer":null})},updateBar:function(t,e){var n=(e=void 0===e?!1:e)?this.$el.subchart:this.$el,i=this.getClass("bar",!0),r=this.initialOpacity.bind(this),e=n.main.selectAll("."+L.bars).selectAll("."+L.bar).data(this.labelishData.bind(this));e.exit().transition().duration(t).style("opacity","0").remove(),n.bar=e.enter().append("path").attr("class",i).style("fill",this.color).merge(e).style("opacity",r)},redrawBar:function(t,e,n){n=((n=void 0===n?!1:n)?this.$el.subchart:this.$el).bar;return[(e?n.transition(H()):n).attr("d",t).style("fill",this.color).style("opacity","1")]},getBars:function(t,e){var n=this.$el.main,t=z(t)?"-"+t:"";return(e?n.selectAll("."+L.bars+this.getTargetSelectorSuffix(e)):n).selectAll("."+L.bar+t)},expandBars:function(t,e,n){n&&this.unexpandBars(),this.getBars(t,e).classed(L.EXPANDED,!0)},unexpandBars:function(t){this.getBars(t).classed(L.EXPANDED,!1)},generateDrawBar:function(t,e){var n=this.config,s=this.generateGetBarPoints(t,e),c=n.axis_rotated,u=n.data_groups.length,i=n.bar_radius,r=n.bar_radius_ratio,l=F(i)&&0<i?function(){return i}:F(r)?function(t){return t*r}:null;return function(t,e){var n=s(t,e),i=+c,r=+!i,a=t.value<0,o=["",""],e=0;l&&!u&&(t=n[2][t=c?r:i]-n[0][t],t="a"+(e=l(t))+","+e+" "+(a?"1 0 0":"0 0 1")+" ",o[+!c]=t+e+","+e,o[+c]=t+[-e,e][c?"sort":"reverse"](),a&&o.reverse());o=c?"H"+(n[1][i]-e)+" "+o[0]+"V"+(n[2][r]-e)+" "+o[1]+"H"+n[3][i]:"V"+(n[1][r]+(a?-e:e))+" "+o[0]+"H"+(n[2][i]-e)+" "+o[1]+"V"+n[3][r];return"M"+n[0][i]+","+n[0][r]+o+"z"}},generateGetBarPoints:function(t,o){var s=this,c=s.config,e=o?s.axis.subX:s.axis.x,n=s.getIndicesMax(t)+1,u=s.getBarW("bar",e,n),l=s.getShapeX(u,t,!!o),f=s.getShapeY(!!o),h=s.getShapeOffset(s.isBarType,t,!!o),d=s.getYScaleById.bind(s);return function(t,e){var n=d.call(s,t.id,o)(s.getShapeYMin(t.id)),i=h(t,e)||n,r=F(u)?u:u[t.id]||u._$width,a=l(t),e=f(t);c.axis_rotated&&(0<t.value&&e<n||t.value<0&&n<e)&&(e=n);r=a+r;return[[a,i],[a,e-=n-i],[r,e],[r,i]]}},isWithinBar:function(t){var e=D(this.state.event,t),n=C(t),i=n[0],r=n[1],a=Math.min(i.x,r.x),n=Math.min(i.y,r.y),i=this.config.bar_sensitivity,r=t.getBBox(),t=r.width,r=r.height;return a-i<e[0]&&e[0]<a+t+i&&n-i<e[1]&&e[1]<n+r+i}};function Se(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}var ke={initCandlestick:function(){var t=this.$el;t.candlestick=t.main.select("."+L.chart).append("g").attr("class",L.chartCandlesticks)},updateTargetsForCandlestick:function(t){var e=this.$el,n=this.getChartClass("Candlestick"),i=this.classFocus.bind(this);e.candlestick||this.initCandlestick(),this.$el.main.select("."+L.chartCandlesticks).selectAll("."+L.chartCandlestick).data(t).attr("class",function(t){return n(t)+i(t)}).enter().append("g").attr("class",n).style("pointer-events","none")},updateCandlestick:function(t,e){var n=this.$el,i=(e=void 0===e?!1:e)?n.subchart:n,r=this.getClass("candlestick",!0),e=this.initialOpacity.bind(this),n=i.main.selectAll("."+L.chartCandlestick).selectAll("."+L.candlestick).data(this.labelishData.bind(this));n.exit().transition().duration(t).style("opacity","0").remove();r=n.enter().filter(function(t){return t.value}).append("g").attr("class",r);r.append("line"),r.append("path"),i.candlestick||(i.candlestick={}),i.candlestick=n.merge(r).style("opacity",e)},generateDrawCandlestick:function(t,e){var c=this,n=c.config,u=c.generateGetCandlestickPoints(t,e),l=n.axis_rotated,f=n.candlestick_color_down;return function(t,e,n){var i=u(t,e),e=c.getCandlestickData(t),r=null==e?void 0:e._isUp,t=+l;n.classed&&n.classed(L[r?"valueUp":"valueDown"],!0);e=l?"H"+i[1][1]+" V"+i[1][0]+" H"+i[0][1]:"V"+i[1][1]+" H"+i[1][0]+" V"+i[0][1];n.select("path").attr("d","M"+i[0][t]+","+i[0][+!t]+e+"z").style("fill",function(t){return(r?c.color(t):$(f)?f[t.id]:f)||c.color(t)});var a,o=n.select("line"),s=l?{x1:i[2][1],x2:i[2][2],y1:i[2][0],y2:i[2][0]}:{x1:i[2][0],x2:i[2][0],y1:i[2][1],y2:i[2][2]};for(a in s)o.attr(a,s[a])}},generateGetCandlestickPoints:function(t,c){var u=this,l=u.config,e=(c=void 0===c?!1:c)?u.axis.subX:u.axis.x,n=u.getIndicesMax(t)+1,f=u.getBarW("candlestick",e,n),h=u.getShapeX(f,t,!!c),d=u.getShapeY(!!c),g=u.getShapeOffset(u.isBarType,t,!!c),p=u.getYScaleById.bind(u);return function(t,e){var n,i=p.call(u,t.id,c)(u.getShapeYMin(t.id)),r=g(t,e)||i,a=F(f)?f:f[t.id]||f._$width,o=u.getCandlestickData(t),s=o?((n={start:h(t),end:0}).end=n.start+a,e={start:d(o.open),end:d(o.close)},s={x:n.start+a/2,high:d(o.high),low:d(o.low)},l.axis_rotated&&(0<t.value&&e.start<i||t.value<0&&i<e.start)&&(e.start=i),e.start-=i-r,[[n.start,e.start],[n.end,e.end],[s.x,s.low,s.high]]):[[0,0],[0,0],[0,0,0]];return s}},redrawCandlestick:function(i,r,t){var t=((t=void 0===t?!1:t)?this.$el.subchart:this.$el).candlestick,a=H(!0);return[t.each(function(t,e){var n=r?(0,O.select)(this).transition(a):(0,O.select)(this);i(t,e,n)}).style("opacity","1")]},getCandlestickData:function(t){var e,n=t.value;return B(n)?!(e={open:n[0],high:n[1],low:n[2],close:n[3]})!==(t=void 0!==(t=n[4])&&t)&&(e.volume=t):$(n)&&(e=function(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?Se(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}({},n)),e&&(e._isUp=e.close>=e.open),e||null}},Ee={initGauge:function(){function t(t){i.append("text").attr("class",t).style("text-anchor","middle").style("pointer-events","none")}var e,n=this.config,i=this.$el.arcs;this.hasType("gauge")&&(e=this.hasMultiArcGauge(),i.append(e?"g":"path").attr("class",L.chartArcsBackground).style("fill",!e&&n.gauge_background||null),n.gauge_units&&t(L.chartArcsGaugeUnit),n.gauge_label_show&&(t(L.chartArcsGaugeMin),n.gauge_fullCircle||t(L.chartArcsGaugeMax)))},updateGaugeMax:function(){var t=this.config,e=this.state,e=this.hasMultiArcGauge()?this.getMinMaxData().max[0].value:this.getTotalDataSum(e.rendered);e>t.gauge_max&&(t.gauge_max=e)},redrawMultiArcGauge:function(){var c=this,t=c.config,u=c.state,e=c.$el,l=c.state.hiddenTargetIds,e=e.main.selectAll("."+L.arcs).selectAll("."+L.arcLabelLine).data(c.arcData.bind(c));e.enter().append("rect").attr("class",function(t){return L.arcLabelLine+" "+L.target+" "+L.target+"-"+t.data.id}).merge(e).style("fill",function(t){return c.levelColor?c.levelColor(t.data.values[0].value):c.color(t.data)}).style("display",t.gauge_label_show?"":"none").each(function(t){var e,n,i,r=0,a=0,o=0,s="";l.indexOf(t.data.id)<0&&(i=c.updateAngle(t),e=u.gaugeArcWidth/c.filterTargetsToShow(c.data.targets).length*(i.index+1),i=(n=i.endAngle-Math.PI/2)-(0==(t=u.radius-e)?0:1/t),r=u.radiusExpanded-u.radius+e,a=Math.cos(i)*t,o=Math.sin(i)*t,s="rotate("+180*n/Math.PI+", "+a+", "+o+")"),(0,O.select)(this).attr("x",a).attr("y",o).attr("width",r).attr("height",2).attr("transform",s).style("stroke-dasharray","0, "+(r+2)+", 0")})},textForGaugeMinMax:function(t,e){var n=this.config.gauge_label_extents;return R(n)?n.bind(this.api)(t,e):t},getGaugeLabelHeight:function(){var t=this.config;return this.config.gauge_label_show&&!t.gauge_fullCircle?20:0},getPaddingBottomForGauge:function(){return this.getGaugeLabelHeight()*(this.config.gauge_label_show?2:2.5)}},Ce={initBubble:function(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle",t.point_sensitivity=25)},getBaseLength:function(){var t=this.state,e=t.width,n=t.height,i=lt,t=this.cache.get(i);return t||this.cache.add(i,t=et("min",[e,n])),t},getBubbleR:function(t){var e=this,n=e.config.bubble_maxR;R(n)?n=n.bind(e.api)(t):F(n)||(n=e.getBaseLength()/(2*e.getMaxDataCount())+12);var i=et("max",e.getMinMaxData().max.map(function(t){return e.isBubbleZType(t)?e.getBubbleZData(t.value,"y"):$(t.value)?t.value.mid:t.value})),n=n*n*Math.PI,i=(e.isBubbleZType(t)?e.getBubbleZData(t.value,"z"):t.value)*(n/i);return Math.sqrt(i/Math.PI)},getBubbleZData:function(t,e){return $(t)?t[e]:t["y"===e?0:1]}},De={initLine:function(){var t=this.$el;t.line=t.main.select("."+L.chart).append("g").attr("class",L.chartLines)},updateTargetsForLine:function(t){var e=this,n=e.$el,i=n.area,r=n.line,a=n.main,o=e.getChartClass("Line"),n=e.getClass("lines",!0),s=e.classFocus.bind(e);r||e.initLine();r=t.filter(function(t){return!(e.isScatterType(t)||e.isBubbleType(t))}),t=a.select("."+L.chartLines).selectAll("."+L.chartLine).data(r).attr("class",function(t){return o(t)+s(t)}),a=t.enter().append("g").attr("class",o).style("opacity","0").style("pointer-events","none");a.append("g").attr("class",n),e.hasTypeOf("Area")&&e.initArea(!i&&a.empty()?t:a),e.updateTargetForCircle(r,a)},updateLine:function(t,e){var n=this,i=n.format.extraLineClasses,r=n.$el,e=(e=void 0===e?!1:e)?r.subchart:r,r=e.main.selectAll("."+L.lines).selectAll("."+L.line).data(n.lineData.bind(n));r.exit().transition().duration(t).style("opacity","0").remove(),e.line=r.enter().append("path").attr("class",function(t){return n.getClass("line",!0)(t)+" "+(i(t)||"")}).style("stroke",n.color).merge(r).style("opacity",n.initialOpacity.bind(n)).style("shape-rendering",function(t){return n.isStepType(t)?"crispEdges":""}).attr("transform",null)},redrawLine:function(t,e,n){n=((n=void 0===n?!1:n)?this.$el.subchart:this.$el).line;return[(e?n.transition(H()):n).attr("d",t).style("stroke",this.color).style("opacity","1")]},getCurve:function(e){var n=this;return n.config.axis_rotated&&n.isStepType(e)?function(t){t=n.getInterpolate(e)(t);return t.orgPoint=t.point,t.pointRotated=function(t,e){1===this._point&&(this._point=2);var n=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,n),this._context.lineTo(t,n),this._x=t,this._y=e},t.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},t}:n.getInterpolate(e)},generateDrawLine:function(t,o){function e(t){return(o?s.subxx:s.xx).call(s,t)}var s=this,c=s.config,n=s.scale,u=c.line_connectNull,l=c.axis_rotated,i=s.generateGetLinePoints(t,o),f=s.getYScaleById.bind(s),t=function(t,e){return s.isGrouped(t.id)?i(t,e)[0][1]:f(t.id,o)(s.getBaseValue(t))},h=(0,jt.line)(),h=l?h.x(t).y(e):h.x(e).y(t);u||(h=h.defined(function(t){return null!==s.getBaseValue(t)}));var d=o?n.subX:n.x;return function(t){var e,n=f(t.id,o),i=u?s.filterRemoveNull(t.values):t.values,r=0,a=0;return(s.isLineType(t)?(e=c.data_regions[t.id])?s.lineWithRegions(i,d,n,e):(s.isStepType(t)&&(i=s.convertValuesToStep(i)),h.curve(s.getCurve(t))(i)):(i[0]&&(r=d(i[0].x),a=n(i[0].value)),l?"M "+a+" "+r:"M "+r+" "+a))||"M 0 0"}},lineWithRegions:function(t,a,o,e){var n=this,s=n.config.axis_rotated,i=n.axis.isTimeSeries(),r=n.axis.isCategorized()?.5:0,c=[];if(I(e))for(var u,l=function(t,e){return N(t)?e:i?at.call(n,t):t},f=0;u=e[f];f++){var h=l(u.start,t[0].x),d=l(u.end,t[t.length-1].x),g=u.style||{dasharray:"2 2"};c[f]={start:h,end:d,style:g}}for(var p,v=s?function(t){return o(t.value)}:function(t){return a(t.x)},x=s?function(t){return a(t.x)}:function(t){return o(t.value)},y=function(t){return"M"+t[0][0]+","+t[0][1]+"L"+t[1][0]+","+t[1][1]},_=i?function(t,e,n,i){var r=t.x.getTime(),e=e.x-t.x,t=new Date(r+e*n),i=new Date(r+e*(n+i)),n=s?[[o(k(n)),a(t)],[o(k(n+M)),a(i)]]:[[a(t),o(k(n))],[a(i),o(k(n+M))]];return y(n)}:function(t,e,n,i){i=s?[[o(k(n),!0),a(S(n))],[o(k(n+i),!0),a(S(n+i))]]:[[a(S(n),!0),o(k(n))],[a(S(n+i),!0),o(k(n+i))]];return y(i)},m={x:n.axis.getAxisType("x"),y:n.axis.getAxisType("y")},b="",w=0;p=t[w];w++){var T=t[w-1],A=T&&z(T.value),g=function(t,e){for(var n,i=0;n=e[i];i++)if(n.start<t&&t<=n.end)return n.style;return!1}(p.x,c);if(z(p.value))if(!N(c)&&g&&A){if(A){try{g=g.dasharray.split(" ")}catch(t){g="2 2".split(" ")}for(var M,S=$t(m.x,T.x+r,p.x+r),k=$t(m.y,T.value,p.value),E=a(p.x)-a(T.x),C=o(p.value)-o(T.value),C=Math.sqrt(Math.pow(E,2)+Math.pow(C,2)),D=(M=g[0]/C)*g[1],R=M;R<=1;R+=D)b+=_(T,p,R,M),1<=R+D&&(b+=_(T,p,1,0))}}else b+=(w&&A?"L":"M")+v(p)+","+x(p)}return b},isWithinStep:function(t,e){return Math.abs(e-D(this.state.event,t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return!0===e||B(e)&&-1!==e.indexOf(t.id)}},Re={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){t=t||this.config.point_type;return b(t)&&R(t.create)&&R(t.update)},initialOpacityForCircle:function(t){var e=this.config,n=this.state.withoutFadeIn,e=e.point_opacity;return e=N(e)?null!==this.getBaseValue(t)&&n[t.id]?this.opacityForCircle(t):"0":e},opacityForCircle:function(t){var e=this.config,n=e.point_opacity;return N(n)&&(n=e.point_show&&!e.point_focus_only?"1":"0",n=z(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":n:"0"),n},initCircle:function(){var t=this.$el.main;this.point=this.generatePoint(),(this.hasType("bubble")||this.hasType("scatter"))&&t.select("."+L.chartCircles).empty()&&t.select("."+L.chart).append("g").attr("class",L.chartCircles)},updateTargetForCircle:function(t,e){var n=this,i=this,r=i.config,a=i.data,o=i.$el,s=r.interaction_enabled&&r.data_selection_enabled,c=s&&r.data_selection_isselectable,u=i.getClass("circles",!0);r.point_show&&(o.circle||i.initCircle(),e=e,(t=t)||(t=a.targets.filter(function(t){return n.isScatterType(t)||n.isBubbleType(t)}),(a=o.main.select("."+L.chartCircles).style("pointer-events","none").selectAll("."+L.circles).data(t).attr("class",u)).exit().remove(),e=a.enter()),s&&e.append("g").attr("class",function(t){return i.generateClass(L.selectedCircles,t.id)}),e.append("g").attr("class",u).style("cursor",function(t){return c&&c(t)?"pointer":null}),s&&t.forEach(function(e){o.main.selectAll("."+L.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll(""+L.selectedCircle).each(function(t){t.value=e.values[t.index].value})}))},updateCircle:function(t){var e=this,n=e.config,i=e.state,r=e.$el,a=n.point_focus_only,r=(t=void 0===t?!1:t)?r.subchart:r;n.point_show&&!i.toggling&&((i=r.main.selectAll("."+L.circles).selectAll("."+L.circle).data(function(t){return e.isLineType(t)&&e.shouldDrawPointsForLine(t)||e.isBubbleType(t)||e.isRadarType(t)||e.isScatterType(t)?a?[t.values[0]]:t.values:[]})).exit().remove(),i.enter().filter(Boolean).append(e.point("create",this,e.pointR.bind(e),e.color)),r.circle=r.main.selectAll("."+L.circles+" ."+L.circle).style("stroke",e.color).style("opacity",e.initialOpacityForCircle.bind(e)))},redrawCircle:function(t,e,n,i,r){var a=this.state.rendered,o=this.$el,r=(r=void 0===r?!1:r)?o.subchart:o,o=r.main.selectAll("."+L.selectedCircle);if(!this.config.point_show)return[];var s=this.point("update",this,t,e,this.color,n,i,o),i=this.isCirclePoint()?"c":"",c=H(),u=this.opacityForCircle.bind(this),l=[];return r.circle.each(function(t){t=s.bind(this)(t),t=(n||!a?t.transition(c):t).style("opacity",u);l.push(t)}),[l,(n?o.transition():o).attr(i+"x",t).attr(i+"y",e)]},showCircleFocus:function(n){var a,o=this,t=o.config,e=o.state,i=e.hasRadar,r=e.resizing,s=e.toggling,c=e.transiting,e=o.$el.circle;!1===c&&t.point_focus_only&&e&&(t=(i?o.radarCircleX:o.circleX).bind(o),i=(i?o.radarCircleY:o.circleY).bind(o),s=s||N(n),a=o.point("update",o,t,i,o.color,!r&&s),(e=n?e.filter(function(e){var t=n.filter(function(t){return t.id===e.id});return!!t.length&&(0,O.select)(this).datum(t[0])}):e).attr("class",this.updatePointClass.bind(this)).style("opacity","1").each(function(t){var e=t.id,n=t.index,i=t.value,r="hidden";z(i)&&(a.bind(this)(t),o.expandCircles(n,e),r=""),this.style.visibility=r}))},hideCircleFocus:function(){var t=this.config,e=this.$el.circle;t.point_focus_only&&e&&(this.unexpandCircles(),e.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(i){void 0===i&&(i=!1);var r=this,a=r.generateGetLinePoints(r.getShapeIndices(r.isLineType),i);return function(t,e){var n=t.id;return r.isGrouped(n)?a(t,e)[0][1]:r.getYScaleById(n,i)(r.getBaseValue(t))}},getCircles:function(t,e){t=z(t)?"-"+t:"";return(e?this.$el.main.selectAll("."+L.circles+this.getTargetSelectorSuffix(e)):this.$el.main).selectAll("."+L.circle+t)},expandCircles:function(t,e,n){var i=this.pointExpandedR.bind(this);n&&this.unexpandCircles();var e=this.getCircles(t,e).classed(L.EXPANDED,!0),r=i(e)/this.config.point_r,a=1-r;this.isCirclePoint()?e.attr("r",i):e.each(function(){var t,e,n=(0,O.select)(this);"circle"===this.tagName?n.attr("r",i):(t=(e=this.getBBox()).width,e=e.height,t=a*(+n.attr("x")+t/2),e=a*(+n.attr("y")+e/2),n.attr("transform","translate("+t+" "+e+") scale("+r+")"))})},unexpandCircles:function(t){var e=this.pointR.bind(this),t=this.getCircles(t).filter(function(){return(0,O.select)(this).classed(L.EXPANDED)}).classed(L.EXPANDED,!1);t.attr("r",e),this.isCirclePoint()||t.attr("transform","scale("+e(t)/this.config.point_r+")")},pointR:function(t){var e=this.config.point_r,n=e;return this.isBubbleType(t)?n=this.getBubbleR(t):R(e)&&(n=e.bind(this.api)(t)),n},pointExpandedR:function(t){var e=this.config,n=this.isBubbleType(t)?1.15:1.75;return e.point_focus_expand_enabled?e.point_focus_expand_r||this.pointR(t)*n:this.pointR(t)},pointSelectR:function(t){var e=this.config.point_select_r;return R(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function(t,e){var n=D(this.state.event,t),i=(0,O.select)(t),r=this.isCirclePoint(t)?"c":"",a=+i.attr(r+"x"),r=+i.attr(r+"y");return a||r||1!==t.nodeType||(a=(t=G(t)).x,r=t.y),Math.sqrt(Math.pow(a-n[0],2)+Math.pow(r-n[1],2))<(e||this.config.point_sensitivity)},insertPointInfoDefs:function(t,e){function n(t,e){for(var n,i=t.attributes,r=0;n=i[r];r++)n=n.name,e.setAttribute(n,t.getAttribute(n))}var i,r=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,t=P.createElementNS(O.namespaces.svg,r.nodeName.toLowerCase());t.id=e,t.style.fill="inherit",t.style.stroke="inherit",n(r,t),r.childNodes&&r.childNodes.length&&(i=(0,O.select)(t),"innerHTML"in t?i.html(r.innerHTML):W(r.childNodes).forEach(function(t){n(t,i.append(t.tagName).node())})),this.$el.defs.node().appendChild(t)},pointFromDefs:function(t){return this.$el.defs.select("#"+t)},updatePointClass:function(t){var e=this,n=e.$el.circle,i=!1;return i=$(t)||n?!0===t?n.each(function(t){t=e.getClass("circle",!0)(t);-1<this.getAttribute("class").indexOf(L.EXPANDED)&&(t+=" "+L.EXPANDED),this.setAttribute("class",t)}):e.getClass("circle",!0)(t):i},generateGetLinePoints:function(t,a){var o=this,s=o.config,c=o.getShapeX(0,t,a),u=o.getShapeY(a),l=o.getShapeOffset(o.isLineType,t,a),f=o.getYScaleById.bind(o);return function(t,e){var n=f.call(o,t.id,a)(o.getShapeYMin(t.id)),i=l(t,e)||n,r=c(t),e=u(t),i=[r,(e=s.axis_rotated&&(0<t.value&&e<n||t.value<0&&n<e)?n:e)-(n-i)];return[i,i,i,i]}},generatePoint:function(){var o=this,t=o.config,s=o.state.datetimeId,c=[],u=X(t.point_pattern)?t.point_pattern:[t.point_type];return function(i,r){for(var t=arguments.length,a=Array(2<t?t-2:0),e=2;e<t;e++)a[e-2]=arguments[e];return function(t){var e=o.getTargetSelectorSuffix(t.id||t.data&&t.data.id||t),n=(0,O.select)(this);c.indexOf(e)<0&&c.push(e);t=u[c.indexOf(e)%u.length];if(o.hasValidPointType(t))t=o[t];else if(!o.hasValidPointDrawMethods(t)){e=s+"-point"+e;if(o.pointFromDefs(e).size()<1&&o.insertPointInfoDefs(t,e),"create"===i)return o.custom.create.bind(r).apply(void 0,[n,e].concat(a));if("update"===i)return o.custom.update.bind(r).apply(void 0,[n].concat(a))}return t[i].bind(r).apply(void 0,[n].concat(a))}}},custom:{create:function(t,e,n,i){return t.append("use").attr("xlink:href","#"+e).attr("class",this.updatePointClass.bind(this)).style("fill",i).node()},update:function(t,e,n,i,r,a,o){var s=t.node().getBBox(),c=s.width,u=s.height,s=function(t){return e(t)-c/2},t=t;return r&&(r=H(),a&&t.attr("x",s),t=t.transition(r),o&&o.transition(H())),t.attr("x",s).attr("y",function(t){return n(t)-u/2}).style("fill",i)}},circle:{create:function(t,e,n){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",n).node()},update:function(t,e,n,i,r,a,o){return this.hasType("bubble")&&t.attr("r",this.pointR.bind(this)),r&&(r=H(),a&&t.attr("cx",e),t.attr("cx")&&(t=t.transition(r)),o&&o.transition(H())),t.attr("cx",e).attr("cy",n).style("fill",i)}},rectangle:{create:function(t,e,n){function i(t){return 2*e(t)}return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",i).attr("height",i).style("fill",n).node()},update:function(t,e,n,i,r,a,o){function s(t){return e(t)-c}var c=this.config.point_r,t=t;return r&&(r=H(),a&&t.attr("x",s),t=t.transition(r),o&&o.transition(H())),t.attr("x",s).attr("y",function(t){return n(t)-c}).style("fill",i)}}};var Oe=pt,Le={initRadar:function(){var t=this.config,e=this.state.current,n=this.$el;this.hasType("radar")&&(n.radar=n.main.select("."+L.chart).append("g").attr("class",L.chartRadars),n.radar.levels=n.radar.append("g").attr("class",L.levels),n.radar.axes=n.radar.append("g").attr("class",L.axis),n.radar.shapes=n.radar.append("g").attr("class",L.shapes),e.dataMax=t.radar_axis_max||this.getMinMaxData().max[0].value)},getRadarSize:function(){var t=this.config,e=this.state,n=e.arcWidth,e=e.arcHeight,t=t.axis_x_categories.length<4?-20:10,t=(Math.min(n,e)-t)/2;return[t,t]},updateTargetsForRadar:function(t){var e=this.config;w(e.axis_x_categories)&&(e.axis_x_categories=nt(0,et("max",t.map(function(t){return t.values.length})))),this.generateRadarPoints()},getRadarPosition:function(s,c,u,l){var f=this.config,t=this.getRadarSize(),h=t[0],d=t[1],g=f.axis_x_categories.length,p=f.radar_direction_clockwise,t=W(s).map(function(t){return e=p,n=t,i=g,r=c,a=I(u)?u:"x"===s?h:d,o=F(l)?l:f.radar_size_ratio,t=2*Math.PI,a*(1-o*("x"===n?Math.sin:Math.cos)((e&&0<r?i-r:r)*t/i));var e,n,i,r,a,o});return 1===t.length?t[0]:t},generateRadarPoints:function(){var n=this,t=n.data.targets,e=n.getRadarSize(),i=e[0],r=e[1],a=n.cache.get(Oe)||{},e=a._size;e&&(e.width===i||e.height===r)||(t.forEach(function(t){a[t.id]=t.values.map(function(t,e){return n.getRadarPosition(["x","y"],e,void 0,n.getRatio("radar",t))})}),a._size={width:i,height:r},n.cache.add(Oe,a))},redrawRadar:function(t){var e=this.$el,n=e.radar,i=e.main,e=this.getTranslate("radar");e&&(n.attr("transform",e),i.select("."+L.chartTexts).attr("transform",e),this.generateRadarPoints(),this.updateRadarLevel(),this.updateRadarAxes(),this.updateRadarShape(t))},generateGetRadarPoints:function(){var n=this.cache.get(Oe);return function(t,e){e=n[t.id][e];return[e,e,e,e]}},updateRadarLevel:function(){var n=this,t=n.config,e=n.state,i=n.$el.radar,r=n.getRadarSize(),a=r[0],o=r[1],s=t.radar_level_depth,c=t.axis_x_categories.length,u=t.radar_level_text_show,l=i.levels,f=nt(0,s),h=t.radar_size_ratio*Math.min(a,o),d=f.map(function(t){return(t+1)/s*h}),g=(t.radar_level_text_format||function(){}).bind(n.api),p=f.map(function(t){var e=d[t];return nt(0,c).map(function(t){return n.getRadarPosition(["x","y"],t,e,1).join(",")}).join(" ")}),r=l.selectAll("."+L.level).data(f);r.exit().remove();i=r.enter().append("g").attr("class",function(t,e){return L.level+" "+L.level+"-"+e});i.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),u&&(l.select("text").empty()&&l.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return g(0)}),i.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(t){return g(e.current.dataMax/f.length*(t+1))})),i.merge(r).attr("transform",function(t){return"translate("+(a-d[t])+", "+(o-d[t])+")"}).selectAll("polygon").attr("points",function(t){return p[t]}),u&&l.selectAll("text").attr("x",function(t){return N(t)?a:p[t].split(",")[0]}).attr("y",function(t){return N(t)?o:0})},updateRadarAxes:function(){var n=this,t=n.config,e=n.$el.radar,i=n.getRadarSize(),r=i[0],a=i[1],i=t.axis_x_categories,e=e.axes.selectAll("g").data(i);e.exit().remove();var o,s,i=e.enter().append("g").attr("class",function(t,e){return L.axis+"-"+e});t.radar_axis_line_show&&i.append("line"),t.radar_axis_text_show&&i.append("text"),e=i.merge(e),t.radar_axis_line_show&&e.select("line").attr("x1",r).attr("y1",a).attr("x2",function(t,e){return n.getRadarPosition("x",e)}).attr("y2",function(t,e){return n.getRadarPosition("y",e)}),t.radar_axis_text_show&&(t=(i=t.radar_axis_text_position).x,o=void 0===t?0:t,i=i.y,s=void 0===i?0:i,e.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(t){t.each(function(t){E((0,O.select)(this),t+"",[-.6,1.2])})}).datum(function(t,e){return{index:e}}).attr("transform",function(t){N(this.width)&&(this.width=this.getBoundingClientRect().width/2);var e=n.getRadarPosition("x",t.index,void 0,1),t=Math.round(n.getRadarPosition("y",t.index,void 0,1));return r<e?e+=this.width+o:Math.round(e)<r&&(e-=this.width+o),a<t?(t/2===a&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),t+=s):t<a&&(t-=s),"translate("+e+" "+t+")"})),n.bindEvent()},bindEvent:function(){var n,i,r=this,t=r.config,e=r.state,a=r.$el,o=a.radar,s=a.svg,c=t.point_focus_only,a=e.inputType,u=e.transiting;t.interaction_enabled&&(n="mouse"===a,i=function(t){t=t.target;/tspan/i.test(t.tagName)&&(t=t.parentNode);t=(0,O.select)(t).datum();return t&&1===Object.keys(t).length?t.index:void 0},a=function(t){var e=i(t),t=N(e);(n||t)&&(r.hideTooltip(),c?r.hideCircleFocus():r.unexpandCircles(),n?r.setOverOut(!1,e):t&&r.callOverOutForTouch())},o.axes.selectAll("text").on(n?"mouseover ":"touchstart",function(t){u||(e.event=t,t=i(t),r.selectRectForSingle(s.node(),null,t),n?r.setOverOut(!0,t):r.callOverOutForTouch(t))}).on("mouseout",n?a:null),n||s.on("touchstart",a))},updateRadarShape:function(t){var e=this,n=e.data.targets.filter(function(t){return e.isRadarType(t)}),i=e.cache.get(Oe),r=e.$el.radar.shapes.selectAll("polygon").data(n),a=r.enter().append("g").attr("class",e.getChartClass("Radar"));r.exit().transition().duration(t).remove(),a.append("polygon").merge(r).style("fill",e.color).style("stroke",e.color).attr("points",function(t){return i[t.id].join(" ")}),e.updateTargetForCircle(n,a)},radarCircleX:function(t){return this.cache.get(Oe)[t.id][t.index][0]},radarCircleY:function(t){return this.cache.get(Oe)[t.id][t.index][1]}},Pe={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},ze={area_above:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},Ne={bar_label_threshold:0,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},Ie={bubble_maxR:35,bubble_zerobased:!1},Fe={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},Xe={line_connectNull:!1,line_step_type:"step",line_zerobased:!1,line_classes:void 0,line_point:!0},Be={scatter_zerobased:!1},$e={spline_interpolation_type:"cardinal"},Ye={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},je={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},Ge={pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},He={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return t%1==0?t:t.toFixed(2)},radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1};function Ue(t,e){V(Jt.prototype,me.concat(t)),V(ne.prototype,_e),ut.setOptions(be.concat(e||[]))}function Ve(t,e){Ue([Re,De].concat(t||[])),ut.setOptions([Pe,Xe].concat(e||[]))}function qe(t,e){V(Jt.prototype,[Te].concat(t||[])),ut.setOptions(e)}var We=function(){return Ve(Ae,[ze]),(We=function(){return Lt.AREA})()},Ze=function(){return Ve(Ae,[ze]),(Ze=function(){return Lt.AREA_LINE_RANGE})()},Ke=function(){return Ve(Ae,[ze,$e]),(Ke=function(){return Lt.AREA_SPLINE})()},Je=function(){return Ve(Ae,[ze,$e]),(Je=function(){return Lt.AREA_SPLINE_RANGE})()},Qe=function(){return Ve(Ae,[ze]),(Qe=function(){return Lt.AREA_STEP})()},tn=function(){return Ve(),(tn=function(){return Lt.LINE})()},en=function(){return Ve(void 0,[$e]),(en=function(){return Lt.SPLINE})()},nn=function(){return Ve(),(nn=function(){return Lt.STEP})()},rn=function(){return qe(void 0,[Ye]),(rn=function(){return Lt.DONUT})()},an=function(){return qe([Ee],[je]),(an=function(){return Lt.GAUGE})()},on=function(){return qe(void 0,[Ge]),(on=function(){return Lt.PIE})()},sn=function(){return qe([Re,Le],[Pe,He]),(sn=function(){return Lt.RADAR})()},cn=function(){return Ue([Me],Ne),(cn=function(){return Lt.BAR})()},un=function(){return Ue([Re,Ce],[Ie,Pe]),(un=function(){return Lt.BUBBLE})()},ln=function(){return Ue([ke],[Fe]),(ln=function(){return Lt.CANDLESTICK})()},fn=function(){return Ue([Re],[Pe,Be]),(fn=function(){return Lt.SCATTER})()},hn={selected:function(t){var e=this.internal,n=[];return e.$el.main.selectAll("."+(L.shapes+e.getTargetSelectorSuffix(t))).selectAll("."+L.shape).filter(function(){return(0,O.select)(this).classed(L.SELECTED)}).each(function(t){return n.push(t)}),n},select:function(s,c,u){var l=this.internal,f=l.config,t=l.$el;f.data_selection_enabled&&t.main.selectAll("."+L.shapes).selectAll("."+L.shape).each(function(t,e){var n=(0,O.select)(this),i=(t.data||t).id,r=l.getToggle(this,t).bind(l),a=f.data_selection_grouped||!s||0<=s.indexOf(i),o=!c||0<=c.indexOf(e),i=n.classed(L.SELECTED);n.classed(L.line)||n.classed(L.area)||(a&&o?f.data_selection_isselectable.bind(l.api)(t)&&!i&&r(!0,n.classed(L.SELECTED,!0),t,e):I(u)&&u&&i&&r(!1,n.classed(L.SELECTED,!1),t,e))})},unselect:function(s,c){var u=this.internal,l=u.config,t=u.$el;l.data_selection_enabled&&t.main.selectAll("."+L.shapes).selectAll("."+L.shape).each(function(t,e){var n=(0,O.select)(this),i=(t.data||t).id,r=u.getToggle(this,t).bind(u),a=l.data_selection_grouped||!s||0<=s.indexOf(i),o=!c||0<=c.indexOf(e),i=n.classed(L.SELECTED);n.classed(L.line)||n.classed(L.area)||a&&o&&l.data_selection_isselectable.bind(u.api)(t)&&i&&r(!1,n.classed(L.SELECTED,!1),t,e)})}},dn={subchart:{show:function(){var t=this.internal,e=t.$el.subchart,n=t.config,i=n.subchart_show;i||(n.subchart_show=!i,e.main||t.initSubchart(),i=e.main.selectAll("."+L.target),t.data.targets.length!==i.size()&&(t.updateSizes(),t.updateTargetsForSubchart(t.data.targets),i=e.main.selectAll("."+L.target)),i.style("opacity","1"),e.main.style("display",null),this.flush())},hide:function(){var t=this.internal,e=t.$el.subchart,t=t.config;t.subchart_show&&"none"!==e.main.style("display")&&(t.subchart_show=!1,e.main.style("display","none"),this.flush())},toggle:function(){var t=this.internal.config;this.subchart[t.subchart_show?"hide":"show"]()}}},gn=Dn(14);pt=function(t){var e,n,i,r,a=this.internal,o=a.config,s=a.scale,c=t;return o.zoom_enabled&&c?(a.axis.isTimeSeries()&&(c=c.map(function(t){return at.bind(a)(t)})),n=c,t=a.getZoomDomain(),i=t[0],r=t[1],n.every(function(t,e){return 0===e?i<=t:t<=r})&&(a.api.tooltip.hide(),e=o.subchart_show?(e=s.zoom||s.x,a.brush.getSelection().call(a.brush.move,[e(c[0]),e(c[1])]),c):(s.x.domain(c),s.zoom=s.x,a.axis.x.scale(s.zoom),s.zoom.orgDomain()),a.redraw({withTransition:!0,withY:o.zoom_rescale,withDimension:!1}),a.setZoomResetButton(),S(o.zoom_onzoom,a.api,e))):e=s.zoom?s.zoom.domain():s.x.orgDomain(),e};V(pt,{enable:function(t){var e=this.internal,n=e.config;/^(drag|wheel)$/.test(t)&&(n.zoom_type=t),n.zoom_enabled=!!t,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,n=e.config,e=e.org.xDomain;return 0!==t&&!t||(n.zoom_x_max=et("max",[e[1],t])),n.zoom_x_max},min:function(t){var e=this.internal,n=e.config,e=e.org.xDomain;return 0!==t&&!t||(n.zoom_x_min=et("min",[e[0],t])),n.zoom_x_min},range:function(t){var e,n=this.zoom;return $(t)&&(e=t.min,t=t.max,I(e)&&n.min(e),I(t)&&n.max(t)),{min:n.min(),max:n.max()}}});var pn={zoom:pt,unzoom:function(){var t,e=this.internal,n=e.config;e.scale.zoom&&(n.subchart_show?e.brush.getSelection().call(e.brush.move,null):e.zoom.updateTransformScale(gn.zoomIdentity),e.updateZoom(!0),e.zoom.resetBtn&&e.zoom.resetBtn.style("display","none"),t=e.$el.main.select("."+L.eventRects),(0,gn.zoomTransform)(t.node())!==gn.zoomIdentity&&e.zoom.transform(t,gn.zoomIdentity),e.redraw({withTransition:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withY:n.zoom_rescale}))}},vn=Dn(13);function xn(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function yn(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?xn(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var _n=yn(yn({},{drag:function(t){var e,n,f,h,d,g,p=this,i=p.config,r=p.state,a=p.$el.main,o=i.data_selection_grouped,s=i.interaction_enabled&&i.data_selection_isselectable;p.hasArcType()||!i.data_selection_enabled||i.zoom_enabled&&!p.zoom.altDomain||!i.data_selection_multiple||(e=(n=r.dragStart||[0,0])[0],i=n[1],n=t[0],t=t[1],f=Math.min(e,n),h=Math.max(e,n),d=o?r.margin.top:Math.min(i,t),g=o?r.height:Math.max(i,t),a.select("."+L.dragarea).attr("x",f).attr("y",d).attr("width",h-f).attr("height",g-d),a.selectAll("."+L.shapes).selectAll("."+L.shape).filter(function(t){return s&&s.bind(p.api)(t)}).each(function(t,e){var n,i=(0,O.select)(this),r=i.classed(L.SELECTED),a=i.classed(L.INCLUDED),o=!1;if(i.classed(L.circle))var s=+i.attr("cx"),c=+i.attr("cy"),u=p.togglePoint,o=f<s&&s<h&&d<c&&c<g;else{if(!i.classed(L.bar))return;var s=(s=(l=(n=this).getBoundingClientRect()).width,l=l.height,{x:(n=C(n))[0].x,y:Math.min(n[0].y,n[1].y),width:s,height:l}),l=s.x,c=s.y;u=p.togglePath,o=!(h<l||l+s.width<f||g<c||c+s.height<d)}o^a&&(i.classed(L.INCLUDED,!a),i.classed(L.SELECTED,!r),u.call(p,!r,i,t,e))}))},dragstart:function(t){var e=this.config,n=this.state,i=this.$el.main;this.hasArcType()||!e.data_selection_enabled||(n.dragStart=t,i.select("."+L.chart).append("rect").attr("class",L.dragarea).style("opacity","0.1"),this.setDragStatus(!0))},dragend:function(){var t=this.config,e=this.$el.main;this.hasArcType()||!t.data_selection_enabled||(e.select("."+L.dragarea).transition().duration(100).style("opacity","0").remove(),e.selectAll("."+L.shape).classed(L.INCLUDED,!1),this.setDragStatus(!1))}}),{},{selectPoint:function(t,e,n){var i=this,r=i.config,a=i.$el.main,o=r.axis_rotated,s=(o?i.circleY:i.circleX).bind(i),c=(o?i.circleX:i.circleY).bind(i),o=i.pointSelectR.bind(i);S(r.data_onselected,i.api,e,t.node()),a.select("."+L.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+L.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(L.selectedCircle,n)}).attr("cx",s).attr("cy",c).attr("stroke",i.color).attr("r",function(t){return 1.4*i.pointSelectR(t)}).transition().duration(100).attr("r",o)},unselectPoint:function(t,e,n){var i=this.config,r=this.$el;S(i.data_onunselected,this.api,e,t.node()),r.main.select("."+L.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+L.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},togglePoint:function(t,e,n,i){this[(t?"":"un")+"selectPoint"](e,n,i)},selectPath:function(t,e){var n=this,i=n.config;S(i.data_onselected,n.api,e,t.node()),i.interaction_brighten&&t.transition().duration(100).style("fill",function(){return(0,vn.rgb)(n.color(e)).brighter(.75)})},unselectPath:function(t,e){var n=this,i=n.config;S(i.data_onunselected,n.api,e,t.node()),i.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.color(e)})},togglePath:function(t,e,n,i){this[(t?"":"un")+"selectPath"](e,n,i)},getToggle:function(t,e){return"path"===t.nodeName?this.togglePath:this.isStepType(e)?function(){}:this.togglePoint},toggleShape:function(t,e,n){var i,r=this.config,a=this.$el.main,o=(0,O.select)(t),s=o.classed(L.SELECTED),c=this.getToggle(t,e).bind(this);r.data_selection_enabled&&r.data_selection_isselectable.bind(this.api)(e)&&(r.data_selection_multiple||(t="."+L.shapes,r.data_selection_grouped&&(t+=this.getTargetSelectorSuffix(e.id)),a.selectAll(t).selectAll("."+L.shape).each(function(t,e){var n=(0,O.select)(this);n.classed(L.SELECTED)&&c(!1,(i=n).classed(L.SELECTED,!1),t,e)})),i&&i.node()===o.node()||(o.classed(L.SELECTED,!s),c(!s,o,e,n)))}}),mn={initBrush:function(){var r=this,a=r.config,n=r.scale,t=r.$el.subchart,o=a.axis_rotated;r.brush=(o?(0,g.brushY):(0,g.brushX))();function e(){r.redrawForBrush()}var i,s;r.brush.on("start",function(){"touch"===r.state.inputType&&r.hideTooltip(),e()}).on("brush",e).on("end",function(){i=n.x.orgDomain()}),r.brush.updateResize=function(){var e=this;s&&clearTimeout(s),s=setTimeout(function(){var t=e.getSelection();i&&(0,g.brushSelection)(t.node())&&e.move(t,i.map(n.subX.orgScale()))},0)},r.brush.update=function(){return 0===this.extent()()[1].filter(function(t){return isNaN(t)}).length&&t.main&&t.main.select("."+L.brush).call(this),this},r.brush.scale=function(t){var e,n,i=a.subchart_size_height||(e=r.$el.svg.select("."+L.brush+" .overlay"),n={width:0,height:0},e.size()&&(n.width=+e.attr("width"),n.height=+e.attr("height")),n[o?"width":"height"]),n=r.getExtent();!n&&t.range?n=[[0,0],[t.range()[1],i]]:B(n)&&(n=n.map(function(t,e){return[t,0<e?i:e]})),o&&n[1].reverse(),this.extent(n),this.update()},r.brush.getSelection=function(){return t.main?t.main.select("."+L.brush):(0,O.select)([])}},initSubchart:function(){var n,i=this,t=i.config,e=i.state,r=e.clip,a=e.hasAxis,o=i.$el,s=o.defs,c=o.svg,u=o.subchart,l=o.axis;a&&(e=t.subchart_show?"visible":"hidden",o=r.id+"-subchart",a=i.getClipPath(o),r.idSubchart=o,i.appendClip(s,o),i.initBrush(),u.main=c.append("g").classed(L.subchart,!0).attr("transform",i.getTranslate("context")),(n=u.main).style("visibility",e),n.append("g").attr("clip-path",a).attr("class",L.chart),["bar","line","bubble","candlestick","scatter"].forEach(function(t){var e=q(/^(bubble|scatter)$/.test(t)?"circle":t);(i.hasType(t)||i.hasTypeOf(e))&&(t=n.select("."+L.chart),e=L["chart"+e+"s"],t.select("."+e).empty()&&t.append("g").attr("class",e))}),n.append("g").attr("clip-path",a).attr("class",L.brush).call(i.brush),l.subX=n.append("g").attr("class",L.axisX).attr("transform",i.getTranslate("subX")).attr("clip-path",t.axis_rotated?"":r.pathXAxis).style("visibility",t.subchart_axis_x_show?e:"hidden"))},updateTargetsForSubchart:function(o){var s=this,t=s.config,e=s.state,c=s.$el.subchart.main;t.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(function(t){return s.hasType(t)||s.hasTypeOf(q(t))}).forEach(function(t){var e=/^(bubble|scatter)$/.test(t),n=q(e?"circle":t),i=s.getChartClass(n,!0),r=s.getClass(e?"circles":t+"s",!0),a=c.select("."+L["chart"+n+"s"]);e?((e=a.selectAll("."+L.circles).data(o.filter(s["is"+q(t)+"Type"].bind(s))).attr("class",r)).exit().remove(),e.enter().append("g").attr("class",r)):(r=(n=a.selectAll("."+L["chart"+n]).attr("class",i).data(o.filter(s["is"+n+"Type"].bind(s)))).enter().append("g").style("opacity","0").attr("class",i).append("g").attr("class",r),n.exit().remove(),"line"===t&&s.hasTypeOf("Area")&&r.append("g").attr("class",s.getClass("areas",!0)))}),c.selectAll("."+L.brush+" rect").attr(t.axis_rotated?"width":"height",t.axis_rotated?e.width2:e.height2))},redrawSubchart:function(t,n,i){var r=this,e=r.config,a=r.$el.subchart.main,o=r.state,s=!!n;a.style("visibility",e.subchart_show?"visible":"hidden"),e.subchart_show&&(o.event&&"zoom"===o.event.type&&r.brush.update(),t&&(U(r)||r.brush.update(),Object.keys(i.type).forEach(function(t){var e=q(t),t=r["generateDraw"+e](i.indices[t],!0);r["update"+e](n,!0),r["redraw"+e](t,s,!0)}),r.hasType("bubble")||r.hasType("scatter")))&&(o=i.pos.cx,t=r.updateCircleY(!0),r.updateCircle(!0),r.redrawCircle(o,t,s,void 0,!0))},redrawForBrush:function(){var t=this.config,e=t.subchart_onbrush,n=t.zoom_rescale,t=this.scale;this.redraw({withTransition:!1,withY:n,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e.bind(this.api)(t.x.orgDomain())},transformContext:function(t,e){var n,i=this.$el.subchart.main;e&&e.axisSubX?n=e.axisSubX:(n=i.select("."+L.axisX),t&&(n=n.transition())),i.attr("transform",this.getTranslate("context")),n.attr("transform",this.getTranslate("subX"))},getExtent:function(){var e,t=this.config,n=this.scale,t=t.axis_x_extent;return t&&(R(t)?t=t.bind(this.api)(this.getXDomain(this.data.targets),n.subX):this.axis.isTimeSeries()&&t.every(isNaN)&&(e=at.bind(this),t=t.map(function(t){return n.subX(e(t))}))),t}},bn={initZoom:function(){this.scale.zoom=null,this.generateZoom(),this.initZoomBehaviour()},bindZoomEvent:function(t){void 0===t&&(t=!0);var e=this.config,n=this.$el.main,i=e.zoom_enabled,n=n.select("."+L.eventRects);i&&t?e.subchart_show||this.bindZoomOnEventRect(n,e.zoom_type):!1===t&&(this.api.unzoom(),n.on(".zoom",null).on(".drag",null))},generateZoom:function(){var i=this,r=i.config,a=i.org,o=i.scale,t=(0,gn.zoom)().duration(0).on("start",i.onZoomStart.bind(i)).on("zoom",i.onZoom.bind(i)).on("end",i.onZoomEnd.bind(i));t.orgScaleExtent=function(){var t=r.zoom_extent||[1,10];return[t[0],Math.max(i.getMaxDataCount()/t[1],t[1])]},t.updateScaleExtent=function(){var t=M(i.scale.x.orgDomain())/M(i.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this},t.updateTransformScale=function(t){a.xScale&&a.xScale.range(o.x.range());var e=t[r.axis_rotated?"rescaleY":"rescaleX"](a.xScale||o.x),n=i.trimXDomain(e.domain()),t=r.zoom_rescale;e.domain(n,a.xDomain),o.zoom=i.getCustomizedScale(e),i.axis.x.scale(o.zoom),t&&(a.xScale||(a.xScale=o.x.copy()),o.x.domain(n))},i.zoom=t},onZoomStart:function(t){var e=t.sourceEvent;e&&(this.zoom.startEvent=e,this.state.zooming=!0,S(this.config.zoom_onzoomstart,this.api,t))},onZoom:function(t){var e,n=this,i=n.config,r=n.scale,a=n.org,o=t.sourceEvent;!i.zoom_enabled||!t.sourceEvent||0===n.filterTargetsToShow(n.data.targets).length||!r.zoom&&-1<o.type.indexOf("touch")&&1===o.touches.length||(e="mousemove"===o.type,o=o.wheelDelta<0,t=t.transform,!e&&o&&r.x.domain().every(function(t,e){return t!==a.xDomain[e]})&&r.x.domain(a.xDomain),n.zoom.updateTransformScale(t),n.axis.isCategorized()&&r.x.orgDomain()[0]===a.xDomain[0]&&r.x.domain([a.xDomain[0]-1e-10,r.x.orgDomain()[1]]),n.redraw({withTransition:!1,withY:i.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),n.state.cancelClick=e,S(i.zoom_onzoom,n.api,r.zoom.domain()))},onZoomEnd:function(t){var e=this.config,n=this.scale,i=this.zoom.startEvent,t=t&&t.sourceEvent;i&&-1<i.type.indexOf("touch")&&(i=i.changedTouches[0],t=t.changedTouches[0]),!i||t&&i.clientX===t.clientX&&i.clientY===t.clientY||(this.redrawEventRect(),this.updateZoom(),this.state.zooming=!1,S(e.zoom_onzoomend,this.api,n[n.zoom?"zoom":"subX"].domain()))},getZoomDomain:function(){var t=this.config,e=this.org.xDomain,n=e[0],e=e[1];return[n=I(t.zoom_x_min)?et("min",[n,t.zoom_x_min]):n,e=I(t.zoom_x_max)?et("max",[e,t.zoom_x_max]):e]},updateZoom:function(t){var e=this.scale,n=e.subX,i=e.x,r=e.zoom;r&&(e=r.domain(),r=n.domain(),e=(e[0]<=r[0]||e[0]-.015<=r[0])&&(r[1]<=e[1]||r[1]<=e[1]-.015),(t||e)&&(this.axis.x.scale(n),i.domain(n.orgDomain()),this.scale.zoom=null))},bindZoomOnEventRect:function(t,e){e="drag"===e?this.zoomBehaviour:this.zoom;this.$el.svg.on("wheel",function(){}),t.call(e).on("dblclick.zoom",null)},initZoomBehaviour:function(){var i,r=this,t=r.config,a=r.state,e=t.axis_rotated,o=0,s=0,c={axis:e?"y":"x",attr:e?"height":"width",index:e?1:0};r.zoomBehaviour=(0,kt.drag)().clickDistance(4).on("start",function(t){a.event=t,r.setDragStatus(!0),r.unselectRect(),i=i||r.$el.main.append("rect").attr("clip-path",a.clip.path).attr("class",L.zoomBrush).attr("width",e?a.width:0).attr("height",e?0:a.height),o=D(t,this)[c.index],s=o,i.attr(c.axis,o).attr(c.attr,0),r.onZoomStart(t)}).on("drag",function(t){s=D(t,this)[c.index],i.attr(c.axis,Math.min(o,s)).attr(c.attr,Math.abs(s-o))}).on("end",function(t){var e,n=r.scale.zoom||r.scale.x;a.event=t,r.setDragStatus(!1),i.attr(c.axis,0).attr(c.attr,0),s<o&&(o=(e=[s,o])[0],s=e[1]),o<0&&(s+=Math.abs(o),o=0),o!==s?(r.api.zoom([o,s].map(function(t){return n.invert(t)})),r.onZoomEnd(t)):r.isMultipleX()?r.clickHandlerForMultipleXS.bind(this)(r):(t=(e=D(t))[0],e=e[1],e=P.elementFromPoint(t,e),r.clickHandlerForSingleX.bind(e)((0,O.select)(e).datum(),r))})},setZoomResetButton:function(){var t=this,e=t.config,n=e.zoom_resetButton;n&&"drag"===e.zoom_type&&(t.zoom.resetBtn?t.zoom.resetBtn.style("display",null):t.zoom.resetBtn=t.$el.chart.append("div").classed(L.button,!0).append("span").on("click",function(){R(n.onclick)&&n.onclick.bind(t.api)(this),t.api.unzoom()}).classed(L.buttonZoomReset,!0).text(n.text||"Reset Zoom"))}},wn={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){},data_onunselected:function(){}},Tn={subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_text_show:!0,subchart_onbrush:function(){}},An={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},Mn=function(){return V(Jt.prototype,_n),V(ne.prototype,hn),ut.setOptions([wn]),(Mn=function(){return!0})()},Sn=function(){return V(Jt.prototype,mn),V(ne.prototype,dn),ut.setOptions([Tn]),(Sn=function(){return!0})()},kn=function(){return V(Jt.prototype,bn),V(ne.prototype,pn),ut.setOptions([An]),(kn=function(){return!0})()},En={},Cn={version:"3.0.2",generate:function(t){t=Q({},En,t),t=new ne(t);return t.internal.charts=this.instance,this.instance.push(t),t},defaults:function(t){return En=$(t)?t:En},instance:[],plugin:{}};Object.keys(e).forEach(function(t){return e[t]()}),Object.keys(n).forEach(function(t){return n[t]()})}(),Rn}()});var apexDashboardChart=function(It,Ft){"use strict";var Xt={featureDetails:{name:"APEX-D3Dashboard-Charts",scriptVersion:"2.6.6.9",utilVersion:"1.4",url:"https://github.com/RonnyWeiss",url2:"https://ronnyweiss.app",license:"MIT"},isDefinedAndNotNull:function(t){return null!=t&&""!=t},groupObjectArray:function(t,i){return t&&Array.isArray(t)?t.reduce(function(t,e){var n=e[i];return n&&(t[n=""+n]=t[n]||[]).push(e),t},{}):[]},link:function(t,e){if(!e)return window.parent.location.href=t;window.open(t,"_blank")},escapeHTML:function(t){if(null===t)return null;if(void 0!==t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(t){}return It.util.escapeHTML(String(t))}},loader:{start:function(t,e){e&&Ft(t).css("min-height","100px"),It.util.showSpinner(Ft(t))},stop:function(t,e){e&&Ft(t).css("min-height",""),Ft(t+" > .u-Processing").remove(),Ft(t+" > .ct-loader").remove()}},jsonSaveExtend:function(e,n){var i={},t={};if("string"==typeof n)try{t=JSON.parse(n)}catch(t){It.debug.error({module:"util.js",msg:"Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used.",err:t,targetConfig:n})}else t=Ft.extend(!0,{},n);try{i=Ft.extend(!0,{},e,t)}catch(t){i=Ft.extend(!0,{},e),It.debug.error({module:"util.js",msg:"Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used.",err:t,finalConfig:i})}return i},printDOMMessage:{show:function(t,e,n,i){var r=Ft("<div></div>").css("margin","12px").css("text-align","center").css("padding","35px 0").addClass("dominfomessagediv"),a=Ft("<div></div>"),i=Ft("<span></span>").addClass("fa").addClass(n||"fa-info-circle-o").addClass("fa-2x").css("height","32px").css("width","32px").css("color","#D0D0D0").css("margin-bottom","16px").css("color",i||"inhherit");a.append(i);e=Ft("<span></span>").text(e).css("display","block").css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px");r.append(a).append(e),Ft(t).append(r)},hide:function(t){Ft(t).children(".dominfomessagediv").remove()}},noDataMessage:{show:function(t,e){Xt.printDOMMessage.show(t,e,"fa-search")},hide:function(t){Xt.printDOMMessage.hide(t)}},errorMessage:{show:function(t,e){Xt.printDOMMessage.show(t,e,"fa-exclamation-triangle","#FFCB3D")},hide:function(t){Xt.printDOMMessage.hide(t)}},cutString:function(e,t){try{return!(t<0)&&e.length>t?e.substring(0,t-3)+"...":e}catch(t){return e}},isBetween:function(t,e,n){n=n||0;return e-n<=t&&t<=e+n}};function Bt(t,e,n){return n?void 0!==t&&null!=t?1==t||"true"===t:e:Xt.isDefinedAndNotNull(t)?t:e}return{initialize:function(u,t,e,n,i,r,a,Pt){var o,s,zt={},Nt=5,c="#"+u,l=Ft(c).find(".d3dc-root");if(It.debug.info({fct:Xt.featureDetails.name+" - initialize",msg:"Load...",featureDetails:Xt.featureDetails}),c)if(0<l.length){var f={},f=Xt.jsonSaveExtend({colSpan:12,height:400,refresh:0},i),h=Xt.jsonSaveExtend({axisLabelPosition:"inner3",chartTitle:null,gauge:{min:0,max:null,type:"single",width:null,arcMinWidth:null,fullCircle:!1,title:null},grid:{x:!0,y:!0},legend:{position:"right",show:!0},line:{step:"step"},padding:{bottom:null,left:null,right:null,top:null},rotateAxis:!1,showDataLabels:!1,showDataPoints:!0,showAbsoluteValues:!1,tooltip:{grouped:!0,show:!0},transitionDuration:200,x:{axisHeight:null,label:"x Axis",timeFormat:"%Y-%m-%dT%H:%M:%S",type:"category",tick:{cutAfter:30,maxNumber:25,multiline:!1,rotation:60,autoRotate:!0,timeFormat:"%y-%m-%d %H:%M",fit:!0}},y:{label:"y Axis 1",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},y2:{label:"y Axis 2",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},zoom:{enabled:!0,type:"scroll",rescale:!1}},r);f.d3chart=h,f.noDataMessage=e,f.errorMessage=n;var d=(o=l,(s=Ft("<div></div>")).addClass("d3dc-container"),s.attr("id",u+"-c"),s.css("min-height","100px"),o.append(s),s);v(f);try{Ft(c).bind("apexrefresh",function(){v(f)})}catch(t){Xt.errorMessage.show(c,f.errorMessage),It.debug.error({fct:Xt.featureDetails.name+" - initialize",msg:"Can't bind refresh event on "+c+". Apex is missing",err:t,featureDetails:Xt.featureDetails})}0<f.refresh&&setInterval(function(){Ft(c).is(":visible")&&v(f)},1e3*f.refresh)}else It.debug.error({fct:Xt.featureDetails.name+" - initialize",msg:"Can't find element with class d3dc-root in element with id: "+u,featureDetails:Xt.featureDetails});else It.debug.error({fct:Xt.featureDetails.name+" - initialize",msg:"Can't find pRegionID: "+u,featureDetails:Xt.featureDetails});function g(t,r){if(It.debug.info({fct:Xt.featureDetails.name+" - prepareData",msg:"AJAX Finished",pAjaxResponse:t,featureDetails:Xt.featureDetails}),zt.innerItemsIntervals&&Ft.each(zt.innerItemsIntervals,function(t,e){clearInterval(e)}),zt.innerItemsIntervals={},d.empty(),t.items&&0<t.items.length)try{var a=p(d),o=0;Ft.each(t.items,function(t,e){var n;n=e.itemConfig||{};var i=e.colSpan||f.colSpan;o+=i,It.debug.info({fct:Xt.featureDetails.name+" - prepareData",msg:"Render chart  - Col "+t,featureDetails:Xt.featureDetails}),function(t,e,n,i,r,a,o,s){var c=u+"-c-"+t,t=Ft("<div></div>");t.attr("id",c),t.addClass("d3dc-col-"+i),t.addClass("d3chartcol"),n.append(t),s?function(o,t,e,n,s){It.debug.info({fct:Xt.featureDetails.name+" - drawChart",pItemSel:o,pItemHeight:t,pConfigData:e,pValuesData:n,pDefaultConfig:s,featureDetails:Xt.featureDetails});var i,r,c=["pie","donut","gauge"],u=!1,l=!1,f=!1,a=Xt.groupObjectArray(n,"seriesID");try{var h=!1,d=Bt(e.chartTitle,s.d3chart.chartTitle||"").toString(),g=Bt(e.lineStep,s.d3chart.line.step),p=Bt(e.gaugeMin,s.d3chart.gauge.min),v=Bt(e.gaugeMax,s.d3chart.gauge.max),x=Bt(e.gaugeType,s.d3chart.gauge.type),y=Bt(e.gaugeWidth,s.d3chart.gauge.width),_=Bt(e.gaugeArcMinWidth,s.d3chart.gauge.arcMinWidth),m=Bt(e.gaugeFullCircle,s.d3chart.gauge.fullCircle,!0),b=Bt(e.gaugeTitle,s.d3chart.gauge.title||"").toString(),w=Bt(e.gridX,s.d3chart.grid.x,!0),T=Bt(e.gridY,s.d3chart.grid.y,!0),A=Bt(e.xAxisHeight,s.d3chart.x.axisHeight),M=Bt(e.legendShow,s.d3chart.legend.show,!0),S=Bt(e.legendPosition,s.d3chart.legend.position),k=Xt.jsonSaveExtend(null,s.d3chart.padding);Xt.isDefinedAndNotNull(e.paddingBottom)&&(k.bottom=e.paddingBottom),Xt.isDefinedAndNotNull(e.paddingLeft)&&(k.left=e.paddingLeft),Xt.isDefinedAndNotNull(e.paddingRight)&&(k.right=e.paddingRight),Xt.isDefinedAndNotNull(e.paddingTop)&&(k.top=e.paddingTop);var E,C=Bt(e.rotateAxis,s.d3chart.rotateAxis,!0),D=Bt(e.axisLabelPosition,s.d3chart.axisLabelPosition),R=null,O=null;switch(D){case"inner1":R="inner-left",O="inner-bottom";break;case"inner2":R="inner-center",O="inner-middle";break;case"inner3":R="inner-right",O="inner-top";break;case"outer1":R="outer-left",O="outer-bottom";break;case"outer2":R="outer-center",O="outer-middle";break;case"outer3":R="outer-right",O="outer-top"}C&&(E=R,R=O,O=E);var L=Bt(e.tooltipShow,s.d3chart.tooltip.show,!0),P=Bt(e.tooltipGrouped,s.d3chart.tooltip.grouped,!0),z=Bt(e.transitionDuration||s.d3chart.transitionDuration),N=Bt(e.xShow,s.d3chart.x.show,!0),I=Bt(e.xLabel,s.d3chart.x.label||"").toString(),F=Bt(e.xType,s.d3chart.x.type),X=null,B=null,$=Bt(e.xTickCutAfter,s.d3chart.x.tick.cutAfter),Y=Bt(e.xTickMaxNumber,s.d3chart.x.tick.maxNumber),j=Bt(e.xTickRotation,s.d3chart.x.tick.rotation),G=Bt(e.xTickMultiline,s.d3chart.x.tick.multiline,!0),H=Bt(e.xTickFit,s.d3chart.x.tick.fit,!0),U=Bt(e.xTickAutoRotate,s.d3chart.x.tick.autoRotate,!0),V=null;"category"!=F&&"timeseries"!=F||(B="x"),"timeseries"==F&&(X=Bt(e.xTimeFormat,s.d3chart.x.timeFormat),V=Bt(e.xTickTimeFormat,s.d3chart.x.tick.timeFormat)),"category"==F&&(V=function(t,e){return Xt.cutString(e,$)});var q=Bt(e.yLabel,s.d3chart.y.label||"").toString(),W=Bt(e.yLog,s.d3chart.y.log,!0),Z=null;W&&(Z="log");var K=e.yMin||s.d3chart.y.min,J=e.yMax||s.d3chart.y.max,Q=e.yTickMaxNumber||s.d3chart.y.tick.maxNumber,tt=e.yUnit||s.d3chart.y.unit,et=!1,nt=Bt(e.y2Label,s.d3chart.y2.label||"").toString(),it=Bt(e.y2Log,s.d3chart.y2.log,!0),rt=null;it&&(rt="log");var at=Bt(e.y2Min,s.d3chart.y2.min),ot=Bt(e.y2Max,s.d3chart.y2.max),st=Bt(e.y2TickMaxNumber,s.d3chart.y2.tick.maxNumber),ct=Bt(e.y2Unit,s.d3chart.y2.unit),ut=Bt(e.zoomEnabled,s.d3chart.zoom.enabled,!0),lt=Bt(e.zoomType,s.d3chart.zoom.type),ft=!1;!ut||"scroll"==lt?ft=!1:"subchart"==lt?ut=!(ft=!0):"drag"==lt&&(ft=!(ut=!0));var ht,dt,gt=Bt(e.zoomRescale,s.d3chart.zoom.rescale,!0),pt=[],vt=[],xt=[],yt={},_t={},mt={},bt={},wt={},Tt=0;if(a){"category"!=F&&"timeseries"!=F||(vt.push("x"),ht=Xt.groupObjectArray(n,"x"),dt=Object.keys(ht),Ft.each(dt,function(t,e){vt.push(Bt(e.replace("",""),null))})),pt.push(vt),Ft.each(a,function(t,e){var n,r,i,a;Tt++,e[0]&&e[0].seriesID?(n=e[0],r=escape(n.seriesID),yt[r]=n.color,_t[r]=n.type,0<=c.indexOf(n.type)&&(ut=!1),"gauge"===n.type&&(u=!0),"pie"===n.type&&(l=!0),"donut"===n.type&&(f=!0),Xt.isDefinedAndNotNull(n.tooltip)&&(h=!0),mt[r]=n.yAxis||"y",Xt.isDefinedAndNotNull(n.groupID)&&(i=escape(n.groupID.toString()),wt[i]||(wt[i]=[]),wt[i].push(r)),"y2"==n.yAxis&&(et=!0),bt[r]=Bt(n.label,r),(a=[]).push(r),"category"==F||"timeseries"==F?Ft.each(ht,function(t,e){var n=null,i=null;Ft.each(e,function(t,e){escape(e.seriesID)==r&&(n=e.y,e.z&&(i=e.z))}),null!==i?a.push({y:n,z:i}):a.push(n)}):Ft.each(e,function(t,e){var n=Bt(e.y,null);e.z?(e=e.z,a.push({y:n,z:e})):a.push(n)}),pt.push(a)):(Xt.errorMessage.show(o,s.errorMessage),It.debug.error({fct:Xt.featureDetails.name+" - drawChart",msg:"No seriesID found in seriesID Cursor",featureDetails:Xt.featureDetails}))}),Ft.each(wt,function(t,e){xt.push(e)});var At=Bt(e.showDataLabels,s.d3chart.showDataLabels,!0);l||f?At={colors:"white"}:u&&(At={colors:"single"===x&&1<Tt?"white":"inherit"});var Mt=Bt(e.showDataPoints,s.d3chart.showDataPoints,!0);Bt(e.showAbsoluteValues,s.d3chart.showAbsoluteValues)&&(i=function(t,e,n){return t+tt}),h&&(r=function(t){var i=Ft("<div></div>");return i.addClass("bb-tooltip"),i.addClass("bida-chart-tooltip-custome"),Ft.each(t,function(t,e){var n=""+unescape(e.id),e=e.index;a[n]&&(1===a[n].length&&(e=0),a[n][e]&&Xt.isDefinedAndNotNull(a[n][e].tooltip)&&(e=a[n][e].tooltip,!1!==Pt&&(e=Xt.escapeHTML(e)),i.append(e),i.append("<br>")))}),i[0].outerHTML});try{var St=o+"bbc",kt=St.replace("#",""),Et=Ft("<div></div>");Et.attr("id",kt),Ft(o).append(Et);var Ct={bindto:St,title:{text:d},size:{height:t},data:{x:B,xFormat:X,columns:pt,types:_t,groups:xt,colors:yt,labels:At,axes:mt,names:bt,onclick:function(t){var e;e=t,t=""+unescape(e.id),e=e.index,a[t]&&(1===a[t].length&&(e=0),a[t][e]&&a[t][e].link&&Xt.link(a[t][e].link))}},pie:{label:{format:i,threshold:.05}},donut:{label:{format:i,threshold:.05}},bar:{label:{threshold:.05}},line:{step:{type:g}},gauge:{label:{format:i,threshold:"single"===x?.05:null},fullCircle:m,min:p,max:v,type:x,width:y,title:b,arc:{minWidth:_}},radar:{direction:{clockwise:!0}},subchart:{show:ft},zoom:{type:lt,enabled:ut,rescale:gt},transition:{duration:z},legend:{show:M,position:S},tooltip:{show:L,grouped:P,contents:r},grid:{x:{show:w},y:{show:T}},point:{show:Mt},axis:{rotated:C,x:{show:N,label:{text:I,position:R},type:F,tick:{culling:{max:Y},autorotate:U,rotate:j,multiline:G,format:V,fit:H},height:A},y:{label:{text:q,position:O},type:Z,max:J,min:K,tick:{culling:{max:Q},format:function(t){return t+tt}}},y2:{show:et,label:{text:nt,position:O},type:rt,max:ot,min:at,tick:{culling:{max:st},format:function(t){return t+ct}}}},padding:k};It.debug.info({fct:Xt.featureDetails.name+" - drawChart",finalChartData:Ct,featureDetails:Xt.featureDetails});var Dt=bb.generate(Ct);function Rt(){!document.hidden&&Et.is(":visible")&&Dt.resize({height:t})}function Ot(){zt.innerItemsIntervals&&zt.innerItemsIntervals[o]&&clearInterval(zt.innerItemsIntervals[o])}function Lt(){zt.innerItemsIntervals[o]=setInterval(function(){0===Ft(o).length?clearInterval(zt.innerItemsIntervals[o]):Et.is(":visible")&&(Xt.isBetween(Et.width(),Et.find("svg").width(),Nt)||(It.debug.info({fct:Xt.featureDetails.name+" - drawChart",msg:"Chart has resize problem",featureDetails:Xt.featureDetails}),Rt()))},zt.defTime)}ut&&Ft(St).contextmenu(function(t){t.preventDefault(),Dt.unzoom()}),Ft(window).resize(function(){Rt()}),Ot(),Lt(),document.addEventListener("visibilitychange",function(){(document.hidden?Ot:Lt)()})}catch(t){Ft(o).empty(),Xt.errorMessage.show(o,s.errorMessage),It.debug.error({fct:Xt.featureDetails.name+" - drawChart",msg:"Error while try to render chart",err:t,featureDetails:Xt.featureDetails})}}else Xt.noDataMessage.show(o,s.noDataMessage)}catch(t){Ft(o).empty(),Xt.errorMessage.show(o,s.errorMessage),It.debug.error({fct:Xt.featureDetails.name+" - drawChart",msg:"Error while prepare data for chart",err:t,featureDetails:Xt.featureDetails})}}("#"+c,e,a,s,o):Xt.noDataMessage.show(t,o.noDataMessage);Xt.isDefinedAndNotNull(r)&&((o=Ft("<h4></h4>")).css("text-align","center"),!1!==Pt?o.text(r):o.html(r),t.prepend(o))}(t,e.height,a,i,e.title,n,r,e.itemData),12<=o&&(a=p(d),o=0)})}catch(t){Xt.errorMessage.show(d,r.errorMessage),It.debug.error({fct:Xt.featureDetails.name+" - prepareData",msg:"Error while prepare data for chart",err:t,featureDetails:Xt.featureDetails})}else d.css("min-height",""),Xt.noDataMessage.show(d,r.noDataMessage);Xt.loader.stop(c),It.debug.info({fct:Xt.featureDetails.name+" - prepareData",msg:"Finished",featureDetails:Xt.featureDetails})}function p(t){var e=Ft("<div></div>");return e.addClass("d3dc-row"),t.append(e),e}function v(e){Xt.loader.start(c);It.server.plugin(t,{pageItems:a},{success:function(t){g(t,e)},error:function(t){Ft(c).empty(),Xt.errorMessage.show(c,e.errorMessage),It.debug.error({fct:Xt.featureDetails.name+" - getData",msg:"Error while loading AJAX data",err:t,featureDetails:Xt.featureDetails}),Xt.loader.stop(c)},dataType:"json"})}}}};