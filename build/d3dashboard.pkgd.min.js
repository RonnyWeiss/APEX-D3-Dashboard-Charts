!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).d3=t.d3||{})}(this,function(s){"use strict";function u(t,e){return null==t||null==e?NaN:t<e?-1:e<t?1:e<=t?0:NaN}function t(t,e){return null==t||null==e?NaN:e<t?-1:t<e?1:t<=e?0:NaN}function c(n){let r,a,o;function s(t,e,n=0,i=t.length){if(n<i){if(0!==r(e,e))return i;do{const r=n+i>>>1;a(t[r],e)<0?n=1+r:i=r}while(n<i)}return n}return o=2!==n.length?(r=u,a=(t,e)=>u(n(t),e),(t,e)=>n(t)-e):(r=n===u||n===t?n:e,a=n),{left:s,center:function(t,e,n=0,i=t.length){i=s(t,e,n,i-1);return n<i&&o(t[i-1],e)>-o(t[i],e)?i-1:i},right:function(t,e,n=0,i=t.length){if(n<i){if(0!==r(e,e))return i;do{const r=n+i>>>1;a(t[r],e)<=0?n=1+r:i=r}while(n<i)}return n}}}function e(){return 0}function o(t){return null===t?NaN:+t}var n=c(u),i=n.right,r=n.left,a=c(o).center,_=i;const y=h(g),l=h(function(t){const a=g(t);return(t,e,n,i,r)=>{a(t,e,n<<=2,i<<=2,r<<=2),a(t,e,n+1,i+1,r),a(t,e,n+2,i+2,r),a(t,e,n+3,i+3,r)}});function h(u){return function(t,e,n=e){if(!(0<=(e=+e)))throw new RangeError("invalid rx");if(!(0<=(n=+n)))throw new RangeError("invalid ry");let{data:i,width:r,height:a}=t;if(!(0<=(r=Math.floor(r))))throw new RangeError("invalid width");if(!(0<=(a=Math.floor(void 0!==a?a:i.length/r))))throw new RangeError("invalid height");if(!r||!a||!e&&!n)return t;var o=e&&u(e),s=n&&u(n),n=i.slice();return o&&s?(d(o,n,i,r,a),d(o,i,n,r,a),d(o,n,i,r,a),f(s,i,n,r,a),f(s,n,i,r,a),f(s,i,n,r,a)):o?(d(o,i,n,r,a),d(o,n,i,r,a),d(o,i,n,r,a)):s&&(f(s,i,n,r,a),f(s,n,i,r,a),f(s,i,n,r,a)),t}}function d(n,i,r,a,o){for(let t=0,e=a*o;t<e;)n(i,r,t,t+=a,1)}function f(n,i,r,a,o){for(let t=0,e=a*o;t<a;++t)n(i,r,t,t+e,a)}function g(t){const e=Math.floor(t);if(e===t)return function(t){const c=2*t+1;return(i,r,a,o,s)=>{if((o-=s)>=a){let n=t*r[a];var u=s*t;for(let t=a,e=a+u;t<e;t+=s)n+=r[Math.min(o,t)];for(let t=a,e=o;t<=e;t+=s)n+=r[Math.min(o,t+u)],i[t]=n/c,n-=r[Math.max(a,t-u)]}}}(t);const l=t-e,h=2*t+1;return(i,r,a,o,s)=>{if((o-=s)>=a){let n=e*r[a];var u=s*e,c=u+s;for(let t=a,e=a+u;t<e;t+=s)n+=r[Math.min(o,t)];for(let t=a,e=o;t<=e;t+=s)n+=r[Math.min(o,t+u)],i[t]=(n+l*(r[Math.max(a,t-c)]+r[Math.min(o,t+c)]))/h,n-=r[Math.max(a,t-u)]}}}function p(e,n){let i=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&++i;else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(r=+r)>=r&&++i}return i}function v(t){return 0|t.length}function b(t){return!(0<t)}function x(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function m(e,n){let i,r=0,a=0,o=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(i=t-a,a+=i/++r,o+=i*(t-a));else{let t=-1;for(var s of e)null!=(s=n(s,++t,e))&&(s=+s)>=s&&(i=s-a,a+=i/++r,o+=i*(s-a))}if(1<r)return o/(r-1)}function w(t,e){e=m(t,e);return e&&Math.sqrt(e)}function T(e,n){let i,r;if(void 0===n)for(const n of e)null!=n&&(void 0===i?n>=n&&(i=r=n):(i>n&&(i=n),r<n&&(r=n)));else{let t=-1;for(var a of e)null!=(a=n(a,++t,e))&&(void 0===i?a>=a&&(i=r=a):(i>a&&(i=a),r<a&&(r=a)))}return[i,r]}class k{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let t=0;t<this._n&&t<32;t++){var r=n[t],a=e+r,r=Math.abs(e)<Math.abs(r)?e-(a-r):r-(a-e);r&&(n[i++]=r),e=a}return n[i]=e,this._n=i+1,this}valueOf(){var t=this._partials;let e,n,i,r=this._n,a=0;if(0<r){for(a=t[--r];0<r&&(e=a,n=t[--r],a=e+n,i=n-(a-e),!i););0<r&&(i<0&&t[r-1]<0||0<i&&0<t[r-1])&&(n=2*i,e=a+n,n==e-a&&(a=e))}return a}}class A extends Map{constructor(t,e=R){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(S(this,t))}has(t){return super.has(S(this,t))}set(t,e){return super.set(E(this,t),e)}delete(t){return super.delete(C(this,t))}}class M extends Set{constructor(t,e=R){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(S(this,t))}add(t){return super.add(E(this,t))}delete(t){return super.delete(C(this,t))}}function S({_intern:t,_key:e},n){e=e(n);return t.has(e)?t.get(e):n}function E({_intern:t,_key:e},n){e=e(n);return t.has(e)?t.get(e):(t.set(e,n),n)}function C({_intern:t,_key:e},n){e=e(n);return t.has(e)&&(n=t.get(e),t.delete(e)),n}function R(t){return null!==t&&"object"==typeof t?t.valueOf():t}function D(t){return t}function O(t,...e){return $(t,D,D,e)}function P(t,...e){return $(t,Array.from,D,e)}function L(n,i){for(let t=1,e=i.length;t<e;++t)n=n.flatMap(n=>n.pop().map(([t,e])=>[...n,t,e]));return n}function N(t,e,...n){return $(t,D,e,n)}function z(t,e,...n){return $(t,Array.from,e,n)}function I(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function $(t,o,s,u){return function t(e,n){if(n>=u.length)return s(e);const i=new A,r=u[n++];let a=-1;for(const t of e){const o=r(t,++a,e),s=i.get(o);s?s.push(t):i.set(o,[t])}for(const[o,s]of i)i.set(o,t(s,n));return o(i)}(t,0)}function F(e,t){return Array.from(t,t=>e[t])}function B(e,...i){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[n]=i;if(n&&2!==n.length||1<i.length){const t=Uint32Array.from(e,(t,e)=>e);return 1<i.length?(i=i.map(t=>e.map(t)),t.sort((t,e)=>{for(const n of i){const i=j(n[t],n[e]);if(i)return i}})):(n=e.map(n),t.sort((t,e)=>j(n[t],n[e]))),F(e,t)}return e.sort(X(n))}function X(i=u){if(i===u)return j;if("function"!=typeof i)throw new TypeError("compare is not a function");return(t,e)=>{var n=i(t,e);return n||0===n?n:(0===i(e,e))-(0===i(t,t))}}function j(t,e){return(null==t||!(t<=t))-(null==e||!(e<=e))||(t<e?-1:e<t?1:0)}var Y=Array.prototype.slice;function G(t){return()=>t}const V=Math.sqrt(50),U=Math.sqrt(10),H=Math.sqrt(2);function q(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),i=i/Math.pow(10,r),i=i>=V?10:i>=U?5:i>=H?2:1;let a,o,s;return r<0?(s=Math.pow(10,-r)/i,a=Math.round(t*s),o=Math.round(e*s),a/s<t&&++a,o/s>e&&--o,s=-s):(s=Math.pow(10,r)*i,a=Math.round(t/s),o=Math.round(e/s),a*s<t&&++a,o*s>e&&--o),o<a&&.5<=n&&n<2?q(t,e,2*n):[a,o,s]}function W(t,e,n){if(!(0<(n=+n)))return[];if((t=+t)==(e=+e))return[t];var i=e<t,[r,a,o]=i?q(e,t,n):q(t,e,n);if(!(r<=a))return[];const s=a-r+1,u=new Array(s);if(i)if(o<0)for(let t=0;t<s;++t)u[t]=(a-t)/-o;else for(let t=0;t<s;++t)u[t]=(a-t)*o;else if(o<0)for(let t=0;t<s;++t)u[t]=(r+t)/-o;else for(let t=0;t<s;++t)u[t]=(r+t)*o;return u}function Z(t,e,n){return q(t=+t,e=+e,n=+n)[2]}function J(t,e,n){n=+n;var i=(e=+e)<(t=+t),n=i?Z(e,t,n):Z(t,e,n);return(i?-1:1)*(n<0?1/-n:n)}function K(t,e,n){let i;for(;;){var r=Z(t,e,n);if(r===i||0===r||!isFinite(r))return[t,e];0<r?(t=Math.floor(t/r)*r,e=Math.ceil(e/r)*r):r<0&&(t=Math.ceil(t*r)/r,e=Math.floor(e*r)/r),i=r}}function Q(t){return Math.max(1,Math.ceil(Math.log(p(t))/Math.LN2)+1)}function tt(){var p=D,v=T,b=Q;function e(t){for(var e,n,i=(t=!Array.isArray(t)?Array.from(t):t).length,r=new Array(i),a=0;a<i;++a)r[a]=p(t[a],a,t);var o=v(r),s=o[0],u=o[1],c=b(r,s,u);if(!Array.isArray(c)){const p=u,b=+c;if(v===T&&([s,u]=K(s,u,b)),(c=W(s,u,b))[0]<=s&&(n=Z(s,u,b)),c[c.length-1]>=u)if(p>=u&&v===T){const p=Z(s,u,b);isFinite(p)&&(0<p?u=(Math.floor(u/p)+1)*p:p<0&&(u=(Math.ceil(u*-p)+1)/-p))}else c.pop()}for(var l=c.length,h=0,d=l;c[h]<=s;)++h;for(;c[d-1]>u;)--d;(h||d<l)&&(c=c.slice(h,d),l=d-h);var f,g=new Array(l+1);for(a=0;a<=l;++a)(f=g[a]=[]).x0=0<a?c[a-1]:s,f.x1=a<l?c[a]:u;if(isFinite(n)){if(0<n)for(a=0;a<i;++a)null!=(e=r[a])&&s<=e&&e<=u&&g[Math.min(l,Math.floor((e-s)/n))].push(t[a]);else if(n<0)for(a=0;a<i;++a)if(null!=(e=r[a])&&s<=e&&e<=u){const p=Math.floor((s-e)*n);g[Math.min(l,p+(c[p]<=e))].push(t[a])}}else for(a=0;a<i;++a)null!=(e=r[a])&&s<=e&&e<=u&&g[_(c,e,0,l)].push(t[a]);return g}return e.value=function(t){return arguments.length?(p="function"==typeof t?t:G(t),e):p},e.domain=function(t){return arguments.length?(v="function"==typeof t?t:G([t[0],t[1]]),e):v},e.thresholds=function(t){return arguments.length?(b="function"==typeof t?t:G(Array.isArray(t)?Y.call(t):t),e):b},e}function et(e,n){let i;if(void 0===n)for(const n of e)null!=n&&(i<n||void 0===i&&n>=n)&&(i=n);else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(i<r||void 0===i&&r>=r)&&(i=r)}return i}function nt(t,e){let n,i=-1,r=-1;if(void 0===e)for(const e of t)++r,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,i=r);else for(var a of t)null!=(a=e(a,++r,t))&&(n<a||void 0===n&&a>=a)&&(n=a,i=r);return i}function it(e,n){let i;if(void 0===n)for(const n of e)null!=n&&(i>n||void 0===i&&n>=n)&&(i=n);else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&(i>r||void 0===i&&r>=r)&&(i=r)}return i}function rt(t,e){let n,i=-1,r=-1;if(void 0===e)for(const e of t)++r,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,i=r);else for(var a of t)null!=(a=e(a,++r,t))&&(n>a||void 0===n&&a>=a)&&(n=a,i=r);return i}function at(n,i,r=0,a=1/0,o){if(i=Math.floor(i),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(n.length-1,a)),!(r<=i&&i<=a))return n;for(o=void 0===o?j:X(o);r<a;){var s,u,c,l;600<a-r&&(s=a-r+1,u=i-r+1,l=Math.log(s),c=.5*Math.exp(2*l/3),l=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),at(n,i,Math.max(r,Math.floor(i-u*c/s+l)),Math.min(a,Math.floor(i+(s-u)*c/s+l)),o));var h=n[i];let t=r,e=a;for(ot(n,r,i),0<o(n[a],h)&&ot(n,r,a);t<e;){for(ot(n,t,e),++t,--e;o(n[t],h)<0;)++t;for(;0<o(n[e],h);)--e}0===o(n[r],h)?ot(n,r,e):(++e,ot(n,e,a)),e<=i&&(r=e+1),i<=e&&(a=e-1)}return n}function ot(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function st(e,n=u){let i,r=!1;if(1===n.length){let t;for(const a of e){const e=n(a);(r?0<u(e,t):0===u(e,e))&&(i=a,t=e,r=!0)}}else for(const u of e)(r?0<n(u,i):0===n(u,u))&&(i=u,r=!0);return i}function ut(t,e,n){if((i=(t=Float64Array.from(function*(e,n){if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(yield t);else{let t=-1;for(var i of e)null!=(i=n(i,++t,e))&&(i=+i)>=i&&(yield i)}}(t,n))).length)&&!isNaN(e=+e)){if(e<=0||i<2)return it(t);if(1<=e)return et(t);var n=(i-1)*e,i=Math.floor(n),e=et(at(t,i).subarray(0,i+1));return e+(it(t.subarray(i+1))-e)*(n-i)}}function ct(t,e,n=o){if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(1<=e)return+n(t[r-1],r-1,t);var i=(r-1)*e,r=Math.floor(i),e=+n(t[r],r,t);return e+(+n(t[r+1],r+1,t)-e)*(i-r)}}function lt(n,t,i=o){if(!isNaN(t=+t)){if(r=Float64Array.from(n,(t,e)=>o(i(n[e],e,n))),t<=0)return rt(r);if(1<=t)return nt(r);var r,e=Uint32Array.from(n,(t,e)=>e),a=r.length-1,t=Math.floor(a*t);return at(e,t,0,a,(t,e)=>j(r[t],r[e])),0<=(t=st(e.subarray(0,t+1),t=>r[t]))?t:-1}}function ht(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function dt(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a}function ft(t,e=u){if(1===e.length)return rt(t,e);let n,i=-1,r=-1;for(const u of t)++r,(i<0?0===e(u,u):e(u,n)<0)&&(n=u,i=r);return i}var gt=pt(Math.random);function pt(a){return function(t,e=0,n=t.length){let i=n-(e=+e);for(;i;){const n=a()*i--|0,r=t[i+e];t[i+e]=t[n+e],t[n+e]=r}return t}}function vt(t){if(!(r=t.length))return[];for(var e=-1,n=it(t,bt),i=new Array(n);++e<n;)for(var r,a=-1,o=i[e]=new Array(r);++a<r;)o[a]=t[a][e];return i}function bt(t){return t.length}function _t(t){return t instanceof M?t:new M(t)}function yt(t,e){const n=t[Symbol.iterator](),i=new Set;for(const t of e){const e=xt(t);if(!i.has(e))for(var r,a;{value:r,done:a}=n.next();){if(a)return!1;const t=xt(r);if(i.add(t),Object.is(e,t))break}}return!0}function xt(t){return null!==t&&"object"==typeof t?t.valueOf():t}function mt(t){return t}function wt(t){return"translate("+t+",0)"}function Tt(t){return"translate(0,"+t+")"}function At(e){return t=>+e(t)}function Mt(e,n){return n=Math.max(0,e.bandwidth()-2*n)/2,e.round()&&(n=Math.round(n)),t=>+e(t)+n}function St(){return!this.__axis}function kt(f,g){var p=[],v=null,b=null,_=6,y=6,x=3,m="undefined"!=typeof window&&1<window.devicePixelRatio?0:.5,w=1===f||4===f?-1:1,T=4===f||2===f?"x":"y",A=1===f||3===f?wt:Tt;function e(t){var e=null==v?g.ticks?g.ticks.apply(g,p):g.domain():v,n=null==b?g.tickFormat?g.tickFormat.apply(g,p):mt:b,i=Math.max(_,0)+x,r=g.range(),a=+r[0]+m,o=+r[r.length-1]+m,s=(g.bandwidth?Mt:At)(g.copy(),m),u=t.selection?t.selection():t,c=u.selectAll(".domain").data([null]),l=(d=u.selectAll(".tick").data(e,g).order()).exit(),h=d.enter().append("g").attr("class","tick"),r=d.select("line"),e=d.select("text"),c=c.merge(c.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),d=d.merge(h),r=r.merge(h.append("line").attr("stroke","currentColor").attr(T+"2",w*_)),e=e.merge(h.append("text").attr("fill","currentColor").attr(T,w*i).attr("dy",1===f?"0em":3===f?"0.71em":"0.32em"));t!==u&&(c=c.transition(t),d=d.transition(t),r=r.transition(t),e=e.transition(t),l=l.transition(t).attr("opacity",1e-6).attr("transform",function(t){return isFinite(t=s(t))?A(t+m):this.getAttribute("transform")}),h.attr("opacity",1e-6).attr("transform",function(t){var e=this.parentNode.__axis;return A((e&&isFinite(e=e(t))?e:s(t))+m)})),l.remove(),c.attr("d",4===f||2===f?y?"M"+w*y+","+a+"H"+m+"V"+o+"H"+w*y:"M"+m+","+a+"V"+o:y?"M"+a+","+w*y+"V"+m+"H"+o+"V"+w*y:"M"+a+","+m+"H"+o),d.attr("opacity",1).attr("transform",function(t){return A(s(t)+m)}),r.attr(T+"2",w*_),e.attr(T,w*i).text(n),u.filter(St).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===f?"start":4===f?"end":"middle"),u.each(function(){this.__axis=s})}return e.scale=function(t){return arguments.length?(g=t,e):g},e.ticks=function(){return p=Array.from(arguments),e},e.tickArguments=function(t){return arguments.length?(p=null==t?[]:Array.from(t),e):p.slice()},e.tickValues=function(t){return arguments.length?(v=null==t?null:Array.from(t),e):v&&v.slice()},e.tickFormat=function(t){return arguments.length?(b=t,e):b},e.tickSize=function(t){return arguments.length?(_=y=+t,e):_},e.tickSizeInner=function(t){return arguments.length?(_=+t,e):_},e.tickSizeOuter=function(t){return arguments.length?(y=+t,e):y},e.tickPadding=function(t){return arguments.length?(x=+t,e):x},e.offset=function(t){return arguments.length?(m=+t,e):m},e}var Et={value:()=>{}};function Ct(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new Rt(i)}function Rt(t){this._=t}function Dt(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Et,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}Rt.prototype=Ct.prototype={constructor:Rt,on:function(t,e){var n,i,r=this._,a=(i=r,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)r[n]=Dt(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Dt(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=function(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}(r[n],t.name)))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new Rt(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,i,r=new Array(n),a=0;a<n;++a)r[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(i=this._[t]).length;a<n;++a)i[a].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};var Ot="http://www.w3.org/1999/xhtml",Pt={svg:"http://www.w3.org/2000/svg",xhtml:Ot,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lt(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Pt.hasOwnProperty(e)?{space:Pt[e],local:t}:t}function Nt(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Ot&&t.documentElement.namespaceURI===Ot?t.createElement(n):t.createElementNS(e,n)}}function zt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function It(t){t=Lt(t);return(t.local?zt:Nt)(t)}function $t(){}function Ft(t){return null==t?$t:function(){return this.querySelector(t)}}function Bt(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Xt(){return[]}function jt(t){return null==t?Xt:function(){return this.querySelectorAll(t)}}function Yt(t){return function(){return this.matches(t)}}function Gt(e){return function(t){return t.matches(e)}}var Vt=Array.prototype.find;function Ut(){return this.firstElementChild}var Ht=Array.prototype.filter;function qt(){return Array.from(this.children)}function Wt(t){return new Array(t.length)}function Zt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Jt(t,e,n,i,r,a){for(var o,s=0,u=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):n[s]=new Zt(t,a[s]);for(;s<u;++s)(o=e[s])&&(r[s]=o)}function Kt(t,e,n,i,r,a,o){for(var s,u,c=new Map,l=e.length,h=a.length,d=new Array(l),f=0;f<l;++f)(s=e[f])&&(d[f]=u=o.call(s,s.__data__,f,e)+"",c.has(u)?r[f]=s:c.set(u,s));for(f=0;f<h;++f)u=o.call(t,a[f],f,a)+"",(s=c.get(u))?((i[f]=s).__data__=a[f],c.delete(u)):n[f]=new Zt(t,a[f]);for(f=0;f<l;++f)(s=e[f])&&c.get(d[f])===s&&(r[f]=s)}function Qt(t){return t.__data__}function te(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function ee(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ne(t,e){return t.style.getPropertyValue(e)||ee(t).getComputedStyle(t,null).getPropertyValue(e)}function ie(t){return t.trim().split(/^|\s+/)}function re(t){return t.classList||new ae(t)}function ae(t){this._node=t,this._names=ie(t.getAttribute("class")||"")}function oe(t,e){for(var n=re(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function se(t,e){for(var n=re(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function ue(){this.textContent=""}function ce(){this.innerHTML=""}function le(){this.nextSibling&&this.parentNode.appendChild(this)}function he(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function de(){return null}function fe(){var t=this.parentNode;t&&t.removeChild(this)}function ge(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ve(a){return function(){var t=this.__on;if(t){for(var e,n=0,i=-1,r=t.length;n<r;++n)e=t[n],a.type&&e.type!==a.type||e.name!==a.name?t[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?t.length=i:delete this.__on}}}function be(o,s,u){return function(){var t,e,n=this.__on,i=(e=s,function(t){e.call(this,t,this.__data__)});if(n)for(var r=0,a=n.length;r<a;++r)if((t=n[r]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=i,t.options=u),void(t.value=s);this.addEventListener(o.type,i,u),t={type:o.type,name:o.name,value:s,listener:i,options:u},n?n.push(t):this.__on=[t]}}function _e(t,e,n){var i=ee(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}Zt.prototype={constructor:Zt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},ae.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){t=this._names.indexOf(t);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var ye=[null];function xe(t,e){this._groups=t,this._parents=e}function me(){return new xe([[document.documentElement]],ye)}function we(t){return"string"==typeof t?new xe([[document.querySelector(t)]],[document.documentElement]):new xe([[t]],ye)}xe.prototype=me.prototype={constructor:xe,select:function(t){"function"!=typeof t&&(t=Ft(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o,s=e[r],u=s.length,c=i[r]=new Array(u),l=0;l<u;++l)(a=s[l])&&(o=t.call(a,a.__data__,l,s))&&("__data__"in a&&(o.__data__=a.__data__),c[l]=o);return new xe(i,this._parents)},selectAll:function(t){var e;t="function"==typeof t?(e=t,function(){return Bt(e.apply(this,arguments))}):jt(t);for(var n=this._groups,i=n.length,r=[],a=[],o=0;o<i;++o)for(var s,u=n[o],c=u.length,l=0;l<c;++l)(s=u[l])&&(r.push(t.call(s,s.__data__,l,u)),a.push(s));return new xe(r,a)},selectChild:function(t){return this.select(null==t?Ut:(e="function"==typeof t?t:Gt(t),function(){return Vt.call(this.children,e)}));var e},selectChildren:function(t){return this.selectAll(null==t?qt:(e="function"==typeof t?t:Gt(t),function(){return Ht.call(this.children,e)}));var e},filter:function(t){"function"!=typeof t&&(t=Yt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,u=i[r]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&u.push(a);return new xe(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Qt);var n,i=e?Kt:Jt,r=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),u=new Array(o),c=new Array(o),l=0;l<o;++l){var h=r[l],d=a[l],f=d.length,g="object"==typeof(g=t.call(h,h&&h.__data__,l,r))&&"length"in g?g:Array.from(g),p=g.length,v=u[l]=new Array(p),b=s[l]=new Array(p);i(h,d,v,b,c[l]=new Array(f),g,e);for(var _,y,x=0,m=0;x<p;++x)if(_=v[x]){for(m<=x&&(m=x+1);!(y=b[m])&&++m<p;);_._next=y||null}}return(s=new xe(s,r))._enter=u,s._exit=c,s},enter:function(){return new xe(this._enter||this._groups.map(Wt),this._parents)},exit:function(){return new xe(this._exit||this._groups.map(Wt),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,a=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?a.remove():n(a),i&&r?i.merge(r).order():r},merge:function(t){for(var t=t.selection?t.selection():t,e=this._groups,n=t._groups,i=e.length,t=n.length,r=Math.min(i,t),a=new Array(i),o=0;o<r;++o)for(var s,u=e[o],c=n[o],l=u.length,h=a[o]=new Array(l),d=0;d<l;++d)(s=u[d]||c[d])&&(h[d]=s);for(;o<i;++o)a[o]=e[o];return new xe(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],a=r.length-1,o=r[a];0<=--a;)(i=r[a])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||te;for(var e=this._groups,i=e.length,r=new Array(i),a=0;a<i;++a){for(var o,s=e[a],u=s.length,c=r[a]=new Array(u),l=0;l<u;++l)(o=s[l])&&(c[l]=o);c.sort(t)}return new xe(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,a=e[n],o=0,s=a.length;o<s;++o)(r=a[o])&&t.call(r,r.__data__,o,a);return this},attr:function(t,e){var n=Lt(t);if(arguments.length<2){t=this.node();return n.local?t.getAttributeNS(n.space,n.local):t.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,i){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):ne(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=ie(t+"");if(arguments.length<2){for(var i=re(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?oe:se)(this,t)}}:e?function(t){return function(){oe(this,t)}}:function(t){return function(){se(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?ue:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ce:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(le)},lower:function(){return this.each(he)},append:function(t){var e="function"==typeof t?t:It(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:It(t),i=null==e?de:"function"==typeof e?e:Ft(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(fe)},clone:function(t){return this.select(t?pe:ge)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,a=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),o=a.length;if(!(arguments.length<2)){for(s=e?be:ve,i=0;i<o;++i)this.each(s(a[i],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(i=0,u=s[c];i<o;++i)if((r=a[i]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return _e(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return _e(this,t,e)}})(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],a=0,o=r.length;a<o;++a)(i=r[a])&&(yield i)}};var Te=0;function Ae(){return new Me}function Me(){this._="@"+(++Te).toString(36)}function Se(t){for(var e;e=t.sourceEvent;)t=e;return t}function ke(t,e){if(t=Se(t),e=void 0===e?t.currentTarget:e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ee={passive:!(Me.prototype=Ae.prototype={constructor:Me,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}})},Ce={capture:!0,passive:!1};function Re(t){t.stopImmediatePropagation()}function De(t){t.preventDefault(),t.stopImmediatePropagation()}function Oe(t){var e=t.document.documentElement,t=we(t).on("dragstart.drag",De,Ce);"onselectstart"in e?t.on("selectstart.drag",De,Ce):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Pe(t,e){var n=t.document.documentElement,i=we(t).on("dragstart.drag",null);e&&(i.on("click.drag",De,Ce),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Le=t=>()=>t;function Ne(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:a,x:o,y:s,dx:u,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}function ze(t){return!t.ctrlKey&&!t.button}function Ie(){return this.parentNode}function $e(t,e){return null==e?{x:t.x,y:t.y}:e}function Fe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Be(t,e,n){(t.prototype=e.prototype=n).constructor=t}function Xe(t,e){var n,i=Object.create(t.prototype);for(n in e)i[n]=e[n];return i}function je(){}Ne.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Ye=1/.7,Ge="\\s*([+-]?\\d+)\\s*",Ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",He=/^#([0-9a-f]{3,8})$/,qe=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),We=new RegExp(`^rgb\\(${Ue},${Ue},${Ue}\\)$`),Ze=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${Ve}\\)$`),Je=new RegExp(`^rgba\\(${Ue},${Ue},${Ue},${Ve}\\)$`),Ke=new RegExp(`^hsl\\(${Ve},${Ue},${Ue}\\)$`),Qe=new RegExp(`^hsla\\(${Ve},${Ue},${Ue},${Ve}\\)$`),tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function en(){return this.rgb().formatHex()}function nn(){return this.rgb().formatRgb()}function rn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=He.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?an(e):3===n?new cn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?on(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?on(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=qe.exec(t))?new cn(e[1],e[2],e[3],1):(e=We.exec(t))?new cn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ze.exec(t))?on(e[1],e[2],e[3],e[4]):(e=Je.exec(t))?on(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ke.exec(t))?pn(e[1],e[2]/100,e[3]/100,1):(e=Qe.exec(t))?pn(e[1],e[2]/100,e[3]/100,e[4]):tn.hasOwnProperty(t)?an(tn[t]):"transparent"===t?new cn(NaN,NaN,NaN,0):null}function an(t){return new cn(t>>16&255,t>>8&255,255&t,1)}function on(t,e,n,i){return new cn(t=i<=0?e=n=NaN:t,e,n,i)}function sn(t){return(t=!(t instanceof je)?rn(t):t)?new cn((t=t.rgb()).r,t.g,t.b,t.opacity):new cn}function un(t,e,n,i){return 1===arguments.length?sn(t):new cn(t,e,n,null==i?1:i)}function cn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function ln(){return`#${gn(this.r)}${gn(this.g)}${gn(this.b)}`}function hn(){var t=dn(this.opacity);return`${1===t?"rgb(":"rgba("}${fn(this.r)}, ${fn(this.g)}, ${fn(this.b)}${1===t?")":`, ${t})`}`}function dn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gn(t){return((t=fn(t))<16?"0":"")+t.toString(16)}function pn(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new _n(t,e,n,i)}function vn(t){if(t instanceof _n)return new _n(t.h,t.s,t.l,t.opacity);if(!(t=!(t instanceof je)?rn(t):t))return new _n;if(t instanceof _n)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,u=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=u<.5?a+r:2-a-r,o*=60):s=0<u&&u<1?0:o,new _n(o,s,u,t.opacity)}function bn(t,e,n,i){return 1===arguments.length?vn(t):new _n(t,e,n,null==i?1:i)}function _n(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function yn(t){return(t=(t||0)%360)<0?t+360:t}function xn(t){return Math.max(0,Math.min(1,t||0))}function mn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Be(je,rn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:en,formatHex:en,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return vn(this).formatHsl()},formatRgb:nn,toString:nn}),Be(cn,un,Xe(je,{brighter(t){return t=null==t?Ye:Math.pow(Ye,t),new cn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new cn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new cn(fn(this.r),fn(this.g),fn(this.b),dn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ln,formatHex:ln,formatHex8:function(){return`#${gn(this.r)}${gn(this.g)}${gn(this.b)}${gn(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:hn,toString:hn})),Be(_n,bn,Xe(je,{brighter(t){return t=null==t?Ye:Math.pow(Ye,t),new _n(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new _n(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*e,n=2*n-e;return new cn(mn(240<=t?t-240:120+t,n,e),mn(t,n,e),mn(t<120?240+t:t-120,n,e),this.opacity)},clamp(){return new _n(yn(this.h),xn(this.s),xn(this.l),dn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){var t=dn(this.opacity);return`${1===t?"hsl(":"hsla("}${yn(this.h)}, ${100*xn(this.s)}%, ${100*xn(this.l)}%${1===t?")":`, ${t})`}`}}));const wn=Math.PI/180,Tn=180/Math.PI,An=.96422,Mn=1,Sn=.82521,kn=4/29,En=6/29,Cn=3*En*En,Rn=En*En*En;function Dn(t){if(t instanceof Pn)return new Pn(t.l,t.a,t.b,t.opacity);if(t instanceof Bn)return Xn(t);var e,n,i=In((t=!(t instanceof cn)?sn(t):t).r),r=In(t.g),a=In(t.b),o=Ln((.2225045*i+.7168786*r+.0606169*a)/Mn);return i===r&&r===a?e=n=o:(e=Ln((.4360747*i+.3850649*r+.1430804*a)/An),n=Ln((.0139322*i+.0971045*r+.7141733*a)/Sn)),new Pn(116*o-16,500*(e-o),200*(o-n),t.opacity)}function On(t,e,n,i){return 1===arguments.length?Dn(t):new Pn(t,e,n,null==i?1:i)}function Pn(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Ln(t){return t>Rn?Math.pow(t,1/3):t/Cn+kn}function Nn(t){return t>En?t*t*t:Cn*(t-kn)}function zn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function In(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $n(t){if(t instanceof Bn)return new Bn(t.h,t.c,t.l,t.opacity);if(0===(t=!(t instanceof Pn)?Dn(t):t).a&&0===t.b)return new Bn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Tn;return new Bn(e<0?360+e:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Fn(t,e,n,i){return 1===arguments.length?$n(t):new Bn(t,e,n,null==i?1:i)}function Bn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Xn(t){if(isNaN(t.h))return new Pn(t.l,0,0,t.opacity);var e=t.h*wn;return new Pn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Be(Pn,On,Xe(je,{brighter(t){return new Pn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new Pn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new cn(zn(3.1338561*(e=An*Nn(e))-1.6168667*(t=Mn*Nn(t))-.4906146*(n=Sn*Nn(n))),zn(-.9787684*e+1.9161415*t+.033454*n),zn(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Be(Bn,Fn,Xe(je,{brighter(t){return new Bn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new Bn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return Xn(this).rgb()}}));var jn=1.78277,Yn=-.29227,Gn=-.90649,Vn=1.97294,Un=Vn*Gn,Hn=Vn*jn,qn=jn*Yn- -.14861*Gn;function Wn(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Zn)return new Zn(t.h,t.s,t.l,t.opacity);var e=(t=!(t instanceof cn)?sn(t):t).r/255,n=t.g/255,i=t.b/255,r=(qn*i+Un*e-Hn*n)/(qn+Un-Hn),e=i-r,i=(Vn*(n-r)-Yn*e)/Gn,n=Math.sqrt(i*i+e*e)/(Vn*r*(1-r)),e=n?Math.atan2(i,e)*Tn-120:NaN;return new Zn(e<0?e+360:e,n,r,t.opacity)}(t):new Zn(t,e,n,null==i?1:i)}function Zn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Jn(t,e,n,i,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*i+o*r)/6}function Kn(o){var s=o.length-1;return function(t){var e=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),n=o[e],i=o[e+1],r=0<e?o[e-1]:2*n-i,a=e<s-1?o[e+2]:2*i-n;return Jn((t-e/s)*s,r,n,i,a)}}function Qn(o){var s=o.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*s),n=o[(e+s-1)%s],i=o[e%s],r=o[(e+1)%s],a=o[(e+2)%s];return Jn((t-e/s)*s,n,i,r,a)}}Be(Zn,Wn,Xe(je,{brighter(t){return t=null==t?Ye:Math.pow(Ye,t),new Zn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Zn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*wn,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),t=Math.sin(t);return new cn(255*(e+n*(-.14861*i+jn*t)),255*(e+n*(Yn*i+Gn*t)),255*(e+Vn*i*n),this.opacity)}}));var ti=t=>()=>t;function ei(e,n){return function(t){return e+t*n}}function ni(t,e){var n=e-t;return n?ei(t,180<n||n<-180?n-360*Math.round(n/360):n):ti(isNaN(t)?e:t)}function ii(a){return 1==(a=+a)?ri:function(t,e){return e-t?(n=t,i=e,r=a,n=Math.pow(n,r),i=Math.pow(i,r)-n,r=1/r,function(t){return Math.pow(n+t*i,r)}):ti(isNaN(t)?e:t);var n,i,r}}function ri(t,e){var n=e-t;return n?ei(t,n):ti(isNaN(t)?e:t)}var ai=function t(e){var o=ii(e);function n(e,t){var n=o((e=un(e)).r,(t=un(t)).r),i=o(e.g,t.g),r=o(e.b,t.b),a=ri(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=r(t),e.opacity=a(t),e+""}}return n.gamma=t,n}(1);function oi(s){return function(t){for(var e,n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),o=0;o<n;++o)e=un(t[o]),i[o]=e.r||0,r[o]=e.g||0,a[o]=e.b||0;return i=s(i),r=s(r),a=s(a),e.opacity=1,function(t){return e.r=i(t),e.g=r(t),e.b=a(t),e+""}}}var si=oi(Kn),ui=oi(Qn);function ci(e,n){n=n||[];var i,r=e?Math.min(n.length,e.length):0,a=n.slice();return function(t){for(i=0;i<r;++i)a[i]=e[i]*(1-t)+n[i]*t;return a}}function li(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hi(t,e){for(var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),o=0;o<i;++o)r[o]=_i(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(t){for(o=0;o<i;++o)a[o]=r[o](t);return a}}function di(e,n){var i=new Date;return e=+e,n=+n,function(t){return i.setTime(e*(1-t)+n*t),i}}function fi(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function gi(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),e=null===e||"object"!=typeof e?{}:e)n in t?i[n]=_i(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var pi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vi=new RegExp(pi.source,"g");function bi(t,i){var e,n,r,a,o,s=pi.lastIndex=vi.lastIndex=0,u=-1,c=[],l=[];for(t+="",i+="";(e=pi.exec(t))&&(n=vi.exec(i));)(r=n.index)>s&&(r=i.slice(s,r),c[u]?c[u]+=r:c[++u]=r),(e=e[0])===(n=n[0])?c[u]?c[u]+=n:c[++u]=n:(c[++u]=null,l.push({i:u,x:fi(e,n)})),s=vi.lastIndex;return s<i.length&&(r=i.slice(s),c[u]?c[u]+=r:c[++u]=r),c.length<2?l[0]?(o=l[0].x,function(t){return o(t)+""}):(a=i,function(){return a}):(i=l.length,function(t){for(var e,n=0;n<i;++n)c[(e=l[n]).i]=e.x(t);return c.join("")})}function _i(t,e){var n=typeof e;return null==e||"boolean"==n?ti(e):("number"==n?fi:"string"==n?(n=rn(e))?(e=n,ai):bi:e instanceof rn?ai:e instanceof Date?di:li(e)?ci:Array.isArray(e)?hi:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?gi:fi)(t,e)}function yi(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var xi,mi=180/Math.PI,wi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ti(t,e,n,i,r,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,u/=s),t*i<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*mi,skewX:Math.atan(u)*mi,scaleX:o,scaleY:s}}function Ai(h,d,f,g){function p(t){return t.length?t.pop()+" ":""}return function(t,e){var n,i,r,a,o,s,u,c=[],l=[];return t=h(t),e=h(e),n=t.translateX,i=t.translateY,r=e.translateX,a=e.translateY,o=c,s=l,n!==r||i!==a?(u=o.push("translate(",null,d,null,f),s.push({i:u-4,x:fi(n,r)},{i:u-2,x:fi(i,a)})):(r||a)&&o.push("translate("+r+d+a+f),s=t.rotate,n=e.rotate,u=c,s!==n?(180<s-n?n+=360:180<n-s&&(s+=360),l.push({i:u.push(p(u)+"rotate(",null,g)-2,x:fi(s,n)})):n&&u.push(p(u)+"rotate("+n+g),i=t.skewX,o=e.skewX,r=c,i!==o?l.push({i:r.push(p(r)+"skewX(",null,g)-2,x:fi(i,o)}):o&&r.push(p(r)+"skewX("+o+g),a=t.scaleX,s=t.scaleY,u=e.scaleX,n=e.scaleY,i=c,r=l,a!==u||s!==n?(o=i.push(p(i)+"scale(",null,",",null,")"),r.push({i:o-4,x:fi(a,u)},{i:o-2,x:fi(s,n)})):1===u&&1===n||i.push(p(i)+"scale("+u+","+n+")"),t=e=null,function(t){for(var e,n=-1,i=l.length;++n<i;)c[(e=l[n]).i]=e.x(t);return c.join("")}}}var Mi=Ai(function(t){t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return t.isIdentity?wi:Ti(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Si=Ai(function(t){return null==t?wi:((xi=xi||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=xi.transform.baseVal.consolidate())?Ti((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):wi)},", ",")",")");function ki(t){return((t=Math.exp(t))+1/t)/2}var Ei=function n(d,f,g){function t(t,e){var i,r,a,n,o=t[0],s=t[1],u=t[2],c=e[0],t=e[1],e=e[2],l=c-o,h=t-s,c=l*l+h*h;return(n=c<1e-12?(a=Math.log(e/u)/d,function(t){return[o+t*l,s+t*h,u*Math.exp(d*t*a)]}):(i=Math.sqrt(c),t=(e*e-u*u+g*c)/(2*u*f*i),n=(e*e-u*u-g*c)/(2*e*f*i),r=Math.log(Math.sqrt(t*t+1)-t),a=(Math.log(Math.sqrt(n*n+1)-n)-r)/d,function(t){var e=t*a,n=ki(r),t=u/(f*i)*(n*(t=d*e+r,((t=Math.exp(2*t))-1)/(t+1))-(t=r,((t=Math.exp(t))-1/t)/2));return[o+t*l,s+t*h,u*n/ki(d*e+r)]})).duration=1e3*a*d/Math.SQRT2,n}return t.rho=function(t){var e=Math.max(.001,+t),t=e*e;return n(e,t,t*t)},t}(Math.SQRT2,2,4);function Ci(o){return function(e,t){var n=o((e=bn(e)).h,(t=bn(t)).h),i=ri(e.s,t.s),r=ri(e.l,t.l),a=ri(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=i(t),e.l=r(t),e.opacity=a(t),e+""}}}var Ri=Ci(ni),Di=Ci(ri);function Oi(o){return function(e,t){var n=o((e=Fn(e)).h,(t=Fn(t)).h),i=ri(e.c,t.c),r=ri(e.l,t.l),a=ri(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=i(t),e.l=r(t),e.opacity=a(t),e+""}}}var Pi=Oi(ni),Li=Oi(ri);function Ni(s){return function t(o){function e(e,t){var n=s((e=Wn(e)).h,(t=Wn(t)).h),i=ri(e.s,t.s),r=ri(e.l,t.l),a=ri(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=i(t),e.l=r(Math.pow(t,o)),e.opacity=a(t),e+""}}return o=+o,e.gamma=t,e}(1)}var zi=Ni(ni),Ii=Ni(ri);function $i(t,e){void 0===e&&(e=t,t=_i);for(var n=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);n<i;)a[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return a[e](t-e)}}var Fi,Bi,Xi=0,ji=0,Yi=0,Gi=1e3,Vi=0,Ui=0,Hi=0,qi="object"==typeof performance&&performance.now?performance:Date,Wi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zi(){return Ui||(Wi(Ji),Ui=qi.now()+Hi)}function Ji(){Ui=0}function Ki(){this._call=this._time=this._next=null}function Qi(t,e,n){var i=new Ki;return i.restart(t,e,n),i}function tr(){Zi(),++Xi;for(var t,e=Fi;e;)0<=(t=Ui-e._time)&&e._call.call(void 0,t),e=e._next;--Xi}function er(){Ui=(Vi=qi.now())+Hi,Xi=ji=0;try{tr()}finally{Xi=0,function(){for(var t,e,n=Fi,i=1/0;n;)n=n._call?(i>n._time&&(i=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:Fi=e);Bi=t,ir(i)}(),Ui=0}}function nr(){var t=qi.now(),e=t-Vi;Gi<e&&(Hi-=e,Vi=t)}function ir(t){Xi||(ji=ji&&clearTimeout(ji),24<t-Ui?(t<1/0&&(ji=setTimeout(er,t-qi.now()-Hi)),Yi=Yi&&clearInterval(Yi)):(Yi||(Vi=qi.now(),Yi=setInterval(nr,Gi)),Xi=1,Wi(er)))}function rr(e,n,t){var i=new Ki;return i.restart(t=>{i.stop(),e(t+n)},n=null==n?0:+n,t),i}Ki.prototype=Qi.prototype={constructor:Ki,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Zi():+n)+(null==e?0:+e),this._next||Bi===this||(Bi?Bi._next=this:Fi=this,Bi=this),this._call=t,this._time=n,ir()},stop:function(){this._call&&(this._call=null,this._time=1/0,ir())}};var ar=Ct("start","end","cancel","interrupt"),or=[],sr=0,ur=1,cr=2,lr=3,hr=4,dr=5,fr=6;function gr(t,e,n,i,r,a){var o,s,u,c,l,h=t.__transition;if(h){if(n in h)return}else t.__transition={};function d(t){var e,n,i,r;if(u.state!==ur)return g();for(e in l)if((r=l[e]).name===u.name){if(r.state===lr)return rr(d);r.state===hr?(r.state=fr,r.timer.stop(),r.on.call("interrupt",o,o.__data__,r.index,r.group),delete l[e]):+e<s&&(r.state=fr,r.timer.stop(),r.on.call("cancel",o,o.__data__,r.index,r.group),delete l[e])}if(rr(function(){u.state===lr&&(u.state=hr,u.timer.restart(f,u.delay,u.time),f(t))}),u.state=cr,u.on.call("start",o,o.__data__,u.index,u.group),u.state===cr){for(u.state=lr,c=new Array(i=u.tween.length),e=0,n=-1;e<i;++e)(r=u.tween[e].value.call(o,o.__data__,u.index,u.group))&&(c[++n]=r);c.length=n+1}}function f(t){for(var e=t<u.duration?u.ease.call(null,t/u.duration):(u.timer.restart(g),u.state=dr,1),n=-1,i=c.length;++n<i;)c[n].call(o,e);u.state===dr&&(u.on.call("end",o,o.__data__,u.index,u.group),g())}function g(){for(var t in u.state=fr,u.timer.stop(),delete l[s],l)return;delete o.__transition}o=t,s=n,u={name:e,index:i,group:r,on:ar,tween:or,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:sr},((l=o.__transition)[s]=u).timer=Qi(function(t){u.state=ur,u.timer.restart(d,u.delay,u.time),u.delay<=t&&d(t-u.delay)},0,u.time)}function pr(t,e){e=br(t,e);if(e.state>sr)throw new Error("too late; already scheduled");return e}function vr(t,e){e=br(t,e);if(e.state>lr)throw new Error("too late; already running");return e}function br(t,e){t=t.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function _r(t,e){var n,i,r,a=t.__transition,o=!0;if(a){for(r in e=null==e?null:e+"",a)(n=a[r]).name===e?(i=n.state>cr&&n.state<dr,n.state=fr,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[r]):o=!1;o&&delete t.__transition}}function yr(t,e,n){var i=t._id;return t.each(function(){var t=vr(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return br(t,i).value[e]}}function xr(t,e){var n;return("number"==typeof e?fi:e instanceof rn?ai:(n=rn(e))?(e=n,ai):bi)(t,e)}function mr(i,r){var a,o;function t(){var e,n,t=r.apply(this,arguments);return a=t!==o?(o=t)&&(e=i,n=t,function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}):a}return t._value=r,t}function wr(i,r){var a,o;function t(){var e,n,t=r.apply(this,arguments);return a=t!==o?(o=t)&&(e=i,n=t,function(t){this.setAttribute(e,n.call(this,t))}):a}return t._value=r,t}var Tr=me.prototype.constructor;function Ar(t){return function(){this.style.removeProperty(t)}}var Mr=0;function Sr(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function kr(t){return me().transition(t)}var Er=me.prototype;function Cr(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Rr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Sr.prototype=kr.prototype={constructor:Sr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ft(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s,u,c=i[o],l=c.length,h=a[o]=new Array(l),d=0;d<l;++d)(s=c[d])&&(u=t.call(s,s.__data__,d,c))&&("__data__"in s&&(u.__data__=s.__data__),h[d]=u,gr(h[d],e,n,d,h,br(s,n)));return new Sr(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=jt(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var u,c=i[s],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var d,f=t.call(u,u.__data__,h,c),g=br(u,n),p=0,v=f.length;p<v;++p)(d=f[p])&&gr(d,e,n,p,f,g);a.push(f),o.push(u)}return new Sr(a,o,e,n)},selectChild:Er.selectChild,selectChildren:Er.selectChildren,filter:function(t){"function"!=typeof t&&(t=Yt(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a,o=e[r],s=o.length,u=i[r]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&u.push(a);return new Sr(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,t=n.length,r=Math.min(i,t),a=new Array(i),o=0;o<r;++o)for(var s,u=e[o],c=n[o],l=u.length,h=a[o]=new Array(l),d=0;d<l;++d)(s=u[d]||c[d])&&(h[d]=s);for(;o<i;++o)a[o]=e[o];return new Sr(a,this._parents,this._name,this._id)},selection:function(){return new Tr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=++Mr,i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],u=s.length,c=0;c<u;++c)(o=s[c])&&gr(o,t,n,c,s,{time:(o=br(o,e)).time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease});return new Sr(i,this._parents,t,n)},call:Er.call,nodes:Er.nodes,node:Er.node,size:Er.size,empty:Er.empty,each:Er.each,on:function(t,e){var n,i,r,a,o,s,u=this._id;return arguments.length<2?br(this.node(),u).on.on(t):this.each((n=u,r=e,s=((i=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return!(t=0<=e?t.slice(0,e):t)||"start"===t})?pr:vr,function(){var t=s(this,n),e=t.on;e!==a&&(o=(a=e).copy()).on(i,r),t.on=o}))},attr:function(t,e){var n=Lt(t),i="transform"===n?Si:xr;return this.attrTween(t,"function"==typeof e?(n.local?function(i,r,a){var o,s,u;return function(){var t,e,n=a(this);if(null!=n)return(t=this.getAttributeNS(i.space,i.local))===(e=n+"")?null:t===o&&e===s?u:(s=e,u=r(o=t,n));this.removeAttributeNS(i.space,i.local)}}:function(i,r,a){var o,s,u;return function(){var t,e,n=a(this);if(null!=n)return(t=this.getAttribute(i))===(e=n+"")?null:t===o&&e===s?u:(s=e,u=r(o=t,n));this.removeAttribute(i)}})(n,i,yr(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,i){var r,a,o=i+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===o?null:t===r?a:a=n(r=t,i)}}:function(e,n,i){var r,a,o=i+"";return function(){var t=this.getAttribute(e);return t===o?null:t===r?a:a=n(r=t,i)}})(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;t=Lt(t);return this.tween(n,(t.local?mr:wr)(t,e))},style:function(t,e,n){var i,r,a,o,s,u,c,l,h,d,f,g,p,v,b,_,y,x,m,w,T,A,M,S,k,E="transform"==(t+="")?Mi:xr;return null==e?this.styleTween(t,(T=t,A=E,function(){var t=ne(this,T),e=(this.style.removeProperty(T),ne(this,T));return t===e?null:t===M&&e===S?k:k=A(M=t,S=e)})).on("end.style."+t,Ar(t)):"function"==typeof e?this.styleTween(t,(_=E,y=yr(this,"style."+(b=t),e),function(){var t=ne(this,b),e=y(this),n=e+"";return null==e&&(this.style.removeProperty(b),n=e=ne(this,b)),t===n?null:t===x&&n===m?w:(m=n,w=_(x=t,e))})).each((c=this._id,v="end."+(p="style."+(l=t)),function(){var t=vr(this,c),e=t.on,n=null==t.value[p]?g=g||Ar(l):void 0;e===h&&f===n||(d=(h=e).copy()).on(v,f=n),t.on=d})):this.styleTween(t,(i=t,r=E,u=(a=e)+"",function(){var t=ne(this,i);return t===u?null:t===o?s:s=r(o=t,a)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r,a,o,s,u,i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,(r=t,o=null==n?"":n,c._value=a=e,c));function c(){var e,n,i,t=a.apply(this,arguments);return s=t!==u?(u=t)&&(e=r,n=t,i=o,function(t){this.style.setProperty(e,n.call(this,t),i)}):s}},text:function(t){return this.tween("text","function"==typeof t?(n=yr(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},textTween:function(t){var n,i,r,e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,(a._value=n=t,a));function a(){var e,t=n.apply(this,arguments);return i=t!==r?(r=t)&&(e=t,function(t){this.textContent=e.call(this,t)}):i}},remove:function(){return this.on("end.remove",(n=this._id,function(){var t,e=this.parentNode;for(t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=br(this.node(),n).tween,a=0,o=r.length;a<o;++a)if((i=r[a]).name===t)return i.value;return null}return this.each((null==e?function(r,a){var o,s;return function(){var t=vr(this,r),e=t.tween;if(e!==o)for(var n=0,i=(s=o=e).length;n<i;++n)if(s[n].name===a){(s=s.slice()).splice(n,1);break}t.tween=s}}:function(a,o,s){var u,c;if("function"!=typeof s)throw new Error;return function(){var t=vr(this,a),e=t.tween;if(e!==u){c=(u=e).slice();for(var n={name:o,value:s},i=0,r=c.length;i<r;++i)if(c[i].name===o){c[i]=n;break}i===r&&c.push(n)}t.tween=c}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){pr(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){pr(this,t).delay=e}})(e,t)):br(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){vr(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){vr(this,t).duration=e}})(e,t)):br(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){vr(this,t).ease=e}}(e,t)):br(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each((e=this._id,n=t,function(){var t=n.apply(this,arguments);if("function"!=typeof t)throw new Error;vr(this,e).ease=t}));var e,n},end:function(){var r,a,o=this,s=o._id,u=o.size();return new Promise(function(t,e){var n={value:e},i={value:function(){0==--u&&t()}};o.each(function(){var t=vr(this,s),e=t.on;e!==r&&((a=(r=e).copy())._.cancel.push(n),a._.interrupt.push(n),a._.end.push(i)),t.on=a}),0===u&&t()})},[Symbol.iterator]:Er[Symbol.iterator]};var Dr=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Or=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Pr=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Lr=Math.PI,Nr=Lr/2;function zr(t){return(1-Math.cos(Lr*t))/2}function Ir(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function $r(t){return((t*=2)<=1?Ir(1-t):2-Ir(t-1))/2}function Fr(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Br=7.5625;function Xr(t){return(t=+t)<4/11?Br*t*t:t<8/11?Br*(t-=6/11)*t+.75:t<10/11?Br*(t-=9/11)*t+.9375:Br*(t-=21/22)*t+63/64}var jr=1.70158,Yr=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(jr),Gr=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(jr),Vr=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(jr),Ur=2*Math.PI,Hr=function e(n,i){var r=Math.asin(1/(n=Math.max(1,n)))*(i/=Ur);function t(t){return n*Ir(- --t)*Math.sin((r-t)/i)}return t.amplitude=function(t){return e(t,i*Ur)},t.period=function(t){return e(n,t)},t}(1,.3),qr=function e(n,i){var r=Math.asin(1/(n=Math.max(1,n)))*(i/=Ur);function t(t){return 1-n*Ir(t=+t)*Math.sin((t+r)/i)}return t.amplitude=function(t){return e(t,i*Ur)},t.period=function(t){return e(n,t)},t}(1,.3),Wr=function e(n,i){var r=Math.asin(1/(n=Math.max(1,n)))*(i/=Ur);function t(t){return((t=2*t-1)<0?n*Ir(-t)*Math.sin((r-t)/i):2-n*Ir(t)*Math.sin((r+t)/i))/2}return t.amplitude=function(t){return e(t,i*Ur)},t.period=function(t){return e(n,t)},t}(1,.3),Zr={time:null,delay:0,duration:250,ease:Rr};me.prototype.interrupt=function(t){return this.each(function(){_r(this,t)})},me.prototype.transition=function(t){var e,n;t=t instanceof Sr?(e=t._id,t._name):(e=++Mr,(n=Zr).time=Zi(),null==t?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o,s=i[a],u=s.length,c=0;c<u;++c)(o=s[c])&&gr(o,t,e,c,s,n||function(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}(o,e));return new Sr(i,this._parents,t,e)};var Jr=[null],Kr=t=>()=>t;function Qr(t,{sourceEvent:e,target:n,selection:i,mode:r,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function ta(t){t.preventDefault(),t.stopImmediatePropagation()}var ea={name:"drag"},na={name:"space"},ia={name:"handle"},ra={name:"center"};const{abs:aa,max:oa,min:sa}=Math;function ua(t){return[+t[0],+t[1]]}function ca(t){return[ua(t[0]),ua(t[1])]}var la={name:"x",handles:["w","e"].map(_a),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ha={name:"y",handles:["n","s"].map(_a),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},da={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(_a),input:function(t){return null==t?null:ca(t)},output:function(t){return t}},fa={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ga={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},pa={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},va={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ba={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function _a(t){return{type:t}}function ya(t){return!t.ctrlKey&&!t.button}function xa(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function ma(){return navigator.maxTouchPoints||"ontouchstart"in this}function wa(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ta(N){var z,e=xa,I=ya,n=ma,$=!0,r=Ct("start","brush","end"),i=6;function a(t){var e=t.property("__brush",l).selectAll(".overlay").data([_a("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",fa.overlay).merge(e).each(function(){var t=wa(this).extent;we(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([_a("selection")]).enter().append("rect").attr("class","selection").attr("cursor",fa.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");e=t.selectAll(".handle").data(N.handles,function(t){return t.type});e.exit().remove(),e.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return fa[t.type]}),t.each(F).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",s).filter(n).on("touchstart.brush",s).on("touchmove.brush",u).on("touchend.brush touchcancel.brush",c).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function F(){var t=we(this),e=wa(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-i/2:e[0][0]-i/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-i/2:e[0][1]-i/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+i:i}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+i:i})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function B(t,e,n){var i=t.__brush.emitter;return!i||n&&i.clean?new o(t,e,n):i}function o(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function s(t){if((!z||t.touches)&&I.apply(this,arguments)){var r,a,o,s,n,u,c,l=this,h=t.target.__data__.type,d="selection"===($&&t.metaKey?h="overlay":h)?ea:$&&t.altKey?ra:ia,f=N===ha?null:va[h],g=N===la?null:ba[h],p=wa(l),e=p.extent,v=p.selection,b=e[0][0],_=e[0][1],y=e[1][0],x=e[1][1],m=0,w=0,i=f&&g&&$&&t.shiftKey,T=Array.from(t.touches||[t],t=>{var e=t.identifier;return(t=ke(t,l)).point0=t.slice(),t.identifier=e,t});_r(l);var A=B(l,arguments,!0).beforestart();if("overlay"===h){v&&(n=!0);const z=[T[0],T[1]||T[0]];p.selection=v=[[r=N===ha?b:sa(z[0][0],z[1][0]),a=N===la?_:sa(z[0][1],z[1][1])],[o=N===ha?y:oa(z[0][0],z[1][0]),s=N===la?x:oa(z[0][1],z[1][1])]],1<T.length&&P(t)}else r=v[0][0],a=v[0][1],o=v[1][0],s=v[1][1];var M,S=r,k=a,E=o,C=s,R=we(l).attr("pointer-events","none"),D=R.selectAll(".overlay").attr("cursor",fa[h]);t.touches?(A.moved=O,A.ended=L):(M=we(t.view).on("mousemove.brush",O,!0).on("mouseup.brush",L,!0),$&&M.on("keydown.brush",function(t){switch(t.keyCode){case 16:i=f&&g;break;case 18:d===ia&&(f&&(o=E-m*f,r=S+m*f),g&&(s=C-w*g,a=k+w*g),d=ra,P(t));break;case 32:d!==ia&&d!==ra||(f<0?o=E-m:0<f&&(r=S-m),g<0?s=C-w:0<g&&(a=k-w),d=na,D.attr("cursor",fa.selection),P(t));break;default:return}ta(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:i&&(u=c=i=!1,P(t));break;case 18:d===ra&&(f<0?o=E:0<f&&(r=S),g<0?s=C:0<g&&(a=k),d=ia,P(t));break;case 32:d===na&&(d=t.altKey?(f&&(o=E-m*f,r=S+m*f),g&&(s=C-w*g,a=k+w*g),ra):(f<0?o=E:0<f&&(r=S),g<0?s=C:0<g&&(a=k),ia),D.attr("cursor",fa[h]),P(t));break;default:return}ta(t)},!0),Oe(t.view)),F.call(l),A.start(t,d.name)}function O(t){for(const e of t.changedTouches||[t])for(const t of T)t.identifier===e.identifier&&(t.cur=ke(e,l));if(i&&!u&&!c&&1===T.length){const t=T[0];aa(t.cur[0]-t[0])>aa(t.cur[1]-t[1])?c=!0:u=!0}for(const t of T)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);n=!0,ta(t),P(t)}function P(t){var e,n=T[0],i=n.point0;switch(m=n[0]-i[0],w=n[1]-i[1],d){case na:case ea:f&&(m=oa(b-r,sa(y-o,m)),S=r+m,E=o+m),g&&(w=oa(_-a,sa(x-s,w)),k=a+w,C=s+w);break;case ia:T[1]?(f&&(S=oa(b,sa(y,T[0][0])),E=oa(b,sa(y,T[1][0])),f=1),g&&(k=oa(_,sa(x,T[0][1])),C=oa(_,sa(x,T[1][1])),g=1)):(f<0?(m=oa(b-r,sa(y-r,m)),S=r+m,E=o):0<f&&(m=oa(b-o,sa(y-o,m)),S=r,E=o+m),g<0?(w=oa(_-a,sa(x-a,w)),k=a+w,C=s):0<g&&(w=oa(_-s,sa(x-s,w)),k=a,C=s+w));break;case ra:f&&(S=oa(b,sa(y,r-m*f)),E=oa(b,sa(y,o+m*f))),g&&(k=oa(_,sa(x,a-w*g)),C=oa(_,sa(x,s+w*g)))}E<S&&(f*=-1,e=r,r=o,o=e,e=S,S=E,E=e,h in ga&&D.attr("cursor",fa[h=ga[h]])),C<k&&(g*=-1,e=a,a=s,s=e,e=k,k=C,C=e,h in pa&&D.attr("cursor",fa[h=pa[h]])),p.selection&&(v=p.selection),u&&(S=v[0][0],E=v[1][0]),c&&(k=v[0][1],C=v[1][1]),v[0][0]===S&&v[0][1]===k&&v[1][0]===E&&v[1][1]===C||(p.selection=[[S,k],[E,C]],F.call(l),A.brush(t,d.name))}function L(t){if(t.stopImmediatePropagation(),t.touches){if(t.touches.length)return;z&&clearTimeout(z),z=setTimeout(function(){z=null},500)}else Pe(t.view,n),M.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);R.attr("pointer-events","all"),D.attr("cursor",fa.overlay),(v=p.selection?p.selection:v)[0][0]!==v[1][0]&&v[0][1]!==v[1][1]||(p.selection=null,F.call(l)),A.end(t,d.name)}}function u(t){B(this,arguments).moved(t)}function c(t){B(this,arguments).ended(t)}function l(){var t=this.__brush||{selection:null};return t.extent=ca(e.apply(this,arguments)),t.dim=N,t}return a.move=function(t,s,r){t.tween?t.on("start.brush",function(t){B(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){B(this,arguments).end(t)}).tween("brush",function(){var e=this,n=e.__brush,i=B(e,arguments),t=n.selection,r=N.input("function"==typeof s?s.apply(this,arguments):s,n.extent),a=_i(t,r);function o(t){n.selection=1===t&&null===r?null:a(t),F.call(e),i.brush()}return null!==t&&null!==r?o:o(1)}):t.each(function(){var t=this,e=arguments,n=t.__brush,i=N.input("function"==typeof s?s.apply(t,e):s,n.extent),e=B(t,e).beforestart();_r(t),n.selection=null===i?null:i,F.call(t),e.start(r).brush(r).end(r)})},a.clear=function(t,e){a.move(t,null,e)},o.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(t,e,n){var i=we(this.that).datum();r.call(t,this.that,new Qr(t,{sourceEvent:e,target:a,selection:N.output(this.state.selection),mode:n,dispatch:r}),i)}},a.extent=function(t){return arguments.length?(e="function"==typeof t?t:Kr(ca(t)),a):e},a.filter=function(t){return arguments.length?(I="function"==typeof t?t:Kr(!!t),a):I},a.touchable=function(t){return arguments.length?(n="function"==typeof t?t:Kr(!!t),a):n},a.handleSize=function(t){return arguments.length?(i=+t,a):i},a.keyModifiers=function(t){return arguments.length?($=!!t,a):$},a.on=function(){var t=r.on.apply(r,arguments);return t===r?a:t},a}var Aa=Math.abs,Ma=Math.cos,Sa=Math.sin,ka=Math.PI,Ea=ka/2,Ca=2*ka,Ra=Math.max;function Da(n,t){return Array.from({length:t-n},(t,e)=>n+e)}function Oa(c,l){var h=0,d=null,f=null,e=null;function i(i){var t,r=i.length,a=new Array(r),n=Da(0,r),o=new Array(r*r),s=new Array(r),u=0;i=Float64Array.from({length:r*r},l?(t,e)=>i[e%r][e/r|0]:(t,e)=>i[e/r|0][e%r]);for(let n=0;n<r;++n){let e=0;for(let t=0;t<r;++t)e+=i[n*r+t]+c*i[t*r+n];u+=a[n]=e}t=(u=Ra(0,Ca-h*r)/u)?h:Ca/r;{let e=0;d&&n.sort((t,e)=>d(a[t],a[e]));for(const h of n){const d=e;if(c){const c=Da(1+~r,r).filter(t=>t<0?i[~t*r+h]:i[h*r+t]);f&&c.sort((t,e)=>f(t<0?-i[~t*r+h]:i[h*r+t],e<0?-i[~e*r+h]:i[h*r+e]));for(const d of c)d<0?(o[~d*r+h]||(o[~d*r+h]={source:null,target:null})).target={index:h,startAngle:e,endAngle:e+=i[~d*r+h]*u,value:i[~d*r+h]}:(o[h*r+d]||(o[h*r+d]={source:null,target:null})).source={index:h,startAngle:e,endAngle:e+=i[h*r+d]*u,value:i[h*r+d]};s[h]={index:h,startAngle:d,endAngle:e,value:a[h]}}else{const c=Da(0,r).filter(t=>i[h*r+t]||i[t*r+h]);f&&c.sort((t,e)=>f(i[h*r+t],i[h*r+e]));for(const d of c){let t;if(h<d?(t=o[h*r+d]||(o[h*r+d]={source:null,target:null}),t.source={index:h,startAngle:e,endAngle:e+=i[h*r+d]*u,value:i[h*r+d]}):(t=o[d*r+h]||(o[d*r+h]={source:null,target:null}),t.target={index:h,startAngle:e,endAngle:e+=i[h*r+d]*u,value:i[h*r+d]},h===d&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const l=t.source;t.source=t.target,t.target=l}}s[h]={index:h,startAngle:d,endAngle:e,value:a[h]}}e+=t}}return(o=Object.values(o)).groups=s,e?o.sort(e):o}return i.padAngle=function(t){return arguments.length?(h=Ra(0,t),i):h},i.sortGroups=function(t){return arguments.length?(d=t,i):d},i.sortSubgroups=function(t){return arguments.length?(f=t,i):f},i.sortChords=function(t){return arguments.length?(null==t?e=null:(e=function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)})._=n=t,i):e&&e._;var n},i}const Pa=Math.PI,La=2*Pa,Na=1e-6,za=La-Na;function Ia(n){this._+=n[0];for(let t=1,e=n.length;t<e;++t)this._+=arguments[t]+n[t]}let $a=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Ia:function(t){var e=Math.floor(t);if(!(0<=e))throw new Error(`invalid digits: ${t}`);if(15<e)return Ia;const i=10**e;return function(n){this._+=n[0];for(let t=1,e=n.length;t<e;++t)this._+=Math.round(arguments[t]*i)/i+n[t]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,i){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,e,n,i,r,a){this._append`C${+t},${+e},${+n},${+i},${this._x1=+r},${this._y1=+a}`}arcTo(t,e,n,i,r){if(t=+t,e=+e,n=+n,i=+i,(r=+r)<0)throw new Error(`negative radius: ${r}`);var a,o,s=this._x1,u=this._y1,c=n-t,l=i-e,h=s-t,d=u-e,f=h*h+d*d;null===this._x1?this._append`M${this._x1=t},${this._y1=e}`:f>Na&&(Math.abs(d*c-l*h)>Na&&r?(o=c*c+l*l,s=(a=n-s)*a+(n=i-u)*n,i=Math.sqrt(o),u=Math.sqrt(f),u=(s=r*Math.tan((Pa-Math.acos((o+f-s)/(2*i*u)))/2))/u,i=s/i,Math.abs(u-1)>Na&&this._append`L${t+u*h},${e+u*d}`,this._append`A${r},${r},0,0,${+(h*n<d*a)},${this._x1=t+i*c},${this._y1=e+i*l}`):this._append`L${this._x1=t},${this._y1=e}`)}arc(t,e,n,i,r,a){if(t=+t,e=+e,a=!!a,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),s=n*Math.sin(i),u=t+o,c=e+s,l=1^a,h=a?i-r:r-i;null===this._x1?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Na||Math.abs(this._y1-c)>Na)&&this._append`L${u},${c}`,n&&(h<0&&(h=h%La+La),h>za?this._append`A${n},${n},0,1,${l},${t-o},${e-s}A${n},${n},0,1,${l},${this._x1=u},${this._y1=c}`:h>Na&&this._append`A${n},${n},0,${+(h>=Pa)},${l},${this._x1=t+n*Math.cos(r)},${this._y1=e+n*Math.sin(r)}`)}rect(t,e,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}};function Fa(){return new $a}Fa.prototype=$a.prototype;var Ba=Array.prototype.slice;function Xa(t){return function(){return t}}function ja(t){return t.source}function Ya(t){return t.target}function Ga(t){return t.radius}function Va(t){return t.startAngle}function Ua(t){return t.endAngle}function Ha(){return 0}function qa(){return 10}function Wa(u){var c=ja,l=Ya,h=Ga,d=Ga,f=Va,g=Ua,p=Ha,v=null;function e(){var t,e=c.apply(this,arguments),n=l.apply(this,arguments),i=p.apply(this,arguments)/2,r=Ba.call(arguments),a=+h.apply(this,(r[0]=e,r)),o=f.apply(this,r)-Ea,s=g.apply(this,r)-Ea,e=+d.apply(this,(r[0]=n,r)),n=f.apply(this,r)-Ea,r=g.apply(this,r)-Ea;if(v=v||(t=Fa()),1e-12<i&&(Aa(s-o)>2*i+1e-12?o<s?(o+=i,s-=i):(o-=i,s+=i):o=s=(o+s)/2,Aa(r-n)>2*i+1e-12?n<r?(n+=i,r-=i):(n-=i,r+=i):n=r=(n+r)/2),v.moveTo(a*Ma(o),a*Sa(o)),v.arc(0,0,a,o,s),o===n&&s===r||(u?(i=e-+u.apply(this,arguments),s=(n+r)/2,v.quadraticCurveTo(0,0,i*Ma(n),i*Sa(n)),v.lineTo(e*Ma(s),e*Sa(s)),v.lineTo(i*Ma(r),i*Sa(r))):(v.quadraticCurveTo(0,0,e*Ma(n),e*Sa(n)),v.arc(0,0,e,n,r))),v.quadraticCurveTo(0,0,a*Ma(o),a*Sa(o)),v.closePath(),t)return v=null,t+""||null}return u&&(e.headRadius=function(t){return arguments.length?(u="function"==typeof t?t:Xa(+t),e):u}),e.radius=function(t){return arguments.length?(h=d="function"==typeof t?t:Xa(+t),e):h},e.sourceRadius=function(t){return arguments.length?(h="function"==typeof t?t:Xa(+t),e):h},e.targetRadius=function(t){return arguments.length?(d="function"==typeof t?t:Xa(+t),e):d},e.startAngle=function(t){return arguments.length?(f="function"==typeof t?t:Xa(+t),e):f},e.endAngle=function(t){return arguments.length?(g="function"==typeof t?t:Xa(+t),e):g},e.padAngle=function(t){return arguments.length?(p="function"==typeof t?t:Xa(+t),e):p},e.source=function(t){return arguments.length?(c=t,e):c},e.target=function(t){return arguments.length?(l=t,e):l},e.context=function(t){return arguments.length?(v=null==t?null:t,e):v},e}var Za=Array.prototype.slice;function Ja(t,e){return t-e}var Ka=t=>()=>t;function Qa(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=function(t,e){for(var n=e[0],i=e[1],r=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var u=t[a],c=u[0],l=u[1],h=t[s],d=h[0],f=h[1];if(function(t,e,n){var i;return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])&&(t=t[i=+(t[0]===e[0])],n=n[i],i=e[i],t<=n&&n<=i||i<=n&&n<=t)}(u,h,e))return 0;i<l!=i<f&&n<(d-c)*(i-l)/(f-l)+c&&(r=-r)}return r}(t,e[i]))return n;return 0}function to(){}var eo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function no(){var d=1,f=1,n=Q,a=e;function i(e){var t=n(e);if(Array.isArray(t))t=t.slice().sort(Ja);else{const n=T(e,io);for(t=W(...K(n[0],n[1],t),t);t[t.length-1]>=n[1];)t.pop();for(;t[1]<n[0];)t.shift()}return t.map(t=>r(e,t))}function r(e,t){const n=null==t?NaN:+t;if(isNaN(n))throw new Error(`invalid value: ${t}`);var r=[],i=[];return function(t,e,o){var s,n,i,r,u=new Array,c=new Array,l=s=-1,a=ro(t[0],e);for(eo[a<<1].forEach(h);++l<d-1;)n=a,a=ro(t[l+1],e),eo[n|a<<1].forEach(h);for(eo[a<<0].forEach(h);++s<f-1;){for(l=-1,a=ro(t[s*d+d],e),i=ro(t[s*d],e),eo[a<<1|i<<2].forEach(h);++l<d-1;)n=a,a=ro(t[s*d+d+l+1],e),r=i,i=ro(t[s*d+l+1],e),eo[n|a<<1|i<<2|r<<3].forEach(h);eo[a|i<<3].forEach(h)}for(l=-1,i=t[s*d]>=e,eo[i<<2].forEach(h);++l<d-1;)r=i,i=ro(t[s*d+l+1],e),eo[i<<2|r<<3].forEach(h);function h(t){var e,n=[t[0][0]+l,t[0][1]+s],i=[t[1][0]+l,t[1][1]+s],r=g(n),a=g(i);(t=c[r])?(e=u[a])?(delete c[t.end],delete u[e.start],t===e?(t.ring.push(i),o(t.ring)):u[t.start]=c[e.end]={start:t.start,end:e.end,ring:t.ring.concat(e.ring)}):(delete c[t.end],t.ring.push(i),c[t.end=a]=t):(t=u[a])?(e=c[r])?(delete u[t.start],delete c[e.end],t===e?(t.ring.push(i),o(t.ring)):u[e.start]=c[t.end]={start:e.start,end:t.end,ring:e.ring.concat(t.ring)}):(delete u[t.start],t.ring.unshift(n),u[t.start=r]=t):u[r]=c[a]={start:r,end:a,ring:[n,i]}}eo[i<<3].forEach(h)}(e,n,function(t){a(t,e,n),0<function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)?r.push([t]):i.push(t)}),i.forEach(function(t){for(var e,n=0,i=r.length;n<i;++n)if(-1!==Qa((e=r[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:t,coordinates:r}}function g(t){return 2*t[0]+t[1]*(d+1)*4}function e(t,o,s){t.forEach(function(t){var e=t[0],n=t[1],i=0|e,r=0|n,a=ao(o[r*d+i]);0<e&&e<d&&i===e&&(t[0]=oo(e,ao(o[r*d+i-1]),a,s)),0<n&&n<f&&r===n&&(t[1]=oo(n,ao(o[(r-1)*d+i]),a,s))})}return i.contour=r,i.size=function(t){if(!arguments.length)return[d,f];var e=Math.floor(t[0]),t=Math.floor(t[1]);if(!(0<=e&&0<=t))throw new Error("invalid size");return d=e,f=t,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Ka(Za.call(t)):Ka(t),i):n},i.smooth=function(t){return arguments.length?(a=t?e:to,i):a===e},i}function io(t){return isFinite(t)?t:NaN}function ro(t,e){return null!=t&&e<=+t}function ao(t){return null==t||isNaN(t=+t)?-1/0:t}function oo(t,e,n,i){i-=e,e=n-e,e=isFinite(i)||isFinite(e)?i/e:Math.sign(i)/Math.sign(e);return isNaN(e)?t:t+e-.5}function so(t){return t[0]}function uo(t){return t[1]}function co(){return 1}const lo=134217729;function ho(t,e,n,i,r){let a,o,s,u,c=e[0],l=i[0],h=0,d=0;l>c==l>-c?(a=c,c=e[++h]):(a=l,l=i[++d]);let f=0;if(h<t&&d<n)for(l>c==l>-c?(o=c+a,s=a-(o-c),c=e[++h]):(o=l+a,s=a-(o-l),l=i[++d]),a=o,0!==s&&(r[f++]=s);h<t&&d<n;)l>c==l>-c?(o=a+c,u=o-a,s=a-(o-u)+(c-u),c=e[++h]):(o=a+l,u=o-a,s=a-(o-u)+(l-u),l=i[++d]),a=o,0!==s&&(r[f++]=s);for(;h<t;)o=a+c,u=o-a,s=a-(o-u)+(c-u),c=e[++h],a=o,0!==s&&(r[f++]=s);for(;d<n;)o=a+l,u=o-a,s=a-(o-u)+(l-u),l=i[++d],a=o,0!==s&&(r[f++]=s);return 0===a&&0!==f||(r[f++]=a),f}function fo(t){return new Float64Array(t)}const go=fo(4),po=fo(8),vo=fo(12),bo=fo(16),_o=fo(4);function yo(t,e,n,i,r,a){var o=(e-a)*(n-r),s=(t-r)*(i-a),u=o-s,s=Math.abs(o+s);return Math.abs(u)>=33306690738754716e-32*s?u:-function(t,e,n,i,r,a,o){var s,u,c,l,h,d,f,g,p=t-r,v=n-r,b=e-a,_=i-a,y=p*_,x=lo*p,m=x-(x-p),w=p-m,T=b*v,A=(d=w*(u=_-(s=(x=lo*_)-(x-_)))-(y-m*s-w*s-m*u))-(c=d-(f=(w=b-(m=(x=lo*b)-(x-b)))*(u=v-(s=(x=lo*v)-(x-v)))-(T-m*s-w*s-m*u)));go[0]=d-(c+A)+(A-f),A=(h=y-((l=y+c)-(A=l-y))+(c-A))-(c=h-T),go[1]=h-(c+A)+(A-T),A=(g=l+c)-l,go[2]=l-(g-A)+(c-A),go[3]=g;let M=function(e){let n=e[0];for(let t=1;t<4;t++)n+=e[t];return n}(go),S=22204460492503146e-32*o;if(M>=S||-M>=S)return M;if(t=t-(p+(A=t-p))+(A-r),r=n-(v+(A=n-v))+(A-r),e=e-(b+(A=e-b))+(A-a),a=i-(_+(A=i-_))+(A-a),0==t&&0==e&&0==r&&0==a)return M;if(S=11093356479670487e-47*o+33306690738754706e-32*Math.abs(M),M+=p*a+_*t-(b*r+v*e),M>=S||-M>=S)return M;y=t*_,T=e*v,A=(d=(w=t-(m=(x=lo*t)-(x-t)))*(u=_-(s=(x=lo*_)-(x-_)))-(y-m*s-w*s-m*u))-(c=d-(f=(w=e-(m=(x=lo*e)-(x-e)))*(u=v-(s=(x=lo*v)-(x-v)))-(T-m*s-w*s-m*u))),_o[0]=d-(c+A)+(A-f),A=(h=y-((l=y+c)-(A=l-y))+(c-A))-(c=h-T),_o[1]=h-(c+A)+(A-T),A=(g=l+c)-l,_o[2]=l-(g-A)+(c-A),_o[3]=g;v=ho(4,go,4,_o,po);y=p*a,T=b*r,A=(d=(w=p-(m=(x=lo*p)-(x-p)))*(u=a-(s=(x=lo*a)-(x-a)))-(y-m*s-w*s-m*u))-(c=d-(f=(w=b-(m=(x=lo*b)-(x-b)))*(u=r-(s=(x=lo*r)-(x-r)))-(T-m*s-w*s-m*u))),_o[0]=d-(c+A)+(A-f),A=(h=y-((l=y+c)-(A=l-y))+(c-A))-(c=h-T),_o[1]=h-(c+A)+(A-T),A=(g=l+c)-l,_o[2]=l-(g-A)+(c-A),_o[3]=g;v=ho(v,po,4,_o,vo);y=t*a,T=e*r,A=(d=(w=t-(m=(x=lo*t)-(x-t)))*(u=a-(s=(x=lo*a)-(x-a)))-(y-m*s-w*s-m*u))-(c=d-(f=(w=e-(m=(x=lo*e)-(x-e)))*(u=r-(s=(x=lo*r)-(x-r)))-(T-m*s-w*s-m*u))),_o[0]=d-(c+A)+(A-f),A=(h=y-((l=y+c)-(A=l-y))+(c-A))-(c=h-T),_o[1]=h-(c+A)+(A-T),A=(g=l+c)-l,_o[2]=l-(g-A)+(c-A),_o[3]=g;v=ho(v,vo,4,_o,bo);return bo[v-1]}(t,e,n,i,r,a,s)}const xo=Math.pow(2,-52),mo=new Uint32Array(512);class wo{static from(e,n=function(t){return t[0]},i=function(t){return t[1]}){const r=e.length,a=new Float64Array(2*r);for(let t=0;t<r;t++){const r=e[t];a[2*t]=n(r),a[2*t+1]=i(r)}return new wo(a)}constructor(t){var e=t.length>>1;if(0<e&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;t=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*t),this._halfedges=new Int32Array(3*t),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:a,_hullPrev:o,_hullNext:s,_hullTri:u,_hullHash:c}=this,i=a.length>>1;let e=1/0,n=1/0,l=-1/0,h=-1/0;for(let t=0;t<i;t++){const s=a[2*t],u=a[2*t+1];s<e&&(e=s),u<n&&(n=u),s>l&&(l=s),u>h&&(h=u),this._ids[t]=t}const d=(e+l)/2,r=(n+h)/2;let f,g,p,v=1/0;for(let t=0;t<i;t++){const s=To(d,r,a[2*t],a[2*t+1]);s<v&&(f=t,v=s)}var b,_,y,x,m,w,T,A=a[2*f],M=a[2*f+1];v=1/0;for(let t=0;t<i;t++)if(t!==f){const s=To(A,M,a[2*t],a[2*t+1]);s<v&&0<s&&(g=t,v=s)}let S=a[2*g],k=a[2*g+1],E=1/0;for(let t=0;t<i;t++)if(t!==f&&t!==g){const s=(b=A,_=M,y=S,x=k,m=a[2*t],w=a[2*t+1],T=void 0,T=y-b,y=x-_,x=m-b,(y=((m=w-_)*(b=T*T+y*y)-y*(w=x*x+m*m))*(_=.5/(T*m-y*x)))*y+(_*=T*w-x*b)*_);s<E&&(p=t,E=s)}let t=a[2*p],C=a[2*p+1];if(E===1/0){for(let t=0;t<i;t++)this._dists[t]=a[2*t]-a[0]||a[2*t+1]-a[1];Ao(this._ids,this._dists,0,i-1);const o=new Uint32Array(i);let n=0;for(let t=0,e=-1/0;t<i;t++){const c=this._ids[t];this._dists[c]>e&&(o[n++]=c,e=this._dists[c])}return this.hull=o.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(yo(A,M,S,k,t,C)<0){const a=g,o=S,s=k;g=p,S=t,k=C,p=a,t=o,C=s}var R,D,O,P,L,N,z,I,$=(I=A,R=M,D=S,O=k,P=D-I,L=O-R,N=t-I,z=C-R,{x:I+(z*(I=P*P+L*L)-L*(D=N*N+z*z))*(O=.5/(P*z-L*N)),y:R+(P*D-N*I)*O});this._cx=$.x,this._cy=$.y;for(let t=0;t<i;t++)this._dists[t]=To(a[2*t],a[2*t+1],$.x,$.y);Ao(this._ids,this._dists,0,i-1),this._hullStart=f;let F=3;s[f]=o[p]=g,s[g]=o[f]=p,s[p]=o[g]=f,u[f]=0,u[g]=1,u[p]=2,c.fill(-1),c[this._hashKey(A,M)]=f,c[this._hashKey(S,k)]=g,c[this._hashKey(t,C)]=p,this.trianglesLen=0,this._addTriangle(f,g,p,-1,-1,-1);for(let t,e,n=0;n<this._ids.length;n++){const l=this._ids[n],h=a[2*l],d=a[2*l+1];if(!(0<n&&Math.abs(h-t)<=xo&&Math.abs(d-e)<=xo)&&(t=h,e=d,l!==f&&l!==g&&l!==p)){let n=0;for(let t=0,e=this._hashKey(h,d);t<this._hashSize&&(n=c[(e+t)%this._hashSize],-1===n||n===s[n]);t++);n=o[n];let i,r=n;for(;i=s[r],0<=yo(h,d,a[2*r],a[2*r+1],a[2*i],a[2*i+1]);)if(r=i,r===n){r=-1;break}if(-1!==r){let t=this._addTriangle(r,l,s[r],-1,-1,u[r]);u[l]=this._legalize(t+2),u[r]=t,F++;let e=s[r];for(;i=s[e],yo(h,d,a[2*e],a[2*e+1],a[2*i],a[2*i+1])<0;)t=this._addTriangle(e,l,i,u[l],-1,u[e]),u[l]=this._legalize(t+2),s[e]=e,F--,e=i;if(r===n)for(;i=o[r],yo(h,d,a[2*i],a[2*i+1],a[2*r],a[2*r+1])<0;)t=this._addTriangle(i,l,r,-1,u[r],u[i]),this._legalize(t+2),u[i]=t,s[r]=r,F--,r=i;this._hullStart=o[l]=r,s[r]=o[e]=l,s[l]=e,c[this._hashKey(h,d)]=l,c[this._hashKey(a[2*r],a[2*r+1])]=r}}}this.hull=new Uint32Array(F);for(let t=0,e=this._hullStart;t<F;t++)this.hull[t]=e,e=s[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){t/=Math.abs(t)+Math.abs(e);return(0<e?3-t:1+t)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:i}=this;let r=0,a=0;for(;;){var o=n[e],s=e-e%3;if(a=s+(e+2)%3,-1!==o){var u=o-o%3,c=u+(o+2)%3,l=t[a],h=t[e],d=t[s+(e+1)%3],s=t[c];if(function(t,e,n,i,r,a,o,s){t-=o,e-=s,n-=o,i-=s,r-=o,o=a-s,a=n*n+i*i,s=r*r+o*o;return t*(i*s-a*o)-e*(n*s-a*r)+(t*t+e*e)*(n*o-i*r)<0}(i[2*l],i[2*l+1],i[2*h],i[2*h+1],i[2*d],i[2*d+1],i[2*s],i[2*s+1])){t[e]=s,t[o]=l;const i=n[c];if(-1===i){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}}while(t=this._hullPrev[t],t!==this._hullStart)}this._link(e,i),this._link(o,n[a]),this._link(a,c);o=u+(o+1)%3;r<mo.length&&(mo[r++]=o)}else{if(0===r)break;e=mo[--r]}}else{if(0===r)break;e=mo[--r]}}return a}_link(t,e){-1!==(this._halfedges[t]=e)&&(this._halfedges[e]=t)}_addTriangle(t,e,n,i,r,a){var o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,i),this._link(o+1,r),this._link(o+2,a),this.trianglesLen+=3,o}}function To(t,e,n,i){n=t-n,i=e-i;return n*n+i*i}function Ao(n,i,r,a){if(a-r<=20)for(let e=r+1;e<=a;e++){const a=n[e],u=i[a];let t=e-1;for(;t>=r&&i[n[t]]>u;)n[t+1]=n[t--];n[t+1]=a}else{let t=r+1,e=a;Mo(n,r+a>>1,t),i[n[r]]>i[n[a]]&&Mo(n,r,a),i[n[t]]>i[n[a]]&&Mo(n,t,a),i[n[r]]>i[n[t]]&&Mo(n,r,t);for(var o=n[t],s=i[o];;){for(;t++,i[n[t]]<s;);for(;e--,i[n[e]]>s;);if(e<t)break;Mo(n,t,e)}n[r+1]=n[e],n[e]=o,a-t+1>=e-r?(Ao(n,i,t,a),Ao(n,i,r,e-1)):(Ao(n,i,r,e-1),Ao(n,i,t,a))}}function Mo(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}class So{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){var i=(t=+t)+(n=+n),r=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${r}`:(1e-6<Math.abs(this._x1-i)||1e-6<Math.abs(this._y1-r))&&(this._+="L"+i+","+r),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=i},${this._y1=r}`)}rect(t,e,n,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class ko{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class Eo{constructor(t,[e,n,i,r]=[0,0,960,500]){if(!((i=+i)>=(e=+e)&&(r=+r)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=e,this.ymax=r,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:a,hull:o,triangles:s},vectors:e}=this;let u,c;const l=this.circumcenters=this._circumcenters.subarray(0,s.length/3*2);for(let t,e,n=0,i=0,r=s.length;n<r;n+=3,i+=2){const h=2*s[n],d=2*s[n+1],f=2*s[n+2],g=a[h],p=a[1+h],v=a[d],b=a[1+d],_=a[f],y=a[1+f],x=v-g,m=b-p,w=_-g,T=y-p,A=2*(x*T-m*w);if(Math.abs(A)<1e-9){if(void 0===u){u=c=0;for(const s of o)u+=a[2*s],c+=a[2*s+1];u/=o.length,c/=o.length}const s=1e9*Math.sign((u-g)*T-(c-p)*w);t=(g+_)/2-s*T,e=(p+y)/2+s*w}else{const a=1/A,o=x*x+m*m,s=w*w+T*T;t=g+(T*o-m*s)*a,e=p+(x*s-w*o)*a}l[i]=t,l[i+1]=e}let n,i,r,h=o[o.length-1],d=4*h,f=a[2*h],g=a[2*h+1];e.fill(0);for(let t=0;t<o.length;++t)h=o[t],n=d,i=f,r=g,d=4*h,f=a[2*h],g=a[2*h+1],e[n+2]=e[d]=r-g,e[n+3]=e[d+1]=f-i}render(n){const t=null==n?n=new So:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:o,vectors:s}=this;if(a.length<=1)return null;for(let t=0,e=i.length;t<e;++t){const r=i[t];if(!(r<t)){const a=2*Math.floor(t/3),s=2*Math.floor(r/3),u=o[a],c=o[1+a],l=o[s],h=o[1+s];this._renderSegment(u,c,l,h,n)}}let u,c=a[a.length-1];for(let t=0;t<a.length;++t){u=c,c=a[t];const i=2*Math.floor(r[c]/3),e=o[i],d=o[1+i],f=4*u,g=this._project(e,d,s[2+f],s[3+f]);g&&this._renderSegment(e,d,g[0],g[1],n)}return t&&t.value()}renderBounds(t){const e=null==t?t=new So:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,n){const i=null==n?n=new So:void 0,r=this._clip(t);if(null!==r&&r.length){n.moveTo(r[0],r[1]);let e=r.length;for(;r[0]===r[e-2]&&r[1]===r[e-1]&&1<e;)e-=2;for(let t=2;t<e;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||n.lineTo(r[t],r[t+1]);return n.closePath(),i&&i.value()}}*cellPolygons(){const{delaunay:{points:n}}=this;for(let t=0,e=n.length/2;t<e;++t){const n=this.cellPolygon(t);n&&(n.index=t,yield n)}}cellPolygon(t){const e=new ko;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,i,r){var a=this._regioncode(t,e),o=this._regioncode(n,i);0===a&&0===o?(r.moveTo(t,e),r.lineTo(n,i)):(o=this._clipSegment(t,e,n,i,a,o))&&(r.moveTo(o[0],o[1]),r.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(r){var a=this._clip(r);if(a)for(const o of this.delaunay.neighbors(r)){const r=this._clip(o);if(r)t:for(let n=0,i=a.length;n<i;n+=2)for(let t=0,e=r.length;t<e;t+=2)if(a[n]===r[t]&&a[n+1]===r[t+1]&&a[(n+2)%i]===r[(t+e-2)%e]&&a[(n+3)%i]===r[(t+e-1)%e]){yield o;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:i,triangles:r}}=this,a=n[t];if(-1===a)return null;const o=[];let s=a;do{const n=Math.floor(s/3);if(o.push(e[2*n],e[2*n+1]),s=s%3==2?s-2:s+1,r[s]!==t)break}while(s=i[s],s!==a&&-1!==s);return o}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var e=this._cell(t);if(null===e)return null;var{vectors:n}=this,i=4*t;return this._simplify(n[i]||n[1+i]?this._clipInfinite(t,e,n[i],n[1+i],n[2+i],n[3+i]):this._clipFinite(t,e))}_clipFinite(a,e){var n=e.length;let o,s,u,c,l=null,h=e[n-2],d=e[n-1],f=this._regioncode(h,d),g=0;for(let t=0;t<n;t+=2)if(o=h,s=d,h=e[t],d=e[t+1],u=f,f=this._regioncode(h,d),0===u&&0===f)c=g,g=0,l?l.push(h,d):l=[h,d];else{let t,e,n,i,r;if(0===u){if(null===(t=this._clipSegment(o,s,h,d,u,f)))continue;[e,n,i,r]=t}else{if(null===(t=this._clipSegment(h,d,o,s,f,u)))continue;[i,r,e,n]=t,c=g,g=this._edgecode(e,n),c&&g&&this._edge(a,c,g,l,l.length),l?l.push(e,n):l=[e,n]}c=g,g=this._edgecode(i,r),c&&g&&this._edge(a,c,g,l,l.length),l?l.push(i,r):l=[i,r]}if(l)c=g,g=this._edgecode(l[0],l[1]),c&&g&&this._edge(a,c,g,l,l.length);else if(this.contains(a,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}_clipSegment(i,r,a,o,s,u){var c=s<u;for(c&&([i,r,a,o,s,u]=[a,o,i,r,u,s]);;){if(0===s&&0===u)return c?[a,o,i,r]:[i,r,a,o];if(s&u)return null;let t,e,n=s||u;8&n?(t=i+(a-i)*(this.ymax-r)/(o-r),e=this.ymax):4&n?(t=i+(a-i)*(this.ymin-r)/(o-r),e=this.ymin):t=2&n?(e=r+(o-r)*(this.xmax-i)/(a-i),this.xmax):(e=r+(o-r)*(this.xmin-i)/(a-i),this.xmin),s?(i=t,r=e,s=this._regioncode(i,r)):(a=t,o=e,u=this._regioncode(a,o))}}_clipInfinite(r,t,e,n,i,a){let o,s=Array.from(t);if((o=this._project(s[0],s[1],e,n))&&s.unshift(o[0],o[1]),(o=this._project(s[s.length-2],s[s.length-1],i,a))&&s.push(o[0],o[1]),s=this._clipFinite(r,s))for(let t,e=0,n=s.length,i=this._edgecode(s[n-2],s[n-1]);e<n;e+=2)t=i,i=this._edgecode(s[e],s[e+1]),t&&i&&(e=this._edge(r,t,i,s,e),n=s.length);else this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(n,i,t,r,a){for(;i!==t;){let t,e;switch(i){case 5:i=4;continue;case 4:i=6,t=this.xmax,e=this.ymin;break;case 6:i=2;continue;case 2:i=10,t=this.xmax,e=this.ymax;break;case 10:i=8;continue;case 8:i=9,t=this.xmin,e=this.ymax;break;case 9:i=1;continue;case 1:i=5,t=this.xmin,e=this.ymin}r[a]===t&&r[a+1]===e||!this.contains(n,t,e)||(r.splice(a,0,t,e),a+=2)}return a}_project(t,e,n,i){let r,a,o,s=1/0;if(i<0){if(e<=this.ymin)return null;(r=(this.ymin-e)/i)<s&&(o=this.ymin,a=t+(s=r)*n)}else if(0<i){if(e>=this.ymax)return null;(r=(this.ymax-e)/i)<s&&(o=this.ymax,a=t+(s=r)*n)}if(0<n){if(t>=this.xmax)return null;(r=(this.xmax-t)/n)<s&&(a=this.xmax,o=e+(s=r)*i)}else if(n<0){if(t<=this.xmin)return null;(r=(this.xmin-t)/n)<s&&(a=this.xmin,o=e+(s=r)*i)}return[a,o]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(e){if(e&&4<e.length){for(let t=0;t<e.length;t+=2){var n=(t+2)%e.length,i=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[i]||e[t+1]===e[1+n]&&e[1+n]===e[1+i])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}const Co=2*Math.PI,Ro=Math.pow;var Do={},Oo={};function Po(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Lo(t){var n=Object.create(null),i=[];return t.forEach(function(t){for(var e in t)e in n||i.push(n[e]=e)}),i}function No(t,e){var n=t+"",t=n.length;return t<e?new Array(e-t+1).join(0)+n:n}function zo(i){var s=new RegExp('["'+i+"\n\r]"),h=i.charCodeAt(0);function e(i,t){var e,n=[],r=i.length,a=0,o=0,s=r<=0,u=!1;function c(){if(s)return Oo;if(u)return u=!1,Do;var t,e,n=a;if(34===i.charCodeAt(n)){for(;a++<r&&34!==i.charCodeAt(a)||34===i.charCodeAt(++a););return(t=a)>=r?s=!0:10===(e=i.charCodeAt(a++))?u=!0:13===e&&(u=!0,10===i.charCodeAt(a)&&++a),i.slice(n+1,t-1).replace(/""/g,'"')}for(;a<r;){if(10===(e=i.charCodeAt(t=a++)))u=!0;else if(13===e)u=!0,10===i.charCodeAt(a)&&++a;else if(e!==h)continue;return i.slice(n,t)}return s=!0,i.slice(n,r)}for(10===i.charCodeAt(r-1)&&--r,13===i.charCodeAt(r-1)&&--r;(e=c())!==Oo;){for(var l=[];e!==Do&&e!==Oo;)l.push(e),e=c();t&&null==(l=t(l,o++))||n.push(l)}return n}function n(t,n){return t.map(function(e){return n.map(function(t){return a(e[t])}).join(i)})}function r(t){return t.map(a).join(i)}function a(t){return null==t?"":t instanceof Date?(i=(e=t).getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),o=e.getUTCMilliseconds(),isNaN(e)?"Invalid Date":((n=e.getUTCFullYear())<0?"-"+No(-n,6):9999<n?"+"+No(n,6):No(n,4))+"-"+No(e.getUTCMonth()+1,2)+"-"+No(e.getUTCDate(),2)+(o?"T"+No(i,2)+":"+No(r,2)+":"+No(a,2)+"."+No(o,3)+"Z":a?"T"+No(i,2)+":"+No(r,2)+":"+No(a,2)+"Z":r||i?"T"+No(i,2)+":"+No(r,2)+"Z":"")):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t;var e,n,i,r,a,o}return{parse:function(t,a){var o,s,t=e(t,function(t,e){return o?o(t,e-1):(s=t,void(o=a?(i=a,r=Po(n=t),function(t,e){return i(r(t),e,n)}):Po(t)));var n,i,r});return t.columns=s||[],t},parseRows:e,format:function(t,e){return[(e=null==e?Lo(t):e).map(a).join(i)].concat(n(t,e)).join("\n")},formatBody:function(t,e){return n(t,e=null==e?Lo(t):e).join("\n")},formatRows:function(t){return t.map(r).join("\n")},formatRow:r,formatValue:a}}var Io=zo(","),$o=Io.parse,Fo=Io.parseRows,Bo=Io.format,Xo=Io.formatBody,jo=Io.formatRows,Yo=Io.formatRow,Go=Io.formatValue,Vo=zo("\t"),Uo=Vo.parse,Ho=Vo.parseRows,qo=Vo.format,Wo=Vo.formatBody,Zo=Vo.formatRows,Jo=Vo.formatRow,Ko=Vo.formatValue;const Qo=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function ts(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function es(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function ns(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function is(t,e){return fetch(t,e).then(ns)}function rs(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),is(t,e).then(function(t){return i(t,n)})}}var as=rs($o),os=rs(Uo);function ss(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function us(n){return(t,e)=>is(t,e).then(t=>(new DOMParser).parseFromString(t,n))}var cs=us("application/xml"),ls=us("text/html"),hs=us("image/svg+xml");function ds(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,a,o,s,u,c,l,h,d,f=t._root,g={data:i},p=t._x0,v=t._y0,b=t._x1,_=t._y1;if(!f)return t._root=g,t;for(;f.length;)if((c=e>=(a=(p+b)/2))?p=a:b=a,(l=n>=(o=(v+_)/2))?v=o:_=o,!(f=(r=f)[h=l<<1|c]))return r[h]=g,t;if(s=+t._x.call(null,f.data),u=+t._y.call(null,f.data),e===s&&n===u)return g.next=f,r?r[h]=g:t._root=g,t;for(;r=r?r[h]=new Array(4):t._root=new Array(4),(c=e>=(a=(p+b)/2))?p=a:b=a,(l=n>=(o=(v+_)/2))?v=o:_=o,(h=l<<1|c)==(d=(o<=u)<<1|a<=s););return r[d]=f,r[h]=g,t}function fs(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function gs(t){return t[0]}function ps(t){return t[1]}function vs(t,e,n){n=new bs(null==e?gs:e,null==n?ps:n,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function bs(t,e,n,i,r,a){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function _s(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ys=vs.prototype=bs.prototype;function xs(t){return function(){return t}}function ms(t){return 1e-6*(t()-.5)}function ws(t){return t.x+t.vx}function Ts(t){return t.y+t.vy}function As(t){return t.index}function Ms(t,e){t=t.get(e);if(!t)throw new Error("node not found: "+e);return t}ys.copy=function(){var t,e,n=new bs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=_s(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=_s(e));return n},ys.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return ds(this.cover(e,n),e,n,t)},ys.addAll=function(t){for(var e,n,i,r=t.length,a=new Array(r),o=new Array(r),s=1/0,u=1/0,c=-1/0,l=-1/0,h=0;h<r;++h)isNaN(n=+this._x.call(null,e=t[h]))||isNaN(i=+this._y.call(null,e))||((a[h]=n)<s&&(s=n),c<n&&(c=n),(o[h]=i)<u&&(u=i),l<i&&(l=i));if(c<s||l<u)return this;for(this.cover(s,u).cover(c,l),h=0;h<r;++h)ds(this,a[h],o[h],t[h]);return this},ys.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,a=(i=Math.floor(e))+1;else{for(var o,s,u=r-n||1,c=this._root;t<n||r<=t||e<i||a<=e;)switch(s=(e<i)<<1|t<n,(o=new Array(4))[s]=c,c=o,u*=2,s){case 0:r=n+u,a=i+u;break;case 1:n=r-u,a=i+u;break;case 2:r=n+u,i=a-u;break;case 3:n=r-u,i=a-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this},ys.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},ys.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ys.find=function(t,e,n){var i,r,a,o,s,u,c,l,h=this._x0,d=this._y0,f=this._x1,g=this._y1,p=[],v=this._root;for(v&&p.push(new fs(v,h,d,f,g)),null==n?n=1/0:(h=t-n,d=e-n,f=t+n,g=e+n,n*=n);c=p.pop();)!(v=c.node)||(i=c.x0)>f||(r=c.y0)>g||(a=c.x1)<h||(o=c.y1)<d||(v.length?(p.push(new fs(v[3],s=(i+a)/2,u=(r+o)/2,a,o),new fs(v[2],i,u,s,o),new fs(v[1],s,r,a,u),new fs(v[0],i,r,s,u)),(s=(u<=e)<<1|s<=t)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-s],p[p.length-1-s]=c)):(c=(c=t-+this._x.call(null,v.data))*c+(c=e-+this._y.call(null,v.data))*c)<n&&(h=t-(c=Math.sqrt(n=c)),d=e-c,f=t+c,g=e+c,l=v.data));return l},ys.remove=function(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,r,a,o,s,u,c,l,h,d=this._root,f=this._x0,g=this._y0,p=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((u=a>=(c=(f+p)/2))?f=c:p=c,(c=o>=(s=(g+v)/2))?g=s:v=s,!(d=(e=d)[l=c<<1|u]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(!(d=(i=d).next))return this;return(r=d.next)&&delete d.next,i?r?i.next=r:delete i.next:e?(r?e[l]=r:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d)):this._root=r,this},ys.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},ys.root=function(){return this._root},ys.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},ys.visit=function(t){var e,n,i,r,a,o,s,u=[],c=this._root;for(c&&u.push(new fs(c,this._x0,this._y0,this._x1,this._y1));e=u.pop();)!t(c=e.node,n=e.x0,i=e.y0,r=e.x1,a=e.y1)&&c.length&&(o=(n+r)/2,s=(i+a)/2,(e=c[3])&&u.push(new fs(e,o,s,r,a)),(e=c[2])&&u.push(new fs(e,n,s,o,a)),(e=c[1])&&u.push(new fs(e,o,i,r,s)),(e=c[0])&&u.push(new fs(e,n,i,o,s)));return this},ys.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new fs(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r,a,o,s,u,c,l,h=e.node;h.length&&(a=e.x0,o=e.y0,c=(a+(s=e.x1))/2,l=(o+(u=e.y1))/2,(r=h[0])&&n.push(new fs(r,a,o,c,l)),(r=h[1])&&n.push(new fs(r,c,o,s,l)),(r=h[2])&&n.push(new fs(r,a,l,c,u)),(r=h[3])&&n.push(new fs(r,c,l,s,u))),i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},ys.x=function(t){return arguments.length?(this._x=t,this):this._x},ys.y=function(t){return arguments.length?(this._y=t,this):this._y};const Ss=4294967296;function ks(t){return t.x}function Es(t){return t.y}var Cs=Math.PI*(3-Math.sqrt(5));function Rs(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+t.slice(n+1)]}function Ds(t){return(t=Rs(Math.abs(t)))?t[1]:NaN}var Os,Ps=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ls(t){if(!(e=Ps.exec(t)))throw new Error("invalid format: "+t);var e;return new Ns({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ns(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function zs(t,e){e=Rs(t,e);if(!e)return t+"";t=e[0],e=e[1];return e<0?"0."+new Array(-e).join("0")+t:t.length>e+1?t.slice(0,e+1)+"."+t.slice(e+1):t+new Array(e-t.length+2).join("0")}Ls.prototype=Ns.prototype,Ns.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Is={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return 1e21<=Math.abs(t=Math.round(t))?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>zs(100*t,e),r:zs,s:function(t,e){var n=Rs(t,e);if(!n)return t+"";var i=n[0],r=n[1],n=r-(Os=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,r=i.length;return n===r?i:r<n?i+new Array(n-r+1).join("0"):0<n?i.slice(0,n)+"."+i.slice(n):"0."+new Array(1-n).join("0")+Rs(t,Math.max(0,e+n-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $s(t){return t}var Fs,Bs=Array.prototype.map,Xs=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function js(t){var s,u,e,w=void 0===t.grouping||void 0===t.thousands?$s:(s=Bs.call(t.grouping,Number),u=t.thousands+"",function(t,e){for(var n=t.length,i=[],r=0,a=s[0],o=0;0<n&&0<a&&(e<o+a+1&&(a=Math.max(1,e-o)),i.push(t.substring(n-=a,n+a)),!((o+=a+1)>e));)a=s[r=(r+1)%s.length];return i.reverse().join(u)}),i=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",T=void 0===t.decimal?".":t.decimal+"",A=void 0===t.numerals?$s:(e=Bs.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}),a=void 0===t.percent?"%":t.percent+"",M=void 0===t.minus?"":t.minus+"",S=void 0===t.nan?"NaN":t.nan+"";function o(t){var c=(t=Ls(t)).fill,l=t.align,h=t.sign,e=t.symbol,d=t.zero,f=t.width,g=t.comma,p=t.precision,v=t.trim,b=t.type;"n"===b?(g=!0,b="g"):Is[b]||(void 0===p&&(p=12),v=!0,b="g"),(d||"0"===c&&"="===l)&&(d=!0,c="0",l="=");var _="$"===e?i:"#"===e&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",y="$"===e?r:/[%p]/.test(b)?a:"",x=Is[b],m=/[defgprs%]/.test(b);function n(t){var e,n,i,r=_,a=y;if("c"===b)a=x(t)+a,t="";else{var o=(t=+t)<0||1/t<0;if(t=isNaN(t)?S:x(Math.abs(t),p),v&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;0<r&&(r=0)}return 0<r?t.slice(0,r)+t.slice(e+1):t}(t)),r=((o=o&&0==+t&&"+"!==h?!1:o)?"("===h?h:M:"-"===h||"("===h?"":h)+r,a=("s"===b?Xs[8+Os/3]:"")+a+(o&&"("===h?")":""),m)for(e=-1,n=t.length;++e<n;)if((i=t.charCodeAt(e))<48||57<i){a=(46===i?T+t.slice(e+1):t.slice(e))+a,t=t.slice(0,e);break}}g&&!d&&(t=w(t,1/0));var s=r.length+t.length+a.length,u=s<f?new Array(f-s+1).join(c):"";switch(g&&d&&(t=w(u+t,u.length?f-a.length:1/0),u=""),l){case"<":t=r+t+a+u;break;case"=":t=r+u+t+a;break;case"^":t=u.slice(0,s=u.length>>1)+r+t+a+u.slice(s);break;default:t=u+r+t+a}return A(t)}return p=void 0===p?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),n.toString=function(){return t+""},n}return{format:o,formatPrefix:function(t,e){var n=o(((t=Ls(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(Ds(e)/3))),i=Math.pow(10,-e),r=Xs[8+e/3];return function(t){return n(i*t)+r}}}}function Ys(t){return Fs=js(t),s.format=Fs.format,s.formatPrefix=Fs.formatPrefix,Fs}function Gs(t){return Math.max(0,-Ds(Math.abs(t)))}function Vs(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ds(e)/3)))-Ds(Math.abs(t)))}function Us(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ds(e)-Ds(t))+1}s.format=void 0,s.formatPrefix=void 0,Ys({thousands:",",grouping:[3],currency:["$",""]});var Hs=1e-6,qs=1e-12,Ws=Math.PI,Zs=Ws/2,Js=Ws/4,Ks=2*Ws,Qs=180/Ws,tu=Ws/180,eu=Math.abs,nu=Math.atan,iu=Math.atan2,ru=Math.cos,au=Math.ceil,ou=Math.exp,su=Math.hypot,uu=Math.log,cu=Math.pow,lu=Math.sin,hu=Math.sign||function(t){return 0<t?1:t<0?-1:0},du=Math.sqrt,fu=Math.tan;function gu(t){return 1<t?0:t<-1?Ws:Math.acos(t)}function pu(t){return 1<t?Zs:t<-1?-Zs:Math.asin(t)}function vu(t){return(t=lu(t/2))*t}function bu(){}function _u(t,e){t&&xu.hasOwnProperty(t.type)&&xu[t.type](t,e)}var yu={Feature:function(t,e){_u(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)_u(n[i].geometry,e)}},xu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){mu(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)mu(n[i],e,0)},Polygon:function(t,e){wu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)wu(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)_u(n[i],e)}};function mu(t,e,n){var i,r=-1,a=t.length-n;for(e.lineStart();++r<a;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function wu(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)mu(t[n],e,1);e.polygonEnd()}function Tu(t,e){t&&yu.hasOwnProperty(t.type)?yu[t.type](t,e):_u(t,e)}var Au,Mu,Su,ku,Eu,Cu,Ru,Du,Ou,Pu,Lu,Nu,zu,Iu,$u,Fu,Bu=new k,Xu=new k,ju={point:bu,lineStart:bu,lineEnd:bu,polygonStart:function(){Bu=new k,ju.lineStart=Yu,ju.lineEnd=Gu},polygonEnd:function(){var t=+Bu;Xu.add(t<0?Ks+t:t),this.lineStart=this.lineEnd=this.point=bu},sphere:function(){Xu.add(Ks)}};function Yu(){ju.point=Vu}function Gu(){Uu(Au,Mu)}function Vu(t,e){ju.point=Uu,Au=t,Mu=e,Su=t*=tu,ku=ru(e=(e*=tu)/2+Js),Eu=lu(e)}function Uu(t,e){var n=(t*=tu)-Su,i=0<=n?1:-1,r=i*n,a=ru(e=(e*=tu)/2+Js),o=lu(e),n=Eu*o,e=ku*a+n*ru(r),r=n*i*lu(r);Bu.add(iu(r,e)),Su=t,ku=a,Eu=o}function Hu(t){return[iu(t[1],t[0]),pu(t[2])]}function qu(t){var e=t[0],n=t[1],t=ru(n);return[t*ru(e),t*lu(e),lu(n)]}function Wu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Zu(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ju(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ku(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Qu(t){var e=du(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var tc,ec,nc,ic,rc,ac,oc,sc,uc,cc,lc,hc,dc,fc,gc,pc,vc={point:bc,lineStart:yc,lineEnd:xc,polygonStart:function(){vc.point=mc,vc.lineStart=wc,vc.lineEnd=Tc,Iu=new k,ju.polygonStart()},polygonEnd:function(){ju.polygonEnd(),vc.point=bc,vc.lineStart=yc,vc.lineEnd=xc,Bu<0?(Cu=-(Du=180),Ru=-(Ou=90)):Hs<Iu?Ou=90:Iu<-Hs&&(Ru=-90),Fu[0]=Cu,Fu[1]=Du},sphere:function(){Cu=-(Du=180),Ru=-(Ou=90)}};function bc(t,e){$u.push(Fu=[Cu=t,Du=t]),e<Ru&&(Ru=e),Ou<e&&(Ou=e)}function _c(t,e){var n,i,r,a,o,s=qu([t*tu,e*tu]);zu?(a=Zu(zu,s),Qu(n=Zu([a[1],-a[0],0],a)),a=(n=Hu(n))[0]*Qs*(r=0<(o=t-Pu)?1:-1),(o=180<eu(o))^(r*Pu<a&&a<r*t)?(i=n[1]*Qs)>Ou&&(Ou=i):o^(r*Pu<(a=(a+360)%360-180)&&a<r*t)?(i=-n[1]*Qs)<Ru&&(Ru=i):(e<Ru&&(Ru=e),Ou<e&&(Ou=e)),o?t<Pu?Ac(Cu,t)>Ac(Cu,Du)&&(Du=t):Ac(t,Du)>Ac(Cu,Du)&&(Cu=t):Cu<=Du?(t<Cu&&(Cu=t),Du<t&&(Du=t)):Pu<t?Ac(Cu,t)>Ac(Cu,Du)&&(Du=t):Ac(t,Du)>Ac(Cu,Du)&&(Cu=t)):$u.push(Fu=[Cu=t,Du=t]),e<Ru&&(Ru=e),Ou<e&&(Ou=e),zu=s,Pu=t}function yc(){vc.point=_c}function xc(){Fu[0]=Cu,Fu[1]=Du,vc.point=bc,zu=null}function mc(t,e){var n;zu?Iu.add(180<eu(n=t-Pu)?n+(0<n?360:-360):n):(Lu=t,Nu=e),ju.point(t,e),_c(t,e)}function wc(){ju.lineStart()}function Tc(){mc(Lu,Nu),ju.lineEnd(),eu(Iu)>Hs&&(Cu=-(Du=180)),Fu[0]=Cu,Fu[1]=Du,zu=null}function Ac(t,e){return(e-=t)<0?e+360:e}function Mc(t,e){return t[0]-e[0]}function Sc(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var kc={sphere:bu,point:Ec,lineStart:Rc,lineEnd:Pc,polygonStart:function(){kc.lineStart=Lc,kc.lineEnd=Nc},polygonEnd:function(){kc.lineStart=Rc,kc.lineEnd=Pc}};function Ec(t,e){t*=tu;var n=ru(e*=tu);Cc(n*ru(t),n*lu(t),lu(e))}function Cc(t,e,n){nc+=(t-nc)/++tc,ic+=(e-ic)/tc,rc+=(n-rc)/tc}function Rc(){kc.point=Dc}function Dc(t,e){t*=tu;var n=ru(e*=tu);fc=n*ru(t),gc=n*lu(t),pc=lu(e),kc.point=Oc,Cc(fc,gc,pc)}function Oc(t,e){t*=tu;var n=ru(e*=tu),i=n*ru(t),n=n*lu(t),t=lu(e),e=iu(du((e=gc*t-pc*n)*e+(e=pc*i-fc*t)*e+(e=fc*n-gc*i)*e),fc*i+gc*n+pc*t);ec+=e,ac+=e*(fc+(fc=i)),oc+=e*(gc+(gc=n)),sc+=e*(pc+(pc=t)),Cc(fc,gc,pc)}function Pc(){kc.point=Ec}function Lc(){kc.point=zc}function Nc(){Ic(hc,dc),kc.point=Ec}function zc(t,e){hc=t,dc=e,t*=tu,e*=tu,kc.point=Ic;var n=ru(e);fc=n*ru(t),gc=n*lu(t),pc=lu(e),Cc(fc,gc,pc)}function Ic(t,e){t*=tu;var n=ru(e*=tu),i=n*ru(t),r=n*lu(t),a=lu(e),o=gc*a-pc*r,s=pc*i-fc*a,n=fc*r-gc*i,t=su(o,s,n),e=pu(t),t=t&&-e/t;uc.add(t*o),cc.add(t*s),lc.add(t*n),ec+=e,ac+=e*(fc+(fc=i)),oc+=e*(gc+(gc=r)),sc+=e*(pc+(pc=a)),Cc(fc,gc,pc)}function $c(t){return function(){return t}}function Fc(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function Bc(t,e){return eu(t)>Ws&&(t-=Math.round(t/Ks)*Ks),[t,e]}function Xc(t,e,n){return(t%=Ks)?e||n?Fc(Yc(t),Gc(e,n)):Yc(t):e||n?Gc(e,n):Bc}function jc(n){return function(t,e){return eu(t+=n)>Ws&&(t-=Math.round(t/Ks)*Ks),[t,e]}}function Yc(t){var e=jc(t);return e.invert=jc(-t),e}function Gc(t,e){var r=ru(t),a=lu(t),o=ru(e),s=lu(e);function n(t,e){var n=ru(e),i=ru(t)*n,t=lu(t)*n,n=lu(e),e=n*r+i*a;return[iu(t*o-e*s,i*r-n*a),pu(e*o+t*s)]}return n.invert=function(t,e){var n=ru(e),i=ru(t)*n,t=lu(t)*n,n=lu(e),e=n*o-t*s;return[iu(t*o+n*s,i*r+e*a),pu(e*r-i*a)]},n}function Vc(e){function t(t){return(t=e(t[0]*tu,t[1]*tu))[0]*=Qs,t[1]*=Qs,t}return e=Xc(e[0]*tu,e[1]*tu,2<e.length?e[2]*tu:0),t.invert=function(t){return(t=e.invert(t[0]*tu,t[1]*tu))[0]*=Qs,t[1]*=Qs,t},t}function Uc(t,e,n,i,r,a){if(n){var o=ru(e),s=lu(e),u=i*n;null==r?(r=e+i*Ks,a=e-u/2):(r=Hc(o,r),a=Hc(o,a),(0<i?r<a:a<r)&&(r+=i*Ks));for(var c,l=r;0<i?a<l:l<a;l-=u)c=Hu([o,-s*ru(l),-s*lu(l)]),t.point(c[0],c[1])}}function Hc(t,e){(e=qu(e))[0]-=t,Qu(e);t=gu(-e[1]);return((-e[2]<0?-t:t)+Ks-Hs)%Ks}function qc(){var i,e=[];return{point:function(t,e,n){i.push([t,e,n])},lineStart:function(){e.push(i=[])},lineEnd:bu,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],i=null,t}}}function Wc(t,e){return eu(t[0]-e[0])<Hs&&eu(t[1]-e[1])<Hs}function Zc(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Jc(t,e,n,i,a){var o,r,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],r=t[e];if(Wc(i,r)){if(!i[2]&&!r[2]){for(a.lineStart(),o=0;o<e;++o)a.point((i=t[o])[0],i[1]);return void a.lineEnd()}r[0]+=2*Hs}s.push(n=new Zc(i,t,null,!0)),u.push(n.o=new Zc(i,null,n,!1)),s.push(n=new Zc(r,t,null,!1)),u.push(n.o=new Zc(r,null,n,!0))}}),s.length){for(u.sort(e),Kc(s),Kc(u),o=0,r=u.length;o<r;++o)u[o].e=n=!n;for(var c,l,h=s[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;c=d.z,a.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,r=c.length;o<r;++o)a.point((l=c[o])[0],l[1]);else i(d.x,d.n.x,1,a);d=d.n}else{if(f)for(c=d.p.z,o=c.length-1;0<=o;--o)a.point((l=c[o])[0],l[1]);else i(d.x,d.p.x,-1,a);d=d.p}}while(c=(d=d.o).z,f=!f,!d.v);a.lineEnd()}}}function Kc(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Qc(t){return eu(t[0])<=Ws?t[0]:hu(t[0])*((eu(t[0])+Ws)%Ks-Ws)}function tl(t,e){var n=Qc(e),i=e[1],e=lu(i),r=[lu(n),-ru(n),0],a=0,o=0,s=new k;1===e?i=Zs+Hs:-1===e&&(i=-Zs-Hs);for(var u=0,c=t.length;u<c;++u)if(h=(l=t[u]).length)for(var l,h,d=l[h-1],f=Qc(d),g=d[1]/2+Js,p=lu(g),v=ru(g),b=0;b<h;++b,f=y,p=m,v=w,d=_){var _=l[b],y=Qc(_),x=_[1]/2+Js,m=lu(x),w=ru(x),T=y-f,A=0<=T?1:-1,M=A*T,S=Ws<M,x=p*m;s.add(iu(x*A*lu(M),v*w+x*ru(M))),a+=S?T+A*Ks:T,S^n<=f^n<=y&&(Qu(M=Zu(qu(d),qu(_))),Qu(A=Zu(r,M)),((A=(S^0<=T?-1:1)*pu(A[2]))<i||i===A&&(M[0]||M[1]))&&(o+=S^0<=T?1:-1))}return(a<-Hs||a<Hs&&s<-qs)^1&o}function el(v,b,_,y){return function(s){var u,c,l,n=b(s),h=qc(),d=b(h),f=!1,e={point:i,lineStart:r,lineEnd:a,polygonStart:function(){e.point=g,e.lineStart=o,e.lineEnd=p,c=[],u=[]},polygonEnd:function(){e.point=i,e.lineStart=r,e.lineEnd=a,c=ht(c);var t=tl(u,y);c.length?(f||(s.polygonStart(),f=!0),Jc(c,il,t,_,s)):t&&(f||(s.polygonStart(),f=!0),s.lineStart(),_(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),c=u=null},sphere:function(){s.polygonStart(),s.lineStart(),_(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function i(t,e){v(t,e)&&s.point(t,e)}function t(t,e){n.point(t,e)}function r(){e.point=t,n.lineStart()}function a(){e.point=i,n.lineEnd()}function g(t,e){l.push([t,e]),d.point(t,e)}function o(){d.lineStart(),l=[]}function p(){g(l[0][0],l[0][1]),d.lineEnd();var t,e,n,i,r=d.clean(),a=h.result(),o=a.length;if(l.pop(),u.push(l),l=null,o)if(1&r){if(0<(e=(n=a[0]).length-1)){for(f||(s.polygonStart(),f=!0),s.lineStart(),t=0;t<e;++t)s.point((i=n[t])[0],i[1]);s.lineEnd()}}else 1<o&&2&r&&a.push(a.pop().concat(a.shift())),c.push(a.filter(nl))}return e}}function nl(t){return 1<t.length}function il(t,e){return((t=t.x)[0]<0?t[1]-Zs-Hs:Zs-t[1])-((e=e.x)[0]<0?e[1]-Zs-Hs:Zs-e[1])}Bc.invert=Bc;var rl=el(function(){return 1},function(c){var l,h=NaN,d=NaN,f=NaN;return{lineStart:function(){c.lineStart(),l=1},point:function(t,e){var n,i,r,a,o,s=0<t?Ws:-Ws,u=eu(t-h);eu(u-Ws)<Hs?(c.point(h,d=0<(d+e)/2?Zs:-Zs),c.point(f,d),c.lineEnd(),c.lineStart(),c.point(s,d),c.point(t,d),l=0):f!==s&&Ws<=u&&(eu(h-f)<Hs&&(h-=f*Hs),eu(t-s)<Hs&&(t-=s*Hs),i=d,a=e,o=lu((n=h)-(r=t)),d=eu(o)>Hs?nu((lu(i)*(u=ru(a))*lu(r)-lu(a)*(r=ru(i))*lu(n))/(r*u*o)):(i+a)/2,c.point(f,d),c.lineEnd(),c.lineStart(),c.point(s,d),l=0),c.point(h=t,d=e),f=s},lineEnd:function(){c.lineEnd(),h=d=NaN},clean:function(){return 2-l}}},function(t,e,n,i){var r;null==t?(i.point(-Ws,r=n*Zs),i.point(0,r),i.point(Ws,r),i.point(Ws,0),i.point(Ws,-r),i.point(0,-r),i.point(-Ws,-r),i.point(-Ws,0),i.point(-Ws,r)):eu(t[0]-e[0])>Hs?(t=t[0]<e[0]?Ws:-Ws,i.point(-t,r=n*t/2),i.point(0,r),i.point(t,r)):i.point(e[0],e[1])},[-Ws,-Zs]);function al(r){var f=ru(r),a=6*tu,d=0<f,g=eu(f)>Hs;function p(t,e){return ru(t)*ru(e)>f}function v(t,e,n){var i=[1,0,0],r=Zu(qu(t),qu(e)),a=Wu(r,r),o=r[0],s=a-o*o;if(!s)return!n&&t;var u=Zu(i,r),c=Ku(i,f*a/s);Ju(c,Ku(r,-f*o/s));var l=u,h=Wu(c,l),i=Wu(l,l),a=h*h-i*(Wu(c,c)-1);if(!(a<0)){r=du(a),o=Ku(l,(-h-r)/i);if(Ju(o,c),o=Hu(o),!n)return o;var d,s=t[0],u=e[0],a=t[1],n=e[1];u<s&&(d=s,s=u,u=d);t=u-s,e=eu(t-Ws)<Hs;if(!e&&n<a&&(d=a,a=n,n=d),e||t<Hs?e?0<a+n^o[1]<(eu(o[0]-s)<Hs?a:n):a<=o[1]&&o[1]<=n:Ws<t^(s<=o[0]&&o[0]<=u)){i=Ku(l,(-h+r)/i);return Ju(i,c),[o,Hu(i)]}}}function b(t,e){var n=d?r:Ws-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}return el(p,function(o){var s,u,c,l,h;return{lineStart:function(){l=c=!1,h=1},point:function(t,e){var n,i,r=[t,e],a=p(t,e),e=d?a?0:b(t,e):a?b(t+(t<0?Ws:-Ws),e):0;!s&&(l=c=a)&&o.lineStart(),a===c||(n=v(s,r))&&!Wc(s,n)&&!Wc(r,n)||(r[2]=1),a!==c?(h=0,a?(o.lineStart(),n=v(r,s),o.point(n[0],n[1])):(n=v(s,r),o.point(n[0],n[1],2),o.lineEnd()),s=n):g&&s&&d^a&&(e&u||!(i=v(r,s,!0))||(h=0,d?(o.lineStart(),o.point(i[0][0],i[0][1]),o.point(i[1][0],i[1][1]),o.lineEnd()):(o.point(i[1][0],i[1][1]),o.lineEnd(),o.lineStart(),o.point(i[0][0],i[0][1],3)))),!a||s&&Wc(s,r)||o.point(r[0],r[1]),s=r,c=a,u=e},lineEnd:function(){c&&o.lineEnd(),s=null},clean:function(){return h|(l&&c)<<1}}},function(t,e,n,i){Uc(i,r,a,n,t,e)},d?[0,-r]:[-Ws,r-Ws])}var ol,sl,ul,cl,ll=1e9,hl=-ll;function dl(b,_,y,x){function m(t,e){return b<=t&&t<=y&&_<=e&&e<=x}function w(t,e,n,i){var r=0,a=0;if(null==t||(r=o(t,n))!==(a=o(e,n))||s(t,e)<0^0<n)for(;i.point(0===r||3===r?b:y,1<r?x:_),(r=(r+n+4)%4)!==a;);else i.point(e[0],e[1])}function o(t,e){return eu(t[0]-b)<Hs?0<e?0:3:eu(t[0]-y)<Hs?0<e?2:1:eu(t[1]-_)<Hs?0<e?1:0:0<e?3:2}function T(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(i){var r,h,a,o,s,u,c,l,d,f,g,p=i,t=qc(),e={point:n,lineStart:function(){e.point=v,h&&h.push(a=[]),d=!(f=!0),c=l=NaN},lineEnd:function(){r&&(v(o,s),u&&d&&t.rejoin(),r.push(t.result())),e.point=n,d&&p.lineEnd()},polygonStart:function(){p=t,r=[],h=[],g=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=h.length;e<n;++e)for(var i,r,a=h[e],o=1,s=a.length,u=a[0],c=u[0],l=u[1];o<s;++o)i=c,r=l,c=(u=a[o])[0],l=u[1],r<=x?x<l&&(l-r)*(b-i)<(c-i)*(x-r)&&++t:l<=x&&(c-i)*(x-r)<(l-r)*(b-i)&&--t;return t}(),e=g&&t,n=(r=ht(r)).length;(e||n)&&(i.polygonStart(),e&&(i.lineStart(),w(null,null,1,i),i.lineEnd()),n&&Jc(r,T,t,w,i),i.polygonEnd()),p=i,r=h=a=null}};function n(t,e){m(t,e)&&p.point(t,e)}function v(t,e){var n,i,r=m(t,e);h&&a.push([t,e]),f?(o=t,s=e,f=!1,(u=r)&&(p.lineStart(),p.point(t,e))):r&&d?p.point(t,e):!function(t,e){var n=t[0],i=t[1],r=0,a=1,o=e[0]-n,s=e[1]-i,u=b-n;if(o||!(0<u)){if(u/=o,o<0){if(u<r)return;u<a&&(a=u)}else if(0<o){if(a<u)return;r<u&&(r=u)}if(u=y-n,o||!(u<0)){if(u/=o,o<0){if(a<u)return;r<u&&(r=u)}else if(0<o){if(u<r)return;u<a&&(a=u)}if(u=_-i,s||!(0<u)){if(u/=s,s<0){if(u<r)return;u<a&&(a=u)}else if(0<s){if(a<u)return;r<u&&(r=u)}if(u=x-i,s||!(u<0)){if(u/=s,s<0){if(a<u)return;r<u&&(r=u)}else if(0<s){if(u<r)return;u<a&&(a=u)}return 0<r&&(t[0]=n+r*o,t[1]=i+r*s),a<1&&(e[0]=n+a*o,e[1]=i+a*s),1}}}}}(n=[c=Math.max(hl,Math.min(ll,c)),l=Math.max(hl,Math.min(ll,l))],i=[t=Math.max(hl,Math.min(ll,t)),e=Math.max(hl,Math.min(ll,e))])?r&&(p.lineStart(),p.point(t,e),g=!1):(d||(p.lineStart(),p.point(n[0],n[1])),p.point(i[0],i[1]),r||p.lineEnd(),g=!1),c=t,l=e,d=r}return e}}var fl={sphere:bu,point:bu,lineStart:function(){fl.point=pl,fl.lineEnd=gl},lineEnd:bu,polygonStart:bu,polygonEnd:bu};function gl(){fl.point=fl.lineEnd=bu}function pl(t,e){sl=t*=tu,ul=lu(e*=tu),cl=ru(e),fl.point=vl}function vl(t,e){t*=tu;var n=lu(e*=tu),i=ru(e),r=eu(t-sl),a=ru(r),e=i*lu(r),r=cl*n-ul*i*a,a=ul*n+cl*i*a;ol.add(iu(du(e*e+r*r),a)),sl=t,ul=n,cl=i}function bl(t){return ol=new k,Tu(t,fl),+ol}var _l=[null,null],yl={type:"LineString",coordinates:_l};function xl(t,e){return _l[0]=t,_l[1]=e,bl(yl)}var ml={Feature:function(t,e){return Tl(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(Tl(n[i].geometry,e))return!0;return!1}},wl={Sphere:function(){return!0},Point:function(t,e){return Al(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Al(n[i],e))return!0;return!1},LineString:function(t,e){return Ml(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ml(n[i],e))return!0;return!1},Polygon:function(t,e){return Sl(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Sl(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(Tl(n[i],e))return!0;return!1}};function Tl(t,e){return!(!t||!wl.hasOwnProperty(t.type))&&wl[t.type](t,e)}function Al(t,e){return 0===xl(t,e)}function Ml(t,e){for(var n,i,r,a=0,o=t.length;a<o;a++){if(0===(i=xl(t[a],e)))return!0;if(0<a&&0<(r=xl(t[a],t[a-1]))&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<qs*r)return!0;n=i}return!1}function Sl(t,e){return!!tl(t.map(kl),El(e))}function kl(t){return(t=t.map(El)).pop(),t}function El(t){return[t[0]*tu,t[1]*tu]}function Cl(t,e,n){var i=dt(t,e-Hs,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function Rl(t,e,n){var i=dt(t,e-Hs,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function Dl(){var e,n,i,r,a,o,s,u,c,l,h,d,f=10,g=f,p=90,v=360,b=2.5;function _(){return{type:"MultiLineString",coordinates:t()}}function t(){return dt(au(r/p)*p,i,p).map(h).concat(dt(au(u/v)*v,s,v).map(d)).concat(dt(au(n/f)*f,e,f).filter(function(t){return eu(t%p)>Hs}).map(c)).concat(dt(au(o/g)*g,a,g).filter(function(t){return eu(t%v)>Hs}).map(l))}return _.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(d(s).slice(1),h(i).reverse().slice(1),d(u).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(r=+t[0][0],i=+t[1][0],u=+t[0][1],s=+t[1][1],i<r&&(t=r,r=i,i=t),s<u&&(t=u,u=s,s=t),_.precision(b)):[[r,u],[i,s]]},_.extentMinor=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],e<n&&(t=n,n=e,e=t),a<o&&(t=o,o=a,a=t),_.precision(b)):[[n,o],[e,a]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],_):[p,v]},_.stepMinor=function(t){return arguments.length?(f=+t[0],g=+t[1],_):[f,g]},_.precision=function(t){return arguments.length?(b=+t,c=Cl(o,a,90),l=Rl(n,e,b),h=Cl(u,s,90),d=Rl(r,i,b),_):b},_.extentMajor([[-180,-90+Hs],[180,90-Hs]]).extentMinor([[-180,-80-Hs],[180,80+Hs]])}var Ol,Pl,Ll,Nl,zl=t=>t,Il=new k,$l=new k,Fl={point:bu,lineStart:bu,lineEnd:bu,polygonStart:function(){Fl.lineStart=Bl,Fl.lineEnd=Yl},polygonEnd:function(){Fl.lineStart=Fl.lineEnd=Fl.point=bu,Il.add(eu($l)),$l=new k},result:function(){var t=Il/2;return Il=new k,t}};function Bl(){Fl.point=Xl}function Xl(t,e){Fl.point=jl,Ol=Ll=t,Pl=Nl=e}function jl(t,e){$l.add(Nl*t-Ll*e),Ll=t,Nl=e}function Yl(){jl(Ol,Pl)}var Gl,Vl,Ul,Hl,ql=Fl,Wl=1/0,Zl=Wl,Jl=-Wl,Kl=Jl,Ql={point:function(t,e){t<Wl&&(Wl=t),Jl<t&&(Jl=t),e<Zl&&(Zl=e),Kl<e&&(Kl=e)},lineStart:bu,lineEnd:bu,polygonStart:bu,polygonEnd:bu,result:function(){var t=[[Wl,Zl],[Jl,Kl]];return Jl=Kl=-(Zl=Wl=1/0),t}},th=0,eh=0,nh=0,ih=0,rh=0,ah=0,oh=0,sh=0,uh=0,ch={point:lh,lineStart:hh,lineEnd:gh,polygonStart:function(){ch.lineStart=ph,ch.lineEnd=vh},polygonEnd:function(){ch.point=lh,ch.lineStart=hh,ch.lineEnd=gh},result:function(){var t=uh?[oh/uh,sh/uh]:ah?[ih/ah,rh/ah]:nh?[th/nh,eh/nh]:[NaN,NaN];return th=eh=nh=ih=rh=ah=oh=sh=uh=0,t}};function lh(t,e){th+=t,eh+=e,++nh}function hh(){ch.point=dh}function dh(t,e){ch.point=fh,lh(Ul=t,Hl=e)}function fh(t,e){var n=t-Ul,i=e-Hl,i=du(n*n+i*i);ih+=i*(Ul+t)/2,rh+=i*(Hl+e)/2,ah+=i,lh(Ul=t,Hl=e)}function gh(){ch.point=lh}function ph(){ch.point=bh}function vh(){_h(Gl,Vl)}function bh(t,e){ch.point=_h,lh(Gl=Ul=t,Vl=Hl=e)}function _h(t,e){var n=t-Ul,i=e-Hl,i=du(n*n+i*i);ih+=i*(Ul+t)/2,rh+=i*(Hl+e)/2,ah+=i,oh+=(i=Hl*t-Ul*e)*(Ul+t),sh+=i*(Hl+e),uh+=3*i,lh(Ul=t,Hl=e)}var yh=ch;function xh(t){this._context=t}xh.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ks)}},result:bu};var mh,wh,Th,Ah,Mh,Sh=new k,kh={point:bu,lineStart:function(){kh.point=Eh},lineEnd:function(){mh&&Ch(wh,Th),kh.point=bu},polygonStart:function(){mh=!0},polygonEnd:function(){mh=null},result:function(){var t=+Sh;return Sh=new k,t}};function Eh(t,e){kh.point=Ch,wh=Ah=t,Th=Mh=e}function Ch(t,e){Ah-=t,Mh-=e,Sh.add(du(Ah*Ah+Mh*Mh)),Ah=t,Mh=e}var Rh=kh;let Dh,Oh,Ph,Lh;class Nh{constructor(t){this._append=null==t?zh:function(i){var t=Math.floor(i);if(!(0<=t))throw new RangeError(`invalid digits: ${i}`);if(15<t)return zh;if(t!==Dh){const i=10**t;Dh=t,Oh=function(t){let e=1;this._+=t[0];for(var n=t.length;e<n;++e)this._+=Math.round(arguments[e]*i)/i+t[e]}}return Oh}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==Ph||this._append!==Oh){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,Ph=t,Oh=this._append,Lh=this._,this._=e}this._+=Lh}}result(){var t=this._;return this._="",t.length?t:null}}function zh(t){let e=1;this._+=t[0];for(var n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ih(i){return function(t){var e,n=new $h;for(e in i)n[e]=i[e];return n.stream=t,n}}function $h(){}function Fh(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),Tu(n,t.stream(Ql)),e(Ql.result()),null!=i&&t.clipExtent(i),t}function Bh(r,a,t){return Fh(r,function(t){var e=a[1][0]-a[0][0],n=a[1][1]-a[0][1],i=Math.min(e/(t[1][0]-t[0][0]),n/(t[1][1]-t[0][1])),e=+a[0][0]+(e-i*(t[1][0]+t[0][0]))/2,t=+a[0][1]+(n-i*(t[1][1]+t[0][1]))/2;r.scale(150*i).translate([e,t])},t)}function Xh(t,e,n){return Bh(t,[[0,0],e],n)}function jh(i,r,t){return Fh(i,function(t){var e=+r,n=e/(t[1][0]-t[0][0]),e=(e-n*(t[1][0]+t[0][0]))/2,t=-n*t[0][1];i.scale(150*n).translate([e,t])},t)}function Yh(r,a,t){return Fh(r,function(t){var e=+a,n=e/(t[1][1]-t[0][1]),i=-n*t[0][0],t=(e-n*(t[1][1]+t[0][1]))/2;r.scale(150*n).translate([i,t])},t)}$h.prototype={constructor:$h,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Gh=16,Vh=ru(30*tu);function Uh(t,e){return+e?(k=t,E=e,function(i){var n,r,a,o,s,u,c,l,h,d,f,g,p={point:t,lineStart:e,lineEnd:b,polygonStart:function(){i.polygonStart(),p.lineStart=_},polygonEnd:function(){i.polygonEnd(),p.lineStart=e}};function t(t,e){t=k(t,e),i.point(t[0],t[1])}function e(){l=NaN,p.point=v,i.lineStart()}function v(t,e){var n=qu([t,e]),e=k(t,e);C(l,h,c,d,f,g,l=e[0],h=e[1],c=t,d=n[0],f=n[1],g=n[2],Gh,i),i.point(l,h)}function b(){p.point=t,i.lineEnd()}function _(){e(),p.point=y,p.lineEnd=x}function y(t,e){v(n=t,e),r=l,a=h,o=d,s=f,u=g,p.point=v}function x(){C(l,h,c,d,f,g,r,a,n,o,s,u,Gh,i),p.lineEnd=b,b()}return p}):(n=t,Ih({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}}));var n,k,E;function C(t,e,n,i,r,a,o,s,u,c,l,h,d,f){var g,p,v,b,_,y,x,m,w,T,A=o-t,M=s-e,S=A*A+M*M;4*E<S&&d--&&(v=a+h,w=pu(v/=b=du((g=i+c)*g+(p=r+l)*p+v*v)),_=eu(eu(v)-1)<Hs||eu(n-u)<Hs?(n+u)/2:iu(p,g),y=(T=k(_,w))[0],x=T[1],(E<(T=M*(m=y-t)-A*(w=x-e))*T/S||.3<eu((A*m+M*w)/S-.5)||i*c+r*l+a*h<Vh)&&(C(t,e,n,i,r,a,y,x,_,g/=b,p/=b,v,d,f),f.point(y,x),C(y,x,_,g,p,v,o,s,u,c,l,h,d,f)))}}var Hh=Ih({point:function(t,e){this.stream.point(t*tu,e*tu)}});function qh(t,n,i,r,a,e){if(!e)return s=t,u=n,c=i,l=r,h=a,o.invert=function(t,e){return[(t-u)/s*l,(c-e)/s*h]},o;function o(t,e){return[u+s*(t*=l),c-s*(e*=h)]}var s,u,c,l,h,d=ru(e),e=lu(e),f=d*t,g=e*t,p=d/t,v=e/t,b=(e*i-d*n)/t,_=(e*n+d*i)/t;function y(t,e){return[f*(t*=r)-g*(e*=a)+n,i-g*t-f*e]}return y.invert=function(t,e){return[r*(p*t-v*e+b),a*(_-v*t-p*e)]},y}function Wh(t){return Zh(function(){return t})()}function Zh(t){var e,i,n,r,a,o,s,u,c,l,h=150,d=480,f=250,g=0,p=0,v=0,b=0,_=0,y=0,x=1,m=1,w=null,T=rl,A=null,M=zl,S=.5;function k(t){return u(t[0]*tu,t[1]*tu)}function E(t){return(t=u.invert(t[0],t[1]))&&[t[0]*Qs,t[1]*Qs]}function C(){var t=qh(h,0,0,x,m,y).apply(null,e(g,p)),t=qh(h,d-t[0],f-t[1],x,m,y);return i=Xc(v,b,_),s=Fc(e,t),u=Fc(i,s),o=Uh(s,S),R()}function R(){return c=l=null,k}return k.stream=function(t){return c&&l===t?c:c=Hh((n=i,Ih({point:function(t,e){e=n(t,e);return this.stream.point(e[0],e[1])}})(T(o(M(l=t))))));var n},k.preclip=function(t){return arguments.length?(T=t,w=void 0,R()):T},k.postclip=function(t){return arguments.length?(M=t,A=n=r=a=null,R()):M},k.clipAngle=function(t){return arguments.length?(T=+t?al(w=t*tu):(w=null,rl),R()):w*Qs},k.clipExtent=function(t){return arguments.length?(M=null==t?(A=n=r=a=null,zl):dl(A=+t[0][0],n=+t[0][1],r=+t[1][0],a=+t[1][1]),R()):null==A?null:[[A,n],[r,a]]},k.scale=function(t){return arguments.length?(h=+t,C()):h},k.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],C()):[d,f]},k.center=function(t){return arguments.length?(g=t[0]%360*tu,p=t[1]%360*tu,C()):[g*Qs,p*Qs]},k.rotate=function(t){return arguments.length?(v=t[0]%360*tu,b=t[1]%360*tu,_=2<t.length?t[2]%360*tu:0,C()):[v*Qs,b*Qs,_*Qs]},k.angle=function(t){return arguments.length?(y=t%360*tu,C()):y*Qs},k.reflectX=function(t){return arguments.length?(x=t?-1:1,C()):x<0},k.reflectY=function(t){return arguments.length?(m=t?-1:1,C()):m<0},k.precision=function(t){return arguments.length?(o=Uh(s,S=t*t),R()):du(S)},k.fitExtent=function(t,e){return Bh(k,t,e)},k.fitSize=function(t,e){return Xh(k,t,e)},k.fitWidth=function(t,e){return jh(k,t,e)},k.fitHeight=function(t,e){return Yh(k,t,e)},function(){return e=t.apply(this,arguments),k.invert=e.invert&&E,C()}}function Jh(t){var e=0,n=Ws/3,i=Zh(t),t=i(e,n);return t.parallels=function(t){return arguments.length?i(e=t[0]*tu,n=t[1]*tu):[e*Qs,n*Qs]},t}function Kh(t,e){var n,i=lu(t),r=(i+lu(e))/2;if(eu(r)<Hs)return n=ru(t),a.invert=function(t,e){return[t/n,pu(e*n)]},a;function a(t,e){return[t*n,lu(e)/n]}var o=1+i*(2*r-i),s=du(o)/r;function u(t,e){e=du(o-2*r*lu(e))/r;return[e*lu(t*=r),s-e*ru(t)]}return u.invert=function(t,e){var n=s-e,e=iu(t,eu(n))*hu(n);return n*r<0&&(e-=Ws*hu(t)*hu(n)),[e/r,pu((o-(t*t+n*n)*r*r)/(2*r))]},u}function Qh(){return Jh(Kh).scale(155.424).center([0,33.6442])}function td(){return Qh().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ed(r){return function(t,e){var n=ru(t),i=ru(e),n=r(n*i);return n===1/0?[2,0]:[n*i*lu(t),n*lu(e)]}}function nd(a){return function(t,e){var n=du(t*t+e*e),i=a(n),r=lu(i),i=ru(i);return[iu(t*r,n*i),pu(n&&e*r/n)]}}var id=ed(function(t){return du(2/(1+t))});id.invert=nd(function(t){return 2*pu(t/2)});var rd=ed(function(t){return(t=gu(t))&&t/lu(t)});function ad(t,e){return[t,uu(fu((Zs+e)/2))]}function od(n){var i,r,a,o=Wh(n),e=o.center,s=o.scale,u=o.translate,c=o.clipExtent,l=null;function h(){var t=Ws*s(),e=o(Vc(o.rotate()).invert([0,0]));return c(null==l?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:n===ad?[[Math.max(e[0]-t,l),i],[Math.min(e[0]+t,r),a]]:[[l,Math.max(e[1]-t,i)],[r,Math.min(e[1]+t,a)]])}return o.scale=function(t){return arguments.length?(s(t),h()):s()},o.translate=function(t){return arguments.length?(u(t),h()):u()},o.center=function(t){return arguments.length?(e(t),h()):e()},o.clipExtent=function(t){return arguments.length?(null==t?l=i=r=a=null:(l=+t[0][0],i=+t[0][1],r=+t[1][0],a=+t[1][1]),h()):null==l?null:[[l,i],[r,a]]},h()}function sd(t){return fu((Zs+t)/2)}function ud(t,e){var n=ru(t),r=t===e?lu(t):uu(n/ru(e))/uu(sd(e)/sd(t)),a=n*cu(sd(t),r)/r;return r?(i.invert=function(t,e){var n=a-e,i=hu(r)*du(t*t+n*n),e=iu(t,eu(n))*hu(n);return n*r<0&&(e-=Ws*hu(t)*hu(n)),[e/r,2*nu(cu(a/i,1/r))-Zs]},i):ad;function i(t,e){0<a?e<-Zs+Hs&&(e=-Zs+Hs):Zs-Hs<e&&(e=Zs-Hs);e=a/cu(sd(e),r);return[e*lu(r*t),a-e*ru(r*t)]}}function cd(t,e){return[t,e]}function ld(t,e){var n=ru(t),i=t===e?lu(t):(n-ru(e))/(e-t),r=n/i+t;return eu(i)<Hs?cd:(a.invert=function(t,e){var n=r-e,e=iu(t,eu(n))*hu(n);return n*i<0&&(e-=Ws*hu(t)*hu(n)),[e/i,r-hu(i)*du(t*t+n*n)]},a);function a(t,e){e=r-e,t*=i;return[e*lu(t),r-e*ru(t)]}}rd.invert=nd(function(t){return t}),ad.invert=function(t,e){return[t,2*nu(ou(e))-Zs]},cd.invert=cd;var hd=1.340264,dd=-.081106,fd=893e-6,gd=.003796,pd=du(3)/2;function vd(t,e){var n=pu(pd*lu(e)),i=n*n,e=i*i*i;return[t*ru(n)/(pd*(hd+3*dd*i+e*(7*fd+9*gd*i))),n*(hd+dd*i+e*(fd+gd*i))]}function bd(t,e){var n=ru(e),i=ru(t)*n;return[n*lu(t)/i,lu(e)/i]}function _d(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function yd(t,e){return[ru(e)*lu(t),lu(e)]}function xd(t,e){var n=ru(e),i=1+ru(t)*n;return[n*lu(t)/i,lu(e)/i]}function md(t,e){return[uu(fu((Zs+e)/2)),-t]}function wd(t,e){return t.parent===e.parent?1:2}function Td(t,e){return t+e.x}function Ad(t,e){return Math.max(t,e.y)}function Md(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;0<=--i;)e+=n[i].value;else e=1;t.value=e}function Sd(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Ed)):void 0===e&&(e=kd);for(var n,i,r,a,o,t=new Dd(t),s=[t];n=s.pop();)if((r=e(n.data))&&(o=(r=Array.from(r)).length))for(n.children=r,a=o-1;0<=a;--a)s.push(i=r[a]=new Dd(r[a])),i.parent=n,i.depth=n.depth+1;return t.eachBefore(Rd)}function kd(t){return t.children}function Ed(t){return Array.isArray(t)?t[1]:null}function Cd(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Rd(t){for(var e=0;t.height=e,(t=t.parent)&&t.height<++e;);}function Dd(t){this.data=t,this.depth=this.height=0,this.parent=null}function Od(t){return null==t?null:Pd(t)}function Pd(t){if("function"!=typeof t)throw new Error;return t}function Ld(){return 0}function Nd(t){return function(){return t}}vd.invert=function(t,e){for(var n,i=e,r=i*i,a=r*r*r,o=0;o<12&&(a=(r=(i-=n=(i*(hd+dd*r+a*(fd+gd*r))-e)/(hd+3*dd*r+a*(7*fd+9*gd*r)))*i)*r*r,!(eu(n)<qs));++o);return[pd*t*(hd+3*dd*r+a*(7*fd+9*gd*r))/ru(i),pu(lu(i)/pd)]},bd.invert=nd(nu),_d.invert=function(t,e){var n=e,i=25;do{var r=n*n,a=r*r}while(n-=a=(n*(1.007226+r*(.015085+a*(.028874*r-.044475-.005916*a)))-e)/(1.007226+r*(.045255+a*(.259866*r-.311325-.005916*11*a))),eu(a)>Hs&&0<--i);return[t/(.8707+(r=n*n)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),n]},yd.invert=nd(pu),xd.invert=nd(function(t){return 2*nu(t)}),md.invert=function(t,e){return[-e,2*nu(ou(t))-Zs]},Dd.prototype=Sd.prototype={constructor:Dd,count:function(){return this.eachAfter(Md)},each:function(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this},eachAfter:function(t,e){for(var n,i,r,a=this,o=[a],s=[],u=-1;a=o.pop();)if(s.push(a),n=a.children)for(i=0,r=n.length;i<r;++i)o.push(n[i]);for(;a=s.pop();)t.call(e,a,++u,this);return this},eachBefore:function(t,e){for(var n,i,r,a=[this],o=-1;r=a.pop();)if(t.call(e,r,++o,this),n=r.children)for(i=n.length-1;0<=i;--i)a.push(n[i]);return this},find:function(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i},sum:function(r){return this.eachAfter(function(t){for(var e=+r(t.data)||0,n=t.children,i=n&&n.length;0<=--i;)e+=n[i].value;t.value=e})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,n=[];return e.each(function(t){t!==e&&n.push({source:t.parent,target:t})}),n},copy:function(){return Sd(this).eachBefore(Cd)},[Symbol.iterator]:function*(){var t,e,n,i,r,a=[this];do{for(t=a.reverse(),a=[];r=t.pop();)if(yield r,e=r.children)for(n=0,i=e.length;n<i;++n)a.push(e[n])}while(a.length)}};const zd=1664525,Id=1013904223,$d=4294967296;function Fd(){let t=1;return()=>(t=(zd*t+Id)%$d)/$d}function Bd(t,e){for(var n,i,r=0,a=(t=function(t,e){let n,i,r=t.length;for(;r;)i=e()*r--|0,n=t[r],t[r]=t[i],t[i]=n;return t}(Array.from(t),e)).length,o=[];r<a;)n=t[r],i&&jd(i,n)?++r:(i=function(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Gd(t[0],t[1]);case 3:return Vd(t[0],t[1],t[2])}}(o=function(t,e){var n,i;if(Yd(e,t))return[e];for(n=0;n<t.length;++n)if(Xd(e,t[n])&&Yd(Gd(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Xd(Gd(t[n],t[i]),e)&&Xd(Gd(t[n],e),t[i])&&Xd(Gd(t[i],e),t[n])&&Yd(Vd(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}(o,n)),r=0);return i}function Xd(t,e){var n=t.r-e.r,i=e.x-t.x,t=e.y-t.y;return n<0||n*n<i*i+t*t}function jd(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),i=e.x-t.x,t=e.y-t.y;return 0<n&&i*i+t*t<n*n}function Yd(t,e){for(var n=0;n<e.length;++n)if(!jd(t,e[n]))return;return 1}function Gd(t,e){var n=t.x,i=t.y,r=t.r,a=e.x,o=e.y,s=e.r,u=a-n,c=o-i,t=s-r,e=Math.sqrt(u*u+c*c);return{x:(n+a+u/e*t)/2,y:(i+o+c/e*t)/2,r:(e+r+s)/2}}function Vd(t,e,n){var i=t.x,r=t.y,a=t.r,o=e.x,s=e.y,u=e.r,c=n.x,l=n.y,h=n.r,d=i-o,f=i-c,g=r-s,p=r-l,t=u-a,e=h-a,n=i*i+r*r-a*a,u=n-o*o-s*s+u*u,c=n-c*c-l*l+h*h,l=f*g-d*p,h=(g*c-p*u)/(2*l)-i,g=(p*t-g*e)/l,c=(f*u-d*c)/(2*l)-r,f=(d*e-f*t)/l,t=g*g+f*f-1,l=2*(a+h*g+c*f),a=h*h+c*c-a*a,l=-(1e-6<Math.abs(t)?(l+Math.sqrt(l*l-4*t*a))/(2*t):a/l);return{x:i+h+g*l,y:r+c+f*l,r:l}}function Ud(t,e,n){var i,r,a,o,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(r=e.r+n.r,o=t.r+n.r,(r*=r)>(o*=o)?(i=(c+o-r)/(2*c),a=Math.sqrt(Math.max(0,o/c-i*i)),n.x=t.x-i*s-a*u,n.y=t.y-i*u+a*s):(i=(c+r-o)/(2*c),a=Math.sqrt(Math.max(0,r/c-i*i)),n.x=e.x+i*s-a*u,n.y=e.y+i*u+a*s)):(n.x=e.x+n.r,n.y=e.y)}function Hd(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,t=e.y-t.y;return 0<n&&i*i+t*t<n*n}function qd(t){var e=t._,n=t.next._,i=e.r+n.r,t=(e.x*n.r+n.x*e.r)/i,i=(e.y*n.r+n.y*e.r)/i;return t*t+i*i}function Wd(t){this._=t,this.next=null,this.previous=null}function Zd(t,e){if(!(o=(t="object"==typeof(n=t)&&"length"in n?n:Array.from(n)).length))return 0;var n,i,r,a,o,s,u,c,l,h,d,f;if((i=t[0]).x=0,i.y=0,!(1<o))return i.r;if(r=t[1],i.x=-r.r,r.x=i.r,r.y=0,!(2<o))return i.r+r.r;Ud(r,i,a=t[2]),i=new Wd(i),r=new Wd(r),a=new Wd(a),((i.next=a.previous=r).next=i.previous=a).next=r.previous=i;t:for(c=3;c<o;++c){Ud(i._,r._,a=t[c]),a=new Wd(a),l=r.next,h=i.previous,d=r._.r,f=i._.r;do{if(d<=f){if(Hd(l._,a._)){(i.next=r=l).previous=i,--c;continue t}d+=l._.r,l=l.next}else{if(Hd(h._,a._)){((i=h).next=r).previous=i,--c;continue t}f+=h._.r,h=h.previous}}while(l!==h.next);for(a.previous=i,a.next=r,i.next=r.previous=r=a,s=qd(i);(a=a.next)!==r;)(u=qd(a))<s&&(i=a,s=u);r=i.next}for(i=[r._],a=r;(a=a.next)!==r;)i.push(a._);for(a=Bd(i,e),c=0;c<o;++c)(i=t[c]).x-=a.x,i.y-=a.y;return a.r}function Jd(t){return Math.sqrt(t.value)}function Kd(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Qd(o,s,u){return function(t){if(e=t.children){var e,n,i,r=e.length,a=o(t)*s||0;if(a)for(n=0;n<r;++n)e[n].r+=a;if(i=Zd(e,u),a)for(n=0;n<r;++n)e[n].r-=a;t.r=i+a}}}function tf(n){return function(t){var e=t.parent;t.r*=n,e&&(t.x=e.x+n*t.x,t.y=e.y+n*t.y)}}function ef(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function nf(t,e,n,i,r){for(var a,o=t.children,s=-1,u=o.length,c=t.value&&(i-e)/t.value;++s<u;)(a=o[s]).y0=n,a.y1=r,a.x0=e,a.x1=e+=a.value*c}var rf={depth:-1},af={},of={};function sf(t){return t.id}function uf(t){return t.parentId}function cf(t){let e=t.length;if(e<2)return"";for(;1<--e&&!lf(t,e););return t.slice(0,e)}function lf(e,n){if("/"===e[n]){let t=0;for(;0<n&&"\\"===e[--n];)++t;if(0==(1&t))return 1}}function hf(t,e){return t.parent===e.parent?1:2}function df(t){var e=t.children;return e?e[0]:t.t}function ff(t){var e=t.children;return e?e[e.length-1]:t.t}function gf(t,e){this._=t,this.parent=null,this.children=null,this.A=null,(this.a=this).z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function pf(t,e,n,i,r){for(var a,o=t.children,s=-1,u=o.length,c=t.value&&(r-n)/t.value;++s<u;)(a=o[s]).x0=e,a.x1=i,a.y0=n,a.y1=n+=a.value*c}gf.prototype=Object.create(Dd.prototype);var vf=(1+Math.sqrt(5))/2;function bf(t,e,n,i,r,a){for(var o,s,u,c,l,h,d,f,g,p,v,b=[],_=e.children,y=0,x=0,m=_.length,w=e.value;y<m;){for(u=r-n,c=a-i;l=_[x++].value,!l&&x<m;);for(v=(h=d=l)*l*(p=Math.max(c/u,u/c)/(w*t)),g=Math.max(d/v,v/h);x<m;++x){if(l+=s=_[x].value,s<h&&(h=s),d<s&&(d=s),v=l*l*p,(f=Math.max(d/v,v/h))>g){l-=s;break}g=f}b.push(o={value:l,dice:u<c,children:_.slice(y,x)}),o.dice?nf(o,n,i,r,w?i+=c*l/w:a):pf(o,n,i,w?n+=u*l/w:r,a),w-=l,y=x}return b}var _f=function e(a){function t(t,e,n,i,r){bf(a,t,e,n,i,r)}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(vf),yf=function e(f){function t(t,e,n,i,r){if((a=t._squarify)&&a.ratio===f)for(var a,o,s,u,c,l=-1,h=a.length,d=t.value;++l<h;){for(s=(o=a[l]).children,u=o.value=0,c=s.length;u<c;++u)o.value+=s[u].value;o.dice?nf(o,e,n,i,d?n+=(r-n)*o.value/d:r):pf(o,e,n,d?e+=(i-e)*o.value/d:i,r),d-=o.value}else t._squarify=a=bf(f,t,e,n,i,r),a.ratio=f}return t.ratio=function(t){return e(1<(t=+t)?t:1)},t}(vf);function xf(t,e){return t[0]-e[0]||t[1]-e[1]}function mf(t){const e=t.length,n=[0,1];let i,r=2;for(i=2;i<e;++i){for(;1<r&&(a=t[n[r-2]],o=t[n[r-1]],s=t[i],(o[0]-a[0])*(s[1]-a[1])-(o[1]-a[1])*(s[0]-a[0])<=0);)--r;n[r++]=i}var a,o,s;return n.slice(0,r)}var wf=Math.random,Tf=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(wf),Af=function t(n){function e(t,e){return arguments.length<2&&(e=t,t=0),t=Math.floor(t),e=Math.floor(e)-t,function(){return Math.floor(n()*e+t)}}return e.source=t,e}(wf),Mf=function t(a){function e(e,n){var i,r;return e=null==e?0:+e,n=null==n?1:+n,function(){var t;if(null!=i)t=i,i=null;else for(;i=2*a()-1,t=2*a()-1,r=i*i+t*t,!r||1<r;);return e+n*t*Math.sqrt(-2*Math.log(r)/r)}}return e.source=t,e}(wf),Sf=function t(e){var n=Mf.source(e);function i(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return i.source=t,i}(wf),kf=function t(i){function e(n){return(n=+n)<=0?()=>0:function(){for(var t=0,e=n;1<e;--e)t+=i();return t+e*i()}}return e.source=t,e}(wf),Ef=function t(n){var i=kf.source(n);function e(t){if(0==(t=+t))return n;var e=i(t);return function(){return e()/t}}return e.source=t,e}(wf),Cf=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(wf),Rf=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(wf),Df=function t(e){function n(t){if((t=+t)<0||1<t)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(wf),Of=function t(e){function n(t){if((t=+t)<0||1<t)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(wf),Pf=function t(s){var u=Mf.source(s)();function e(t,i){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(i=null==i?1:+i,1===t)return()=>-Math.log1p(-s())*i;var r=(t<1?t+1:t)-1/3,a=1/(3*Math.sqrt(r)),o=t<1?()=>Math.pow(s(),1/t):()=>1;return function(){do{do{var t=u(),e=1+a*t}while(e<=0);e*=e*e;var n=1-s()}while(1-.0331*t*t*t*t<=n&&Math.log(n)>=.5*t*t+r*(1-e+Math.log(e)));return r*e*o()*i}}return e.source=t,e}(wf),Lf=function t(e){var r=Pf.source(e);function n(t,e){var n=r(t),i=r(e);return function(){var t=n();return 0===t?0:t/(t+i())}}return n.source=t,n}(wf),Nf=function t(e){var h=Of.source(e),d=Lf.source(e);function n(c,l){return c=+c,1<=(l=+l)?()=>c:l<=0?()=>0:function(){for(var t=0,e=c,n=l;16<e*n&&16<e*(1-n);){var i=Math.floor((e+1)*n),r=d(i,e-i+1)();r<=n?(t+=i,e-=i,n=(n-r)/(1-r)):(e=i-1,n/=r)}for(var a=n<.5,o=h(a?n:1-n),s=o(),u=0;s<=e;++u)s+=o();return t+(a?u:e-u)}}return n.source=t,n}(wf),zf=function t(r){function e(e,t,n){var i=0==(e=+e)?t=>-Math.log(t):(e=1/e,t=>Math.pow(t,e));return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*i(-Math.log1p(-r()))}}return e.source=t,e}(wf),If=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,function(){return t+e*Math.tan(Math.PI*n())}}return e.source=t,e}(wf),$f=function t(i){function e(e,n){return e=null==e?0:+e,n=null==n?1:+n,function(){var t=i();return e+n*Math.log(t/(1-t))}}return e.source=t,e}(wf),Ff=function t(s){var u=Pf.source(s),c=Nf.source(s);function e(o){return function(){for(var t=0,e=o;16<e;){var n=Math.floor(.875*e),i=u(n)();if(e<i)return t+c(n-1,e/i)();t+=n,e-=i}for(var r=-Math.log1p(-s()),a=0;r<=e;++a)r-=Math.log1p(-s());return t+a}}return e.source=t,e}(wf);const Bf=1/4294967296;function Xf(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function jf(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const Yf=Symbol("implicit");function Gf(){var n=new A,i=[],r=[],a=Yf;function o(t){let e=n.get(t);if(void 0===e){if(a!==Yf)return a;n.set(t,e=i.push(t)-1)}return r[e%r.length]}return o.domain=function(t){if(!arguments.length)return i.slice();i=[],n=new A;for(const e of t)n.has(e)||n.set(e,i.push(e)-1);return o},o.range=function(t){return arguments.length?(r=Array.from(t),o):r.slice()},o.unknown=function(t){return arguments.length?(a=t,o):a},o.copy=function(){return Gf(i,r).unknown(a)},Xf.apply(o,arguments),o}function Vf(){var r,a,t=Gf().unknown(void 0),o=t.domain,s=t.range,u=0,c=1,l=!1,h=0,d=0,f=.5;function e(){var t=o().length,e=c<u,n=e?c:u,i=e?u:c;r=(i-n)/Math.max(1,t-h+2*d),l&&(r=Math.floor(r)),n+=(i-n-r*(t-h))*f,a=r*(1-h),l&&(n=Math.round(n),a=Math.round(a));t=dt(t).map(function(t){return n+r*t});return s(e?t.reverse():t)}return delete t.unknown,t.domain=function(t){return arguments.length?(o(t),e()):o()},t.range=function(t){return arguments.length?([u,c]=t,u=+u,c=+c,e()):[u,c]},t.rangeRound=function(t){return[u,c]=t,u=+u,c=+c,l=!0,e()},t.bandwidth=function(){return a},t.step=function(){return r},t.round=function(t){return arguments.length?(l=!!t,e()):l},t.padding=function(t){return arguments.length?(h=Math.min(1,d=+t),e()):h},t.paddingInner=function(t){return arguments.length?(h=Math.min(1,t),e()):h},t.paddingOuter=function(t){return arguments.length?(d=+t,e()):d},t.align=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},t.copy=function(){return Vf(o(),[u,c]).round(l).paddingInner(h).paddingOuter(d).align(f)},Xf.apply(e(),arguments)}function Uf(t){return+t}var Hf=[0,1];function qf(t){return t}function Wf(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function Zf(t,e,n){var i=t[0],t=t[1],r=e[0],e=e[1],r=t<i?(i=Wf(t,i),n(e,r)):(i=Wf(i,t),n(r,e));return function(t){return r(i(t))}}function Jf(n,t,e){var i=Math.min(n.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=Wf(n[o],n[o+1]),a[o]=e(t[o],t[o+1]);return function(t){var e=_(n,t,1,i)-1;return a[e](r[e](t))}}function Kf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Qf(){var n,i,e,r,a,o,s=Hf,u=Hf,c=_i,l=qf;function h(){var e,n,t,i=Math.min(s.length,u.length);return l!==qf&&(e=s[0],(n=s[i-1])<e&&(t=e,e=n,n=t),l=function(t){return Math.max(e,Math.min(n,t))}),r=2<i?Jf:Zf,a=o=null,d}function d(t){return null==t||isNaN(t=+t)?e:(a=a||r(s.map(n),u,c))(n(l(t)))}return d.invert=function(t){return l(i((o=o||r(u,s.map(n),fi))(t)))},d.domain=function(t){return arguments.length?(s=Array.from(t,Uf),h()):s.slice()},d.range=function(t){return arguments.length?(u=Array.from(t),h()):u.slice()},d.rangeRound=function(t){return u=Array.from(t),c=yi,h()},d.clamp=function(t){return arguments.length?(l=!!t||qf,h()):l!==qf},d.interpolate=function(t){return arguments.length?(c=t,h()):c},d.unknown=function(t){return arguments.length?(e=t,d):e},function(t,e){return n=t,i=e,h()}}function tg(){return Qf()(qf,qf)}function eg(t,e,n,i){var r,a=J(t,e,n);switch((i=Ls(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=Vs(a,o))||(i.precision=r),s.formatPrefix(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=Us(a,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=Gs(a))||(i.precision=r-2*("%"===i.type))}return s.format(i)}function ng(c){var l=c.domain;return c.ticks=function(t){var e=l();return W(e[0],e[e.length-1],null==t?10:t)},c.tickFormat=function(t,e){var n=l();return eg(n[0],n[n.length-1],null==t?10:t,e)},c.nice=function(t){null==t&&(t=10);var e,n,i=l(),r=0,a=i.length-1,o=i[r],s=i[a],u=10;for(s<o&&(n=o,o=s,s=n,n=r,r=a,a=n);0<u--;){if((n=Z(o,s,t))===e)return i[r]=o,i[a]=s,l(i);if(0<n)o=Math.floor(o/n)*n,s=Math.ceil(s/n)*n;else{if(!(n<0))break;o=Math.ceil(o*n)/n,s=Math.floor(s*n)/n}e=n}return c},c}function ig(t,e){var n,i=0,r=(t=t.slice()).length-1,a=t[i],o=t[r];return o<a&&(n=i,i=r,r=n,n=a,a=o,o=n),t[i]=e.floor(a),t[r]=e.ceil(o),t}function rg(t){return Math.log(t)}function ag(t){return Math.exp(t)}function og(t){return-Math.log(-t)}function sg(t){return-Math.exp(-t)}function ug(t){return isFinite(t)?+("1e"+t):t<0?0:t}function cg(n){return(t,e)=>-n(-t,e)}function lg(t){const r=t(rg,ag),c=r.domain;let l,h,d=10;function e(){return l=(n=d)===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),t=>Math.log(t)/n),h=10===(e=d)?ug:e===Math.E?Math.exp:t=>Math.pow(e,t),c()[0]<0?(l=cg(l),h=cg(h),t(og,sg)):t(rg,ag),r;var e,n}return r.base=function(t){return arguments.length?(d=+t,e()):d},r.domain=function(t){return arguments.length?(c(t),e()):c()},r.ticks=t=>{var e=c();let n=e[0],i=e[e.length-1];e=i<n;e&&([n,i]=[i,n]);let r,a,o=l(n),s=l(i);t=null==t?10:+t;let u=[];if(!(d%1)&&s-o<t){if(o=Math.floor(o),s=Math.ceil(s),0<n){for(;o<=s;++o)for(r=1;r<d;++r)if(a=o<0?r/h(-o):r*h(o),!(a<n)){if(a>i)break;u.push(a)}}else for(;o<=s;++o)for(r=d-1;1<=r;--r)if(a=0<o?r/h(-o):r*h(o),!(a<n)){if(a>i)break;u.push(a)}2*u.length<t&&(u=W(n,i,t))}else u=W(o,s,Math.min(s-o,t)).map(h);return e?u.reverse():u},r.tickFormat=(t,n)=>{if(null==t&&(t=10),"function"!=typeof(n=null==n?10===d?"s":",":n)&&(d%1||null!=(n=Ls(n)).precision||(n.trim=!0),n=s.format(n)),t===1/0)return n;const i=Math.max(1,d*t/r.ticks().length);return t=>{let e=t/h(Math.round(l(t)));return e*d<d-.5&&(e*=d),e<=i?n(t):""}},r.nice=()=>c(ig(c(),{floor:t=>h(Math.floor(l(t))),ceil:t=>h(Math.ceil(l(t)))})),r}function hg(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function dg(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fg(e){var n=1,t=e(hg(n),dg(n));return t.constant=function(t){return arguments.length?e(hg(n=+t),dg(n)):n},ng(t)}function gg(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function pg(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vg(t){return t<0?-t*t:t*t}function bg(e){var t=e(qf,qf),n=1;return t.exponent=function(t){return arguments.length?1==(n=+t)?e(qf,qf):.5===n?e(pg,vg):e(gg(n),gg(1/n)):n},ng(t)}function _g(){var t=bg(Qf());return t.copy=function(){return Kf(t,_g()).exponent(t.exponent())},Xf.apply(t,arguments),t}function yg(t){return Math.sign(t)*t*t}const xg=new Date,mg=new Date;function wg(a,o,n,i){function s(t){return a(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=t=>(a(t=new Date(+t)),t),s.ceil=t=>(a(t=new Date(t-1)),o(t,1),a(t),t),s.round=t=>{var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=(t,e)=>(o(t=new Date(+t),null==e?1:Math.floor(e)),t),s.range=(t,e,n)=>{const i=[];if(t=s.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return i;for(var r;i.push(r=new Date(+t)),o(t,n),a(t),r<t&&t<e;);return i},s.filter=n=>wg(t=>{if(t<=t)for(;a(t),!n(t);)t.setTime(t-1)},(t,e)=>{if(t<=t)if(e<0)for(;++e<=0;)for(;o(t,-1),!n(t););else for(;0<=--e;)for(;o(t,1),!n(t););}),n&&(s.count=(t,e)=>(xg.setTime(+t),mg.setTime(+e),a(xg),a(mg),Math.floor(n(xg,mg))),s.every=e=>(e=Math.floor(e),isFinite(e)&&0<e?1<e?s.filter(i?t=>i(t)%e==0:t=>s.count(0,t)%e==0):s:null)),s}const Tg=wg(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Tg.every=n=>(n=Math.floor(n),isFinite(n)&&0<n?1<n?wg(t=>{t.setTime(Math.floor(t/n)*n)},(t,e)=>{t.setTime(+t+e*n)},(t,e)=>(e-t)/n):Tg:null);const Ag=Tg.range,Mg=6e4,Sg=36e5,kg=864e5,Eg=6048e5,Cg=31536e6,Rg=wg(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+1e3*e)},(t,e)=>(e-t)/1e3,t=>t.getUTCSeconds()),Dg=Rg.range,Og=wg(t=>{t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},(t,e)=>{t.setTime(+t+e*Mg)},(t,e)=>(e-t)/Mg,t=>t.getMinutes()),Pg=Og.range,Lg=wg(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Mg)},(t,e)=>(e-t)/Mg,t=>t.getUTCMinutes()),Ng=Lg.range,zg=wg(t=>{t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Mg)},(t,e)=>{t.setTime(+t+e*Sg)},(t,e)=>(e-t)/Sg,t=>t.getHours()),Ig=zg.range,$g=wg(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Sg)},(t,e)=>(e-t)/Sg,t=>t.getUTCHours()),Fg=$g.range,Bg=wg(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Mg)/kg,t=>t.getDate()-1),Xg=Bg.range,jg=wg(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/kg,t=>t.getUTCDate()-1),Yg=jg.range,Gg=wg(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/kg,t=>Math.floor(t/kg)),Vg=Gg.range;function Ug(e){return wg(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+7*e)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Mg)/Eg)}const Hg=Ug(0),qg=Ug(1),Wg=Ug(2),Zg=Ug(3),Jg=Ug(4),Kg=Ug(5),Qg=Ug(6),tp=Hg.range,ep=qg.range,np=Wg.range,ip=Zg.range,rp=Jg.range,ap=Kg.range,op=Qg.range;function sp(e){return wg(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)},(t,e)=>(e-t)/Eg)}const up=sp(0),cp=sp(1),lp=sp(2),hp=sp(3),dp=sp(4),fp=sp(5),gp=sp(6),pp=up.range,vp=cp.range,bp=lp.range,_p=hp.range,yp=dp.range,xp=fp.range,mp=gp.range,wp=wg(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()),t=>t.getMonth()),Tp=wp.range,Ap=wg(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear()),t=>t.getUTCMonth()),Mp=Ap.range,Sp=wg(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Sp.every=n=>isFinite(n=Math.floor(n))&&0<n?wg(t=>{t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e*n)}):null;const kp=Sp.range,Ep=wg(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ep.every=n=>isFinite(n=Math.floor(n))&&0<n?wg(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null;var Cp=Ep.range;function Rp(s,t,e,n,i,r){const u=[[Rg,1,1e3],[Rg,5,5e3],[Rg,15,15e3],[Rg,30,3e4],[r,1,Mg],[r,5,3e5],[r,15,9e5],[r,30,18e5],[i,1,Sg],[i,3,108e5],[i,6,216e5],[i,12,432e5],[n,1,kg],[n,2,1728e5],[e,1,Eg],[t,1,2592e6],[t,3,7776e6],[s,1,Cg]];function o(t,e,n){var i=Math.abs(e-t)/n,r=c(([,,t])=>t).right(u,i);if(r===u.length)return s.every(J(t/Cg,e/Cg,n));if(0===r)return Tg.every(Math.max(J(t,e,n),1));const[a,o]=u[i/u[r-1][2]<u[r][2]/i?r-1:r];return a.every(o)}return[function(t,e,n){var i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:o(t,e,n),a=r?r.range(t,+e+1):[];return i?a.reverse():a},o]}const[Dp,Op]=Rp(Ep,Ap,up,Gg,$g,Lg),[Pp,Lp]=Rp(Sp,wp,Hg,Bg,zg,Og);function Np(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zp(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ip(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function $p(t){var i=t.dateTime,r=t.date,a=t.time,e=t.periods,n=t.days,o=t.shortDays,s=t.months,u=t.shortMonths,c=Up(e),l=Hp(e),h=Up(n),d=Hp(n),f=Up(o),g=Hp(o),p=Up(s),v=Hp(s),b=Up(u),_=Hp(u),y={a:function(t){return o[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:gv,e:gv,f:yv,g:Rv,G:Ov,H:pv,I:vv,j:bv,L:_v,m:xv,M:mv,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:eb,s:nb,S:wv,u:Tv,U:Av,V:Sv,w:kv,W:Ev,x:null,X:null,y:Cv,Y:Dv,Z:Pv,"%":tb},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Lv,e:Lv,f:Fv,g:Zv,G:Kv,H:Nv,I:zv,j:Iv,L:$v,m:Bv,M:Xv,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:eb,s:nb,S:jv,u:Yv,U:Gv,V:Uv,w:Hv,W:qv,x:null,X:null,y:Wv,Y:Jv,Z:Qv,"%":tb},m={a:function(t,e,n){e=f.exec(e.slice(n));return e?(t.w=g.get(e[0].toLowerCase()),n+e[0].length):-1},A:function(t,e,n){e=h.exec(e.slice(n));return e?(t.w=d.get(e[0].toLowerCase()),n+e[0].length):-1},b:function(t,e,n){e=b.exec(e.slice(n));return e?(t.m=_.get(e[0].toLowerCase()),n+e[0].length):-1},B:function(t,e,n){e=p.exec(e.slice(n));return e?(t.m=v.get(e[0].toLowerCase()),n+e[0].length):-1},c:function(t,e,n){return A(t,i,e,n)},d:rv,e:rv,f:lv,g:tv,G:Qp,H:ov,I:ov,j:av,L:cv,m:iv,M:sv,p:function(t,e,n){e=c.exec(e.slice(n));return e?(t.p=l.get(e[0].toLowerCase()),n+e[0].length):-1},q:nv,Q:dv,s:fv,S:uv,u:Wp,U:Zp,V:Jp,w:qp,W:Kp,x:function(t,e,n){return A(t,r,e,n)},X:function(t,e,n){return A(t,a,e,n)},y:tv,Y:Qp,Z:ev,"%":hv};function w(u,c){return function(t){var e,n,i,r=[],a=-1,o=0,s=u.length;for(t instanceof Date||(t=new Date(+t));++a<s;)37===u.charCodeAt(a)&&(r.push(u.slice(o,a)),null!=(n=Bp[e=u.charAt(++a)])?e=u.charAt(++a):n="e"===e?" ":"0",(i=c[e])&&(e=i(t,n)),r.push(e),o=a+1);return r.push(u.slice(o,a)),r.join("")}}function T(r,a){return function(t){var e,n,i=Ip(1900,void 0,1);if(A(i,r,t+="",0)!=t.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(!a||"Z"in i||(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||53<i.V)return null;"w"in i||(i.w=1),"Z"in i?(e=4<(n=(e=zp(Ip(i.y,0,1))).getUTCDay())||0===n?cp.ceil(e):cp(e),e=jg.offset(e,7*(i.V-1)),i.y=e.getUTCFullYear(),i.m=e.getUTCMonth(),i.d=e.getUTCDate()+(i.w+6)%7):(e=4<(n=(e=Np(Ip(i.y,0,1))).getDay())||0===n?qg.ceil(e):qg(e),e=Bg.offset(e,7*(i.V-1)),i.y=e.getFullYear(),i.m=e.getMonth(),i.d=e.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),n="Z"in i?zp(Ip(i.y,0,1)).getUTCDay():Np(Ip(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(n+5)%7:i.w+7*i.U-(n+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,zp(i)):Np(i)}}function A(t,e,n,i){for(var r,a,o=0,s=e.length,u=n.length;o<s;){if(u<=i)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(a=m[r in Bp?e.charAt(o++):r])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return y.x=w(r,y),y.X=w(a,y),y.c=w(i,y),x.x=w(r,x),x.X=w(a,x),x.c=w(i,x),{format:function(t){var e=w(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=T(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=T(t+="",!0);return e.toString=function(){return t},e}}}var Fp,Bp={"-":"",_:" ",0:"0"},Xp=/^\s*\d+/,jp=/^%/,Yp=/[\\^$*+?|[\]().{}]/g;function Gp(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",t=r.length;return i+(t<n?new Array(n-t+1).join(e)+r:r)}function Vp(t){return t.replace(Yp,"\\$&")}function Up(t){return new RegExp("^(?:"+t.map(Vp).join("|")+")","i")}function Hp(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function qp(t,e,n){e=Xp.exec(e.slice(n,n+1));return e?(t.w=+e[0],n+e[0].length):-1}function Wp(t,e,n){e=Xp.exec(e.slice(n,n+1));return e?(t.u=+e[0],n+e[0].length):-1}function Zp(t,e,n){e=Xp.exec(e.slice(n,n+2));return e?(t.U=+e[0],n+e[0].length):-1}function Jp(t,e,n){e=Xp.exec(e.slice(n,n+2));return e?(t.V=+e[0],n+e[0].length):-1}function Kp(t,e,n){e=Xp.exec(e.slice(n,n+2));return e?(t.W=+e[0],n+e[0].length):-1}function Qp(t,e,n){e=Xp.exec(e.slice(n,n+4));return e?(t.y=+e[0],n+e[0].length):-1}function tv(t,e,n){e=Xp.exec(e.slice(n,n+2));return e?(t.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function ev(t,e,n){e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return e?(t.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function nv(t,e,n){e=Xp.exec(e.slice(n,n+1));return e?(t.q=3*e[0]-3,n+e[0].length):-1}function iv(t,e,n){e=Xp.exec(e.slice(n,n+2));return e?(t.m=e[0]-1,n+e[0].length):-1}function rv(t,e,n){e=Xp.exec(e.slice(n,n+2));return e?(t.d=+e[0],n+e[0].length):-1}function av(t,e,n){e=Xp.exec(e.slice(n,n+3));return e?(t.m=0,t.d=+e[0],n+e[0].length):-1}function ov(t,e,n){e=Xp.exec(e.slice(n,n+2));return e?(t.H=+e[0],n+e[0].length):-1}function sv(t,e,n){e=Xp.exec(e.slice(n,n+2));return e?(t.M=+e[0],n+e[0].length):-1}function uv(t,e,n){e=Xp.exec(e.slice(n,n+2));return e?(t.S=+e[0],n+e[0].length):-1}function cv(t,e,n){e=Xp.exec(e.slice(n,n+3));return e?(t.L=+e[0],n+e[0].length):-1}function lv(t,e,n){e=Xp.exec(e.slice(n,n+6));return e?(t.L=Math.floor(e[0]/1e3),n+e[0].length):-1}function hv(t,e,n){e=jp.exec(e.slice(n,n+1));return e?n+e[0].length:-1}function dv(t,e,n){e=Xp.exec(e.slice(n));return e?(t.Q=+e[0],n+e[0].length):-1}function fv(t,e,n){e=Xp.exec(e.slice(n));return e?(t.s=+e[0],n+e[0].length):-1}function gv(t,e){return Gp(t.getDate(),e,2)}function pv(t,e){return Gp(t.getHours(),e,2)}function vv(t,e){return Gp(t.getHours()%12||12,e,2)}function bv(t,e){return Gp(1+Bg.count(Sp(t),t),e,3)}function _v(t,e){return Gp(t.getMilliseconds(),e,3)}function yv(t,e){return _v(t,e)+"000"}function xv(t,e){return Gp(t.getMonth()+1,e,2)}function mv(t,e){return Gp(t.getMinutes(),e,2)}function wv(t,e){return Gp(t.getSeconds(),e,2)}function Tv(t){t=t.getDay();return 0===t?7:t}function Av(t,e){return Gp(Hg.count(Sp(t)-1,t),e,2)}function Mv(t){var e=t.getDay();return 4<=e||0===e?Jg(t):Jg.ceil(t)}function Sv(t,e){return t=Mv(t),Gp(Jg.count(Sp(t),t)+(4===Sp(t).getDay()),e,2)}function kv(t){return t.getDay()}function Ev(t,e){return Gp(qg.count(Sp(t)-1,t),e,2)}function Cv(t,e){return Gp(t.getFullYear()%100,e,2)}function Rv(t,e){return Gp((t=Mv(t)).getFullYear()%100,e,2)}function Dv(t,e){return Gp(t.getFullYear()%1e4,e,4)}function Ov(t,e){var n=t.getDay();return Gp((t=4<=n||0===n?Jg(t):Jg.ceil(t)).getFullYear()%1e4,e,4)}function Pv(t){t=t.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+Gp(t/60|0,"0",2)+Gp(t%60,"0",2)}function Lv(t,e){return Gp(t.getUTCDate(),e,2)}function Nv(t,e){return Gp(t.getUTCHours(),e,2)}function zv(t,e){return Gp(t.getUTCHours()%12||12,e,2)}function Iv(t,e){return Gp(1+jg.count(Ep(t),t),e,3)}function $v(t,e){return Gp(t.getUTCMilliseconds(),e,3)}function Fv(t,e){return $v(t,e)+"000"}function Bv(t,e){return Gp(t.getUTCMonth()+1,e,2)}function Xv(t,e){return Gp(t.getUTCMinutes(),e,2)}function jv(t,e){return Gp(t.getUTCSeconds(),e,2)}function Yv(t){t=t.getUTCDay();return 0===t?7:t}function Gv(t,e){return Gp(up.count(Ep(t)-1,t),e,2)}function Vv(t){var e=t.getUTCDay();return 4<=e||0===e?dp(t):dp.ceil(t)}function Uv(t,e){return t=Vv(t),Gp(dp.count(Ep(t),t)+(4===Ep(t).getUTCDay()),e,2)}function Hv(t){return t.getUTCDay()}function qv(t,e){return Gp(cp.count(Ep(t)-1,t),e,2)}function Wv(t,e){return Gp(t.getUTCFullYear()%100,e,2)}function Zv(t,e){return Gp((t=Vv(t)).getUTCFullYear()%100,e,2)}function Jv(t,e){return Gp(t.getUTCFullYear()%1e4,e,4)}function Kv(t,e){var n=t.getUTCDay();return Gp((t=4<=n||0===n?dp(t):dp.ceil(t)).getUTCFullYear()%1e4,e,4)}function Qv(){return"+0000"}function tb(){return"%"}function eb(t){return+t}function nb(t){return Math.floor(+t/1e3)}function ib(t){return Fp=$p(t),s.timeFormat=Fp.format,s.timeParse=Fp.parse,s.utcFormat=Fp.utcFormat,s.utcParse=Fp.utcParse,Fp}s.timeFormat=void 0,s.timeParse=void 0,s.utcFormat=void 0,s.utcParse=void 0,ib({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var rb="%Y-%m-%dT%H:%M:%S.%LZ",ab=Date.prototype.toISOString?function(t){return t.toISOString()}:s.utcFormat(rb),ob=+new Date("2000-01-01T00:00:00.000Z")?function(t){t=new Date(t);return isNaN(t)?null:t}:s.utcParse(rb);function sb(t){return new Date(t)}function ub(t){return t instanceof Date?+t:+new Date(+t)}function cb(n,i,e,r,a,o,s,u,c,l){var h=tg(),d=h.invert,f=h.domain,g=l(".%L"),p=l(":%S"),v=l("%I:%M"),b=l("%I %p"),_=l("%a %d"),y=l("%b %d"),x=l("%B"),m=l("%Y");function w(t){return(c(t)<t?g:u(t)<t?p:s(t)<t?v:o(t)<t?b:r(t)<t?a(t)<t?_:y:e(t)<t?x:m)(t)}return h.invert=function(t){return new Date(d(t))},h.domain=function(t){return arguments.length?f(Array.from(t,ub)):f().map(sb)},h.ticks=function(t){var e=f();return n(e[0],e[e.length-1],null==t?10:t)},h.tickFormat=function(t,e){return null==e?w:l(e)},h.nice=function(t){var e=f();return(t=!t||"function"!=typeof t.range?i(e[0],e[e.length-1],null==t?10:t):t)?f(ig(e,t)):h},h.copy=function(){return Kf(h,cb(n,i,e,r,a,o,s,u,c,l))},h}function lb(){var e,n,i,r,a,o=0,s=1,u=qf,c=!1;function l(t){return null==t||isNaN(t=+t)?a:u(0===i?.5:(t=(r(t)-e)*i,c?Math.max(0,Math.min(1,t)):t))}function t(n){return function(t){var e;return arguments.length?([e,t]=t,u=n(e,t),l):[u(0),u(1)]}}return l.domain=function(t){return arguments.length?([o,s]=t,e=r(o=+o),n=r(s=+s),i=e===n?0:1/(n-e),l):[o,s]},l.clamp=function(t){return arguments.length?(c=!!t,l):c},l.interpolator=function(t){return arguments.length?(u=t,l):u},l.range=t(_i),l.rangeRound=t(yi),l.unknown=function(t){return arguments.length?(a=t,l):a},function(t){return e=(r=t)(o),n=t(s),i=e===n?0:1/(n-e),l}}function hb(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function db(){var t=bg(lb());return t.copy=function(){return hb(t,db()).exponent(t.exponent())},jf.apply(t,arguments)}function fb(){var e,n,i,r,a,o,s,u=0,c=.5,l=1,h=1,d=qf,f=!1;function g(t){return isNaN(t=+t)?s:(t=.5+((t=+o(t))-n)*(h*t<h*n?r:a),d(f?Math.max(0,Math.min(1,t)):t))}function t(i){return function(t){var e,n;return arguments.length?([e,n,t]=t,d=$i(i,[e,n,t]),g):[d(0),d(.5),d(1)]}}return g.domain=function(t){return arguments.length?([u,c,l]=t,e=o(u=+u),n=o(c=+c),i=o(l=+l),r=e===n?0:.5/(n-e),a=n===i?0:.5/(i-n),h=n<e?-1:1,g):[u,c,l]},g.clamp=function(t){return arguments.length?(f=!!t,g):f},g.interpolator=function(t){return arguments.length?(d=t,g):d},g.range=t(_i),g.rangeRound=t(yi),g.unknown=function(t){return arguments.length?(s=t,g):s},function(t){return e=(o=t)(u),n=t(c),i=t(l),r=e===n?0:.5/(n-e),a=n===i?0:.5/(i-n),h=n<e?-1:1,g}}function gb(){var t=bg(fb());return t.copy=function(){return hb(t,gb()).exponent(t.exponent())},jf.apply(t,arguments)}function pb(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}var vb=pb("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),bb=pb("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),_b=pb("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),yb=pb("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),xb=pb("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),mb=pb("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),wb=pb("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Tb=pb("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ab=pb("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Mb=pb("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Sb=t=>si(t[t.length-1]),kb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(pb),Eb=Sb(kb),Cb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(pb),Rb=Sb(Cb),Db=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(pb),Ob=Sb(Db),Pb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(pb),Lb=Sb(Pb),Nb=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(pb),zb=Sb(Nb),Ib=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(pb),$b=Sb(Ib),Fb=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(pb),Bb=Sb(Fb),Xb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(pb),jb=Sb(Xb),Yb=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(pb),Gb=Sb(Yb),Vb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(pb),Ub=Sb(Vb),Hb=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(pb),qb=Sb(Hb),Wb=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(pb),Zb=Sb(Wb),Jb=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(pb),Kb=Sb(Jb),Qb=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(pb),t_=Sb(Qb),e_=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(pb),n_=Sb(e_),i_=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(pb),r_=Sb(i_),a_=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(pb),o_=Sb(a_),s_=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(pb),u_=Sb(s_),c_=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(pb),l_=Sb(c_),h_=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(pb),d_=Sb(h_),f_=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(pb),g_=Sb(f_),p_=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(pb),v_=Sb(p_),b_=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(pb),__=Sb(b_),y_=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(pb),x_=Sb(y_),m_=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(pb),w_=Sb(m_),T_=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(pb),A_=Sb(T_),M_=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(pb),S_=Sb(M_),k_=Ii(Wn(300,.5,0),Wn(-240,.5,1)),E_=Ii(Wn(-100,.75,.35),Wn(80,1.5,.8)),C_=Ii(Wn(260,.75,.35),Wn(80,1.5,.8)),R_=Wn(),D_=un(),O_=Math.PI/3,P_=2*Math.PI/3;function L_(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var N_=L_(pb("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),z_=L_(pb("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),I_=L_(pb("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),$_=L_(pb("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function F_(t){return function(){return t}}const B_=Math.abs,X_=Math.atan2,j_=Math.cos,Y_=Math.max,G_=Math.min,V_=Math.sin,U_=Math.sqrt,H_=1e-12,q_=Math.PI,W_=q_/2,Z_=2*q_;function J_(t){return 1<=t?W_:t<=-1?-W_:Math.asin(t)}function K_(e){let n=3;return e.digits=function(t){if(!arguments.length)return n;if(null==t)n=null;else{const e=Math.floor(t);if(!(0<=e))throw new RangeError(`invalid digits: ${t}`);n=e}return e},()=>new $a(n)}function Q_(t){return t.innerRadius}function ty(t){return t.outerRadius}function ey(t){return t.startAngle}function ny(t){return t.endAngle}function iy(t){return t&&t.padAngle}function ry(t,e,n,i,r,a,o){var s=t-n,u=e-i,c=(o?a:-a)/U_(s*s+u*u),l=c*u,h=-c*s,d=t+l,f=e+h,o=n+l,u=i+h,c=(d+o)/2,s=(f+u)/2,t=o-d,e=u-f,n=t*t+e*e,i=r-a,a=d*u-o*f,d=(e<0?-1:1)*U_(Y_(0,i*i*n-a*a)),u=(a*e-t*d)/n,o=(-a*t-e*d)/n,f=(a*e+t*d)/n,e=(-a*t+e*d)/n,d=u-c,n=o-s,c=f-c,s=e-s;return c*c+s*s<d*d+n*n&&(u=f,o=e),{cx:u,cy:o,x01:-l,y01:-h,x11:u*(r/i-1),y11:o*(r/i-1)}}var ay=Array.prototype.slice;function oy(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function sy(t){this._context=t}function uy(t){return new sy(t)}function cy(t){return t[0]}function ly(t){return t[1]}function hy(o,s){var u=F_(!0),c=null,l=uy,h=null,d=K_(e);function e(t){var e,n,i,r=(t=oy(t)).length,a=!1;for(null==c&&(h=l(i=d())),e=0;e<=r;++e)!(e<r&&u(n=t[e],e,t))===a&&((a=!a)?h.lineStart():h.lineEnd()),a&&h.point(+o(n,e,t),+s(n,e,t));if(i)return h=null,i+""||null}return o="function"==typeof o?o:void 0===o?cy:F_(o),s="function"==typeof s?s:void 0===s?ly:F_(s),e.x=function(t){return arguments.length?(o="function"==typeof t?t:F_(+t),e):o},e.y=function(t){return arguments.length?(s="function"==typeof t?t:F_(+t),e):s},e.defined=function(t){return arguments.length?(u="function"==typeof t?t:F_(!!t),e):u},e.curve=function(t){return arguments.length?(l=t,null!=c&&(h=l(c)),e):l},e.context=function(t){return arguments.length?(null==t?c=h=null:h=l(c=t),e):c},e}function dy(l,h,d){var f=null,g=F_(!0),p=null,v=uy,b=null,_=K_(e);function e(t){var e,n,i,r,a,o=(t=oy(t)).length,s=!1,u=new Array(o),c=new Array(o);for(null==p&&(b=v(a=_())),e=0;e<=o;++e){if(!(e<o&&g(r=t[e],e,t))===s)if(s=!s)n=e,b.areaStart(),b.lineStart();else{for(b.lineEnd(),b.lineStart(),i=e-1;n<=i;--i)b.point(u[i],c[i]);b.lineEnd(),b.areaEnd()}s&&(u[e]=+l(r,e,t),c[e]=+h(r,e,t),b.point(f?+f(r,e,t):u[e],d?+d(r,e,t):c[e]))}if(a)return b=null,a+""||null}function t(){return hy().defined(g).curve(v).context(p)}return l="function"==typeof l?l:void 0===l?cy:F_(+l),h="function"==typeof h?h:F_(void 0===h?0:+h),d="function"==typeof d?d:void 0===d?ly:F_(+d),e.x=function(t){return arguments.length?(l="function"==typeof t?t:F_(+t),f=null,e):l},e.x0=function(t){return arguments.length?(l="function"==typeof t?t:F_(+t),e):l},e.x1=function(t){return arguments.length?(f=null==t?null:"function"==typeof t?t:F_(+t),e):f},e.y=function(t){return arguments.length?(h="function"==typeof t?t:F_(+t),d=null,e):h},e.y0=function(t){return arguments.length?(h="function"==typeof t?t:F_(+t),e):h},e.y1=function(t){return arguments.length?(d=null==t?null:"function"==typeof t?t:F_(+t),e):d},e.lineX0=e.lineY0=function(){return t().x(l).y(h)},e.lineY1=function(){return t().x(l).y(d)},e.lineX1=function(){return t().x(f).y(h)},e.defined=function(t){return arguments.length?(g="function"==typeof t?t:F_(!!t),e):g},e.curve=function(t){return arguments.length?(v=t,null!=p&&(b=v(p)),e):v},e.context=function(t){return arguments.length?(null==t?p=b=null:b=v(p=t),e):p},e}function fy(t,e){return e<t?-1:t<e?1:t<=e?0:NaN}function gy(t){return t}sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var py=by(uy);function vy(t){this._curve=t}function by(e){function t(t){return new vy(e(t))}return t._curve=e,t}function _y(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(by(t)):e()._curve},t}function yy(){return _y(hy().curve(py))}function xy(){var t=dy().curve(py),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return _y(n())},delete t.lineX0,t.lineEndAngle=function(){return _y(i())},delete t.lineX1,t.lineInnerRadius=function(){return _y(r())},delete t.lineY0,t.lineOuterRadius=function(){return _y(a())},delete t.lineY1,t.curve=function(t){return arguments.length?e(by(t)):e()._curve},t}function my(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}vy.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class wy{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class Ty{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){var n,i,r,a;t=+t,e=+e,0===this._point?this._point=1:(n=my(this._x0,this._y0),i=my(this._x0,this._y0=(this._y0+e)/2),r=my(t,this._y0),a=my(t,e),this._context.moveTo(...n),this._context.bezierCurveTo(...i,...r,...a)),this._x0=t,this._y0=e}}function Ay(t){return new wy(t,!0)}function My(t){return new wy(t,!1)}function Sy(t){return new Ty(t)}function ky(t){return t.source}function Ey(t){return t.target}function Cy(r){let a=ky,o=Ey,s=cy,u=ly,c=null,l=null,h=K_(e);function e(){let t;const e=ay.call(arguments),n=a.apply(this,e),i=o.apply(this,e);if(null==c&&(l=r(t=h())),l.lineStart(),e[0]=n,l.point(+s.apply(this,e),+u.apply(this,e)),e[0]=i,l.point(+s.apply(this,e),+u.apply(this,e)),l.lineEnd(),t)return l=null,t+""||null}return e.source=function(t){return arguments.length?(a=t,e):a},e.target=function(t){return arguments.length?(o=t,e):o},e.x=function(t){return arguments.length?(s="function"==typeof t?t:F_(+t),e):s},e.y=function(t){return arguments.length?(u="function"==typeof t?t:F_(+t),e):u},e.context=function(t){return arguments.length?(null==t?c=l=null:l=r(c=t),e):c},e}const Ry=U_(3);var Dy={draw(t,e){var n=.59436*U_(e+G_(e/28,.75)),i=n/2,e=i*Ry;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-e,-i),t.lineTo(e,i),t.moveTo(-e,i),t.lineTo(e,-i)}},Oy={draw(t,e){e=U_(e/q_);t.moveTo(e,0),t.arc(0,0,e,0,Z_)}},Py={draw(t,e){e=U_(e/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}};const Ly=U_(1/3),Ny=2*Ly;var zy={draw(t,e){var n=U_(e/Ny),e=n*Ly;t.moveTo(0,-n),t.lineTo(e,0),t.lineTo(0,n),t.lineTo(-e,0),t.closePath()}},Iy={draw(t,e){e=.62625*U_(e);t.moveTo(0,-e),t.lineTo(e,0),t.lineTo(0,e),t.lineTo(-e,0),t.closePath()}},$y={draw(t,e){e=.87559*U_(e-G_(e/7,2));t.moveTo(-e,0),t.lineTo(e,0),t.moveTo(0,e),t.lineTo(0,-e)}},Fy={draw(t,e){var n=U_(e),e=-n/2;t.rect(e,e,n,n)}},By={draw(t,e){e=.4431*U_(e);t.moveTo(e,e),t.lineTo(e,-e),t.lineTo(-e,-e),t.lineTo(-e,e),t.closePath()}};const Xy=V_(q_/10)/V_(7*q_/10),jy=V_(Z_/10)*Xy,Yy=-j_(Z_/10)*Xy;n={draw(e,t){var n=U_(.8908130915292852*t),i=jy*n,r=Yy*n;e.moveTo(0,-n),e.lineTo(i,r);for(let t=1;t<5;++t){var a=Z_*t/5,o=j_(a),a=V_(a);e.lineTo(a*n,-o*n),e.lineTo(o*i-a*r,a*i+o*r)}e.closePath()}};const Gy=U_(3);Ge={draw(t,e){e=-U_(e/(3*Gy));t.moveTo(0,2*e),t.lineTo(-Gy*e,-e),t.lineTo(Gy*e,-e),t.closePath()}};const Vy=U_(3);Ue={draw(t,e){var n=.6824*U_(e),i=n/2,e=n*Vy/2;t.moveTo(0,-n),t.lineTo(e,i),t.lineTo(-e,i),t.closePath()}};const Uy=-.5,Hy=U_(3)/2,qy=1/U_(12),Wy=3*(qy/2+1);Ve={draw(t,e){var n=U_(e/Wy),i=n/2,r=n*qy,a=i,o=n*qy+n,e=-a,n=o;t.moveTo(i,r),t.lineTo(a,o),t.lineTo(e,n),t.lineTo(Uy*i-Hy*r,Hy*i+Uy*r),t.lineTo(Uy*a-Hy*o,Hy*a+Uy*o),t.lineTo(Uy*e-Hy*n,Hy*e+Uy*n),t.lineTo(Uy*i+Hy*r,Uy*r-Hy*i),t.lineTo(Uy*a+Hy*o,Uy*o-Hy*a),t.lineTo(Uy*e+Hy*n,Uy*n-Hy*e),t.closePath()}},Er={draw(t,e){e=.6189*U_(e-G_(e/6,1.7));t.moveTo(-e,-e),t.lineTo(e,e),t.moveTo(-e,e),t.lineTo(e,-e)}},jr=[Oy,Py,zy,Fy,n,Ge,Ve],ka=[Oy,$y,Er,Ue,Dy,By,Iy];function Zy(){}function Jy(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ky(t){this._context=t}function Qy(t){this._context=t}function tx(t){this._context=t}function ex(t,e){this._basis=new Ky(t),this._beta=e}Ky.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Jy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Qy.prototype={areaStart:Zy,areaEnd:Zy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Jy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},tx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Jy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ex.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(0<n)for(var i,r=t[0],a=e[0],o=t[n]-r,s=e[n]-a,u=-1;++u<=n;)this._basis.point(this._beta*t[u]+(1-this._beta)*(r+(i=u/n)*o),this._beta*e[u]+(1-this._beta)*(a+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};Io=function e(n){function t(t){return 1===n?new Ky(t):new ex(t,n)}return t.beta=function(t){return e(+t)},t}(.85);function nx(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ix(t,e){this._context=t,this._k=(1-e)/6}ix.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:nx(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:nx(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};Vo=function e(n){function t(t){return new ix(t,n)}return t.tension=function(t){return e(+t)},t}(0);function rx(t,e){this._context=t,this._k=(1-e)/6}rx.prototype={areaStart:Zy,areaEnd:Zy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:nx(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};ys=function e(n){function t(t){return new rx(t,n)}return t.tension=function(t){return e(+t)},t}(0);function ax(t,e){this._context=t,this._k=(1-e)/6}ax.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:nx(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};vf=function e(n){function t(t){return new ax(t,n)}return t.tension=function(t){return e(+t)},t}(0);function ox(t,e,n){var i,r,a=t._x1,o=t._y1,s=t._x2,u=t._y2;t._l01_a>H_&&(i=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,r=3*t._l01_a*(t._l01_a+t._l12_a),a=(a*i-t._x0*t._l12_2a+t._x2*t._l01_2a)/r,o=(o*i-t._y0*t._l12_2a+t._y2*t._l01_2a)/r),t._l23_a>H_&&(i=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,r=3*t._l23_a*(t._l23_a+t._l12_a),s=(s*i+t._x1*t._l23_2a-e*t._l12_2a)/r,u=(u*i+t._y1*t._l23_2a-n*t._l12_2a)/r),t._context.bezierCurveTo(a,o,s,u,t._x2,t._y2)}function sx(t,e){this._context=t,this._alpha=e}sx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n,i;switch(t=+t,e=+e,this._point&&(n=this._x2-t,i=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))),this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ox(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};wf=function e(n){function t(t){return n?new sx(t,n):new ix(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function ux(t,e){this._context=t,this._alpha=e}ux.prototype={areaStart:Zy,areaEnd:Zy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){var n,i;switch(t=+t,e=+e,this._point&&(n=this._x2-t,i=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))),this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ox(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};rb=function e(n){function t(t){return n?new ux(t,n):new rx(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function cx(t,e){this._context=t,this._alpha=e}cx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n,i;switch(t=+t,e=+e,this._point&&(n=this._x2-t,i=this._y2-e,this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))),this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ox(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};Sb=function e(n){function t(t){return n?new cx(t,n):new ax(t,0)}return t.alpha=function(t){return e(+t)},t}(.5);function lx(t){this._context=t}function hx(t){return t<0?-1:1}function dx(t,e,n){var i=t._x1-t._x0,r=e-t._x1,e=(t._y1-t._y0)/(i||r<0&&-0),t=(n-t._y1)/(r||i<0&&-0),r=(e*r+t*i)/(i+r);return(hx(e)+hx(t))*Math.min(Math.abs(e),Math.abs(t),.5*Math.abs(r))||0}function fx(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function gx(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function px(t){this._context=t}function vx(t){this._context=new bx(t)}function bx(t){this._context=t}function _x(t){this._context=t}function yx(t){var e,n,i=t.length-1,r=new Array(i),a=new Array(i),o=new Array(i);for(a[r[0]=0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,a[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/a[i-1],e=i-2;0<=e;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function xx(t,e){this._context=t,this._t=e}function mx(t,e){if(1<(r=t.length))for(var n,i,r,a=1,o=t[e[0]],s=o.length;a<r;++a)for(i=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function wx(t){for(var e=t.length,n=new Array(e);0<=--e;)n[e]=e;return n}function Tx(t,e){return t[e]}function Ax(t){const e=[];return e.key=t,e}function Mx(t){var n=t.map(Sx);return wx(t).sort(function(t,e){return n[t]-n[e]})}function Sx(t){for(var e,n=-1,i=0,r=t.length,a=-1/0;++n<r;)(e=+t[n][1])>a&&(a=e,i=n);return i}function kx(t){var n=t.map(Ex);return wx(t).sort(function(t,e){return n[t]-n[e]})}function Ex(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}lx.prototype={areaStart:Zy,areaEnd:Zy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},px.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:gx(this,this._t0,fx(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,gx(this,fx(this,n=dx(this,t,e)),n);break;default:gx(this,this._t0,n=dx(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(vx.prototype=Object.create(px.prototype)).point=function(t,e){px.prototype.point.call(this,e,t)},bx.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}},_x.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=yx(t),r=yx(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},xx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:var n;this._t<=0?(this._context.lineTo(this._x,e),this._context.lineTo(t,e)):(n=this._x*(1-this._t)+t*this._t,this._context.lineTo(n,this._y),this._context.lineTo(n,e))}this._x=t,this._y=e}};var Cx=t=>()=>t;function Rx(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Dx(t,e,n){this.k=t,this.x=e,this.y=n}Dx.prototype={constructor:Dx,scale:function(t){return 1===t?this:new Dx(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Dx(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ox=new Dx(1,0,0);function Px(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ox;return t.__zoom}function Lx(t){t.stopImmediatePropagation()}function Nx(t){t.preventDefault(),t.stopImmediatePropagation()}function zx(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function Ix(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function $x(){return this.__zoom||Ox}function Fx(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Bx(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xx(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],n=t.invertY(e[1][1])-n[1][1];return t.translate(i<r?(i+r)/2:Math.min(0,i)||Math.max(0,r),a<n?(a+n)/2:Math.min(0,a)||Math.max(0,n))}Px.prototype=Dx.prototype,s.Adder=k,s.Delaunay=class r{static from(t,e=function(t){return t[0]},n=function(t){return t[1]},i){return new r("length"in t?function(e,n,i,r){const a=e.length,o=new Float64Array(2*a);for(let t=0;t<a;++t){const a=e[t];o[2*t]=n.call(r,a,t,e),o[2*t+1]=i.call(r,a,t,e)}return o}(t,e,n,i):Float64Array.from(function*(t,e,n,i){let r=0;for(const a of t)yield e.call(i,a,r,t),yield n.call(i,a,r,t),++r}(t,e,n,i)))}constructor(t){this._delaunator=new wo(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&2<t.hull.length&&function(){var{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){var i=2*e[t],r=2*e[t+1],a=2*e[t+2];if(1e-10<(n[a]-n[i])*(n[1+r]-n[1+i])-(n[r]-n[i])*(n[1+a]-n[1+i]))return}return 1}()){this.collinear=Int32Array.from({length:n.length/2},(t,e)=>e).sort((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]);const t=this.collinear[0],o=this.collinear[this.collinear.length-1],s=[n[2*t],n[2*t+1],n[2*o],n[2*o+1]],u=1e-8*Math.hypot(s[3]-s[1],s[2]-s[0]);for(let t=0,e=n.length/2;t<e;++t){const o=(i=n[2*t],r=n[2*t+1],a=u,[i+Math.sin(i+r)*a,r+Math.cos(i-r)*a]);n[2*t]=o[0],n[2*t+1]=o[1]}this._delaunator=new wo(n)}else delete this.collinear;var i,r,a;const o=this.halfedges=this._delaunator.halfedges,s=this.hull=this._delaunator.hull,u=this.triangles=this._delaunator.triangles,c=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let t=0,e=o.length;t<e;++t){const n=u[t%3==2?t-2:t+1];-1!==o[t]&&-1!==c[n]||(c[n]=t)}for(let t=0,e=s.length;t<e;++t)l[s[t]]=t;s.length<=2&&0<s.length&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=s[0],c[s[0]]=1,2===s.length&&(c[s[1]]=0,this.triangles[1]=s[1],this.triangles[2]=s[1]))}voronoi(t){return new Eo(this,t)}*neighbors(n){const{inedges:i,hull:r,_hullIndex:a,halfedges:o,triangles:s,collinear:t}=this;if(t){const i=t.indexOf(n);return 0<i&&(yield t[i-1]),void(i<t.length-1&&(yield t[i+1]))}var u=i[n];if(-1!==u){let t=u,e;do{if(yield e=s[t],t=t%3==2?t-2:t+1,s[t]!==n)return;if(t=o[t],-1===t){const i=r[(a[n]+1)%r.length];return void(i!==e&&(yield i))}}while(t!==u)}}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;var i=n;let r;for(;0<=(r=this._step(n,t,e))&&r!==n&&r!==i;)n=r;return r}_step(t,e,n){var{inedges:i,hull:r,_hullIndex:a,halfedges:o,triangles:s,points:u}=this;if(-1===i[t]||!u.length)return(t+1)%(u.length>>1);let c=t,l=Ro(e-u[2*t],2)+Ro(n-u[2*t+1],2);const h=i[t];let d=h;do{var f=s[d];const h=Ro(e-u[2*f],2)+Ro(n-u[2*f+1],2);if(h<l&&(l=h,c=f),d=d%3==2?d-2:d+1,s[d]!==t)break;if(d=o[d],-1===d){if(d=r[(a[t]+1)%r.length],d!==f&&Ro(e-u[2*d],2)+Ro(n-u[2*d+1],2)<l)return d;break}}while(d!==h);return c}render(n){const t=null==n?n=new So:void 0,{points:i,halfedges:r,triangles:a}=this;for(let t=0,e=r.length;t<e;++t){var o,s=r[t];s<t||(o=2*a[t],s=2*a[s],n.moveTo(i[o],i[1+o]),n.lineTo(i[s],i[1+s]))}return this.renderHull(n),t&&t.value()}renderPoints(n,i){void 0!==i||n&&"function"==typeof n.moveTo||(i=n,n=null),i=null==i?2:+i;const t=null==n?n=new So:void 0,{points:r}=this;for(let t=0,e=r.length;t<e;t+=2){var a=r[t],o=r[t+1];n.moveTo(a+i,o),n.arc(a,o,i,0,Co)}return t&&t.value()}renderHull(e){const t=null==e?e=new So:void 0,{hull:n,points:i}=this,r=2*n[0],a=n.length;e.moveTo(i[r],i[r+1]);for(let t=1;t<a;++t){const r=2*n[t];e.lineTo(i[r],i[1+r])}return e.closePath(),t&&t.value()}hullPolygon(){const t=new ko;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new So:void 0,{points:i,triangles:r}=this,a=2*r[t*=3],o=2*r[t+1],s=2*r[t+2];return e.moveTo(i[a],i[1+a]),e.lineTo(i[o],i[1+o]),e.lineTo(i[s],i[1+s]),e.closePath(),n&&n.value()}*trianglePolygons(){var{triangles:n}=this;for(let t=0,e=n.length/3;t<e;++t)yield this.trianglePolygon(t)}trianglePolygon(t){const e=new ko;return this.renderTriangle(t,e),e.value()}},s.FormatSpecifier=Ns,s.InternMap=A,s.InternSet=M,s.Node=Dd,s.Path=$a,s.Voronoi=Eo,s.ZoomTransform=Dx,s.active=function(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>ur&&n.name===e)return new Sr([[t]],Jr,e,+i);return null},s.arc=function(){var E=Q_,C=ty,R=F_(0),D=null,O=ey,P=ny,L=iy,N=null,z=K_(e);function e(){var t,e,n,i,r,a,o,s,u,c,l,h,d,f,g,p,v,b,_,y,x,m,w=+E.apply(this,arguments),T=+C.apply(this,arguments),A=O.apply(this,arguments)-W_,M=P.apply(this,arguments)-W_,S=B_(M-A),k=A<M;if(N=N||(t=z()),T<w&&(m=T,T=w,w=m),T>H_?S>Z_-H_?(N.moveTo(T*j_(A),T*V_(A)),N.arc(0,0,T,A,M,!k),w>H_&&(N.moveTo(w*j_(M),w*V_(M)),N.arc(0,0,w,M,A,k))):(a=i=A,o=r=M,u=s=S,l=(h=L.apply(this,arguments)/2)>H_&&(D?+D.apply(this,arguments):U_(w*w+T*T)),m=x=c=G_(B_(T-w)/2,+R.apply(this,arguments)),l>H_&&(y=J_(l/w*V_(h)),_=J_(l/T*V_(h)),(s-=2*y)>H_?(a+=y*=k?1:-1,o-=y):(s=0,a=o=(A+M)/2),(u-=2*_)>H_?(i+=_*=k?1:-1,r-=_):(u=0,i=r=(A+M)/2)),l=T*j_(i),h=T*V_(i),d=w*j_(o),f=w*V_(o),c>H_&&(g=T*j_(r),p=T*V_(r),v=w*j_(a),b=w*V_(a),S<q_&&((y=function(t,e,n,i){var r=v-t,a=b-e,o=d-n,s=f-i,u=s*r-o*a;if(!(u*u<H_))return[t+(u=(o*(e-i)-s*(t-n))/u)*r,e+u*a]}(l,h,g,p))?(_=l-y[0],A=h-y[1],M=g-y[0],S=p-y[1],S=1/V_((1<(S=(_*M+A*S)/(U_(_*_+A*A)*U_(M*M+S*S)))?0:S<-1?q_:Math.acos(S))/2),y=U_(y[0]*y[0]+y[1]*y[1]),x=G_(c,(w-y)/(S-1)),m=G_(c,(T-y)/(1+S))):x=m=0)),u>H_?m>H_?(e=ry(v,b,l,h,T,m,k),n=ry(g,p,d,f,T,m,k),N.moveTo(e.cx+e.x01,e.cy+e.y01),m<c?N.arc(e.cx,e.cy,m,X_(e.y01,e.x01),X_(n.y01,n.x01),!k):(N.arc(e.cx,e.cy,m,X_(e.y01,e.x01),X_(e.y11,e.x11),!k),N.arc(0,0,T,X_(e.cy+e.y11,e.cx+e.x11),X_(n.cy+n.y11,n.cx+n.x11),!k),N.arc(n.cx,n.cy,m,X_(n.y11,n.x11),X_(n.y01,n.x01),!k))):(N.moveTo(l,h),N.arc(0,0,T,i,r,!k)):N.moveTo(l,h),w>H_&&s>H_?x>H_?(e=ry(d,f,g,p,w,-x,k),n=ry(l,h,v,b,w,-x,k),N.lineTo(e.cx+e.x01,e.cy+e.y01),x<c?N.arc(e.cx,e.cy,x,X_(e.y01,e.x01),X_(n.y01,n.x01),!k):(N.arc(e.cx,e.cy,x,X_(e.y01,e.x01),X_(e.y11,e.x11),!k),N.arc(0,0,w,X_(e.cy+e.y11,e.cx+e.x11),X_(n.cy+n.y11,n.cx+n.x11),k),N.arc(n.cx,n.cy,x,X_(n.y11,n.x11),X_(n.y01,n.x01),!k))):N.arc(0,0,w,o,a,k):N.lineTo(d,f)):N.moveTo(0,0),N.closePath(),t)return N=null,t+""||null}return e.centroid=function(){var t=(+E.apply(this,arguments)+ +C.apply(this,arguments))/2,e=(+O.apply(this,arguments)+ +P.apply(this,arguments))/2-q_/2;return[j_(e)*t,V_(e)*t]},e.innerRadius=function(t){return arguments.length?(E="function"==typeof t?t:F_(+t),e):E},e.outerRadius=function(t){return arguments.length?(C="function"==typeof t?t:F_(+t),e):C},e.cornerRadius=function(t){return arguments.length?(R="function"==typeof t?t:F_(+t),e):R},e.padRadius=function(t){return arguments.length?(D=null==t?null:"function"==typeof t?t:F_(+t),e):D},e.startAngle=function(t){return arguments.length?(O="function"==typeof t?t:F_(+t),e):O},e.endAngle=function(t){return arguments.length?(P="function"==typeof t?t:F_(+t),e):P},e.padAngle=function(t){return arguments.length?(L="function"==typeof t?t:F_(+t),e):L},e.context=function(t){return arguments.length?(N=null==t?null:t,e):N},e},s.area=dy,s.areaRadial=xy,s.ascending=u,s.autoType=function(t){for(var e in t){var n,i,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Qo&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;t[e]=r}return t},s.axisBottom=function(t){return kt(3,t)},s.axisLeft=function(t){return kt(4,t)},s.axisRight=function(t){return kt(2,t)},s.axisTop=function(t){return kt(1,t)},s.bin=tt,s.bisect=_,s.bisectCenter=a,s.bisectLeft=r,s.bisectRight=i,s.bisector=c,s.blob=function(t,e){return fetch(t,e).then(ts)},s.blur=function(t,e){if(!(0<=(e=+e)))throw new RangeError("invalid r");var n=t.length;if(!(0<=(n=Math.floor(n))))throw new RangeError("invalid length");if(!n||!e)return t;const i=g(e),r=t.slice();return i(t,r,0,n,1),i(r,t,0,n,1),i(t,r,0,n,1),t},s.blur2=y,s.blurImage=l,s.brush=function(){return Ta(da)},s.brushSelection=function(t){t=t.__brush;return t?t.dim.output(t.selection):null},s.brushX=function(){return Ta(la)},s.brushY=function(){return Ta(ha)},s.buffer=function(t,e){return fetch(t,e).then(es)},s.chord=function(){return Oa(!1,!1)},s.chordDirected=function(){return Oa(!0,!1)},s.chordTranspose=function(){return Oa(!1,!0)},s.cluster=function(){var s=wd,u=1,c=1,l=!1;function e(e){var i,r=0;e.eachAfter(function(t){var e,n=t.children;n?(t.x=(e=n).reduce(Td,0)/e.length,t.y=1+n.reduce(Ad,0)):(t.x=i?r+=s(t,i):0,t.y=0,i=t)});var t=function(t){for(var e;e=t.children;)t=e[0];return t}(e),n=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(e),a=t.x-s(t,n)/2,o=n.x+s(n,t)/2;return e.eachAfter(l?function(t){t.x=(t.x-e.x)*u,t.y=(e.y-t.y)*c}:function(t){t.x=(t.x-a)/(o-a)*u,t.y=(1-(e.y?t.y/e.y:1))*c})}return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(l=!1,u=+t[0],c=+t[1],e):l?null:[u,c]},e.nodeSize=function(t){return arguments.length?(l=!0,u=+t[0],c=+t[1],e):l?[u,c]:null},e},s.color=rn,s.contourDensity=function(){var c=so,l=uo,h=co,n=960,i=500,d=20,f=2,g=3*d,p=n+2*g>>f,v=i+2*g>>f,r=Ka(20);function a(t){var e=new Float32Array(p*v),n=Math.pow(2,-f),i=-1;for(const d of t){var r,a,o=(c(d,++i,t)+g)*n,s=(l(d,i,t)+g)*n,u=+h(d,i,t);u&&0<=o&&o<p&&0<=s&&s<v&&(e[(r=Math.floor(o))+(a=Math.floor(s))*p]+=(1-(o=o-r-.5))*(1-(s=s-a-.5))*u,e[r+1+a*p]+=o*(1-s)*u,e[r+1+(a+1)*p]+=o*s*u,e[r+(a+1)*p]+=(1-o)*s*u)}return y({data:e,width:p,height:v},d*n),e}function e(t){var t=a(t),n=r(t),e=Math.pow(2,2*f);return Array.isArray(n)||(n=W(Number.MIN_VALUE,et(t)/e,n)),no().size([p,v]).thresholds(n.map(t=>t*e))(t).map((t,e)=>(t.value=+n[e],o(t)))}function o(t){return t.coordinates.forEach(s),t}function s(t){t.forEach(u)}function u(t){t.forEach(b)}function b(t){t[0]=t[0]*Math.pow(2,f)-g,t[1]=t[1]*Math.pow(2,f)-g}function _(){return p=n+2*(g=3*d)>>f,v=i+2*g>>f,e}return e.contours=function(t){var n=a(t),i=no().size([p,v]),r=Math.pow(2,2*f),t=t=>{var e=o(i.contour(n,(t=+t)*r));return e.value=t,e};return Object.defineProperty(t,"max",{get:()=>et(n)/r}),t},e.x=function(t){return arguments.length?(c="function"==typeof t?t:Ka(+t),e):c},e.y=function(t){return arguments.length?(l="function"==typeof t?t:Ka(+t),e):l},e.weight=function(t){return arguments.length?(h="function"==typeof t?t:Ka(+t),e):h},e.size=function(t){if(!arguments.length)return[n,i];var e=+t[0],t=+t[1];if(!(0<=e&&0<=t))throw new Error("invalid size");return n=e,i=t,_()},e.cellSize=function(t){if(!arguments.length)return 1<<f;if(!(1<=(t=+t)))throw new Error("invalid cell size");return f=Math.floor(Math.log(t)/Math.LN2),_()},e.thresholds=function(t){return arguments.length?(r="function"==typeof t?t:Array.isArray(t)?Ka(Za.call(t)):Ka(t),e):r},e.bandwidth=function(t){if(!arguments.length)return Math.sqrt(d*(d+1));if(!(0<=(t=+t)))throw new Error("invalid bandwidth");return d=(Math.sqrt(4*t*t+1)-1)/2,_()},e},s.contours=no,s.count=p,s.create=function(t){return we(It(t).call(document.documentElement))},s.creator=It,s.cross=function(...n){const e="function"==typeof n[n.length-1]&&(s=n.pop(),t=>s(...t)),i=(n=n.map(x)).map(v),r=n.length-1,a=new Array(1+r).fill(0),o=[];var s;if(r<0||i.some(b))return o;for(;;){o.push(a.map((t,e)=>n[e][t]));let t=r;for(;++a[t]===i[t];){if(0===t)return e?o.map(e):o;a[t--]=0}}},s.csv=as,s.csvFormat=Bo,s.csvFormatBody=Xo,s.csvFormatRow=Yo,s.csvFormatRows=jo,s.csvFormatValue=Go,s.csvParse=$o,s.csvParseRows=Fo,s.cubehelix=Wn,s.cumsum=function(e,n){var i=0,r=0;return Float64Array.from(e,void 0===n?t=>i+=+t||0:t=>i+=+n(t,r++,e)||0)},s.curveBasis=function(t){return new Ky(t)},s.curveBasisClosed=function(t){return new Qy(t)},s.curveBasisOpen=function(t){return new tx(t)},s.curveBumpX=Ay,s.curveBumpY=My,s.curveBundle=Io,s.curveCardinal=Vo,s.curveCardinalClosed=ys,s.curveCardinalOpen=vf,s.curveCatmullRom=wf,s.curveCatmullRomClosed=rb,s.curveCatmullRomOpen=Sb,s.curveLinear=uy,s.curveLinearClosed=function(t){return new lx(t)},s.curveMonotoneX=function(t){return new px(t)},s.curveMonotoneY=function(t){return new vx(t)},s.curveNatural=function(t){return new _x(t)},s.curveStep=function(t){return new xx(t,.5)},s.curveStepAfter=function(t){return new xx(t,1)},s.curveStepBefore=function(t){return new xx(t,0)},s.descending=t,s.deviation=w,s.difference=function(t,...e){t=new M(t);for(const n of e)for(const e of n)t.delete(e);return t},s.disjoint=function(t,e){const n=e[Symbol.iterator](),i=new M;for(const e of t){if(i.has(e))return!1;for(var r,a;({value:r,done:a}=n.next())&&!a;){if(Object.is(e,r))return!1;i.add(r)}}return!0},s.dispatch=Ct,s.drag=function(){var i,r,a,o,s=ze,u=Ie,n=$e,e=Fe,p={},v=Ct("start","drag","end"),b=0,c=0;function _(t){t.on("mousedown.drag",l).filter(e).on("touchstart.drag",f).on("touchmove.drag",g,Ee).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(t,e){o||!s.call(this,t,e)||(e=x(this,u.call(this,t,e),t,e,"mouse"))&&(we(t.view).on("mousemove.drag",h,Ce).on("mouseup.drag",d,Ce),Oe(t.view),Re(t),a=!1,i=t.clientX,r=t.clientY,e("start",t))}function h(t){var e,n;De(t),a||(e=t.clientX-i,n=t.clientY-r,a=c<e*e+n*n),p.mouse("drag",t)}function d(t){we(t.view).on("mousemove.drag mouseup.drag",null),Pe(t.view,a),De(t),p.mouse("end",t)}function f(t,e){if(s.call(this,t,e))for(var n,i=t.changedTouches,r=u.call(this,t,e),a=i.length,o=0;o<a;++o)(n=x(this,r,t,e,i[o].identifier,i[o]))&&(Re(t),n("start",t,i[o]))}function g(t){for(var e,n=t.changedTouches,i=n.length,r=0;r<i;++r)(e=p[n[r].identifier])&&(De(t),e("drag",t,n[r]))}function y(t){var e,n,i=t.changedTouches,r=i.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),e=0;e<r;++e)(n=p[i[e].identifier])&&(Re(t),n("end",t,i[e]))}function x(o,s,t,u,c,e){var l,h,d,f=v.copy(),g=ke(e||t,s);if(null!=(d=n.call(o,new Ne("beforestart",{sourceEvent:t,target:_,identifier:c,active:b,x:g[0],y:g[1],dx:0,dy:0,dispatch:f}),u)))return l=d.x-g[0]||0,h=d.y-g[1]||0,function t(e,n,i){var r,a=g;switch(e){case"start":p[c]=t,r=b++;break;case"end":delete p[c],--b;case"drag":g=ke(i||n,s),r=b}f.call(e,o,new Ne(e,{sourceEvent:n,subject:d,target:_,identifier:c,active:r,x:g[0]+l,y:g[1]+h,dx:g[0]-a[0],dy:g[1]-a[1],dispatch:f}),u)}}return _.filter=function(t){return arguments.length?(s="function"==typeof t?t:Le(!!t),_):s},_.container=function(t){return arguments.length?(u="function"==typeof t?t:Le(t),_):u},_.subject=function(t){return arguments.length?(n="function"==typeof t?t:Le(t),_):n},_.touchable=function(t){return arguments.length?(e="function"==typeof t?t:Le(!!t),_):e},_.on=function(){var t=v.on.apply(v,arguments);return t===v?_:t},_.clickDistance=function(t){return arguments.length?(c=(t=+t)*t,_):Math.sqrt(c)},_},s.dragDisable=Oe,s.dragEnable=Pe,s.dsv=function(t,e,n,i){3===arguments.length&&"function"==typeof n&&(i=n,n=void 0);var r=zo(t);return is(e,n).then(function(t){return r.parse(t,i)})},s.dsvFormat=zo,s.easeBack=Vr,s.easeBackIn=Yr,s.easeBackInOut=Vr,s.easeBackOut=Gr,s.easeBounce=Xr,s.easeBounceIn=function(t){return 1-Xr(1-t)},s.easeBounceInOut=function(t){return((t*=2)<=1?1-Xr(1-t):Xr(t-1)+1)/2},s.easeBounceOut=Xr,s.easeCircle=Fr,s.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},s.easeCircleInOut=Fr,s.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},s.easeCubic=Rr,s.easeCubicIn=function(t){return t*t*t},s.easeCubicInOut=Rr,s.easeCubicOut=function(t){return--t*t*t+1},s.easeElastic=qr,s.easeElasticIn=Hr,s.easeElasticInOut=Wr,s.easeElasticOut=qr,s.easeExp=$r,s.easeExpIn=function(t){return Ir(1-+t)},s.easeExpInOut=$r,s.easeExpOut=function(t){return 1-Ir(t)},s.easeLinear=t=>+t,s.easePoly=Pr,s.easePolyIn=Dr,s.easePolyInOut=Pr,s.easePolyOut=Or,s.easeQuad=Cr,s.easeQuadIn=function(t){return t*t},s.easeQuadInOut=Cr,s.easeQuadOut=function(t){return t*(2-t)},s.easeSin=zr,s.easeSinIn=function(t){return 1==+t?1:1-Math.cos(t*Nr)},s.easeSinInOut=zr,s.easeSinOut=function(t){return Math.sin(t*Nr)},s.every=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(!e(i,++n,t))return!1;return!0},s.extent=T,s.fcumsum=function(e,n){const i=new k;let r=-1;return Float64Array.from(e,void 0===n?t=>i.add(+t||0):t=>i.add(+n(t,++r,e)||0))},s.filter=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let i=-1;for(const r of t)e(r,++i,t)&&n.push(r);return n},s.flatGroup=function(t,...e){return L(P(t,...e),e)},s.flatRollup=function(t,e,...n){return L(z(t,e,...n),n)},s.forceCenter=function(a,o){var s,u=1;function e(){for(var t,e=s.length,n=0,i=0,r=0;r<e;++r)n+=(t=s[r]).x,i+=t.y;for(n=(n/e-a)*u,i=(i/e-o)*u,r=0;r<e;++r)(t=s[r]).x-=n,t.y-=i}return null==a&&(a=0),null==o&&(o=0),e.initialize=function(t){s=t},e.x=function(t){return arguments.length?(a=+t,e):a},e.y=function(t){return arguments.length?(o=+t,e):o},e.strength=function(t){return arguments.length?(u=+t,e):u},e},s.forceCollide=function(i){var a,o,d,f=1,g=1;function e(){for(var t,e,s,u,c,l,h,n=a.length,i=0;i<g;++i)for(e=vs(a,ws,Ts).visitAfter(p),t=0;t<n;++t)s=a[t],l=o[s.index],h=l*l,u=s.x+s.vx,c=s.y+s.vy,e.visit(r);function r(t,e,n,i,r){var a=t.data,o=t.r,t=l+o;if(!a)return u+t<e||i<u-t||c+t<n||r<c-t;a.index>s.index&&((r=(i=u-a.x-a.vx)*i+(n=c-a.y-a.vy)*n)<t*t&&(0===i&&(r+=(i=ms(d))*i),0===n&&(r+=(n=ms(d))*n),r=(t-(r=Math.sqrt(r)))/r*f,s.vx+=(i*=r)*(t=(o*=o)/(h+o)),s.vy+=(n*=r)*t,a.vx-=i*(t=1-t),a.vy-=n*t))}}function p(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function n(){if(a){var t,e,n=a.length;for(o=new Array(n),t=0;t<n;++t)e=a[t],o[e.index]=+i(e,t,a)}}return"function"!=typeof i&&(i=xs(null==i?1:+i)),e.initialize=function(t,e){a=t,d=e,n()},e.iterations=function(t){return arguments.length?(g=+t,e):g},e.strength=function(t){return arguments.length?(f=+t,e):f},e.radius=function(t){return arguments.length?(i="function"==typeof t?t:xs(+t),n(),e):i},e},s.forceLink=function(c){var l,h,a,o,d,f,s=As,n=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},i=xs(30),g=1;function e(t){for(var e=0,n=c.length;e<g;++e)for(var i,r,a,o,s,u=0;u<n;++u)i=(s=c[u]).source,a=(r=s.target).x+r.vx-i.x-i.vx||ms(f),o=r.y+r.vy-i.y-i.vy||ms(f),a*=s=((s=Math.sqrt(a*a+o*o))-h[u])/s*t*l[u],o*=s,r.vx-=a*(s=d[u]),r.vy-=o*s,i.vx+=a*(s=1-s),i.vy+=o*s}function r(){if(a){var t,e=a.length,n=c.length,i=new Map(a.map((t,e)=>[s(t,e,a),t])),r=0;for(o=new Array(e);r<n;++r)(t=c[r]).index=r,"object"!=typeof t.source&&(t.source=Ms(i,t.source)),"object"!=typeof t.target&&(t.target=Ms(i,t.target)),o[t.source.index]=(o[t.source.index]||0)+1,o[t.target.index]=(o[t.target.index]||0)+1;for(r=0,d=new Array(n);r<n;++r)t=c[r],d[r]=o[t.source.index]/(o[t.source.index]+o[t.target.index]);l=new Array(n),u(),h=new Array(n),p()}}function u(){if(a)for(var t=0,e=c.length;t<e;++t)l[t]=+n(c[t],t,c)}function p(){if(a)for(var t=0,e=c.length;t<e;++t)h[t]=+i(c[t],t,c)}return null==c&&(c=[]),e.initialize=function(t,e){a=t,f=e,r()},e.links=function(t){return arguments.length?(c=t,r(),e):c},e.id=function(t){return arguments.length?(s=t,e):s},e.iterations=function(t){return arguments.length?(g=+t,e):g},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:xs(+t),u(),e):n},e.distance=function(t){return arguments.length?(i="function"==typeof t?t:xs(+t),p(),e):i},e},s.forceManyBody=function(){var r,u,c,l,h,i=xs(-30),d=1,f=1/0,g=.81;function e(t){var e,n=r.length,i=vs(r,ks,Es).visitAfter(a);for(l=t,e=0;e<n;++e)u=r[e],i.visit(o)}function n(){if(r){var t,e,n=r.length;for(h=new Array(n),t=0;t<n;++t)e=r[t],h[e.index]=+i(e,t,r)}}function a(t){var e,n,i,r,a,o=0,s=0;if(t.length){for(i=r=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(o+=e.value,s+=n,i+=n*e.x,r+=n*e.y);t.x=i/s,t.y=r/s}else for((e=t).x=e.data.x,e.y=e.data.y;o+=h[e.data.index],e=e.next;);t.value=o}function o(t,e,n,i){if(!t.value)return!0;var r=t.x-u.x,a=t.y-u.y,o=i-e,s=r*r+a*a;if(o*o/g<s)return s<f&&(0===r&&(s+=(r=ms(c))*r),0===a&&(s+=(a=ms(c))*a),s<d&&(s=Math.sqrt(d*s)),u.vx+=r*t.value*l/s,u.vy+=a*t.value*l/s),!0;if(!(t.length||f<=s))for(t.data===u&&!t.next||(0===r&&(s+=(r=ms(c))*r),0===a&&(s+=(a=ms(c))*a),s<d&&(s=Math.sqrt(d*s)));t.data!==u&&(o=h[t.data.index]*l/s,u.vx+=r*o,u.vy+=a*o),t=t.next;);}return e.initialize=function(t,e){r=t,c=e,n()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:xs(+t),n(),e):i},e.distanceMin=function(t){return arguments.length?(d=t*t,e):Math.sqrt(d)},e.distanceMax=function(t){return arguments.length?(f=t*t,e):Math.sqrt(f)},e.theta=function(t){return arguments.length?(g=t*t,e):Math.sqrt(g)},e},s.forceRadial=function(n,s,u){var c,l,h,i=xs(.1);function e(t){for(var e=0,n=c.length;e<n;++e){var i=c[e],r=i.x-s||1e-6,a=i.y-u||1e-6,o=Math.sqrt(r*r+a*a),o=(h[e]-o)*l[e]*t/o;i.vx+=r*o,i.vy+=a*o}}function r(){if(c){var t,e=c.length;for(l=new Array(e),h=new Array(e),t=0;t<e;++t)h[t]=+n(c[t],t,c),l[t]=isNaN(h[t])?0:+i(c[t],t,c)}}return"function"!=typeof n&&(n=xs(+n)),null==s&&(s=0),null==u&&(u=0),e.initialize=function(t){c=t,r()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:xs(+t),r(),e):i},e.radius=function(t){return arguments.length?(n="function"==typeof t?t:xs(+t),r(),e):n},e.x=function(t){return arguments.length?(s=+t,e):s},e.y=function(t){return arguments.length?(u=+t,e):u},e},s.forceSimulation=function(u){var a,o=1,e=.001,s=1-Math.pow(e,1/300),c=0,l=.6,h=new Map,t=Qi(r),n=Ct("tick","end"),i=function(){let t=1;return()=>(t=(1664525*t+1013904223)%Ss)/Ss}();function r(){d(),n.call("tick",a),o<e&&(t.stop(),n.call("end",a))}function d(t){var e,n,i=u.length;void 0===t&&(t=1);for(var r=0;r<t;++r)for(o+=(c-o)*s,h.forEach(function(t){t(o)}),e=0;e<i;++e)null==(n=u[e]).fx?n.x+=n.vx*=l:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=l:(n.y=n.fy,n.vy=0);return a}function f(){for(var t,e,n,i=0,r=u.length;i<r;++i)(t=u[i]).index=i,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),(isNaN(t.x)||isNaN(t.y))&&(e=10*Math.sqrt(.5+i),n=i*Cs,t.x=e*Math.cos(n),t.y=e*Math.sin(n)),(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}function g(t){return t.initialize&&t.initialize(u,i),t}return null==u&&(u=[]),f(),a={tick:d,restart:function(){return t.restart(r),a},stop:function(){return t.stop(),a},nodes:function(t){return arguments.length?(u=t,f(),h.forEach(g),a):u},alpha:function(t){return arguments.length?(o=+t,a):o},alphaMin:function(t){return arguments.length?(e=+t,a):e},alphaDecay:function(t){return arguments.length?(s=+t,a):+s},alphaTarget:function(t){return arguments.length?(c=+t,a):c},velocityDecay:function(t){return arguments.length?(l=1-t,a):1-l},randomSource:function(t){return arguments.length?(i=t,h.forEach(g),a):i},force:function(t,e){return 1<arguments.length?(null==e?h.delete(t):h.set(t,g(e)),a):h.get(t)},find:function(t,e,n){var i,r,a,o=0,s=u.length;for(null==n?n=1/0:n*=n,o=0;o<s;++o)(i=(i=t-(r=u[o]).x)*i+(i=e-r.y)*i)<n&&(a=r,n=i);return a},on:function(t,e){return 1<arguments.length?(n.on(t,e),a):n.on(t)}}},s.forceX=function(n){var r,a,o,i=xs(.1);function e(t){for(var e,n=0,i=r.length;n<i;++n)(e=r[n]).vx+=(o[n]-e.x)*a[n]*t}function s(){if(r){var t,e=r.length;for(a=new Array(e),o=new Array(e),t=0;t<e;++t)a[t]=isNaN(o[t]=+n(r[t],t,r))?0:+i(r[t],t,r)}}return"function"!=typeof n&&(n=xs(null==n?0:+n)),e.initialize=function(t){r=t,s()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:xs(+t),s(),e):i},e.x=function(t){return arguments.length?(n="function"==typeof t?t:xs(+t),s(),e):n},e},s.forceY=function(n){var r,a,o,i=xs(.1);function e(t){for(var e,n=0,i=r.length;n<i;++n)(e=r[n]).vy+=(o[n]-e.y)*a[n]*t}function s(){if(r){var t,e=r.length;for(a=new Array(e),o=new Array(e),t=0;t<e;++t)a[t]=isNaN(o[t]=+n(r[t],t,r))?0:+i(r[t],t,r)}}return"function"!=typeof n&&(n=xs(null==n?0:+n)),e.initialize=function(t){r=t,s()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:xs(+t),s(),e):i},e.y=function(t){return arguments.length?(n="function"==typeof t?t:xs(+t),s(),e):n},e},s.formatDefaultLocale=Ys,s.formatLocale=js,s.formatSpecifier=Ls,s.fsum=function(e,n){const i=new k;if(void 0===n)for(var t of e)(t=+t)&&i.add(t);else{let t=-1;for(var r of e)(r=+n(r,++t,e))&&i.add(r)}return+i},s.geoAlbers=td,s.geoAlbersUsa=function(){var e,n,r,a,o,i,s=td(),u=Qh().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=Qh().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){i=[t,e]}};function h(t){var e=t[0],t=t[1];return i=null,r.point(e,t),i||(a.point(e,t),i)||(o.point(e,t),i)}function d(){return e=n=null,h}return h.invert=function(t){var e=s.scale(),n=s.translate(),i=(t[0]-n[0])/e,e=(t[1]-n[1])/e;return(.12<=e&&e<.234&&-.425<=i&&i<-.214?u:.166<=e&&e<.234&&-.214<=i&&i<-.115?c:s).invert(t)},h.stream=function(t){return e&&n===t?e:(i=[s.stream(n=t),u.stream(t),c.stream(t)],r=i.length,e={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},h.precision=function(t){return arguments.length?(s.precision(t),u.precision(t),c.precision(t),d()):s.precision()},h.scale=function(t){return arguments.length?(s.scale(t),u.scale(.35*t),c.scale(t),h.translate(s.translate())):s.scale()},h.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),n=+t[0],i=+t[1];return r=s.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(l),a=u.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+Hs,i+.12*e+Hs],[n-.214*e-Hs,i+.234*e-Hs]]).stream(l),o=c.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+Hs,i+.166*e+Hs],[n-.115*e-Hs,i+.234*e-Hs]]).stream(l),d()},h.fitExtent=function(t,e){return Bh(h,t,e)},h.fitSize=function(t,e){return Xh(h,t,e)},h.fitWidth=function(t,e){return jh(h,t,e)},h.fitHeight=function(t,e){return Yh(h,t,e)},h.scale(1070)},s.geoArea=function(t){return Xu=new k,Tu(t,ju),2*Xu},s.geoAzimuthalEqualArea=function(){return Wh(id).scale(124.75).clipAngle(179.999)},s.geoAzimuthalEqualAreaRaw=id,s.geoAzimuthalEquidistant=function(){return Wh(rd).scale(79.4188).clipAngle(179.999)},s.geoAzimuthalEquidistantRaw=rd,s.geoBounds=function(t){var e,n,i,r,a,o,s;if(Ou=Du=-(Cu=Ru=1/0),$u=[],Tu(t,vc),n=$u.length){for($u.sort(Mc),e=1,a=[i=$u[0]];e<n;++e)Sc(i,(r=$u[e])[0])||Sc(i,r[1])?(Ac(i[0],r[1])>Ac(i[0],i[1])&&(i[1]=r[1]),Ac(r[0],i[1])>Ac(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-1/0,e=0,i=a[n=a.length-1];e<=n;i=r,++e)r=a[e],(s=Ac(i[1],r[0]))>o&&(o=s,Cu=r[0],Du=i[1])}return $u=Fu=null,Cu===1/0||Ru===1/0?[[NaN,NaN],[NaN,NaN]]:[[Cu,Ru],[Du,Ou]]},s.geoCentroid=function(t){tc=ec=nc=ic=rc=ac=oc=sc=0,uc=new k,cc=new k,lc=new k,Tu(t,kc);var e=+uc,n=+cc,i=+lc,t=su(e,n,i);return t<qs&&(e=ac,n=oc,i=sc,ec<Hs&&(e=nc,n=ic,i=rc),(t=su(e,n,i))<qs)?[NaN,NaN]:[iu(n,e)*Qs,pu(i/t)*Qs]},s.geoCircle=function(){var i,r,a=$c([0,0]),o=$c(90),s=$c(6),u={point:function(t,e){i.push(t=r(t,e)),t[0]*=Qs,t[1]*=Qs}};function e(){var t=a.apply(this,arguments),e=o.apply(this,arguments)*tu,n=s.apply(this,arguments)*tu;return i=[],r=Xc(-t[0]*tu,-t[1]*tu,0).invert,Uc(u,e,n,1),t={type:"Polygon",coordinates:[i]},i=r=null,t}return e.center=function(t){return arguments.length?(a="function"==typeof t?t:$c([+t[0],+t[1]]),e):a},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:$c(+t),e):o},e.precision=function(t){return arguments.length?(s="function"==typeof t?t:$c(+t),e):s},e},s.geoClipAntimeridian=rl,s.geoClipCircle=al,s.geoClipExtent=function(){var e,n,i,r=0,a=0,o=960,s=500;return i={stream:function(t){return e&&n===t?e:e=dl(r,a,o,s)(n=t)},extent:function(t){return arguments.length?(r=+t[0][0],a=+t[0][1],o=+t[1][0],s=+t[1][1],e=n=null,i):[[r,a],[o,s]]}}},s.geoClipRectangle=dl,s.geoConicConformal=function(){return Jh(ud).scale(109.5).parallels([30,30])},s.geoConicConformalRaw=ud,s.geoConicEqualArea=Qh,s.geoConicEqualAreaRaw=Kh,s.geoConicEquidistant=function(){return Jh(ld).scale(131.154).center([0,13.9389])},s.geoConicEquidistantRaw=ld,s.geoContains=function(t,e){return(t&&ml.hasOwnProperty(t.type)?ml[t.type]:Tl)(t,e)},s.geoDistance=xl,s.geoEqualEarth=function(){return Wh(vd).scale(177.158)},s.geoEqualEarthRaw=vd,s.geoEquirectangular=function(){return Wh(cd).scale(152.63)},s.geoEquirectangularRaw=cd,s.geoGnomonic=function(){return Wh(bd).scale(144.049).clipAngle(60)},s.geoGnomonicRaw=bd,s.geoGraticule=Dl,s.geoGraticule10=function(){return Dl()()},s.geoIdentity=function(){var i,r,e,n,a,o,s,u=1,c=0,l=0,h=1,d=1,f=0,g=null,p=1,v=1,b=Ih({point:function(t,e){e=x([t,e]);this.stream.point(e[0],e[1])}}),_=zl;function y(){return p=u*h,v=u*d,o=s=null,x}function x(t){var e=t[0]*p,n=t[1]*v;return f&&(t=n*i-e*r,e=e*i+n*r,n=t),[e+c,n+l]}return x.invert=function(t){var e=t[0]-c,n=t[1]-l;return f&&(t=n*i+e*r,e=e*i-n*r,n=t),[e/p,n/v]},x.stream=function(t){return o&&s===t?o:o=b(_(s=t))},x.postclip=function(t){return arguments.length?(_=t,g=e=n=a=null,y()):_},x.clipExtent=function(t){return arguments.length?(_=null==t?(g=e=n=a=null,zl):dl(g=+t[0][0],e=+t[0][1],n=+t[1][0],a=+t[1][1]),y()):null==g?null:[[g,e],[n,a]]},x.scale=function(t){return arguments.length?(u=+t,y()):u},x.translate=function(t){return arguments.length?(c=+t[0],l=+t[1],y()):[c,l]},x.angle=function(t){return arguments.length?(r=lu(f=t%360*tu),i=ru(f),y()):f*Qs},x.reflectX=function(t){return arguments.length?(h=t?-1:1,y()):h<0},x.reflectY=function(t){return arguments.length?(d=t?-1:1,y()):d<0},x.fitExtent=function(t,e){return Bh(x,t,e)},x.fitSize=function(t,e){return Xh(x,t,e)},x.fitWidth=function(t,e){return jh(x,t,e)},x.fitHeight=function(t,e){return Yh(x,t,e)},x},s.geoInterpolate=function(t,e){var n=t[0]*tu,i=t[1]*tu,r=e[0]*tu,a=e[1]*tu,t=ru(i),o=lu(i),e=ru(a),s=lu(a),u=t*ru(n),c=t*lu(n),l=e*ru(r),h=e*lu(r),d=2*pu(du(vu(a-i)+t*e*vu(r-n))),f=lu(d),r=d?function(t){var e=lu(t*=d)/f,n=lu(d-t)/f,i=n*u+e*l,t=n*c+e*h,e=n*o+e*s;return[iu(t,i)*Qs,iu(e,du(i*i+t*t))*Qs]}:function(){return[n*Qs,i*Qs]};return r.distance=d,r},s.geoLength=bl,s.geoMercator=function(){return od(ad).scale(961/Ks)},s.geoMercatorRaw=ad,s.geoNaturalEarth1=function(){return Wh(_d).scale(175.295)},s.geoNaturalEarth1Raw=_d,s.geoOrthographic=function(){return Wh(yd).scale(249.5).clipAngle(90+Hs)},s.geoOrthographicRaw=yd,s.geoPath=function(e,n){let i,r,a=3,o=4.5;function s(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Tu(t,i(r))),r.result()}return s.area=function(t){return Tu(t,i(ql)),ql.result()},s.measure=function(t){return Tu(t,i(Rh)),Rh.result()},s.bounds=function(t){return Tu(t,i(Ql)),Ql.result()},s.centroid=function(t){return Tu(t,i(yh)),yh.result()},s.projection=function(t){return arguments.length?(i=null==t?(e=null,zl):(e=t).stream,s):e},s.context=function(t){return arguments.length?(r=null==t?(n=null,new Nh(a)):new xh(n=t),"function"!=typeof o&&r.pointRadius(o),s):n},s.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),s):o},s.digits=function(t){if(!arguments.length)return a;if(null==t)a=null;else{const n=Math.floor(t);if(!(0<=n))throw new RangeError(`invalid digits: ${t}`);a=n}return null===n&&(r=new Nh(a)),s},s.projection(e).digits(a).context(n)},s.geoProjection=Wh,s.geoProjectionMutator=Zh,s.geoRotation=Vc,s.geoStereographic=function(){return Wh(xd).scale(250).clipAngle(142)},s.geoStereographicRaw=xd,s.geoStream=Tu,s.geoTransform=function(t){return{stream:Ih(t)}},s.geoTransverseMercator=function(){var t=od(md),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},s.geoTransverseMercatorRaw=md,s.gray=function(t,e){return new Pn(t,0,0,null==e?1:e)},s.greatest=st,s.greatestIndex=function(t,e=u){if(1===e.length)return nt(t,e);let n,i=-1,r=-1;for(const u of t)++r,(i<0?0===e(u,u):0<e(u,n))&&(n=u,i=r);return i},s.group=O,s.groupSort=function(t,r,e){return(2!==r.length?B(N(t,r,e),([t,e],[n,i])=>u(e,i)||u(t,n)):B(O(t,e),([t,e],[n,i])=>r(e,i)||u(t,n))).map(([t])=>t)},s.groups=P,s.hcl=Fn,s.hierarchy=Sd,s.histogram=tt,s.hsl=bn,s.html=ls,s.image=function(r,a){return new Promise(function(t,e){var n,i=new Image;for(n in a)i[n]=a[n];i.onerror=e,i.onload=function(){t(i)},i.src=r})},s.index=function(t,...e){return $(t,D,I,e)},s.indexes=function(t,...e){return $(t,Array.from,I,e)},s.interpolate=_i,s.interpolateArray=function(t,e){return(li(e)?ci:hi)(t,e)},s.interpolateBasis=Kn,s.interpolateBasisClosed=Qn,s.interpolateBlues=v_,s.interpolateBrBG=Eb,s.interpolateBuGn=Ub,s.interpolateBuPu=qb,s.interpolateCividis=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},s.interpolateCool=C_,s.interpolateCubehelix=zi,s.interpolateCubehelixDefault=k_,s.interpolateCubehelixLong=Ii,s.interpolateDate=di,s.interpolateDiscrete=function(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}},s.interpolateGnBu=Zb,s.interpolateGreens=__,s.interpolateGreys=x_,s.interpolateHcl=Pi,s.interpolateHclLong=Li,s.interpolateHsl=Ri,s.interpolateHslLong=Di,s.interpolateHue=function(t,e){var n=ni(+t,+e);return function(t){t=n(t);return t-360*Math.floor(t/360)}},s.interpolateInferno=I_,s.interpolateLab=function(e,t){var n=ri((e=On(e)).l,(t=On(t)).l),i=ri(e.a,t.a),r=ri(e.b,t.b),a=ri(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=i(t),e.b=r(t),e.opacity=a(t),e+""}},s.interpolateMagma=z_,s.interpolateNumber=fi,s.interpolateNumberArray=ci,s.interpolateObject=gi,s.interpolateOrRd=Kb,s.interpolateOranges=S_,s.interpolatePRGn=Rb,s.interpolatePiYG=Ob,s.interpolatePlasma=$_,s.interpolatePuBu=n_,s.interpolatePuBuGn=t_,s.interpolatePuOr=Lb,s.interpolatePuRd=r_,s.interpolatePurples=w_,s.interpolateRainbow=function(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return R_.h=360*t-100,R_.s=1.5-1.5*e,R_.l=.8-.9*e,R_+""},s.interpolateRdBu=zb,s.interpolateRdGy=$b,s.interpolateRdPu=o_,s.interpolateRdYlBu=Bb,s.interpolateRdYlGn=jb,s.interpolateReds=A_,s.interpolateRgb=ai,s.interpolateRgbBasis=si,s.interpolateRgbBasisClosed=ui,s.interpolateRound=yi,s.interpolateSinebow=function(t){var e;return t=(.5-t)*Math.PI,D_.r=255*(e=Math.sin(t))*e,D_.g=255*(e=Math.sin(t+O_))*e,D_.b=255*(e=Math.sin(t+P_))*e,D_+""},s.interpolateSpectral=Gb,s.interpolateString=bi,s.interpolateTransformCss=Mi,s.interpolateTransformSvg=Si,s.interpolateTurbo=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},s.interpolateViridis=N_,s.interpolateWarm=E_,s.interpolateYlGn=l_,s.interpolateYlGnBu=u_,s.interpolateYlOrBr=d_,s.interpolateYlOrRd=g_,s.interpolateZoom=Ei,s.interrupt=_r,s.intersection=function(t,...e){t=new M(t),e=e.map(_t);t:for(const n of t)for(const i of e)if(!i.has(n)){t.delete(n);continue t}return t},s.interval=function(t,e,n){var a=new Ki,o=e;return null==e||(a._restart=a.restart,a.restart=function(n,i,r){i=+i,r=null==r?Zi():+r,a._restart(function t(e){e+=o,a._restart(t,o+=i,r),n(e)},i,r)}),a.restart(t,e,n),a},s.isoFormat=ab,s.isoParse=ob,s.json=function(t,e){return fetch(t,e).then(ss)},s.lab=On,s.lch=function(t,e,n,i){return 1===arguments.length?$n(t):new Bn(n,e,t,null==i?1:i)},s.least=function(e,n=u){let i,r=!1;if(1===n.length){let t;for(const a of e){const e=n(a);(r?u(e,t)<0:0===u(e,e))&&(i=a,t=e,r=!0)}}else for(const u of e)(r?n(u,i)<0:0===n(u,u))&&(i=u,r=!0);return i},s.leastIndex=ft,s.line=hy,s.lineRadial=yy,s.link=Cy,s.linkHorizontal=function(){return Cy(Ay)},s.linkRadial=function(){const t=Cy(Sy);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},s.linkVertical=function(){return Cy(My)},s.local=Ae,s.map=function(n,i){if("function"!=typeof n[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof i)throw new TypeError("mapper is not a function");return Array.from(n,(t,e)=>i(t,e,n))},s.matcher=Yt,s.max=et,s.maxIndex=nt,s.mean=function(e,n){let i=0,r=0;if(void 0===n)for(var t of e)null!=t&&(t=+t)>=t&&(++i,r+=t);else{let t=-1;for(var a of e)null!=(a=n(a,++t,e))&&(a=+a)>=a&&(++i,r+=a)}if(i)return r/i},s.median=function(t,e){return ut(t,.5,e)},s.medianIndex=function(t,e){return lt(t,.5,e)},s.merge=ht,s.min=it,s.minIndex=rt,s.mode=function(e,n){const i=new A;if(void 0===n)for(var t of e)null!=t&&t>=t&&i.set(t,(i.get(t)||0)+1);else{let t=-1;for(var r of e)null!=(r=n(r,++t,e))&&r>=r&&i.set(r,(i.get(r)||0)+1)}let a,o=0;for(const[e,n]of i)n>o&&(o=n,a=e);return a},s.namespace=Lt,s.namespaces=Pt,s.nice=K,s.now=Zi,s.pack=function(){var n=null,i=1,r=1,a=Ld;function e(t){var e=Fd();return t.x=i/2,t.y=r/2,n?t.eachBefore(Kd(n)).eachAfter(Qd(a,.5,e)).eachBefore(tf(1)):t.eachBefore(Kd(Jd)).eachAfter(Qd(Ld,1,e)).eachAfter(Qd(a,t.r/Math.min(i,r),e)).eachBefore(tf(Math.min(i,r)/(2*t.r))),t}return e.radius=function(t){return arguments.length?(n=Od(t),e):n},e.size=function(t){return arguments.length?(i=+t[0],r=+t[1],e):[i,r]},e.padding=function(t){return arguments.length?(a="function"==typeof t?t:Nd(+t),e):a},e},s.packEnclose=function(t){return Bd(t,Fd())},s.packSiblings=function(t){return Zd(t,Fd()),t},s.pairs=function(t,e=function(t,e){return[t,e]}){const n=[];let i,r=!1;for(const a of t)r&&n.push(e(i,a)),i=a,r=!0;return n},s.partition=function(){var n=1,i=1,s=0,r=!1;function e(t){var a,o,e=t.height+1;return t.x0=t.y0=s,t.x1=n,t.y1=i/e,t.eachBefore((a=i,o=e,function(t){t.children&&nf(t,t.x0,a*(t.depth+1)/o,t.x1,a*(t.depth+2)/o);var e=t.x0,n=t.y0,i=t.x1-s,r=t.y1-s;i<e&&(e=i=(e+i)/2),r<n&&(n=r=(n+r)/2),t.x0=e,t.y0=n,t.x1=i,t.y1=r})),r&&t.eachBefore(ef),t}return e.round=function(t){return arguments.length?(r=!!t,e):r},e.size=function(t){return arguments.length?(n=+t[0],i=+t[1],e):[n,i]},e.padding=function(t){return arguments.length?(s=+t,e):s},e},s.path=Fa,s.pathRound=function(t=3){return new $a(+t)},s.permute=F,s.pie=function(){var g=gy,p=fy,v=null,b=F_(0),_=F_(Z_),y=F_(0);function e(n){for(var t,e,i,r,a=(n=oy(n)).length,o=0,s=new Array(a),u=new Array(a),c=+b.apply(this,arguments),l=Math.min(Z_,Math.max(-Z_,_.apply(this,arguments)-c)),h=Math.min(Math.abs(l)/a,y.apply(this,arguments)),d=h*(l<0?-1:1),f=0;f<a;++f)0<(r=u[s[f]=f]=+g(n[f],f,n))&&(o+=r);for(null!=p?s.sort(function(t,e){return p(u[t],u[e])}):null!=v&&s.sort(function(t,e){return v(n[t],n[e])}),f=0,e=o?(l-a*d)/o:0;f<a;++f,c=i)t=s[f],i=c+(0<(r=u[t])?r*e:0)+d,u[t]={data:n[t],index:f,value:r,startAngle:c,endAngle:i,padAngle:h};return u}return e.value=function(t){return arguments.length?(g="function"==typeof t?t:F_(+t),e):g},e.sortValues=function(t){return arguments.length?(p=t,v=null,e):p},e.sort=function(t){return arguments.length?(v=t,p=null,e):v},e.startAngle=function(t){return arguments.length?(b="function"==typeof t?t:F_(+t),e):b},e.endAngle=function(t){return arguments.length?(_="function"==typeof t?t:F_(+t),e):_},e.padAngle=function(t){return arguments.length?(y="function"==typeof t?t:F_(+t),e):y},e},s.piecewise=$i,s.pointRadial=my,s.pointer=ke,s.pointers=function(t,e){return t.target&&(t=Se(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,t=>ke(t,e))},s.polygonArea=function(t){for(var e,n=-1,i=t.length,r=t[i-1],a=0;++n<i;)e=r,r=t[n],a+=e[1]*r[0]-e[0]*r[1];return a/2},s.polygonCentroid=function(t){for(var e,n,i=-1,r=t.length,a=0,o=0,s=t[r-1],u=0;++i<r;)e=s,s=t[i],u+=n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a/(u*=3),o/u]},s.polygonContains=function(t,e){for(var n,i,r=t.length,a=t[r-1],o=e[0],s=e[1],u=a[0],c=a[1],l=!1,h=0;h<r;++h)n=(a=t[h])[0],(i=a[1])>s!=s<c&&o<(u-n)*(s-i)/(c-i)+n&&(l=!l),u=n,c=i;return l},s.polygonHull=function(t){if((e=t.length)<3)return null;for(var e,n=new Array(e),i=new Array(e),r=0;r<e;++r)n[r]=[+t[r][0],+t[r][1],r];for(n.sort(xf),r=0;r<e;++r)i[r]=[n[r][0],-n[r][1]];var a=mf(n),o=mf(i),s=o[0]===a[0],u=o[o.length-1]===a[a.length-1],c=[];for(r=a.length-1;0<=r;--r)c.push(t[n[a[r]][2]]);for(r=+s;r<o.length-u;++r)c.push(t[n[o[r]][2]]);return c},s.polygonLength=function(t){for(var e,n,i=-1,r=t.length,a=t[r-1],o=a[0],s=a[1],u=0;++i<r;)e=o,n=s,e-=o=(a=t[i])[0],n-=s=a[1],u+=Math.hypot(e,n);return u},s.precisionFixed=Gs,s.precisionPrefix=Vs,s.precisionRound=Us,s.quadtree=vs,s.quantile=ut,s.quantileIndex=lt,s.quantileSorted=ct,s.quantize=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},s.quickselect=at,s.radialArea=xy,s.radialLine=yy,s.randomBates=Ef,s.randomBernoulli=Df,s.randomBeta=Lf,s.randomBinomial=Nf,s.randomCauchy=If,s.randomExponential=Cf,s.randomGamma=Pf,s.randomGeometric=Of,s.randomInt=Af,s.randomIrwinHall=kf,s.randomLcg=function(t=Math.random()){let e=0|(0<=t&&t<1?t/Bf:Math.abs(t));return()=>(e=1664525*e+1013904223|0,Bf*(e>>>0))},s.randomLogNormal=Sf,s.randomLogistic=$f,s.randomNormal=Mf,s.randomPareto=Rf,s.randomPoisson=Ff,s.randomUniform=Tf,s.randomWeibull=zf,s.range=dt,s.rank=function(t,n=u){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let i=Array.from(t);const r=new Float64Array(i.length);2!==n.length&&(i=i.map(n),n=u);const a=(t,e)=>n(i[t],i[e]);let o,s;return(t=Uint32Array.from(i,(t,e)=>e)).sort(n===u?(t,e)=>j(i[t],i[e]):X(a)),t.forEach((t,e)=>{var n=a(t,void 0===o?t:o);0<=n?((void 0===o||0<n)&&(o=t,s=e),r[t]=s):r[t]=NaN}),r},s.reduce=function(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const i=t[Symbol.iterator]();let r,a,o=-1;if(arguments.length<3){if({done:r,value:n}=i.next(),r)return;++o}for(;{done:r,value:a}=i.next(),!r;)n=e(n,a,++o,t);return n},s.reverse=function(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()},s.rgb=un,s.ribbon=function(){return Wa()},s.ribbonArrow=function(){return Wa(qa)},s.rollup=N,s.rollups=z,s.scaleBand=Vf,s.scaleDiverging=function t(){var e=ng(fb()(qf));return e.copy=function(){return hb(e,t())},jf.apply(e,arguments)},s.scaleDivergingLog=function t(){var e=lg(fb()).domain([.1,1,10]);return e.copy=function(){return hb(e,t()).base(e.base())},jf.apply(e,arguments)},s.scaleDivergingPow=gb,s.scaleDivergingSqrt=function(){return gb.apply(null,arguments).exponent(.5)},s.scaleDivergingSymlog=function t(){var e=fg(fb());return e.copy=function(){return hb(e,t()).constant(e.constant())},jf.apply(e,arguments)},s.scaleIdentity=function t(e){var n;function i(t){return null==t||isNaN(t=+t)?n:t}return(i.invert=i).domain=i.range=function(t){return arguments.length?(e=Array.from(t,Uf),i):e.slice()},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,Uf):[0,1],ng(i)},s.scaleImplicit=Yf,s.scaleLinear=function t(){var e=tg();return e.copy=function(){return Kf(e,t())},Xf.apply(e,arguments),ng(e)},s.scaleLog=function t(){const e=lg(Qf()).domain([1,10]);return e.copy=()=>Kf(e,t()).base(e.base()),Xf.apply(e,arguments),e},s.scaleOrdinal=Gf,s.scalePoint=function(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(Vf.apply(null,arguments).paddingInner(1))},s.scalePow=_g,s.scaleQuantile=function t(){var e,n=[],i=[],r=[];function a(){var t=0,e=Math.max(1,i.length);for(r=new Array(e-1);++t<e;)r[t-1]=ct(n,t/e);return o}function o(t){return null==t||isNaN(t=+t)?e:i[_(r,t)]}return o.invertExtent=function(t){t=i.indexOf(t);return t<0?[NaN,NaN]:[0<t?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]},o.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(u),a()},o.range=function(t){return arguments.length?(i=Array.from(t),a()):i.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return t().domain(n).range(i).unknown(e)},Xf.apply(o,arguments)},s.scaleQuantize=function t(){var e,n=0,i=1,r=1,a=[.5],o=[0,1];function s(t){return null!=t&&t<=t?o[_(a,t,0,r)]:e}function u(){var t=-1;for(a=new Array(r);++t<r;)a[t]=((t+1)*i-(t-r)*n)/(r+1);return s}return s.domain=function(t){return arguments.length?([n,i]=t,n=+n,i=+i,u()):[n,i]},s.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,u()):o.slice()},s.invertExtent=function(t){t=o.indexOf(t);return t<0?[NaN,NaN]:t<1?[n,a[0]]:r<=t?[a[r-1],i]:[a[t-1],a[t]]},s.unknown=function(t){return arguments.length&&(e=t),s},s.thresholds=function(){return a.slice()},s.copy=function(){return t().domain([n,i]).range(o).unknown(e)},Xf.apply(ng(s),arguments)},s.scaleRadial=function t(){var e,n=tg(),i=[0,1],r=!1;function a(t){t=n(t),t=Math.sign(t)*Math.sqrt(Math.abs(t));return isNaN(t)?e:r?Math.round(t):t}return a.invert=function(t){return n.invert(yg(t))},a.domain=function(t){return arguments.length?(n.domain(t),a):n.domain()},a.range=function(t){return arguments.length?(n.range((i=Array.from(t,Uf)).map(yg)),a):i.slice()},a.rangeRound=function(t){return a.range(t).round(!0)},a.round=function(t){return arguments.length?(r=!!t,a):r},a.clamp=function(t){return arguments.length?(n.clamp(t),a):n.clamp()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t(n.domain(),i).round(r).clamp(n.clamp()).unknown(e)},Xf.apply(a,arguments),ng(a)},s.scaleSequential=function t(){var e=ng(lb()(qf));return e.copy=function(){return hb(e,t())},jf.apply(e,arguments)},s.scaleSequentialLog=function t(){var e=lg(lb()).domain([1,10]);return e.copy=function(){return hb(e,t()).base(e.base())},jf.apply(e,arguments)},s.scaleSequentialPow=db,s.scaleSequentialQuantile=function t(){var i=[],n=qf;function r(t){if(null!=t&&!isNaN(t=+t))return n((_(i,t,1)-1)/(i.length-1))}return r.domain=function(t){if(!arguments.length)return i.slice();i=[];for(var e of t)null==e||isNaN(e=+e)||i.push(e);return i.sort(u),r},r.interpolator=function(t){return arguments.length?(n=t,r):n},r.range=function(){return i.map((t,e)=>n(e/(i.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(t,e)=>ut(i,e/n))},r.copy=function(){return t(n).domain(i)},jf.apply(r,arguments)},s.scaleSequentialSqrt=function(){return db.apply(null,arguments).exponent(.5)},s.scaleSequentialSymlog=function t(){var e=fg(lb());return e.copy=function(){return hb(e,t()).constant(e.constant())},jf.apply(e,arguments)},s.scaleSqrt=function(){return _g.apply(null,arguments).exponent(.5)},s.scaleSymlog=function t(){var e=fg(Qf());return e.copy=function(){return Kf(e,t()).constant(e.constant())},Xf.apply(e,arguments)},s.scaleThreshold=function t(){var e,n=[.5],i=[0,1],r=1;function a(t){return null!=t&&t<=t?i[_(n,t,0,r)]:e}return a.domain=function(t){return arguments.length?(n=Array.from(t),r=Math.min(n.length,i.length-1),a):n.slice()},a.range=function(t){return arguments.length?(i=Array.from(t),r=Math.min(n.length,i.length-1),a):i.slice()},a.invertExtent=function(t){t=i.indexOf(t);return[n[t-1],n[t]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(n).range(i).unknown(e)},Xf.apply(a,arguments)},s.scaleTime=function(){return Xf.apply(cb(Pp,Lp,Sp,wp,Hg,Bg,zg,Og,Rg,s.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},s.scaleUtc=function(){return Xf.apply(cb(Dp,Op,Ep,Ap,up,jg,$g,Lg,Rg,s.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},s.scan=function(t,e){e=ft(t,e);return e<0?void 0:e},s.schemeAccent=bb,s.schemeBlues=p_,s.schemeBrBG=kb,s.schemeBuGn=Vb,s.schemeBuPu=Hb,s.schemeCategory10=vb,s.schemeDark2=_b,s.schemeGnBu=Wb,s.schemeGreens=b_,s.schemeGreys=y_,s.schemeOrRd=Jb,s.schemeOranges=M_,s.schemePRGn=Cb,s.schemePaired=yb,s.schemePastel1=xb,s.schemePastel2=mb,s.schemePiYG=Db,s.schemePuBu=e_,s.schemePuBuGn=Qb,s.schemePuOr=Pb,s.schemePuRd=i_,s.schemePurples=m_,s.schemeRdBu=Nb,s.schemeRdGy=Ib,s.schemeRdPu=a_,s.schemeRdYlBu=Fb,s.schemeRdYlGn=Xb,s.schemeReds=T_,s.schemeSet1=wb,s.schemeSet2=Tb,s.schemeSet3=Ab,s.schemeSpectral=Yb,s.schemeTableau10=Mb,s.schemeYlGn=c_,s.schemeYlGnBu=s_,s.schemeYlOrBr=h_,s.schemeYlOrRd=f_,s.select=we,s.selectAll=function(t){return"string"==typeof t?new xe([document.querySelectorAll(t)],[document.documentElement]):new xe([Bt(t)],ye)},s.selection=me,s.selector=Ft,s.selectorAll=jt,s.shuffle=gt,s.shuffler=pt,s.some=function(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const i of t)if(e(i,++n,t))return!0;return!1},s.sort=B,s.stack=function(){var o=F_([]),s=wx,u=mx,c=Tx;function e(t){var e,n,i=Array.from(o.apply(this,arguments),Ax),r=i.length,a=-1;for(const o of t)for(e=0,++a;e<r;++e)(i[e][a]=[0,+c(o,i[e].key,a,t)]).data=o;for(e=0,n=oy(s(i));e<r;++e)i[n[e]].index=e;return u(i,n),i}return e.keys=function(t){return arguments.length?(o="function"==typeof t?t:F_(Array.from(t)),e):o},e.value=function(t){return arguments.length?(c="function"==typeof t?t:F_(+t),e):c},e.order=function(t){return arguments.length?(s=null==t?wx:"function"==typeof t?t:F_(Array.from(t)),e):s},e.offset=function(t){return arguments.length?(u=null==t?mx:t,e):u},e},s.stackOffsetDiverging=function(t,e){if(0<(s=t.length))for(var n,i,r,a,o,s,u=0,c=t[e[0]].length;u<c;++u)for(n=a=o=0;n<s;++n)0<(r=(i=t[e[n]][u])[1]-i[0])?(i[0]=a,i[1]=a+=r):r<0?(i[1]=o,i[0]=o+=r):(i[0]=0,i[1]=r)},s.stackOffsetExpand=function(t,e){if(0<(i=t.length)){for(var n,i,r,a=0,o=t[0].length;a<o;++a){for(r=n=0;n<i;++n)r+=t[n][a][1]||0;if(r)for(n=0;n<i;++n)t[n][a][1]/=r}mx(t,e)}},s.stackOffsetNone=mx,s.stackOffsetSilhouette=function(t,e){if(0<(n=t.length)){for(var n,i=0,r=t[e[0]],a=r.length;i<a;++i){for(var o=0,s=0;o<n;++o)s+=t[o][i][1]||0;r[i][1]+=r[i][0]=-s/2}mx(t,e)}},s.stackOffsetWiggle=function(t,e){if(0<(r=t.length)&&0<(i=(n=t[e[0]]).length)){for(var n,i,r,a=0,o=1;o<i;++o){for(var s=0,u=0,c=0;s<r;++s){for(var l=t[e[s]],h=l[o][1]||0,d=(h-(l[o-1][1]||0))/2,f=0;f<s;++f){var g=t[e[f]];d+=(g[o][1]||0)-(g[o-1][1]||0)}u+=h,c+=d*h}n[o-1][1]+=n[o-1][0]=a,u&&(a-=c/u)}n[o-1][1]+=n[o-1][0]=a,mx(t,e)}},s.stackOrderAppearance=Mx,s.stackOrderAscending=kx,s.stackOrderDescending=function(t){return kx(t).reverse()},s.stackOrderInsideOut=function(t){for(var e,n=t.length,i=t.map(Ex),r=Mx(t),a=0,o=0,s=[],u=[],c=0;c<n;++c)e=r[c],a<o?(a+=i[e],s.push(e)):(o+=i[e],u.push(e));return u.reverse().concat(s)},s.stackOrderNone=wx,s.stackOrderReverse=function(t){return wx(t).reverse()},s.stratify=function(){var f,g=sf,p=uf;function e(n){var e,t,i,r,a,o,s,u,c=Array.from(n),l=g,h=p,d=new Map;if(null!=f){const g=c.map((t,e)=>function(t){var e=(t=`${t}`).length;return"/"===(t=lf(t,e-1)&&!lf(t,e-2)?t.slice(0,-1):t)[0]?t:`/${t}`}(f(t,e,n))),p=g.map(cf),e=new Set(g).add("");for(const f of p)e.has(f)||(e.add(f),g.push(f),p.push(cf(f)),c.push(of));l=(t,e)=>g[e],h=(t,e)=>p[e]}for(i=0,e=c.length;i<e;++i)t=c[i],o=c[i]=new Dd(t),null!=(s=l(t,i,n))&&(s+="")&&(u=o.id=s,d.set(u,d.has(u)?af:o)),null!=(s=h(t,i,n))&&(s+="")&&(o.parent=s);for(i=0;i<e;++i)if(s=(o=c[i]).parent){if(!(a=d.get(s)))throw new Error("missing: "+s);if(a===af)throw new Error("ambiguous: "+s);a.children?a.children.push(o):a.children=[o],o.parent=a}else{if(r)throw new Error("multiple roots");r=o}if(!r)throw new Error("no root");if(null!=f){for(;r.data===of&&1===r.children.length;)r=r.children[0],--e;for(let t=c.length-1;0<=t&&(o=c[t]).data===of;--t)o.data=null}if(r.parent=rf,r.eachBefore(function(t){t.depth=t.parent.depth+1,--e}).eachBefore(Rd),r.parent=null,0<e)throw new Error("cycle");return r}return e.id=function(t){return arguments.length?(g=Od(t),e):g},e.parentId=function(t){return arguments.length?(p=Od(t),e):p},e.path=function(t){return arguments.length?(f=Od(t),e):f},e},s.style=ne,s.subset=function(t,e){return yt(e,t)},s.sum=function(e,n){let i=0;if(void 0===n)for(var t of e)(t=+t)&&(i+=t);else{let t=-1;for(var r of e)(r=+n(r,++t,e))&&(i+=r)}return i},s.superset=yt,s.svg=hs,s.symbol=function(e,n){let i=null,r=K_(a);function a(){let t;if(i=i||(t=r()),e.apply(this,arguments).draw(i,+n.apply(this,arguments)),t)return i=null,t+""||null}return e="function"==typeof e?e:F_(e||Oy),n="function"==typeof n?n:F_(void 0===n?64:+n),a.type=function(t){return arguments.length?(e="function"==typeof t?t:F_(t),a):e},a.size=function(t){return arguments.length?(n="function"==typeof t?t:F_(+t),a):n},a.context=function(t){return arguments.length?(i=null==t?null:t,a):i},a},s.symbolAsterisk=Dy,s.symbolCircle=Oy,s.symbolCross=Py,s.symbolDiamond=zy,s.symbolDiamond2=Iy,s.symbolPlus=$y,s.symbolSquare=Fy,s.symbolSquare2=By,s.symbolStar=n,s.symbolTimes=Er,s.symbolTriangle=Ge,s.symbolTriangle2=Ue,s.symbolWye=Ve,s.symbolX=Er,s.symbols=jr,s.symbolsFill=jr,s.symbolsStroke=ka,s.text=is,s.thresholdFreedmanDiaconis=function(t,e,n){var i=p(t),t=ut(t,.75)-ut(t,.25);return i&&t?Math.ceil((n-e)/(2*t*Math.pow(i,-1/3))):1},s.thresholdScott=function(t,e,n){var i=p(t),t=w(t);return i&&t?Math.ceil((n-e)*Math.cbrt(i)/(3.49*t)):1},s.thresholdSturges=Q,s.tickFormat=eg,s.tickIncrement=Z,s.tickStep=J,s.ticks=W,s.timeDay=Bg,s.timeDays=Xg,s.timeFormatDefaultLocale=ib,s.timeFormatLocale=$p,s.timeFriday=Kg,s.timeFridays=ap,s.timeHour=zg,s.timeHours=Ig,s.timeInterval=wg,s.timeMillisecond=Tg,s.timeMilliseconds=Ag,s.timeMinute=Og,s.timeMinutes=Pg,s.timeMonday=qg,s.timeMondays=ep,s.timeMonth=wp,s.timeMonths=Tp,s.timeSaturday=Qg,s.timeSaturdays=op,s.timeSecond=Rg,s.timeSeconds=Dg,s.timeSunday=Hg,s.timeSundays=tp,s.timeThursday=Jg,s.timeThursdays=rp,s.timeTickInterval=Lp,s.timeTicks=Pp,s.timeTuesday=Wg,s.timeTuesdays=np,s.timeWednesday=Zg,s.timeWednesdays=ip,s.timeWeek=Hg,s.timeWeeks=tp,s.timeYear=Sp,s.timeYears=kp,s.timeout=rr,s.timer=Qi,s.timerFlush=tr,s.transition=kr,s.transpose=vt,s.tree=function(){var v=hf,u=1,c=1,l=null;function e(s){var e,n,i,r,a,o,t=function(){for(var t,e,n,i,r,a=new gf(s,0),o=[a];t=o.pop();)if(n=t._.children)for(t.children=new Array(r=n.length),i=r-1;0<=i;--i)o.push(e=t.children[i]=new gf(n[i],i)),e.parent=t;return(a.parent=new gf(null,0)).children=[a],a}();return t.eachAfter(h),t.parent.m=-t.z,t.eachBefore(d),l?s.eachBefore(f):((i=n=e=s).eachBefore(function(t){t.x<e.x&&(e=t),t.x>n.x&&(n=t),t.depth>i.depth&&(i=t)}),t=e===n?1:v(e,n)/2,r=t-e.x,a=u/(n.x+t+r),o=c/(i.depth||1),s.eachBefore(function(t){t.x=(t.x+r)*a,t.y=t.depth*o})),s}function h(a){var t=a.children,e=a.parent.children,p=a.i?e[a.i-1]:null;t?(function(){for(var t,e=0,n=0,i=a.children,r=i.length;0<=--r;)(t=i[r]).z+=e,t.m+=e,e+=t.s+(n+=t.c)}(),t=(t[0].z+t[t.length-1].z)/2,p?(a.z=p.z+v(a._,p._),a.m=a.z-t):a.z=t):p&&(a.z=p.z+v(a._,p._)),a.parent.A=function(t,e){if(p){for(var n,i=t,r=t,a=p,o=i.parent.children[0],s=i.m,u=r.m,c=a.m,l=o.m;a=ff(a),i=df(i),a&&i;)o=df(o),(r=ff(r)).a=t,0<(n=a.z+c-i.z-s+v(a._,i._))&&(f=t,g=e,h=(d=a).a.parent===f.parent?d.a:g,f=void 0,f=(d=n)/((g=t).i-h.i),g.c-=f,g.s+=d,h.c+=f,g.z+=d,g.m+=d,s+=n,u+=n),c+=a.m,s+=i.m,l+=o.m,u+=r.m;a&&!ff(r)&&(r.t=a,r.m+=c-u),i&&!df(o)&&(o.t=i,o.m+=s-l,e=t)}var h,d,f,g;return e}(a,a.parent.A||e[0])}function d(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function f(t){t.x*=u,t.y=t.depth*c}return e.separation=function(t){return arguments.length?(v=t,e):v},e.size=function(t){return arguments.length?(l=!1,u=+t[0],c=+t[1],e):l?null:[u,c]},e.nodeSize=function(t){return arguments.length?(l=!0,u=+t[0],c=+t[1],e):l?[u,c]:null},e},s.treemap=function(){var o=_f,e=!1,n=1,i=1,s=[0],u=Ld,c=Ld,l=Ld,h=Ld,d=Ld;function r(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(a),s=[0],e&&t.eachBefore(ef),t}function a(t){var e=s[t.depth],n=t.x0+e,i=t.y0+e,r=t.x1-e,a=t.y1-e;r<n&&(n=r=(n+r)/2),a<i&&(i=a=(i+a)/2),t.x0=n,t.y0=i,t.x1=r,t.y1=a,t.children&&(e=s[t.depth+1]=u(t)/2,n+=d(t)-e,i+=c(t)-e,(r-=l(t)-e)<n&&(n=r=(n+r)/2),(a-=h(t)-e)<i&&(i=a=(i+a)/2),o(t,n,i,r,a))}return r.round=function(t){return arguments.length?(e=!!t,r):e},r.size=function(t){return arguments.length?(n=+t[0],i=+t[1],r):[n,i]},r.tile=function(t){return arguments.length?(o=Pd(t),r):o},r.padding=function(t){return arguments.length?r.paddingInner(t).paddingOuter(t):r.paddingInner()},r.paddingInner=function(t){return arguments.length?(u="function"==typeof t?t:Nd(+t),r):u},r.paddingOuter=function(t){return arguments.length?r.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):r.paddingTop()},r.paddingTop=function(t){return arguments.length?(c="function"==typeof t?t:Nd(+t),r):c},r.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:Nd(+t),r):l},r.paddingBottom=function(t){return arguments.length?(h="function"==typeof t?t:Nd(+t),r):h},r.paddingLeft=function(t){return arguments.length?(d="function"==typeof t?t:Nd(+t),r):d},r},s.treemapBinary=function(t,e,n,i,r){var a,o,p=t.children,s=p.length,v=new Array(s+1);for(v[0]=o=a=0;a<s;++a)v[a+1]=o+=p[a].value;!function t(e,n,i,r,a,o,s){if(n-1<=e){var u=p[e];return u.x0=r,u.y0=a,u.x1=o,u.y1=s,0}for(var c=v[e],l=i/2+c,h=e+1,d=n-1;h<d;){var f=h+d>>>1;v[f]<l?h=1+f:d=f}l-v[h-1]<v[h]-l&&e+1<h&&--h;var g=v[h]-c,u=i-g;s-a<o-r?(t(e,h,g,r,a,c=i?(r*u+o*g)/i:o,s),t(h,n,u,c,a,o,s)):(t(e,h,g,r,a,o,i=i?(a*u+s*g)/i:s),t(h,n,u,r,i,o,s))}(0,s,t.value,e,n,i,r)},s.treemapDice=nf,s.treemapResquarify=yf,s.treemapSlice=pf,s.treemapSliceDice=function(t,e,n,i,r){(1&t.depth?pf:nf)(t,e,n,i,r)},s.treemapSquarify=_f,s.tsv=os,s.tsvFormat=qo,s.tsvFormatBody=Wo,s.tsvFormatRow=Jo,s.tsvFormatRows=Zo,s.tsvFormatValue=Ko,s.tsvParse=Uo,s.tsvParseRows=Ho,s.union=function(...t){const e=new M;for(const n of t)for(const t of n)e.add(t);return e},s.unixDay=Gg,s.unixDays=Vg,s.utcDay=jg,s.utcDays=Yg,s.utcFriday=fp,s.utcFridays=xp,s.utcHour=$g,s.utcHours=Fg,s.utcMillisecond=Tg,s.utcMilliseconds=Ag,s.utcMinute=Lg,s.utcMinutes=Ng,s.utcMonday=cp,s.utcMondays=vp,s.utcMonth=Ap,s.utcMonths=Mp,s.utcSaturday=gp,s.utcSaturdays=mp,s.utcSecond=Rg,s.utcSeconds=Dg,s.utcSunday=up,s.utcSundays=pp,s.utcThursday=dp,s.utcThursdays=yp,s.utcTickInterval=Op,s.utcTicks=Dp,s.utcTuesday=lp,s.utcTuesdays=bp,s.utcWednesday=hp,s.utcWednesdays=_p,s.utcWeek=up,s.utcWeeks=pp,s.utcYear=Ep,s.utcYears=Cp,s.variance=m,s.version="7.8.5",s.window=ee,s.xml=cs,s.zip=function(){return vt(arguments)},s.zoom=function(){var c,l,u,h=zx,d=Ix,f=Xx,a=Fx,e=Bx,o=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],s=250,p=Ei,n=Ct("start","zoom","end"),v=500,b=150,_=0,y=10;function x(t){t.property("__zoom",$x).on("wheel.zoom",r,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",k).filter(e).on("touchstart.zoom",E).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,e){return(e=Math.max(o[0],Math.min(o[1],e)))===t.k?t:new Dx(e,t.x,t.y)}function w(t,e,n){var i=e[0]-n[0]*t.k,n=e[1]-n[1]*t.k;return i===t.x&&n===t.y?t:new Dx(t.k,i,n)}function T(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function A(t,n,u,c){t.on("start.zoom",function(){M(this,arguments).event(c).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(c).end()}).tween("zoom",function(){var t=arguments,i=M(this,t).event(c),e=d.apply(this,t),r=null==u?T(e):"function"==typeof u?u.apply(this,t):u,a=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),e=this.__zoom,o="function"==typeof n?n.apply(this,t):n,s=p(e.invert(r).concat(a/e.k),o.invert(r).concat(a/o.k));return function(t){var e,n;t=1===t?o:(e=s(t),new Dx(n=a/e[2],r[0]-e[0]*n,r[1]-e[1]*n)),i.zoom(null,t)}})}function M(t,e,n){return!n&&t.__zooming||new i(t,e)}function i(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=d.apply(t,e),this.taps=0}function r(t,...e){if(h.apply(this,arguments)){var n=M(this,e).event(t),i=this.__zoom,r=Math.max(o[0],Math.min(o[1],i.k*Math.pow(2,a.apply(this,arguments)))),e=ke(t);if(n.wheel)n.mouse[0][0]===e[0]&&n.mouse[0][1]===e[1]||(n.mouse[1]=i.invert(n.mouse[0]=e)),clearTimeout(n.wheel);else{if(i.k===r)return;n.mouse=[e,i.invert(e)],_r(this),n.start()}Nx(t),n.wheel=setTimeout(function(){n.wheel=null,n.end()},b),n.zoom("mouse",f(w(m(i,r),n.mouse[0],n.mouse[1]),n.extent,g))}}function S(t,...e){var i,r,n,a,o;!u&&h.apply(this,arguments)&&(i=t.currentTarget,r=M(this,e,!0).event(t),n=we(t.view).on("mousemove.zoom",function(t){var e,n;Nx(t),r.moved||(e=t.clientX-a,n=t.clientY-o,r.moved=_<e*e+n*n),r.event(t).zoom("mouse",f(w(r.that.__zoom,r.mouse[0]=ke(t,i),r.mouse[1]),r.extent,g))},!0).on("mouseup.zoom",function(t){n.on("mousemove.zoom mouseup.zoom",null),Pe(t.view,r.moved),Nx(t),r.event(t).end()},!0),e=ke(t,i),a=t.clientX,o=t.clientY,Oe(t.view),Lx(t),r.mouse=[e,this.__zoom.invert(e)],_r(this),r.start())}function k(t,...e){var n,i,r,a;h.apply(this,arguments)&&(n=this.__zoom,i=ke(t.changedTouches?t.changedTouches[0]:t,this),r=n.invert(i),a=n.k*(t.shiftKey?.5:2),e=f(w(m(n,a),i,r),d.apply(this,e),g),Nx(t),0<s?we(this).transition().duration(s).call(A,e,i,t):we(this).call(x.transform,e,i,t))}function E(t,...e){if(h.apply(this,arguments)){var n,i,r,a,o=t.touches,s=o.length,u=M(this,e,t.changedTouches.length===s).event(t);for(Lx(t),i=0;i<s;++i)a=[a=ke(r=o[i],this),this.__zoom.invert(a),r.identifier],u.touch0?u.touch1||u.touch0[2]===a[2]||(u.touch1=a,u.taps=0):(u.touch0=a,n=!0,u.taps=1+!!c);c=c&&clearTimeout(c),n&&(u.taps<2&&(l=a[0],c=setTimeout(function(){c=null},v)),_r(this),u.start())}}function C(t,...e){if(this.__zooming){var n,i=M(this,e).event(t),r=t.changedTouches,a=r.length;for(Nx(t),n=0;n<a;++n)h=ke(l=r[n],this),i.touch0&&i.touch0[2]===l.identifier?i.touch0[0]=h:i.touch1&&i.touch1[2]===l.identifier&&(i.touch1[0]=h);if(l=i.that.__zoom,i.touch1)var o=i.touch0[0],s=i.touch0[1],u=i.touch1[0],c=i.touch1[1],e=(e=u[0]-o[0])*e+(e=u[1]-o[1])*e,t=(t=c[0]-s[0])*t+(t=c[1]-s[1])*t,l=m(l,Math.sqrt(e/t)),h=[(o[0]+u[0])/2,(o[1]+u[1])/2],c=[(s[0]+c[0])/2,(s[1]+c[1])/2];else{if(!i.touch0)return;h=i.touch0[0],c=i.touch0[1]}i.zoom("touch",f(w(l,h,c),i.extent,g))}}function R(t,...e){if(this.__zooming){var n,i,r,a=M(this,e).event(t),o=t.changedTouches,s=o.length;for(Lx(t),u&&clearTimeout(u),u=setTimeout(function(){u=null},v),n=0;n<s;++n)i=o[n],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0?a.touch0[1]=this.__zoom.invert(a.touch0[0]):(a.end(),2===a.taps&&(i=ke(i,this),Math.hypot(l[0]-i[0],l[1]-i[1])<y)&&(r=we(this).on("dblclick.zoom"))&&r.apply(this,arguments))}}return x.transform=function(t,e,n,i){var r=t.selection?t.selection():t;r.property("__zoom",$x),t!==r?A(t,e,n,i):r.interrupt().each(function(){M(this,arguments).event(i).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},x.scaleBy=function(t,e,n,i){x.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},n,i)},x.scaleTo=function(t,a,o,e){x.transform(t,function(){var t=d.apply(this,arguments),e=this.__zoom,n=null==o?T(t):"function"==typeof o?o.apply(this,arguments):o,i=e.invert(n),r="function"==typeof a?a.apply(this,arguments):a;return f(w(m(e,r),n,i),t,g)},o,e)},x.translateBy=function(t,e,n,i){x.transform(t,function(){return f(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),d.apply(this,arguments),g)},null,i)},x.translateTo=function(t,i,r,a,e){x.transform(t,function(){var t=d.apply(this,arguments),e=this.__zoom,n=null==a?T(t):"function"==typeof a?a.apply(this,arguments):a;return f(Ox.translate(n[0],n[1]).scale(e.k).translate("function"==typeof i?-i.apply(this,arguments):-i,"function"==typeof r?-r.apply(this,arguments):-r),t,g)},a,e)},i.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=we(this.that).datum();n.call(t,this.that,new Rx(t,{sourceEvent:this.sourceEvent,target:x,type:t,transform:this.that.__zoom,dispatch:n}),e)}},x.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:Cx(+t),x):a},x.filter=function(t){return arguments.length?(h="function"==typeof t?t:Cx(!!t),x):h},x.touchable=function(t){return arguments.length?(e="function"==typeof t?t:Cx(!!t),x):e},x.extent=function(t){return arguments.length?(d="function"==typeof t?t:Cx([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),x):d},x.scaleExtent=function(t){return arguments.length?(o[0]=+t[0],o[1]=+t[1],x):[o[0],o[1]]},x.translateExtent=function(t){return arguments.length?(g[0][0]=+t[0][0],g[1][0]=+t[1][0],g[0][1]=+t[0][1],g[1][1]=+t[1][1],x):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},x.constrain=function(t){return arguments.length?(f=t,x):f},x.duration=function(t){return arguments.length?(s=+t,x):s},x.interpolate=function(t){return arguments.length?(p=t,x):p},x.on=function(){var t=n.on.apply(n,arguments);return t===n?x:t},x.clickDistance=function(t){return arguments.length?(_=(t=+t)*t,x):Math.sqrt(_)},x.tapDistance=function(t){return arguments.length?(y=+t,x):y},x},s.zoomIdentity=Ox,s.zoomTransform=Px}),function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom"));else if("function"==typeof define&&define.amd)define(["d3-axis","d3-brush","d3-drag","d3-dsv","d3-ease","d3-hierarchy","d3-interpolate","d3-scale","d3-selection","d3-shape","d3-time-format","d3-transition","d3-zoom"],e);else{var n,i="object"==typeof exports?e(require("d3-axis"),require("d3-brush"),require("d3-drag"),require("d3-dsv"),require("d3-ease"),require("d3-hierarchy"),require("d3-interpolate"),require("d3-scale"),require("d3-selection"),require("d3-shape"),require("d3-time-format"),require("d3-transition"),require("d3-zoom")):e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3);for(n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,function(e,r,a,o,s,u,c,l,h,d,f,g,p){return function(){"use strict";var n=[,,function(t){t.exports=h},function(t){t.exports=r},function(t){t.exports=f},function(t){t.exports=o},function(t){t.exports=l},function(t){t.exports=a},function(t){t.exports=g},function(t){t.exports=d},function(t){t.exports=e},function(t){t.exports=s},function(t){t.exports=c},function(t){t.exports=u},function(t){t.exports=p}],i={};function qi(t){var e=i[t];if(void 0!==e)return e.exports;e=i[t]={exports:{}};return n[t](e,e.exports,qi),e.exports}qi.d=function(t,e){for(var n in e)qi.o(e,n)&&!qi.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},qi.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},qi.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var Wi={};return function(){qi.r(Wi),qi.d(Wi,{bb:function(){return Hi},default:function(){return Hi}});var e={};qi.r(e),qi.d(e,{area:function(){return di},areaLineRange:function(){return fi},areaSpline:function(){return gi},areaSplineRange:function(){return pi},areaStep:function(){return vi},bar:function(){return Mi},bubble:function(){return Si},candlestick:function(){return ki},donut:function(){return xi},gauge:function(){return mi},line:function(){return bi},pie:function(){return wi},polar:function(){return Ti},radar:function(){return Ai},scatter:function(){return Ei},spline:function(){return _i},step:function(){return yi},treemap:function(){return Ci}});var n={};function P(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}qi.r(n),qi.d(n,{selection:function(){return Yi},subchart:function(){return Gi},zoom:function(){return Vi}});var s=qi(4),L=qi(2),m=function(){return P(this,void 0),"object"==typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis||"object"==typeof global&&null!==global&&global.Object===Object&&global||"object"==typeof self&&null!==self&&self.Object===Object&&self||Function("return this")()}.bind(void 0)(),t="function"==typeof m.requestAnimationFrame,i="function"==typeof m.requestIdleCallback,r=t?m.requestAnimationFrame:function(t){return P(this,void 0),setTimeout(t,1)}.bind(void 0),a=t?m.cancelAnimationFrame:function(t){return P(this,void 0),clearTimeout(t)}.bind(void 0),o=i?m.requestIdleCallback:r,v=(i&&m.cancelIdleCallback,null==m?void 0:m.document),S={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",CANDLESTICK:"candlestick",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",POLAR:"polar",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step",TREEMAP:"treemap"},u={AREA:"initArea",AREA_LINE_RANGE:"initArea",AREA_SPLINE:"initArea",AREA_SPLINE_RANGE:"initArea",AREA_STEP:"initArea",BAR:"initBar",BUBBLE:"initCircle",CANDLESTICK:"initCandlestick",DONUT:"initArc",GAUGE:"initArc",LINE:"initLine",PIE:"initArc",POLAR:"initPolar",RADAR:"initCircle",SCATTER:"initCircle",SPLINE:"initLine",STEP:"initLine",TREEMAP:"initTreemap"},k={Area:[S.AREA,S.AREA_SPLINE,S.AREA_SPLINE_RANGE,S.AREA_LINE_RANGE,S.AREA_STEP],AreaRange:[S.AREA_SPLINE_RANGE,S.AREA_LINE_RANGE],Arc:[S.PIE,S.DONUT,S.GAUGE,S.POLAR,S.RADAR],Line:[S.LINE,S.SPLINE,S.AREA,S.AREA_SPLINE,S.AREA_SPLINE_RANGE,S.AREA_LINE_RANGE,S.STEP,S.AREA_STEP],Step:[S.STEP,S.AREA_STEP],Spline:[S.SPLINE,S.AREA_SPLINE,S.AREA_SPLINE_RANGE]};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){t=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);if("object"!==c(e=n.call(t,e||"default")))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"===c(t)?t:String(t)}function h(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=qi(3),f=void 0;function g(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function p(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?g(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var O=function(t){return P(this,f),t||0===t}.bind(void 0),E=function(t){return P(this,f),"function"==typeof t}.bind(void 0),b=function(t){return P(this,f),"string"==typeof t}.bind(void 0),N=function(t){return P(this,f),"number"==typeof t}.bind(void 0),z=function(t){return P(this,f),void 0===t}.bind(void 0),I=function(t){return P(this,f),void 0!==t}.bind(void 0),_=function(t){return P(this,f),"boolean"==typeof t}.bind(void 0),y=function(t){return P(this,f),10*Math.ceil(t/10)}.bind(void 0),x=function(t){return P(this,f),Math.ceil(t)+.5}.bind(void 0),C=function(t){return P(this,f),t[1]-t[0]}.bind(void 0),w=function(t){return P(this,f),"object"==typeof t}.bind(void 0),T=function(t){return P(this,f),z(t)||null===t||b(t)&&0===t.length||w(t)&&!(t instanceof Date)&&0===Object.keys(t).length||N(t)&&isNaN(t)}.bind(void 0),R=function(t){return P(this,f),!T(t)}.bind(void 0),$=function(t){return P(this,f),Array.isArray(t)}.bind(void 0),D=function(t){return P(this,f),t&&!(null!=t&&t.nodeType)&&w(t)&&!$(t)}.bind(void 0);function A(t,e,n){return I(t[e])?t[e]:n}function M(t,e){for(var n=E(t),i=arguments.length,r=Array(2<i?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];return n&&t.call.apply(t,[e].concat(r)),n}function F(t,i){function e(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];--r||i.apply.apply(i,[this].concat(e))}var n=this,r=0;"duration"in t?t.each(function(){return P(this,n),++r}.bind(this)).on("end",e):(++r,t.call(e))}function B(t){return b(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function X(n,t,i,e){var r,a,o=this;void 0===i&&(i=[-1,1]),void 0===e&&(e=!1),n&&b(t)&&(-1===t.indexOf("\n")?n.text(t):(r=[n.text(),t].map(function(t){return P(this,o),t.replace(/[\s\n]/g,"")}.bind(this)))[0]!==r[1]&&(t=t.split("\n"),a=e?t.length-1:1,n.html(""),t.forEach(function(t,e){P(this,o),n.append("tspan").attr("x",0).attr("dy",(0===e?i[0]*a:i[1])+"em").text(t)}.bind(this))))}function j(t){var e=t.getBBox(),n=e.x,i=e.y,t=e.width,e=e.height;return[{x:n,y:i+e},{x:n,y:i},{x:n+t,y:i},{x:n+t,y:i+e}]}function Y(t,e){var n=t&&(null==(n=t.touches||t.sourceEvent&&t.sourceEvent.touches)?void 0:n[0]),e=(0,L.pointer)(n||t,e),i=this;return e.map(function(t){return P(this,i),isNaN(t)?0:t}.bind(this))}function G(t){var e,n=t.event,t=t.$el,t=t.subchart.main||t.main;return n&&"brush"===n.type?e=n.selection:t&&(e=t.select(".bb-brush").node())&&(e=(0,d.brushSelection)(e)),e}function V(t){return!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width")?t.rect=t.getBoundingClientRect():t.rect}function U(t,e,n){void 0===t&&(t=!0),void 0===e&&(e=0),void 0===n&&(n=1e4);var i=m.crypto||m.msCrypto,e=i?e+i.getRandomValues(new Uint32Array(1))[0]%(n-e+1):Math.floor(Math.random()*(n-e)+e);return t?e+"":e}function H(t){t=G(t);return!t||t[0]===t[1]}function q(e,t){var n,i=this;for(n in void 0===e&&(e={}),$(t)&&t.forEach(function(t){return P(this,i),q(e,t)}.bind(this)),t)/^\d+$/.test(n)||n in e||(e[n]=t[n]);return e}var W=function(t){return P(this,f),t.charAt(0).toUpperCase()+t.slice(1)}.bind(void 0);var Z=function(t){return P(this,f),[].slice.call(t)}.bind(void 0);function J(t){t=t?t.transform:null,t=t&&t.baseVal;return t&&t.numberOfItems?t.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}}function K(t){var i=this,e=t[0]instanceof Date,t=(e?t.map(Number):t).filter(function(t,e,n){return P(this,i),n.indexOf(t)===e}.bind(this));return e?t.map(function(t){return P(this,i),new Date(t)}.bind(this)):t}function Q(t){var n=this;return t&&t.length?t.reduce(function(t,e){return P(this,n),t.concat(e)}.bind(this)):[]}function tt(n){for(var i=this,t=arguments.length,e=Array(1<t?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];if(!e.length||1===e.length&&!e[0])return n;var a=e.shift();return D(n)&&D(a)&&Object.keys(a).forEach(function(t){P(this,i);var e=a[t];D(e)?(n[t]||(n[t]={}),n[t]=tt(n[t],e)):n[t]=$(e)?e.concat():e}.bind(this)),tt.apply(void 0,[n].concat(e))}function et(t,e){var n,i=this;return void 0===e&&(e=!0),t[0]instanceof Date?n=(e?function(t,e){return P(this,i),t-e}:function(t,e){return P(this,i),e-t}).bind(this):e&&!t.every(isNaN)?n=function(t,e){return P(this,i),t-e}.bind(this):e||(n=function(t,e){return P(this,i),(e<t?-1:t<e&&1)||t===e&&0}.bind(this)),t.concat().sort(n)}function nt(t,e){var n=this,e=e.filter(function(t){return P(this,n),R(t)}.bind(this));return e.length?N(e[0])?e=Math[t].apply(Math,e):e[0]instanceof Date&&(e=et(e,"min"===t)[0]):e=void 0,e}var it=function(t,e,n){void 0===n&&(n=1),P(this,f);for(var i=[],r=0|Math.max(0,Math.ceil((e-t)/n)),a=t;a<r;a++)i.push(t+a*n);return i}.bind(void 0),rt={mouse:function(){var r=this;P(this,f);var a=function(){return P(this,r),{bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}}.bind(this);try{return new MouseEvent("t"),function(t,e,n){void 0===n&&(n=a()),P(this,r),t.dispatchEvent(new MouseEvent(e,n))}.bind(this)}catch(t){return function(t,e,n){void 0===n&&(n=a()),P(this,r);var i=v.createEvent("MouseEvent");i.initMouseEvent(e,n.bubbles,n.cancelable,m,0,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}.bind(this)}}.bind(void 0)(),touch:function(t,e,n){P(this,f);n=new Touch(tt({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},n));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[n],targetTouches:[],changedTouches:[n]}))}.bind(void 0)};function at(t,e){var n,i=t;for(n in e)i=i.replace(new RegExp("{="+n+"}","g"),e[n]);return i}function ot(t){var e,n;return t instanceof Date?n=t:b(t)?(e=this.config,n=null!=(e=this.format.dataTime(e.data_xFormat)(t))?e:new Date(t)):N(t)&&!isNaN(t)&&(n=new Date(+t)),n&&!isNaN(+n)||console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),n}function st(){return!1===(null==v?void 0:v.hidden)||"visible"===(null==v?void 0:v.visibilityState)}function ut(t){var e=t,t=e.config,n="";if(T(t.data_type||t.data_types)&&!e[u.LINE])n="line";else for(var i in u){var r=S[i];if(e.hasType(r)&&!e[u[i]]){n=r;break}}n&&function(t,e){var n,i="[billboard.js]";null!=(n=m.console)&&n.error&&(console.error(" "+i+" "+t,"background:red;color:white;display:block;font-size:15px",e),console.info("%c","font-size:15px","https://github.com/naver/billboard.js/wiki/CHANGELOG-v2#modularization-by-its-functionality"));throw Error(i+" "+t.replace(/\%c([a-z-]+)/i,"'$1' ")+" "+e)}("Please, make sure if %c"+function(t,e){var n=this;return t.split(e=void 0===e?"-":e).map(function(t,e){return P(this,n),e?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}.bind(this)).join("")}(n),"module has been imported and specified correctly.")}function ct(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function lt(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?ct(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var ht={button:"bb-button",chart:"bb-chart",empty:"bb-empty",main:"bb-main",target:"bb-target",EXPANDED:"_expanded_"},dt={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsTitle:"bb-chart-arcs-title",needle:"bb-needle"},ft={area:"bb-area",areas:"bb-areas"},gt={axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label"},pt={bar:"bb-bar",bars:"bb-bars",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars"},vt={candlestick:"bb-candlestick",candlesticks:"bb-candlesticks",chartCandlestick:"bb-chart-candlestick",chartCandlesticks:"bb-chart-candlesticks",valueDown:"bb-value-down",valueUp:"bb-value-up"},bt={chartCircles:"bb-chart-circles",circle:"bb-circle",circles:"bb-circles"},_t={colorPattern:"bb-color-pattern",colorScale:"bb-colorscale"},yt={dragarea:"bb-dragarea",INCLUDED:"_included_"},xt={chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",gaugeValue:"bb-gauge-value"},mt={legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile"},wt={chartLine:"bb-chart-line",chartLines:"bb-chart-lines",line:"bb-line",lines:"bb-lines"},Tt={eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single"},At={focused:"bb-focused",defocused:"bb-defocused",legendItemFocused:"bb-legend-item-focused",xgridFocus:"bb-xgrid-focus",ygridFocus:"bb-ygrid-focus"},Mt={grid:"bb-grid",gridLines:"bb-grid-lines",xgrid:"bb-xgrid",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids"},St="bb-level",kt="bb-levels",Et={chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars"},Ct={region:"bb-region",regions:"bb-regions"},Rt={selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",SELECTED:"_selected_"},Dt={shape:"bb-shape",shapes:"bb-shapes"},Ot={brush:"bb-brush",subchart:"bb-subchart"},Pt={chartText:"bb-chart-text",chartTexts:"bb-chart-texts",text:"bb-text",texts:"bb-texts",title:"bb-title",TextOverlapping:"text-overlapping"},Lt={tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name"},Nt={treemap:"bb-treemap",chartTreemap:"bb-chart-treemap",chartTreemaps:"bb-chart-treemaps"},zt={buttonZoomReset:"bb-zoom-reset",zoomBrush:"bb-zoom-brush"},It=lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt(lt({},ht),dt),ft),gt),pt),vt),bt),_t),yt),xt),mt),wt),Tt),At),Mt),Et),Ct),Rt),Dt),Ot),Pt),Lt),Nt),zt),$t={element:function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,candlestick:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null,zoomResetBtn:null}},state:function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,hasTreemap:!1,cssRule:{},current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[],needle:void 0},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},event:null,dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",orgConfig:{},hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}},Ft=function(){function t(){var e=this;Object.keys($t).forEach(function(t){P(this,e),this[t]=new $t[t]}.bind(this))}return t.prototype.getStore=function(t){return this[t]},t}(),Bt={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding:!0,padding_mode:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,resize_timer:!0,onclick:void 0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:250,plugins:[],render:{},regions:[]},Xt={boost_useCssRule:!1,boost_useWorker:!1},jt=void 0,Yt={data_x:void 0,data_idConverter:function(t){return P(this,jt),t}.bind(void 0),data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_groupsZeroAs:"positive",data_color:void 0,data_colors:{},data_labels:{},data_labels_backgroundColors:void 0,data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){P(this,jt)}.bind(void 0),data_onover:function(){P(this,jt)}.bind(void 0),data_onout:function(){P(this,jt)}.bind(void 0),data_onshown:void 0,data_onhidden:void 0,data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},Gt={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},Vt={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},Ut={legend_contents_bindto:void 0,legend_contents_template:"<span style='color:#fff;padding:5px;background-color:{=COLOR}'>{=TITLE}</span>",legend_equally:!1,legend_hide:!1,legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_interaction:!0,legend_item_dblclick:!1,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_item_tile_width:10,legend_item_tile_height:10,legend_item_tile_r:5,legend_item_tile_type:"rectangle",legend_padding:0,legend_position:"bottom",legend_show:!0,legend_usePoint:!1},Ht={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},qt=void 0,Wt={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){P(this,qt)}.bind(void 0),tooltip_onhide:function(){P(this,qt)}.bind(void 0),tooltip_onshown:function(){P(this,qt)}.bind(void 0),tooltip_onhidden:function(){P(this,qt)}.bind(void 0),tooltip_order:null};function Zt(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function Jt(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?Zt(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var Kt=function(){function t(){return function(){for(var i=this,r=function(t){if(P(this,i),D(t)&&t.constructor){var e,n=new t.constructor;for(e in t)n[e]=r(t[e]);return n}return t}.bind(this),t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.map(function(t){return P(this,i),r(t)}.bind(this)).reduce(function(t,e){return P(this,i),p(p({},t),e)}.bind(this))}(Bt,Xt,Yt,Gt,Vt,Ut,Ht,Wt,t.data)}return t.setOptions=function(t){var n=this;this.data=t.reduce(function(t,e){return P(this,n),Jt(Jt({},t),e)}.bind(this),this.data)},t}();Kt.data={};var Qt="$baseLength",te="__colorPattern__",ee="$dataMinMax",ne="$dataTotalSum",ie="$totalPerIndex",re="legendItemTextBox",ae="$radarPoints",oe="setOverOut",se="callOverOutForTouch",ue="textRect",ce=function(){function t(){this.cache={}}var e=t.prototype;return e.add=function(t,e,n){return this.cache[t]=(n=void 0===n?!1:n)?this.cloneTarget(e):e,this.cache[t]},e.remove=function(t){var e=this;Z(t).forEach(function(t){return P(this,e),delete this.cache[t]}.bind(this))},e.get=function(t,e){if(e=void 0===e?!1:e){for(var n,i=[],r=0;n=t[r];r++)n in this.cache&&i.push(this.cloneTarget(this.cache[n]));return i}e=this.cache[t];return O(e)?e:null},e.reset=function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)},e.cloneTarget=function(t){var e=this;return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return P(this,e),{x:t.x,value:t.value,id:t.id}}.bind(this))}},t}(),le=m.setTimeout,he=m.clearTimeout;function de(){function t(t,e){var n=this;!function t(e,n){var i=this;!1===n()?r(function(){return P(this,i),t(e,n)}.bind(this)):e()}(function(){P(this,n),null==e||e()}.bind(this),function(){for(var t,e=0,n=0;t=i[n];n++)if(!0===t||null!=t.empty&&t.empty())e++;else{if(!1===st()){e=i.length;break}try{t.transition()}catch(t){e++}}return e===i.length})}var i=[];return t.add=function(t){$(t)?i=i.concat(t):i.push(t)},t}var fe={};function ge(t,e,i,n){var r,a,o;return void 0===t&&(t=!0),m.Worker&&t?(o=n,(t=(n=(t=e).toString()).replace(/(function|[\s\W\n])/g,"").substring(0,15))in fe||(fe[t]=new m.Blob([(null!=(o=null==o?void 0:o.map(String).join(";"))?o:"")+"\n\n\t\t\tself.onmessage=function({data}) {\n\t\t\t\tconst result = ("+n+").apply(null, data);\n\t\t\t\tself.postMessage(result);\n\t\t\t};"],{type:"text/javascript"})),r=m.URL.createObjectURL(fe[t]),a=new m.Worker(r),function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];a.postMessage(e),a.onmessage=function(t){return m.URL.revokeObjectURL(r),i(t.data)},a.onerror=function(t){console.error(t)}}):function(){var t=e.apply(void 0,arguments);i(t)}}var pe=qi(5);function ve(t){var r=[];return t.forEach(function(t,n){var i=t[0];t.forEach(function(t,e){if(0<e){if(void 0===r[e-1]&&(r[e-1]={}),void 0===t)throw new Error("Source data is missing a component at ("+n+", "+e+")!");r[e-1][i]=t}})}),r}function be(t){var r=t[0],e=[];return t.forEach(function(t,n){var i;0<n&&(i={},t.forEach(function(t,e){if(void 0===t)throw new Error("Source data is missing a component at ("+n+", "+e+")!");i[r[e]]=t}),e.push(i))}),e}function _e(n,t){var i,r=[],t=Array.isArray(n)?(i=t.x?t.value.concat(t.x):t.value,r.push(i),n.forEach(function(e){var t=i.map(function(t){t=function(t,e){if(void 0!==t[e])return t[e];var e=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),n=t;return e.some(function(t){return!(n=n&&t in n?n[t]:void 0)}),n}(e,t);return t=void 0===t?null:t});r.push(t)}),be(r)):(Object.keys(n).forEach(function(t){var e=n[t].concat();null==e.unshift||e.unshift(t),r.push(e)}),ve(r));return t}function ye(t,e){var n,i=this,r=t.rows(e);return 1===r.length?(n=[{}],r[0].forEach(function(t){P(this,i),n[0][t]=null}.bind(this))):n=t.parse(e),n}function xe(t){return ye({rows:pe.csvParseRows,parse:pe.csvParse},t)}function me(t){return ye({rows:pe.tsvParseRows,parse:pe.tsvParse},t)}function we(t,e){t=t||(null==e?void 0:e.data_keys);return null!=t&&t.x&&(e.data_x=t.x),t}var Te={convertData:function(n,t){var i=this,e=this.config,r=e.boost_useWorker,a=n;if(n.bindto&&(a={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach(function(t){P(this,i);var e="data_"+t;e in n&&(a[t]=n[e])}.bind(this))),a.url&&t)!function(e,n,i,r,a){void 0===n&&(n="csv");var o=new XMLHttpRequest,s={csv:xe,tsv:me,json:_e};o.open("GET",e),i&&Object.keys(i).forEach(function(t){o.setRequestHeader(t,i[t])}),o.onreadystatechange=function(){if(4===o.readyState){if(200!==o.status)throw new Error(e+": Something went wrong loading!");var t=o.responseText;t&&a.call(this,s[n]("json"===n?JSON.parse(t):t,r))}},o.send()}(a.url,a.mimeType,a.headers,we(a.keys,e),t);else if(a.json)ge(r,_e,t,[ve,be])(a.json,we(a.keys,e));else if(a.rows)ge(r,be,t)(a.rows);else if(a.columns)ge(r,ve,t)(a.columns);else if(n.bindto)throw Error("url or json or rows or columns is required.")},convertDataToTargets:function(t,r){var f=this,g=this,e=g.axis,p=g.config,v=g.state,n=p.data_type,i=!1,a=!1,b=!1;e&&(i=e.isCategorized(),a=e.isTimeSeries(),b=e.isCustomX());var o,s=Object.keys(t[0]||{}),e=s.length?s.filter(g.isNotX,g):[],u=s.length?s.filter(g.isX,g):[];e.forEach(function(n){var i=this;P(this,f);var e=this.getXKey(n);b||a?0<=u.indexOf(e)?o=(r&&g.data.xs[n]||[]).concat(t.map(function(t){return P(this,i),t[e]}.bind(this)).filter(O).map(function(t,e){return P(this,i),g.generateTargetX(t,n,e)}.bind(this))):p.data_x?o=this.getOtherTargetXs():R(p.data_xs)&&(o=g.getXValuesOfXKey(e,g.data.targets)):o=t.map(function(t,e){return P(this,i),e}.bind(this)),o&&(this.data.xs[n]=o)}.bind(this)),e.forEach(function(t){if(P(this,f),!this.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}.bind(this));s=e.map(function(r,a){var o=this;P(this,f);var s=p.data_idConverter.bind(g.api)(r),u=g.getXKey(r),c=b&&i,l=c&&t.map(function(t){return P(this,o),t.x}.bind(this)).every(function(t){return P(this,o),-1<p.axis_x_categories.indexOf(t)}.bind(this)),h=t.__append__,d=null===u&&h?g.api.data.values(r).length:0;return{id:s,id_org:r,values:t.map(function(t,e){P(this,o);var n,i=t[u],t=null===(t=t[r])||isNaN(t)||D(t)?$(t)||D(t)?t:null:+t;return!c&&!v.hasRadar||0!==a||z(i)?n=g.generateTargetX(i,r,d+e):(l||0!==a||0!==e||h||(p.axis_x_categories=[]),-1===(n=p.axis_x_categories.indexOf(i))&&(n=p.axis_x_categories.length,p.axis_x_categories.push(i))),{x:n=z(t)||g.data.xs[r].length<=e?void 0:n,value:t,id:s,index:-1}}.bind(this)).filter(function(t){return P(this,o),I(t.x)}.bind(this))}}.bind(this));return s.forEach(function(t){var n=this;P(this,f),p.data_xSort&&(t.values=t.values.sort(function(t,e){return P(this,n),(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}.bind(this))),t.values.forEach(function(t,e){return P(this,n),t.index=e}.bind(this)),null==(t=g.data.xs[t.id])||t.sort(function(t,e){return P(this,n),t-e}.bind(this))}.bind(this)),v.hasNegativeValue=g.hasNegativeValueInTargets(s),v.hasPositiveValue=g.hasPositiveValueInTargets(s),n&&g.isValidChartType(n)&&(e=g.mapToIds(s).filter(function(t){return P(this,f),!(t in p.data_types&&g.isValidChartType(p.data_types[t]))}.bind(this)),g.setTargetType(e,n)),s.forEach(function(t){return P(this,f),g.cache.add(t.id_org,t,!0)}.bind(this)),s}},Ae={isX:function(t){var e=this.config,n=e.data_x&&t===e.data_x,t=R(e.data_xs)&&function(e,n){var i=this,r=!1;return Object.keys(e).forEach(function(t){return P(this,i),e[t]===n&&(r=!0)}.bind(this)),r}(e.data_xs,t);return n||t},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!(!t.data_stack_normalize||!t.data_groups.length)},isGrouped:function(e){var n=this,t=this.config.data_groups;return e?t.some(function(t){return P(this,n),0<=t.indexOf(e)&&1<t.length}.bind(this)):0<t.length},getXKey:function(t){var e=this.config;return e.data_x||(R(e.data_xs)?e.data_xs[t]:null)},getXValuesOfXKey:function(e,t){var n,i=this,r=this;return(t&&R(t)?r.mapToIds(t):[]).forEach(function(t){P(this,i),r.getXKey(t)===e&&(n=r.data.xs[t])}.bind(this)),n},getIndexByX:function(t,e){return e?e.indexOf(b(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){return t in this.data.xs&&this.data.xs[t]&&O(this.data.xs[t][e])?this.data.xs[t][e]:e},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(e){var n=this,i=this.config;Object.keys(e).forEach(function(t){P(this,n),i.data_xs[t]=e[t]}.bind(this))},isMultipleX:function(){return R(this.config.data_xs)||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e=this.config;return t&&(e=e.data_names[t.id],t.name=void 0!==e?e:t.id),t},getAllValuesOnIndex:function(e,t){var n=this;void 0===t&&(t=!1);var i=this,r=i.filterTargetsToShow(i.data.targets).map(function(t){return P(this,n),i.addName(i.getValueOnIndex(t.values,e))}.bind(this));return r=t?r.filter(function(t){return P(this,n),t&&"value"in t&&O(t.value)}.bind(this)):r},getValueOnIndex:function(t,e){var n=this,t=t.filter(function(t){return P(this,n),t.index===e}.bind(this));return t.length?t[0]:null},updateTargetX:function(t,r){var e=this,a=this;t.forEach(function(n){var i=this;P(this,e),n.values.forEach(function(t,e){P(this,i),t.x=a.generateTargetX(r[e],n.id,e)}.bind(this)),a.data.xs[n.id]=r}.bind(this))},updateTargetXs:function(t,e){var n=this,i=this;t.forEach(function(t){P(this,n),e[t.id]&&i.updateTargetX([t],e[t.id])}.bind(this))},generateTargetX:function(t,e,n){var i=this.axis,r=(null==i||!i.isCategorized())&&t||n;return null!=i&&i.isTimeSeries()?r=ot.bind(this)(t||this.getXValue(e,n)):null==i||!i.isCustomX()||null!=i&&i.isCategorized()||(r=O(t)?+t:this.getXValue(e,n)),r},updateXs:function(t){var e=this;t.length&&(this.axis.xs=t.map(function(t){return P(this,e),t.x}.bind(this)))},getPrevX:function(t){t=this.axis.xs[t-1];return I(t)?t:null},getNextX:function(t){t=this.axis.xs[t+1];return I(t)?t:null},getBaseValue:function(t){var e=this.state.hasAxis,n=t.value;return n&&e&&(this.isAreaRangeType(t)?n=this.getRangedData(t,"mid"):this.isBubbleZType(t)&&(n=this.getBubbleZData(n,"y"))),n},getMinMaxValue:function(t){var n,i,r=this,a=this.getBaseValue.bind(this);return(t||this.data.targets.map(function(t){return P(this,r),t.values}.bind(this))).forEach(function(t,e){P(this,r);t=t.map(a).filter(N);n=Math.min.apply(Math,[e?n:1/0].concat(t)),i=Math.max.apply(Math,[e?i:-1/0].concat(t))}.bind(this)),{min:n,max:i}},getMinMaxData:function(){var t,n,i,r,a=this,o=this,e=ee,s=o.cache.get(e);return s||(t=o.data.targets.map(function(t){return P(this,a),t.values}.bind(this)),n=o.getMinMaxValue(t),i=[],r=[],t.forEach(function(t){P(this,a);var e=o.getFilteredDataByValue(t,n.min),t=o.getFilteredDataByValue(t,n.max);e.length&&(i=i.concat(e)),t.length&&(r=r.concat(t))}.bind(this)),o.cache.add(e,s={min:i,max:r})),s},getTotalPerIndex:function(){var e=this,i=this.cache.get(ie);return!this.config.data_groups.length&&!this.isStackNormalized()||i||(i=[],this.data.targets.forEach(function(t){var n=this;P(this,e),t.values.forEach(function(t,e){P(this,n),i[e]||(i[e]=0),i[e]+=N(t.value)?t.value:0}.bind(this))}.bind(this))),i},getTotalDataSum:function(t){var e,n=this,i=ne,r=this.cache.get(i);return N(r)||(r=(e=Q(this.data.targets.map(function(t){return P(this,n),t.values}.bind(this))).map(function(t){return P(this,n),t.value}.bind(this))).length?e.reduce(function(t,e){return P(this,n),t+e}.bind(this)):0,this.cache.add(i,r)),t&&(r-=this.getHiddenTotalDataSum()),r},getHiddenTotalDataSum:function(){var n=this,t=this.api,e=this.state.hiddenTargetIds,i=0;return i=e.length?t.data.values.bind(t)(e).reduce(function(t,e){return P(this,n),t+e}.bind(this)):i},getFilteredDataByValue:function(t,e){var n=this;return t.filter(function(t){return P(this,n),this.getBaseValue(t)===e}.bind(this))},getMaxDataCount:function(){var e=this;return Math.max.apply(Math,this.data.targets.map(function(t){return P(this,e),t.values.length}.bind(this)))},getMaxDataCountTarget:function(){var i=this,t=this.filterTargetsToShow()||[],e=t.length,r=this.config.axis_x_inverted;return 1<e?t=et(K(t=t.map(function(t){return P(this,i),t.values}.bind(this)).reduce(function(t,e){return P(this,i),t.concat(e)}.bind(this)).map(function(t){return P(this,i),t.x}.bind(this)))).map(function(t,e,n){return P(this,i),{x:t,index:r?n.length-e-1:e}}.bind(this)):e&&(t=t[0].values.concat()),t},mapToIds:function(t){var e=this;return t.map(function(t){return P(this,e),t.id}.bind(this))},mapToTargetIds:function(t){return t?$(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var n,i=this.mapToIds(t),r=0;n=i[r];r++)if(n===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this,n=this;return(t||n.data.targets).filter(function(t){return P(this,e),n.isTargetToShow(t.id)}.bind(this))},mapTargetsToUniqueXs:function(t){var n=this,e=this.axis,i=[];return null!=t&&t.length&&(i=K(Q(t.map(function(t){var e=this;return P(this,n),t.values.map(function(t){return P(this,e),+t.x}.bind(this))}.bind(this)))),i=null!=e&&e.isTimeSeries()?i.map(function(t){return P(this,n),new Date(+t)}.bind(this)):i.map(Number)),et(i)},addTargetIds:function(e,t){var n=this,i=this.state;($(t)?t:[t]).forEach(function(t){P(this,n),i[e].indexOf(t)<0&&i[e].push(t)}.bind(this))},removeTargetIds:function(e,t){var n=this,i=this.state;($(t)?t:[t]).forEach(function(t){P(this,n);t=i[e].indexOf(t);0<=t&&i[e].splice(t,1)}.bind(this))},addHiddenTargetIds:function(t){this.addTargetIds("hiddenTargetIds",t)},removeHiddenTargetIds:function(t){this.removeTargetIds("hiddenTargetIds",t)},addHiddenLegendIds:function(t){this.addTargetIds("hiddenLegendIds",t)},removeHiddenLegendIds:function(t){this.removeTargetIds("hiddenLegendIds",t)},getValuesAsIdKeyed:function(t){var e=this,r=this,a=r.state.hasAxis,o={},s=r.isMultipleX(),u=s?r.mapTargetsToUniqueXs(t).map(function(t){return P(this,e),b(t)?t:+t}.bind(this)):null;return t.forEach(function(t){var n=this;P(this,e);var i=[];t.values.filter(function(t){t=t.value;return P(this,n),O(t)||null===t}.bind(this)).forEach(function(t){P(this,n);var e=t.value;null!==e&&r.isCandlestickType(t)&&(e=$(e)?e.slice(0,4):[e.open,e.high,e.low,e.close]),$(e)?i.push.apply(i,e):D(e)&&"high"in e?i.push.apply(i,Object.values(e)):r.isBubbleZType(t)?i.push(a&&r.getBubbleZData(e,"y")):s?i[r.getIndexByX(t.x,u)]=e:i.push(e)}.bind(this)),o[t.id]=i}.bind(this)),o},checkValueInTargets:function(t,e){for(var n=Object.keys(t),i=0;i<n.length;i++)for(var r=t[n[i]].values,a=0;a<r.length;a++)if(e(r[a].value))return!0;return!1},hasMultiTargets:function(){return 1<this.filterTargetsToShow().length},hasNegativeValueInTargets:function(t){var e=this;return this.checkValueInTargets(t,function(t){return P(this,e),t<0}.bind(this))},hasPositiveValueInTargets:function(t){var e=this;return this.checkValueInTargets(t,function(t){return P(this,e),0<t}.bind(this))},orderTargets:function(t){var e=[].concat(t),t=this.getSortCompareFn();return t&&e.sort(t),e},getSortCompareFn:function(n){var i=this;void 0===n&&(n=!1);var r,t,e=this.config.data_order,a=/asc/i.test(e),o=/desc/i.test(e);return a||o?(r=function(t,e){return P(this,i),t+Math.abs(e.value)}.bind(this),t=function(t,e){P(this,i);t="values"in t?t.values.reduce(r,0):t.value,e="values"in e?e.values.reduce(r,0):e.value;return n?a?t-e:e-t:a?e-t:t-e}.bind(this)):E(e)&&(t=e.bind(this.api)),t||null},filterByX:function(t,e){var n=this;return Q(t.map(function(t){return P(this,n),t.values}.bind(this))).filter(function(t){return P(this,n),t.x-e==0}.bind(this))},filterRemoveNull:function(t){var e=this;return t.filter(function(t){return P(this,e),O(this.getBaseValue(t))}.bind(this))},filterByXDomain:function(t,n){var i=this;return t.map(function(t){var e=this;return P(this,i),{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return P(this,e),n[0]<=t.x&&t.x<=n[1]}.bind(this))}}.bind(this))},hasDataLabel:function(){var t=this.config.data_labels;return _(t)&&t||w(t)&&R(t)},getDataIndexFromEvent:function(t){var e=this.config,n=this.state,i=n.hasRadar,r=n.inputType,a=n.eventReceiver,n=a.coords,a=a.rect;return i?(i=t.target,/tspan/i.test(i.tagName)&&(i=i.parentNode),(i=(0,L.select)(i).datum())&&1===Object.keys(i).length?i.index:void 0):(e=e.axis_rotated,t="touch"===r&&t.changedTouches?t.changedTouches[0]:t,function t(e,n,i,r,a){if(r<i)return-1;var o=Math.floor((i+r)/2),s=e[o],u=s.x,s=s.w,s=void 0===s?0:s;return a&&(u=e[o].y,s=e[o].h),u<=n&&n<=u+s?o:n<u?t(e,n,i,o-1,a):t(e,n,o+1,r,a)}(n,e?t.clientY-a.top:t.clientX-a.left,0,n.length-1,e))},getDataLabelLength:function(t,e,n){var i=this,r=this,a=[0,0];return r.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return P(this,i),r.dataLabelFormat(t.id)(t)}.bind(this)).each(function(t,e){a[e]=1.3*this.getBoundingClientRect()[n]}).remove(),a},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){for(var n=t[e].x,i=[],r=e-1;0<=r&&n===t[r].x;r--)i.push(t[r]);for(r=e;r<t.length&&n===t[r].x;r++)i.push(t[r]);return i},findClosestFromTargets:function(t,e){var n=this,i=this,t=t.map(function(t){return P(this,n),i.findClosest(t.values,e)}.bind(this));return i.findClosest(t,e)},findClosest:function(t,n){var i,r=this,a=this,o=a.$el.main,t=t.filter(function(t){return P(this,r),t&&O(t.value)}.bind(this));return t.filter(function(t){return P(this,r),a.isBarType(t.id)||a.isCandlestickType(t.id)}.bind(this)).forEach(function(t){P(this,r);var e=a.isBarType(t.id)?"."+pt.chartBar+"."+ht.target+a.getTargetSelectorSuffix(t.id)+" ."+pt.bar+"-"+t.index:"."+vt.chartCandlestick+"."+ht.target+a.getTargetSelectorSuffix(t.id)+" ."+vt.candlestick+"-"+t.index+" path";!i&&a.isWithinBar(o.select(e).node())&&(i=t)}.bind(this)),t.filter(function(t){return P(this,r),!a.isBarType(t.id)&&!a.isCandlestickType(t.id)}.bind(this)).forEach(function(t){P(this,r);var e=a.dist(t,n);e<a.getPointSensitivity(t)&&(i=t)}.bind(this)),i},dist:function(t,e){var n=this.config.axis_rotated,i=this.scale,r=this.circleY(t,t.index),t=(i.zoom||i.x)(t.x);return Math.sqrt(Math.pow(t-e[+n],2)+Math.pow(r-e[+!n],2))},convertValuesToStep:function(t){var e,n,i,r=this.axis,a=this.config.line_step_type,o=!!r&&r.isCategorized(),s=$(t)?t.concat():[t];return o||/step\-(after|before)/.test(a)?(s.length&&(e=s[0],n=s[s.length-1],i=e.id,r=e.x,s.unshift({x:--r,value:e.value,id:i}),o&&"step-after"===a&&s.unshift({x:--r,value:e.value,id:i}),r=n.x,s.push({x:++r,value:n.value,id:i}),o&&"step-before"===a&&s.push({x:++r,value:n.value,id:i})),s):t},convertValuesToRange:function(t){var i=this,t=$(t)?t.concat():[t],r=[];return t.forEach(function(t){P(this,i);var e=t.x,n=t.id;r.push({x:e,id:n,value:t.value[0]}),r.push({x:e,id:n,value:t.value[2]})}.bind(this)),r},updateDataAttributes:function(t,e){var n=this,i=this.config["data_"+t];return z(e)||(Object.keys(e).forEach(function(t){P(this,n),i[t]=e[t]}.bind(this)),this.redraw({withLegend:!0})),i},getRangedData:function(t,e,n){void 0===e&&(e=""),void 0===n&&(n="areaRange");t=null==t?void 0:t.value;if($(t)){n={areaRange:["high","mid","low"],candlestick:["open","high","low","close","volume"]}[n].indexOf(e);return 0<=n&&t?t[n]:void 0}return t&&t[e]},setRatioForGroupedData:function(t){var e,n=this,i=this;i.config.data_groups.length&&t.some(function(t){return P(this,n),i.isGrouped(t.id)}.bind(this))&&(e=function(t){return P(this,n),i.getRatio("index",t,!0)}.bind(this),t.forEach(function(t){P(this,n),"values"in t?t.values.forEach(e):e(t)}.bind(this)))},getRatio:function(t,e,n){var r=this;void 0===n&&(n=!1);var i,a,o=this,s=o.config,u=o.state,c=o.api,l=0;return e&&c.data.shown().length&&(l=e.ratio||e.value,"arc"===t?l=o.pie.padAngle()()?e.value/o.getTotalDataSum(!0):(a=s.gauge_fullCircle?o.getArcLength():-2*o.getGaugeStartAngle(),a=o.hasType("gauge")?a:2*Math.PI,(e.endAngle-e.startAngle)/a):"index"===t?(a=c.data.values.bind(c),c=this.getTotalPerIndex(),!u.hiddenTargetIds.length||(i=a(u.hiddenTargetIds,!1)).length&&(i=i.reduce(function(t,n){var i=this;return P(this,r),t.map(function(t,e){return P(this,i),(N(t)?t:0)+n[e]}.bind(this))}.bind(this)),c=c.map(function(t,e){return P(this,r),t-i[e]}.bind(this))),a=c[e.index],e.ratio=N(e.value)&&c&&a?e.value/a:0,l=e.ratio):"radar"===t?l=parseFloat(Math.max(e.value,0)+"")/u.current.dataMax*s.radar_size_ratio:"bar"===t?l=0===(s=o.getYScaleById.bind(o)(e.id).domain().reduce(function(t,e){return P(this,r),e-t}.bind(this)))?0:Math.abs(e.value)/s:"treemap"===t&&(l/=o.getTotalDataSum(!0))),n&&l?100*l:l},updateDataIndexByX:function(t){var r=this,a=t.reduce(function(t,e,n){return P(this,r),t[+e.x]=n,t}.bind(this),{});this.data.targets.forEach(function(t){var i=this;P(this,r),t.values.forEach(function(t,e){P(this,i);var n=a[+t.x];t.index=n=void 0===n?e:n}.bind(this))}.bind(this))},isBubbleZType:function(t){return this.isBubbleType(t)&&(D(t.value)&&("z"in t.value||"y"in t.value)||$(t.value)&&2<=t.value.length)},isBarRangeType:function(t){var e=this,n=t.value;return this.isBarType(t)&&$(n)&&2<=n.length&&n.every(function(t){return P(this,e),N(t)}.bind(this))},getDataById:function(t){var e=this.cache.get(t)||this.api.data(t);return null!=(t=null==e?void 0:e[0])?t:e}};function Me(t,e){var n=this.api;(e=void 0===e?!1:e)&&this.api.flush(!0),null==t||t.call(n)}var Se={load:function(t,n){var i=this,r=this,e=r.data,a=n.append,o=t;o&&(n.filter&&(o=o.filter(n.filter)),(n.type||n.types)&&o.forEach(function(t){P(this,i);var e=(null==(e=n.types)?void 0:e[t.id])||n.type;r.setTargetType(t.id,e)}.bind(this)),e.targets.forEach(function(t){P(this,i);for(var e=0;e<o.length;e++)if(t.id===o[e].id){t.values=a?t.values.concat(o[e].values):o[e].values,o.splice(e,1);break}}.bind(this)),e.targets=e.targets.concat(o)),r.updateTargets(e.targets),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.updateTypesElements(),Me.call(r,n.done,n.resizeAfter)},loadFromArgs:function(e){var n=this,i=this;i.config&&(i.cache.reset(),i.convertData(e,function(t){P(this,n);t=e.data||t;e.append&&(t.__append__=!0),t&&i.load(i.convertDataToTargets(t),e)}.bind(this)))},unload:function(t,e){var i=this,r=this,a=r.state,o=r.$el,n=r.$T,e=e,t=t;r.cache.reset(),e=e||function(){P(this,i)}.bind(this),(t=t.filter(function(t){return P(this,i),r.hasTarget(r.data.targets,t)}.bind(this)))&&0!==t.length?(n(o.svg.selectAll(t.map(function(t){return P(this,i),r.selectorTarget(t)}.bind(this)))).style("opacity","0").remove().call(F,e),t.forEach(function(e){var n=this;P(this,i),a.withoutFadeIn[e]=!1,o.legend&&o.legend.selectAll("."+mt.legendItem+r.getTargetSelectorSuffix(e)).remove(),r.data.targets=r.data.targets.filter(function(t){return P(this,n),t.id!==e}.bind(this))}.bind(this)),a.hasTreemap&&r.updateTargetsForTreemap(r.data.targets),r.updateTypesElements()):e()}},ke=qi(7),Ee={setExpand:function(t,e,n){var i=this.config;this.$el.circle&&i.point_focus_expand_enabled&&this.expandCircles(t,e,n),this.expandBarTypeShapes(!0,t,e,n)},expandBarTypeShapes:function(e,n,i,r){var a=this;void 0===e&&(e=!0);var o=this;["bar","candlestick"].filter(function(t){return P(this,a),o.$el[t]}.bind(this)).forEach(function(t){P(this,a),r&&o.$el[t].classed(ht.EXPANDED,!1),o.getShapeByIndex(t,n,i).classed(ht.EXPANDED,e)}.bind(this))},setOverOut:function(t,e){var n=this,i=this,r=i.config,a=i.state,o=a.hasRadar,s=a.hasTreemap,u=i.$el.main,a=D(e);if(a||-1!==e){var c=r[t?"data_onover":"data_onout"].bind(i.api);if(r.color_onover&&i.setOverColor(t,e,a),a)c(e,u.select("."+(s?Nt.treemap:dt.arc)+i.getTargetSelectorSuffix(e.id)).node());else if(r.tooltip_grouped)t&&(r.point_focus_only&&o?i.showCircleFocus(i.getAllValuesOnIndex(e,!0)):i.setExpand(e,null,!0)),i.isMultipleX()||u.selectAll("."+Dt.shape+"-"+e).each(function(t){c(t,this)});else{var l=i.cache.get(oe)||[],u=u.selectAll("."+Dt.shape+"-"+e).filter(function(t){return i.isWithinShape(this,t)}),e=u.filter(function(){var e=this;return l.every(function(t){return P(this,e),t!==this}.bind(this))});if(!t||u.empty()||l.length===e.size()&&e.nodes().every(function(t,e){return P(this,n),t!==l[e]}.bind(this)))for(;l.length;){var h=l.pop();r.data_onout.bind(i.api)((0,L.select)(h).datum(),h)}e.each(function(){t&&(c((0,L.select)(this).datum(),this),l.push(this))}),i.cache.add(oe,l)}}},callOverOutForTouch:function(t){var e=this.cache.get(se);(D(t)&&e?t.id!==e.id:t!==e)&&((e||N(e))&&this.setOverOut(!1,e),(t||N(t))&&this.setOverOut(!0,t),this.cache.add(se,t))},getDraggableSelection:function(){var e=this,n=this,t=n.config,i=n.state;return t.interaction_enabled&&t.data_selection_draggable&&n.drag?(0,ke.drag)().on("drag",function(t){i.event=t,n.drag(Y(t,this))}).on("start",function(t){i.event=t,n.dragstart(Y(t,this))}).on("end",function(t){P(this,e),i.event=t,n.dragend()}.bind(this)):function(){P(this,e)}.bind(this)},dispatchEvent:function(t,e,n){var i,r=this.config,a=this.state,o=a.eventReceiver,s=a.hasAxis,u=a.hasRadar,c=a.hasTreemap,l=this.$el,h=l.eventRect,d=l.radar,f=l.treemap,a=null==(i=c&&o.rect||u&&d.axes.select("."+gt.axis+"-"+e+" text")||h||(null==this.getArcElementByIdOrIndex?void 0:this.getArcElementByIdOrIndex(e)))?void 0:i.node();a&&(l=this.isMultipleX(),h=(d=a.getBoundingClientRect()).width,i=d.left,d=d.top,!s||u||l||(h=(e=o.coords[e]).w,i+=e.x,d+=e.y),h=i+(n?n[0]:0)+(l||r.axis_rotated?0:h/2),n=d+(n?n[1]:0),rt[/^(mouse|click)/.test(t)?"mouse":"touch"](c?f.node():a,t,{screenX:h,screenY:n,clientX:h,clientY:n}))},setDragStatus:function(t){this.state.dragging=t},unbindZoomEvent:function(){var t=this.$el,e=t.eventRect,t=t.zoomResetBtn;null==e||e.on(".zoom wheel.zoom .drag",null),null==t||t.on("click",null).style("display","none")},unbindAllEvents:function(){var e=this,t=this.$el,n=t.arcs,i=t.eventRect,r=t.legend,a=t.region,o=t.svg,s=t.treemap,t=this.brush;[o,i,null==a?void 0:a.list,null==t?void 0:t.getSelection(),null==n?void 0:n.selectAll("path"),null==r?void 0:r.selectAll("g"),s].forEach(function(t){return P(this,e),null==t?void 0:t.on("wheel click mouseover mousemove mouseout touchstart touchmove touchend touchstart.eventRect touchmove.eventRect touchend.eventRect .brush .drag .zoom wheel.zoom dblclick.zoom",null)}.bind(this)),null==this.unbindZoomEvent||this.unbindZoomEvent()}},Ce={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},getClass:function(e,n){var i=this,r=/s$/.test(e),a=/^(area|arc|line|treemap)s?$/.test(e),o=r?"id":"index";return function(t){P(this,i);t=t.data||t;return((n?this.generateClass(It[r?"shapes":"shape"],t[o]):"")+this.generateClass(It[e],t[a?"id":o])).trim()}.bind(this)},getChartClass:function(e){var n=this;return function(t){return P(this,n),It["chart"+e]+this.classTarget((t.data||t).id)}.bind(this)},generateExtraLineClass:function(){var n=this.config.line_classes||[],i=[];return function(t){var e,t=t.id||(null==(e=t.data)?void 0:e.id)||t;return i.indexOf(t)<0&&i.push(t),n[i.indexOf(t)%n.length]}},classRegion:function(t,e){return this.generateClass(It.region,e)+" "+("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],n="";return e&&(n=" "+It.target+"-"+e),this.generateClass(It.target,t)+n},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(0<=this.state.focusedTargetIds.indexOf(t.id)?It.focused:"")},classDefocused:function(t){return" "+(0<=this.state.defocusedTargetIds.indexOf(t.id)?It.defocused:"")},getTargetSelectorSuffix:function(t){return(t||0===t?"-"+t:"").replace(/([\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\])/g,"-")},selectorTarget:function(t,e,n){void 0===e&&(e=""),void 0===n&&(n="");t=this.getTargetSelectorSuffix(t);return e+"."+(It.target+t)+" "+n+", "+e+"."+(It.circles+t)+" "+n},selectorTargets:function(t,e){var n=this,t=t||[];return t.length?t.map(function(t){return P(this,n),this.selectorTarget(t,e)}.bind(this)):null},selectorLegend:function(t){return"."+(It.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return null!=t&&t.length?t.map(function(t){return P(this,e),this.selectorLegend(t)}.bind(this)):null}},Re=qi(6),De=function(t,e,n){P(this,void 0);t=(0,L.select)(t.cloneNode(!0));return t.attr("id",n).insert("rect",":first-child").attr("width",t.attr("width")).attr("height",t.attr("height")).style("fill",e),{id:n,node:t.node()}}.bind(void 0);var Oe=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Pe={generateColor:function(){var i,r=this,a=this,t=a.$el,o=a.config,s=o.data_colors,u=o.data_color,c=[],l=R(o.color_pattern)?o.color_pattern:(0,Re.scaleOrdinal)(function(t){var e,n=this,i=te,r=v.body,a=r[i];return a||(e=t.classed(_t.colorPattern,!0).style("background-image"),t.classed(_t.colorPattern,!1),-1<e.indexOf(";")&&(a=e.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map(function(t){return P(this,n),t.trim().replace(/[\"'\s]/g,"")}.bind(this)).filter(Boolean),r[i]=a)),a}(t.chart)||Oe).range(),h=l;return E(o.color_tiles)&&(i=o.color_tiles.bind(a.api)(),l=(t=l.map(function(t,e){P(this,r);var n=t.replace(/[#\(\)\s,]/g,""),n=a.state.datetimeId+"-pattern-"+n+"-"+e;return De(i[e%i.length],t,n)}.bind(this))).map(function(t){return P(this,r),"url(#"+t.id+")"}.bind(this)),a.patterns=t),function(t){var e,n=t.id||(null==(i=t.data)?void 0:i.id)||t,i=a.isTypeOf(n,["line","spline","step"])||!o.data_types[n];return E(s[n])?e=s[n].bind(a.api)(t):s[n]?e=s[n]:(c.indexOf(n)<0&&c.push(n),e=i?h[c.indexOf(n)%h.length]:l[c.indexOf(n)%l.length],s[n]=e),E(u)?u.bind(a.api)(e,t):e}},generateLevelColor:function(){var t=this.config,a=t.color_pattern,t=t.color_threshold,o="value"===t.unit,s=t.max||100,u=t.values&&t.values.length?t.values:[];return R(t)?function(t){for(var e=o?t:100*t/s,n=a[a.length-1],i=0,r=u.length;i<r;i++)if(e<=u[i]){n=a[i];break}return n}:null},generateDataLabelBackgroundColorFilter:function(n){var i=this,r=this,a=r.$el,t=r.config,o=r.state,s=n||t.data_labels_backgroundColors;s&&(t=[],b(s)?t.push(""):D(s)&&(t=Object.keys(s)),t.forEach(function(t){P(this,i);var e=o.datetimeId+"-labels-bg"+r.getTargetSelectorSuffix(t)+(n?r.getTargetSelectorSuffix(n):"");a.defs.append("filter").attr("x","0").attr("y","0").attr("width","1").attr("height","1").attr("id",e).html('<feFlood flood-color="'+(""===t?s:s[t])+'" /><feComposite in="SourceGraphic"/>')}.bind(this)))},getGradienColortUrl:function(t){return"url(#"+this.state.datetimeId+"-gradient"+this.getTargetSelectorSuffix(t)+")"},updateLinearGradient:function(){var c=this,l=this,h=l.config,t=l.data.targets,d=l.state.datetimeId,f=l.$el.defs;t.forEach(function(n){var i=this;P(this,c);var r,t,e,a,o=d+"-gradient"+l.getTargetSelectorSuffix(n.id),s=l.isAreaType(n)?"area":l.isBarType(n)&&"bar",u=h.axis_rotated;s&&f.select("#"+o).empty()&&(r=l.color(n),s=void 0===(t=(e=h[s+"_linearGradient"]).x)?u?[1,0]:[0,0]:t,t=void 0===(t=e.y)?u?[0,0]:[0,1]:t,e=void 0===(e=e.stops)?[[0,r,1],[1,r,0]]:e,a=f.append("linearGradient").attr("id",o).attr("x1",s[0]).attr("x2",s[1]).attr("y1",t[0]).attr("y2",t[1]),e.forEach(function(t){P(this,i);var e=E(t[1])?t[1].bind(l.api)(n.id):t[1];a.append("stop").attr("offset",t[0]).attr("stop-color",e||r).attr("stop-opacity",t[2])}.bind(this)))}.bind(this))},setOverColor:function(t,e){var n=this,i=this,r=i.config,a=i.$el.main,o=r.color_onover,t=t?o:i.color;D(t)?t=function(t){t=t.id;return P(this,n),t in o?o[t]:i.color(t)}.bind(this):b(t)?t=function(){return P(this,n),o}.bind(this):E(o)&&(t=t.bind(i.api)),a.selectAll(D(e)?"."+dt.arc+i.getTargetSelectorSuffix(e.id):"."+Dt.shape+"-"+e).style("fill",t)}},Le={getYDomainMinMax:function(t,e){var s,n=this,u=this.axis,i=this.config,c="min"===e,i=i.data_groups,l=this.mapToIds(t),h=this.getValuesAsIdKeyed(t);return 0<i.length&&(s=this["has"+(c?"Negative":"Positive")+"ValueInTargets"](t),i.forEach(function(t){var r=this;P(this,n);var a,o,t=t.filter(function(t){return P(this,r),0<=l.indexOf(t)}.bind(this));t.length&&(a=t[0],o=u.getId(a),s&&h[a]&&(h[a]=h[a].map(function(t){return P(this,r),(c?t<0:0<t)?t:0}.bind(this))),t.filter(function(t,e){return P(this,r),0<e}.bind(this)).forEach(function(t){var n,i=this;P(this,r),h[t]&&(n=u.getId(t),h[t].forEach(function(t,e){P(this,i);t=+t;n!==o||s&&(c?0<t:t<0)||(h[a][e]+=t)}.bind(this)))}.bind(this)))}.bind(this))),nt(e,Object.keys(h).map(function(t){return P(this,n),nt(e,h[t])}.bind(this)))},isHiddenTargetWithYDomain:function(e){var n=this,i=this;return i.state.hiddenTargetIds.some(function(t){return P(this,n),i.axis.getId(t)===e}.bind(this))},getYDomain:function(t,e,n){var i=this,r=this,a=r.axis,o=r.config,s=r.scale,u="axis_"+e;if(r.isStackNormalized())return[0,100];var c=(null==s?void 0:s[e])&&"log"===s[e].type,l=t.filter(function(t){return P(this,i),a.getId(t.id)===e}.bind(this)),h=n?r.filterByXDomain(l,n):l;if(0===h.length)return r.isHiddenTargetWithYDomain(e)?s[e].domain():"y2"===e?s.y.domain():r.getYDomain(t,"y2",n);var d=o[u+"_min"],f=o[u+"_max"],g=o[u+"_center"],p=o[u+"_inverted"],v=r.hasDataLabel()&&o.axis_rotated,b=r.hasDataLabel()&&!o.axis_rotated,_=r.getYDomainMinMax(h,"min"),y=r.getYDomainMinMax(h,"max"),l=[S.BAR,S.BUBBLE,S.SCATTER].concat(k.Line).some(function(t){P(this,i);var e=-1<t.indexOf("area")?"area":t;return r.hasType(t,h,!0)&&o[e+"_zerobased"]}.bind(this));_=O(d)?d:!O(f)||_<=f?_:f-10,y=O(f)?f:!O(d)||d<=y?y:d+10,(_=isNaN(_)?0:_)===(y=isNaN(y)?_:y)&&(_<0?y=0:_=0);t=0<=_&&0<=y,n=_<=0&&y<=0;(l=O(d)&&t||O(f)&&n?!1:l)&&(t&&(_=0),n&&(y=0));var x,m,w,T=Math.abs(y-_),A={top:.1*T,bottom:.1*T};I(g)&&(y=g+(f=Math.max(Math.abs(_),Math.abs(y))),_=g-f),v?(x=C(s.y.range()),m=r.getDataLabelLength(_,y,"width").map(function(t){return P(this,i),t/x}.bind(this)),["bottom","top"].forEach(function(t,e){P(this,i),A[t]+=T*(m[e]/(1-m[0]-m[1]))}.bind(this))):b&&(w=r.getDataLabelLength(_,y,"height"),["bottom","top"].forEach(function(t,e){P(this,i),A[t]+=r.convertPixelToScale("y",w[e],T)}.bind(this)));var A=r.getResettedPadding(A),M=o[u+"_padding"];R(M)&&["bottom","top"].forEach(function(t){P(this,i),A[t]=a.getPadding(M,t,A[t],T)}.bind(this)),l&&(t&&(A.bottom=_),n&&(A.top=-y));y=c?[_,y].map(function(t){return P(this,i),t<0?0:t}.bind(this)):[_-A.bottom,y+A.top];return p?y.reverse():y},getXDomainMinMax:function(t,n){var e,i=this,r=this.config["axis_x_"+n],a=nt(n,t.map(function(t){var e=this;return P(this,i),nt(n,t.values.map(function(t){return P(this,e),t.x}.bind(this)))}.bind(this))),t=D(r)?r.value:r,t=I(t)&&null!=(e=this.axis)&&e.isTimeSeries()?ot.bind(this)(t):t;return D(r)&&r.fit&&("min"===n&&t<a||"max"===n&&a<t)&&(t=void 0),I(t)?t:a},getXDomainPadding:function(t,e){var n,i=this.axis,r=this.config.axis_x_padding,a=i.isTimeSeries()&&e,o=C(t);n=i.isCategorized()||a?0:this.hasType("bar")?1<(u=this.getMaxDataCount())?o/(u-1)/2:.5:this.getResettedPadding(.01*o);var s,t=N(r)?{left:r,right:r}:r,u=t.left,u=void 0===u?n:u,t=t.right,t=void 0===t?n:t;return"px"===r.unit?(s=Math.abs(o+.2*o),u=i.getPadding(r,"left",n,s),t=i.getPadding(r,"right",n,s)):(s=o+u+t,a&&s&&(u=u/s/(e=o/e/s),t=t/s/e)),{left:u,right:t}},getXDomain:function(t){var e=this.axis,n=this.config,i=this.scale.x,r=n.axis_x_inverted,a=[this.getXDomainMinMax(t,"min"),this.getXDomainMinMax(t,"max")],o=a[0],s=void 0===o?0:o,n=a[1],t=void 0===n?0:n;return"log"!==i.type&&(o=e.isCategorized(),n=e.isTimeSeries(),i=this.getXDomainPadding(a),(e=a[0])-(a=a[1])!=0||o||(a=n?(e=new Date(.5*e.getTime()),new Date(1.5*a.getTime())):(e=0===e?1:.5*e,0===a?-1:1.5*a)),!e&&0!==e||(s=n?new Date(e.getTime()-i.left):e-i.left),!a&&0!==a||(t=n?new Date(a.getTime()+i.right):a+i.right)),r?[t,s]:[s,t]},updateXDomain:function(t,e,n,i,r){var a=this,o=a.config,s=a.org,u=a.scale,c=u.x,l=u.subX,u=o.zoom_enabled;return n&&(c.domain(r||et(a.getXDomain(t),!o.axis_x_inverted)),s.xDomain=c.domain(),u&&a.zoom.updateScaleExtent(),l.domain(c.domain()),null==(o=a.brush)||o.scale(l)),e&&(l=r||!a.brush||H(a)?s.xDomain:G(a).map(l.invert),c.domain(l),u&&a.zoom.updateScaleExtent()),i&&c.domain(a.trimXDomain(c.orgDomain())),c.domain()},trimXDomain:function(t){var e=this.config.axis_x_inverted,n=this.getZoomDomain(),i=n[0],n=n[1];return(e?t[0]>=i:t[0]<=i)&&(t[0]=i,t[1]=+t[1]+(i-t[0])),(e?t[1]<=n:t[1]>=n)&&(t[0]=+t[0]-(t[1]-n),t[1]=n),t},getZoomDomain:function(){var t=this.config,e=this.org.xDomain,n=e[0],e=e[1];return[n=I(t.zoom_x_min)?nt("min",[n,t.zoom_x_min]):n,e=I(t.zoom_x_max)?nt("max",[e,t.zoom_x_max]):e]},convertPixelToScale:function(t,e,n){var i=this.config,r=this.state,i=i.axis_rotated,i="x"===t?i?"height":"width":i?"width":"height";return n*(e/r[i])}};function Ne(t,e,n){var i=t.config,e="axis_"+e+"_tick_format";return(i[e]||t.defaultValueFormat).call(t.api,n)}var ze={yFormat:function(t){return Ne(this,"y",t)},y2Format:function(t){return Ne(this,"y2",t)},getDefaultValueFormat:function(){var i=this,r=i.defaultArcValueFormat,a=i.yFormat,o=i.y2Format,s=i.hasArcType(null,["gauge","polar","radar"]);return function(t,e,n){return(s?r:i.axis&&"y2"===i.axis.getId(n)?o:a).call(i,t,e)}},defaultValueFormat:function(t){return O(t)?+t:""},defaultArcValueFormat:function(t,e){return(100*e).toFixed(1)+"%"},defaultPolarValueFormat:function(t){return""+t},dataLabelFormat:function(t){var e=this,n=this.config.data_labels,i=function(t){return P(this,e),O(t)?+t:""}.bind(this),r=i;return E(n.format)?r=n.format:w(n.format)&&(r=n.format[t]?!0===n.format[t]?i:n.format[t]:function(){return P(this,e),""}.bind(this)),r.bind(this.api)}};function Ie(t){t=this.getDataById(t);return this.levelColor?this.levelColor(t.values[0].value):this.color(t)}var $e={initLegend:function(){var t=this,e=t.config,n=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(n.legend=t.$el.svg.append("g").classed(mt.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,n){var i=this,r=i.config,a=i.state,o=i.scale,s=i.$el,e=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};e.withTransition=A(e,"withTransition",!0),e.withTransitionForTransform=A(e,"withTransitionForTransform",!0),r.legend_contents_bindto&&r.legend_contents_template?i.updateLegendTemplate():a.hasTreemap||i.updateLegendElement(t||i.mapToIds(i.data.targets),e,n),null==(s=s.legend)||s.selectAll("."+mt.legendItem).classed(mt.legendItemHidden,function(t){t=!i.isTargetToShow(t);return t&&(this.style.opacity=null),t}),i.updateScales(!1,!o.zoom),i.updateSvgSize(),i.transformAll(e.withTransitionForTransform,n),a.legendHasRendered=!0},updateLegendTemplate:function(){var n,i,r=this,a=this,t=a.config,e=a.$el,o=(0,L.select)(t.legend_contents_bindto),s=t.legend_contents_template;o.empty()||(t=a.mapToIds(a.data.targets),n=[],i="",t.forEach(function(t){P(this,r);var e=E(s)?s.bind(a.api)(t,a.color(t),a.api.data(t)[0].values):at(s,{COLOR:a.color(t),TITLE:t});e&&(n.push(t),i+=e)}.bind(this)),t=o.html(i).selectAll(function(){return this.childNodes}).data(n),a.setLegendItem(t),e.legend=o)},updateSizeForLegend:function(t){var e=this.config,n=this.state,i=n.isLegendTop,r=n.isLegendLeft,a=n.isLegendRight,o=n.isLegendInset,s=n.current,n=t.width,t=t.height,e={top:i?this.getCurrentPaddingTop()+e.legend_inset_y+5.5:s.height-t-this.getCurrentPaddingBottom()-e.legend_inset_y,left:r?this.getCurrentPaddingLeft()+e.legend_inset_x+.5:s.width-n-this.getCurrentPaddingRight()-e.legend_inset_x+.5};this.state.margin3={top:a?0:o?e.top:s.height-t,right:NaN,bottom:0,left:a?s.width-n:o?e.left:0}},transformLegend:function(t){var e=this.$el.legend;(0,this.$T)(e,t).attr("transform",this.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var n=this.$el.legend;n&&n.select("."+mt.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){var t=this.state,e=t.current.width,n=t.isLegendRight,i=t.isLegendInset,r=t.legendItemWidth,t=t.legendStep;return this.config.legend_show?n||i?r*(t+1):e:0},getLegendHeight:function(){var t=this.state,e=t.current,n=t.isLegendRight,i=t.legendItemHeight,r=t.legendStep,t="fit"===(null==(t=this.config.padding)?void 0:t.mode);return this.config.legend_show?n?e.height:(t?10:Math.max(20,i))*(r+1):0},opacityForUnfocusedLegend:function(t){return t.classed(mt.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var n=this,i=this,r=i.$el.legend,a=i.$T,o=i.mapToTargetIds(t);r&&a(r.selectAll("."+mt.legendItem).filter(function(t){return P(this,n),0<=o.indexOf(t)}.bind(this)).classed(At.legendItemFocused,e)).style("opacity",function(){return e?null:i.opacityForUnfocusedLegend.call(i,(0,L.select)(this))})},revertLegend:function(){var t=this.$el.legend,e=this.$T;t&&e(t.selectAll("."+mt.legendItem).classed(At.legendItemFocused,!1)).style("opacity",null)},showLegend:function(t){var e=this.config,n=this.$el,i=this.$T;e.legend_show||(e.legend_show=!0,n.legend?n.legend.style("visibility",null):this.initLegend(),this.state.legendHasRendered||this.updateLegend()),this.removeHiddenLegendIds(t),i(n.legend.selectAll(this.selectorLegends(t)).style("visibility",null)).style("opacity",null)},hideLegend:function(t){var e=this.config,n=this.$el.legend;e.legend_show&&T(t)&&(e.legend_show=!1,n.style("visibility","hidden")),this.addHiddenLegendIds(t),n.selectAll(this.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var n,i=this.cache,r=this.state,a=re;return t&&((n=!r.redrawing&&i.get(a)||{})[t]||(n[t]=this.getTextRect(e,mt.legendItem),i.add(a,n)),n=n[t]),n},setLegendItem:function(t){var n=this,r=this,i=r.$el,a=r.api,o=r.config,s=r.state,u="touch"===s.inputType,c=r.hasType("gauge"),e=o.boost_useCssRule,l=o.legend_item_interaction;t.attr("class",function(t){var e=(0,L.select)(this);return(!e.empty()&&e.attr("class")||"")+r.generateClass(mt.legendItem,t)}).style("visibility",function(t){return P(this,n),r.isLegendToShow(t)?null:"hidden"}.bind(this)),o.interaction_enabled&&(e&&[["."+mt.legendItem,"cursor:pointer"],["."+mt.legendItem+" text","pointer-events:none"],["."+mt.legendItemPoint+" text","pointer-events:none"],["."+mt.legendItemTile,"pointer-events:none"],["."+mt.legendItemEvent,"fill-opacity:0"]].forEach(function(t){P(this,n);var e=t[0],t=t[1];r.setCssRule(!1,e,[t])(i.legend)}.bind(this)),t.on(l.dblclick?"dblclick":"click",l||E(o.legend_item_onclick)?function(t,e){var n,i;M(o.legend_item_onclick,a,e)||(n=t.altKey,i=t.target,"dblclick"===t.type||n?s.hiddenTargetIds.length&&-1===i.parentNode.getAttribute("class").indexOf(mt.legendItemHidden)?a.show():(a.hide(),a.show(e)):(a.toggle(e),(0,L.select)(this).classed(At.legendItemFocused,!1))),u&&r.hideTooltip()}:null),u||t.on("mouseout",l||E(o.legend_item_onout)?function(t,e){M(o.legend_item_onout,a,e)||((0,L.select)(this).classed(At.legendItemFocused,!1),c&&r.undoMarkOverlapped(r,"."+xt.gaugeValue),r.api.revert())}:null).on("mouseover",l||E(o.legend_item_onover)?function(t,e){M(o.legend_item_onover,a,e)||((0,L.select)(this).classed(At.legendItemFocused,!0),c&&r.markOverlapped(e,r,"."+xt.gaugeValue),!s.transiting&&r.isTargetToShow(e)&&a.focus(e))}:null),!t.empty()&&t.on("click mouseout mouseover")&&t.style("cursor",r.getStylePropValue("pointer")))},updateLegendElement:function(t,e){var n,i=this,r=this,a=r.config,o=r.state,s=r.$el.legend,u=r.$T,c="circle"!==a.legend_item_tile_type,l=a.legend_item_tile_r,h={width:c?a.legend_item_tile_width:2*l,height:c?a.legend_item_tile_height:2*l},d={padding:{top:4,right:10},max:{width:0,height:0},posMin:10,step:0,tileWidth:h.width+5,totalLength:0},f={offsets:{},widths:{},heights:{},margins:[0],steps:{}},c=t.filter(function(t){return P(this,i),!I(a.data_names[t])||null!==a.data_names[t]}.bind(this)),l=e.withTransition,g=r.getUpdateLegendPositions(c,d,f);o.isLegendInset&&(d.step=a.legend_inset_step||c.length,r.updateLegendStep(d.step));var p=o.isLegendRight?(n=function(t){return P(this,i),d.max.width*f.steps[t]}.bind(this),function(t){return P(this,i),f.margins[f.steps[t]]+f.offsets[t]}.bind(this)):o.isLegendInset?(n=function(t){return P(this,i),d.max.width*f.steps[t]+10}.bind(this),function(t){return P(this,i),f.margins[f.steps[t]]+f.offsets[t]}.bind(this)):(n=function(t){return P(this,i),f.margins[f.steps[t]]+f.offsets[t]}.bind(this),function(t){return P(this,i),d.max.height*f.steps[t]}.bind(this)),t={xText:function(t,e){return P(this,i),n(t,e)+4+h.width}.bind(this),xRect:function(t,e){return P(this,i),n(t,e)}.bind(this),x1Tile:function(t,e){return P(this,i),n(t,e)-2}.bind(this),x2Tile:function(t,e){return P(this,i),n(t,e)-2+h.width}.bind(this),yText:function(t,e){return P(this,i),p(t,e)+9}.bind(this),yRect:function(t,e){return P(this,i),p(t,e)-5}.bind(this),yTile:function(t,e){return P(this,i),p(t,e)+4}.bind(this)};r.generateLegendItem(c,h,g,t),e=s.select("."+mt.legendBackground+" rect"),o.isLegendInset&&0<d.max.width&&0===e.size()&&(e=s.insert("g","."+mt.legendItem).attr("class",mt.legendBackground).append("rect")),u(s.selectAll("text").data(c).text(function(t){return P(this,i),I(a.data_names[t])?a.data_names[t]:t}.bind(this)).each(function(t,e){g(this,t,e)}),l).attr("x",t.xText).attr("y",t.yText),u(s.selectAll("rect."+mt.legendItemEvent).data(c),l).attr("width",function(t){return P(this,i),f.widths[t]}.bind(this)).attr("height",function(t){return P(this,i),f.heights[t]}.bind(this)).attr("x",t.xRect).attr("y",t.yRect),r.updateLegendItemPos(c,l,t),e&&u(e,l).attr("height",r.getLegendHeight()-12).attr("width",d.max.width*(d.step+1)+10),r.updateLegendItemWidth(d.max.width),r.updateLegendItemHeight(d.max.height),r.updateLegendStep(d.step)},getUpdateLegendPositions:function(c,l,h){var d=this,f=d.config,g=d.state,p=g.isLegendRight||g.isLegendInset;return function(t,e,n){function i(t,e){e||(r=(u-l.totalLength-s)/2)<l.posMin&&(r=(u-s)/2,l.totalLength=0,l.step++),h.steps[t]=l.step,h.margins[l.step]=g.isLegendInset?10:r,h.offsets[t]=l.totalLength,l.totalLength+=s}var r,a=this,o=n===c.length-1,t=d.getLegendItemTextBox(e,t),o=t.width+l.tileWidth+(o&&!p?0:l.padding.right)+f.legend_padding,t=t.height+l.padding.top,s=p?t:o,u=p?d.getLegendHeight():d.getLegendWidth();if(0===n&&(l.totalLength=0,l.step=0,l.max.width=0,l.max.height=0),f.legend_show&&!d.isLegendToShow(e))return h.widths[e]=0,h.heights[e]=0,h.steps[e]=0,void(h.offsets[e]=0);h.widths[e]=o,h.heights[e]=t,(!l.max.width||o>=l.max.width)&&(l.max.width=o),(!l.max.height||t>=l.max.height)&&(l.max.height=t);t=p?l.max.height:l.max.width;f.legend_equally?(Object.keys(h.widths).forEach(function(t){return P(this,a),h.widths[t]=l.max.width}.bind(this)),Object.keys(h.heights).forEach(function(t){return P(this,a),h.heights[t]=l.max.height}.bind(this)),(r=(u-t*c.length)/2)<l.posMin?(l.totalLength=0,l.step=0,c.forEach(function(t){return P(this,a),i(t)}.bind(this))):i(e,!0)):i(e)}},generateLegendItem:function(t,e,n,i){var r,a=this,o=this,s=o.config,u=o.state,c=o.$el.legend,l=s.legend_usePoint,h=s.legend_item_tile_r,d=s.legend_item_tile_type,f="circle"!==d,g=u.isLegendRight||u.isLegendInset,t=c.selectAll("."+mt.legendItem).data(t).enter().append("g");o.setLegendItem(t),t.append("text").text(function(t){return P(this,a),I(s.data_names[t])?s.data_names[t]:t}.bind(this)).each(function(t,e){n(this,t,e)}).style("pointer-events",o.getStylePropValue("none")).attr("x",g?i.xText:-200).attr("y",g?-200:i.yText),t.append("rect").attr("class",mt.legendItemEvent).style("fill-opacity",o.getStylePropValue("0")).attr("x",g?i.xRect:-200).attr("y",g?-200:i.yRect),l?(r=[],t.append(function(t){P(this,a);var e=R(s.point_pattern)?s.point_pattern:[s.point_type];-1===r.indexOf(t)&&r.push(t);e=e[r.indexOf(t)%e.length];return"rectangle"===e&&(e="rect"),v.createElementNS(L.namespaces.svg,"hasValidPointType"in o&&o.hasValidPointType(e)?e:"use")}.bind(this)).attr("class",mt.legendItemPoint).style("fill",Ie.bind(o)).style("pointer-events",o.getStylePropValue("none")).attr("href",function(t,e,n){P(this,a);e=n[e].nodeName.toLowerCase(),t=o.getTargetSelectorSuffix(t);return"use"===e?"#"+u.datetimeId+"-point"+t:void 0}.bind(this))):t.append(f?"line":d).attr("class",mt.legendItemTile).style("stroke",Ie.bind(o)).style("pointer-events",o.getStylePropValue("none")).call(function(t){P(this,a),"circle"===d?t.attr("r",h).style("fill",Ie.bind(o)).attr("cx",g?i.x2Tile:-200).attr("cy",g?-200:i.yTile):f&&t.attr("stroke-width",e.height).attr("x1",g?i.x1Tile:-200).attr("y1",g?-200:i.yTile).attr("x2",g?i.x2Tile:-200).attr("y2",g?-200:i.yTile)}.bind(this))},updateLegendItemPos:function(t,e,h){var i=this,d=this.config,n=this.$el.legend,r=this.$T,a=d.legend_usePoint,o=d.legend_item_tile_type;a?r(n.selectAll("."+mt.legendItemPoint).data(t),e).each(function(){var t,e=this,n=this.nodeName.toLowerCase(),i=d.point_r,r="x",a="y",o=2,s=2.5,u=null,c=null,l=null;"circle"===n?(r="cx",a="cy",u=i+(t=.2*i),o=2*i,s=-t):"rect"===n&&(l=c=2.5*i,s=3),(0,L.select)(this).attr(r,function(t){return P(this,e),h.x1Tile(t)+o}.bind(this)).attr(a,function(t){return P(this,e),h.yTile(t)-s}.bind(this)).attr("r",u).attr("width",c).attr("height",l)}):r(n.selectAll("."+mt.legendItemTile).data(t),e).style("stroke",Ie.bind(this)).call(function(t){var n=this;P(this,i),"circle"===o?t.attr("cx",function(t){P(this,n);var e=h.x2Tile(t);return e-(e-h.x1Tile(t))/2}.bind(this)).attr("cy",h.yTile):"circle"!==o&&t.attr("x1",h.x1Tile).attr("y1",h.yTile).attr("x2",h.x2Tile).attr("y2",h.yTile)}.bind(this))}},Fe=qi(8),Be={redraw:function(t){var e,n=this;void 0===t&&(t={});var i=this,r=i.config,a=i.state,o=i.$el,s=o.main,u=o.treemap;a.redrawing=!0;var c=i.filterTargetsToShow(i.data.targets),l=t.flow,h=t.initializing,d=i.getWithOption(t),f=d.Transition?r.transition_duration:0,g=d.TransitionForExit?f:0,p=d.TransitionForAxis?f:0,p=null==(e=i.axis)?void 0:e.generateTransitions(p);i.updateSizes(h),d.Legend&&r.legend_show?(t.withTransition=!!f,u||i.updateLegend(i.mapToIds(i.data.targets),t,p)):d.Dimension&&i.updateDimension(!0),u||i.hasArcType()&&!a.hasRadar||i.updateCircleY&&(i.circleY=i.updateCircleY()),r.data_empty_label_text&&s.select("text."+Pt.text+"."+ht.empty).attr("x",a.width/2).attr("y",a.height/2).text(r.data_empty_label_text).style("display",c.length?"none":null),a.hasAxis?(i.axis.redrawAxis(c,d,p,l,h),i.hasGrid()&&i.updateGrid(),r.regions.length&&i.updateRegion(),["bar","candlestick","line","area"].forEach(function(t){P(this,n);var e=W(t);(/^(line|area)$/.test(t)&&i.hasTypeOf(e)||i.hasType(t))&&i["update"+e](d.TransitionForExit)}.bind(this)),o.text&&s.selectAll("."+Rt.selectedCircles).filter(i.isBarType.bind(i)).selectAll("circle").remove(),r.interaction_enabled&&!l&&d.EventRect&&(i.redrawEventRect(),null==i.bindZoomEvent||i.bindZoomEvent())):(o.arcs&&i.redrawArc(f,g,d.Transform),o.radar&&i.redrawRadar(),o.polar&&i.redrawPolar(),u&&i.updateTreemap(g)),a.resizing||u||!i.hasPointType()&&!a.hasRadar||i.updateCircle(),i.hasDataLabel()&&!i.hasArcType(null,["radar"])&&i.updateText(),null==i.redrawTitle||i.redrawTitle(),h&&i.updateTypesElements(),i.generateRedrawList(c,l,f,d.Subchart),i.updateTooltipOnRedraw(),i.callPluginHook("$redraw",t,f)},generateRedrawList:function(t,e,n,i){var r=this,a=this,o=a.config,s=a.state,u=a.getDrawShape();s.hasAxis&&o.subchart_show&&a.redrawSubchart(i,n,u);var c,l=e&&a.generateFlow({targets:t,flow:e,duration:e.duration,shape:u,xv:a.xv.bind(a)}),t=(n||l)&&st(),h=a.getRedrawList(u,e,l,t),e=function(){P(this,r),l&&l(),s.redrawing=!1,M(o.onrendered,a.api)}.bind(this);e&&(t&&h.length?(c=de(),(0,Fe.transition)().duration(n).each(function(){var n=this;P(this,r),h.reduce(function(t,e){return P(this,n),t.concat(e)}.bind(this),[]).forEach(function(t){return P(this,n),c.add(t)}.bind(this))}.bind(this)).call(c,e)):s.transiting||e()),a.mapToIds(a.data.targets).forEach(function(t){P(this,r),s.withoutFadeIn[t]=!0}.bind(this))},getRedrawList:function(i,t,e,r){var a=this,o=this,n=o.config,s=o.state,u=s.hasAxis,c=s.hasRadar,l=s.hasTreemap,h=o.$el.grid,d=i.pos,f=d.cx,g=d.cy,s=d.xForText,d=d.yForText,p=[];return u&&((n.grid_x_lines.length||n.grid_y_lines.length)&&p.push(o.redrawGrid(r)),n.regions.length&&p.push(o.redrawRegion(r)),Object.keys(i.type).forEach(function(t){P(this,a);var e=W(t),n=i.type[t];(/^(area|line)$/.test(t)&&o.hasTypeOf(e)||o.hasType(t))&&p.push(o["redraw"+e](n,r))}.bind(this)),!t&&h.main&&p.push(o.updateGridFocus())),o.hasArcType()&&!c||R(n.data_labels)&&!1!==n.data_labels&&p.push(o.redrawText(s,d,t,r)),!o.hasPointType()&&!c||n.point_focus_only||o.redrawCircle&&p.push(o.redrawCircle(f,g,r,e)),l&&p.push(o.redrawTreemap(r)),p},updateAndRedraw:function(t){var e,n=this.config,i=this.state;(t=void 0===t?{}:t).withTransition=A(t,"withTransition",!0),t.withTransform=A(t,"withTransform",!1),t.withLegend=A(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=A(t,"withTransitionForTransform",t.withTransition),t.withLegend&&n.legend_show||(i.hasAxis&&(e=this.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0)),this.updateScales(),this.updateSvgSize(),this.transformAll(t.withTransitionForTransform,e)),this.redraw(t,e)}};function Xe(t,e,n){void 0===e&&(e=0),void 0===n&&(n=1);var i={linear:Re.scaleLinear,log:Re.scaleSymlog,_log:Re.scaleLog,time:Re.scaleTime,utc:Re.scaleUtc}[t=void 0===t?"linear":t]();return i.type=t,/_?log/.test(t)&&i.clamp(!0),i.range([e,n])}var je={getXScale:function(t,e,n,i){e=this.scale.zoom||Xe(this.axis.getAxisType("x"),t,e);return this.getCustomizedXScale(n?e.domain(n):e,i)},getYScale:function(t,e,n,i){n=Xe(this.axis.getAxisType(t),e,n);return i&&n.domain(i),n},getYScaleById:function(t,e){var n;void 0===e&&(e=!1);t="y2"===(null==(n=this.axis)?void 0:n.getId(t));return this.scale[e?t?"subY2":"subY":t?"y2":"y"]},getCustomizedXScale:function(n,t){function e(t,e){return t=n(t)+o(),e?t:Math.ceil(t)}var i,r=this,a=this,o=t||function(){return P(this,r),a.axis.x.tickOffset()}.bind(this),s=a.config.axis_x_inverted;for(i in n)e[i]=n[i];return e.orgDomain=function(){return P(this,r),n.domain()}.bind(this),e.orgScale=function(){return P(this,r),n}.bind(this),a.axis.isCategorized()&&(e.domain=function(t){return arguments.length?(n.domain(t),e):(t=this.orgDomain(),s?[t[0]+1,t[1]]:[t[0],t[1]+1])}),e},updateScales:function(t,e){var n=this;void 0===e&&(e=!0);var i,r=this,a=r.axis,o=r.config,s=r.format,u=r.org,c=r.scale,l=r.state,h=l.current,d=l.width,f=l.height,g=l.width2,p=l.height2,v=l.hasAxis,b=l.hasTreemap;v?(l=o.axis_rotated,v=r.getResettedPadding(1),p={x:l?v:0,y:l?0:f,subX:l?1:0,subY:l?0:p},g={x:l?f:d,y:l?d:v,subX:l?f:d,subY:l?g:1},i=e&&(null==(i=c.x)?void 0:i.orgDomain()),u=e&&u.xDomain,c.x=r.getXScale(p.x,g.x,i,function(){return P(this,n),a.x.tickOffset()}.bind(this)),c.subX=r.getXScale(p.x,g.x,u,function(t){return P(this,n),t%1?0:(null!=(t=a.subX)?t:a.x).tickOffset()}.bind(this)),s.xAxisTick=a.getXAxisTickFormat(),s.subXAxisTick=a.getXAxisTickFormat(!0),a.setAxis("x",c.x,o.axis_x_tick_outer,t),o.subchart_show&&a.setAxis("subX",c.subX,o.axis_x_tick_outer,t),c.y=r.getYScale("y",p.y,g.y,c.y?c.y.domain():o.axis_y_default),c.subY=r.getYScale("y",p.subY,g.subY,c.subY?c.subY.domain():o.axis_y_default),a.setAxis("y",c.y,o.axis_y_tick_outer,t),o.axis_y2_show&&(c.y2=r.getYScale("y2",p.y,g.y,c.y2?c.y2.domain():o.axis_y2_default),c.subY2=r.getYScale("y2",p.subY,g.subY,c.subY2?c.subY2.domain():o.axis_y2_default),a.setAxis("y2",c.y2,o.axis_y2_tick_outer,t))):b?(b=r.getCurrentPadding(),c.x=(0,Re.scaleLinear)().rangeRound([b.left,h.width-b.right]),c.y=(0,Re.scaleLinear)().rangeRound([b.top,h.height-b.bottom])):null==r.updateArc||r.updateArc()},xx:function(t){var e=this.config,n=this.scale,i=n.x,n=n.zoom,i=e.zoom_enabled&&n?n:i;return t?i(O(t.x)?t.x:t):null},xv:function(t){var e=this.axis,n=this.config,i=this.scale,r=i.x,i=i.zoom,r=n.zoom_enabled&&i?i:r,t=this.getBaseValue(t);return e.isTimeSeries()?t=ot.call(this,t):e.isCategorized()&&b(t)&&(t=n.axis_x_categories.indexOf(t)),Math.ceil(r(t))},yv:function(t){var e=this.scale,n=e.y,e=e.y2,n=t.axis&&"y2"===t.axis?e:n;return Math.ceil(n(this.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},Ye=qi(9),Ge={getDrawShape:function(){var t,e,i=this,r=this,n=r.config.axis_rotated,a=r.state,o=a.hasRadar,a=a.hasTreemap,s={type:{},indices:{},pos:{}};return a||["bar","candlestick","line","area"].forEach(function(t){P(this,i);var e,n=W(/^(bubble|scatter)$/.test(t)?"line":t);(r.hasType(t)||r.hasTypeOf(n)||"line"===t&&(r.hasType("bubble")||r.hasType("scatter")))&&(e=r.getShapeIndices(r["is"+n+"Type"]),n=r["generateDraw"+n],s.indices[t]=e,s.type[t]=n?n.bind(r)(e,!1):void 0)}.bind(this)),r.hasArcType()&&!o&&!a||(a||(t=o?r.radarCircleX:n?r.circleY:r.circleX,e=o?r.radarCircleY:n?r.circleX:r.circleY),s.pos={xForText:r.generateXYForText(s.indices,!0),yForText:r.generateXYForText(s.indices,!1),cx:(t||function(){}).bind(r),cy:(e||function(){}).bind(r)}),s},getShapeIndices:function(t){var s=this,u=this.config,c=u.data_xs,e=R(c),l={},h=e?{}:0;return e&&K(Object.keys(c).map(function(t){return P(this,s),c[t]}.bind(this))).forEach(function(t){P(this,s),h[t]=0,l[t]={}}.bind(this)),this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){P(this,s);for(var e,n=(t.id in c?c[t.id]:""),i=n?l[n]:l,r=0;e=u.data_groups[r];r++)if(!(e.indexOf(t.id)<0))for(var a,o=0;a=e[o];o++)if(a in i){i[t.id]=i[a];break}z(i[t.id])&&(i[t.id]=n?h[n]++:h++,i.__max__=(n?h[n]:h)-1)}.bind(this)),l},getIndices:function(t,e){var n=this,i=this.config,r=i.data_xs,a=i.bar_indices_removeNull,i=e.id,e=e.index;if(this.isBarType(i)&&a){var o={};return this.getAllValuesOnIndex(e,!0).forEach(function(t,e){P(this,n),o[t.id]=e,o.__max__=e}.bind(this)),o}return R(r)?t[r[i]]:t},getIndicesMax:function(e){var n=this;return R(this.config.data_xs)?Object.keys(e).map(function(t){return P(this,n),e[t].__max__||0}.bind(this)).reduce(function(t,e){return P(this,n),t+e}.bind(this)):e.__max__},getShapeX:function(a,o,t){var s=this,u=this,e=u.config,n=u.scale,c=t?n.subX:n.zoom||n.x,l=e.bar_overlap,h=e.bar_padding,d=function(t,e){return P(this,s),t+e}.bind(this),f=w(a)&&(a._$total.length?a._$total.reduce(d)/2:0);return function(t){P(this,s);var e=u.getIndices(o,t,"getShapeX"),n=t.id in e?e[t.id]:0,i=(e.__max__||0)+1,r=0;return R(t.x)&&(e=c(t.x,!0),r=f?(t=a[t.id]||a._$width,l?e-t/2:e-t+a._$total.slice(0,n+1).reduce(d)-f):e-(N(a)?a:a._$width)*(i/2-(l?1:n))),a&&r&&1<i&&h&&(n&&(r+=h*n),2<i?r-=(i-1)*h/2:2===i&&(r-=h/2)),r}.bind(this)},getShapeY:function(n){var i=this,r=this,a=r.isStackNormalized();return function(t){P(this,i);var e=t.value;return N(t)?e=t:a?e=r.getRatio("index",t,!0):r.isBubbleZType(t)?e=r.getBubbleZData(t.value,"y"):r.isBarRangeType(t)&&(e=e[1]),r.getYScaleById(t.id,n)(e)}.bind(this)},getShapeYMin:function(t){var e=this.axis.getId(t),n=this.scale[e].domain()[0],e=this.config["axis_"+e+"_inverted"];return!this.isGrouped(t)&&!e&&0<n?n:0},getShapeOffsetData:function(t){var a=this,o=this,e=o.orderTargets(o.filterTargetsToShow(o.data.targets.filter(t,o))),s=o.isStackNormalized(),t=e.map(function(t){var i=this;P(this,a);var e=t.values,r={},n=(e=o.isStepType(t)?o.convertValuesToStep(e):e).reduce(function(t,e){P(this,i);var n=+e.x;return t[n]=e,r[n]=s?o.getRatio("index",e,!0):e.value,t}.bind(this),{});return{id:t.id,rowValues:e,rowValueMapByXValue:n,values:r}}.bind(this));return{indexMapByTargetId:e.reduce(function(t,e,n){e=e.id;return P(this,a),t[e]=n,t}.bind(this),{}),shapeOffsetTargets:t}},getShapeOffset:function(t,i,d){var f=this,g=this,t=g.getShapeOffsetData(t),p=t.shapeOffsetTargets,v=t.indexMapByTargetId,b=g.config.data_groupsZeroAs;return function(t,r){var a=this;P(this,f);var o=t.id,s=t.value,e=t.x,n=g.getIndices(i,t),u=g.getYScaleById(o,d);if(g.isBarRangeType(t))return u(s[0]);var c=+e,l=u("zero"===b?0:g.getShapeYMin(o)),h=l;return p.filter(function(t){return P(this,a),t.id!==o&&n[t.id]===n[o]}.bind(this)).forEach(function(t){P(this,a);var e=t.id,n=t.rowValueMapByXValue,i=t.rowValues,t=t.values;v[e]<v[o]&&(t=t[c],0<=(null==(i=!(i=i[r])||+i.x!=c?n[c]:i)?void 0:i.value)*s&&N(t)&&(0!==s||("positive"===b&&0<t||"negative"===b&&t<0))&&(h+=u(t)-l))}.bind(this)),h}.bind(this)},getBarW:function(t,e,i){var r=this,a=this.config,n=this.org,o=this.scale,s=this.getMaxDataCount(),u="bar"===t&&a.data_groups.length,c=t+"_width",l=o.zoom&&!this.axis.isCategorized()?n.xDomain.map(function(t){return P(this,r),o.zoom(t)}.bind(this)).reduce(function(t,e){return P(this,r),Math.abs(t)+e}.bind(this))/s:e.tickInterval(s),h=function(t){P(this,r);var e=t?a[c][t]:a[c],n=t?e.ratio:a[c+"_ratio"],t=t?e.max:a[c+"_max"],n=N(e)?e:i?l*n/i:0;return t&&t<n?t:n}.bind(this),d=h();return!u&&w(a[c])&&(d={_$width:d,_$total:[]},this.filterTargetsToShow(this.data.targets).forEach(function(t){P(this,r),a[c][t.id]&&(d[t.id]=h(t.id),d._$total.push(d[t.id]||d._$width))}.bind(this))),d},getShapeByIndex:function(t,e,n){var i=this,r=this.$el,a=O(e)?"-"+e:"",o=r[t];return o=o&&!o.empty()?o.filter(function(t){return P(this,i),!n||t.id===n}.bind(this)).filter(function(t){return P(this,i),!O(e)||t.index===e}.bind(this)):(n?r.main.selectAll("."+It[t+"s"]+this.getTargetSelectorSuffix(n)):r.main).selectAll("."+It[t]+a)},isWithinShape:function(t,e){var n,i=this,r=(0,L.select)(t);return i.isTargetToShow(e.id)?null!=i.hasValidPointType&&i.hasValidPointType(t.nodeName)?n=i.isStepType(e)?i.isWithinStep(t,i.getYScaleById(e.id)(e.value)):i.isWithinCircle(t,i.isBubbleType(e)?1.5*i.pointSelectR(e):0):"path"===t.nodeName&&(n=!r.classed(It.bar)||i.isWithinBar(t)):n=!1,n},getInterpolate:function(t){t=this.getInterpolateType(t);return{basis:Ye.curveBasis,"basis-closed":Ye.curveBasisClosed,"basis-open":Ye.curveBasisOpen,bundle:Ye.curveBundle,cardinal:Ye.curveCardinal,"cardinal-closed":Ye.curveCardinalClosed,"cardinal-open":Ye.curveCardinalOpen,"catmull-rom":Ye.curveCatmullRom,"catmull-rom-closed":Ye.curveCatmullRomClosed,"catmull-rom-open":Ye.curveCatmullRomOpen,"monotone-x":Ye.curveMonotoneX,"monotone-y":Ye.curveMonotoneY,natural:Ye.curveNatural,"linear-closed":Ye.curveLinearClosed,linear:Ye.curveLinear,step:Ye.curveStep,"step-after":Ye.curveStepAfter,"step-before":Ye.curveStepBefore}[t]},getInterpolateType:function(t){var e=this.config,n=e.spline_interpolation_type,n=this.isInterpolationType(n)?n:"cardinal";return this.isSplineType(t)?n:this.isStepType(t)?e.line_step_type:"linear"},isWithinBar:function(t){var e=Y(this.state.event,t),n=j(t),i=n[0],r=n[1],a=Math.min(i.x,r.x),n=Math.min(i.y,r.y),i=this.config.bar_sensitivity,r=t.getBBox(),t=r.width,r=r.height;return a-i<e[0]&&e[0]<a+t+i&&n-i<e[1]&&e[1]<n+r+i}},Ve={setContainerSize:function(){var t=this.state;t.current.width=this.getCurrentWidth(),t.current.height=this.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this.config,e=t.size_height||this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var t=this.config,e=this.state.hasAxis,n=this.$el,i=e?t.axis_y2_axes.length:0,e=O(t.padding_top)?t.padding_top:0;return n.title&&n.title.node()&&(e+=this.getTitlePadding()),i&&t.axis_rotated&&(e+=this.getHorizontalAxisHeight("y2")*i),e},getCurrentPaddingBottom:function(){var t=this.config,e=this.state.hasAxis,n=t.axis_rotated?"y":"x",e=e?t["axis_"+n+"_axes"].length:0;return(O(t.padding_bottom)?t.padding_bottom:0)+(e?this.getHorizontalAxisHeight(n)*e:0)},getCurrentPaddingLeft:function(t){var e=this.config,n=this.state.hasAxis,i=e.axis_rotated,r="fit"===(null==(s=e.padding)?void 0:s.mode),a=i?"x":"y",o=n?e["axis_"+a+"_axes"].length:0,s=n?this.getAxisWidthByAxisId(a,t):0;r||(s=y(s));t=e["axis_"+a+"_inner"]||!e["axis_"+a+"_show"]?0:s;return O(e.padding_left)?t=e.padding_left+(r&&i?s:0):n&&i&&(t=e.axis_x_show?r?s:Math.max(s,40):1),n&&(r||e["axis_"+a+"_inner"])&&e["axis_"+a+"_label"].text&&(t+=this.axis.getAxisLabelPosition("y").isOuter?20:0),t+s*o},getCurrentPaddingRight:function(t){void 0===t&&(t=!1);var e=this.config,n=this.state.hasAxis,i=e.axis_rotated,r="fit"===(null==(c=e.padding)?void 0:c.mode),a=r?2:10,o=this.state.isLegendRight?this.getLegendWidth()+20:0,s=n?e.axis_y2_axes.length:0,u=null!=(l=this.axis)&&l.getAxisLabelPosition("y2").isOuter?20:0,c=t?this.axis.getXAxisTickTextY2Overflow(a):0,l=n&&!e.axis_y2_inner?this.getAxisWidthByAxisId("y2"):1;r||(l=y(l));t=i?0:Math.max(l+o,c);return O(e.padding_right)?t=e.padding_right+(r&&(i||!e.axis_y2_show?a:t))+(n&&!r?1:0):this.axis&&i?t=a+o:!this.axis||e.axis_y2_show&&!e.axis_y2_inner||(t=Math.max((r&&!e.axis_y2_show?2:1)+o+u,c)),n&&!i&&r&&e.axis_y2_show&&!e.axis_y2_inner&&e.axis_y2_label.text&&(t+=u),t+l*s},getParentRectValue:function(t){for(var e="offset"+W(t),n=this.$el.chart.node(),i=0;i<30&&n&&"BODY"!==n.tagName;){try{i=n.getBoundingClientRect()[t]}catch(t){e in n&&(i=n[e])}n=n.parentNode}var r=v.body[e];return i=r<i?r:i},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height"),e=0;return e=t?/px$/.test(t)?parseInt(t,10):this.getParentRectValue("height"):e},getSvgLeft:function(t){var e=this.config,n=this.$el,i=e.axis_rotated||!e.axis_rotated&&!e.axis_y_inner,e=e.axis_rotated?gt.axisX:gt.axisY,e=n.main.select("."+e).node(),i=e&&i?e.getBoundingClientRect():{right:0},e=n.chart.node().getBoundingClientRect(),n=this.hasArcType(),t=i.right-e.left-(n?0:this.getCurrentPaddingLeft(t));return 0<t?t:0},updateDimension:function(t){var e=this.config,n=this.state.hasAxis,i=this.$el;n&&!t&&this.axis.x&&e.axis_rotated&&(null==(e=this.axis.subX)||e.create(i.axis.subX)),this.updateScales(t),this.updateSvgSize(),this.transformAll(!1)},updateSvgSize:function(){var t=this.state,e=t.clip,n=t.current,i=t.hasAxis,r=t.width,a=t.height,t=this.$el.svg;t.attr("width",n.width).attr("height",n.height),i&&(n={width:0,height:0},(i=t.select("."+Ot.brush+" .overlay")).size()&&(n.width=+i.attr("width"),n.height=+i.attr("height")),t.selectAll(["#"+e.id,"#"+e.idGrid]).select("rect").attr("width",r).attr("height",a),t.select("#"+e.idXAxis).select("rect").call(this.setXAxisClipPath.bind(this)),t.select("#"+e.idYAxis).select("rect").call(this.setYAxisClipPath.bind(this)),e.idSubchart&&t.select("#"+e.idSubchart).select("rect").attr("width",r).attr("height",n.height))},getCurrentPadding:function(){return{top:this.getCurrentPaddingTop(),bottom:this.getCurrentPaddingBottom(),left:this.getCurrentPaddingLeft(),right:this.getCurrentPaddingRight()}},getResettedPadding:function(e){var n=this,i=this.config,t=N(e),r=t?0:{};return!1===i.padding?t||Object.keys(e).forEach(function(t){P(this,n),r[t]=T(i.data_labels)||!1===i.data_labels||"top"!==t?0:e[t]}.bind(this)):r=e,r},updateSizes:function(t){var e=this,n=e.config,i=e.state,r=e.$el.legend,a=n.axis_rotated,o=e.hasArcType()||i.hasTreemap,s="fit"===(null==(d=n.padding)?void 0:d.mode);t||e.setContainerSize();var u={width:r?e.getLegendWidth():0,height:r?e.getLegendHeight():0};!o&&n.axis_x_show&&n.axis_x_tick_autorotate&&e.updateXAxisTickClip();var c=i.isLegendRight||i.isLegendInset?0:u.height,l=a||o?0:e.getHorizontalAxisHeight("x"),h=n.subchart_axis_x_show&&n.subchart_axis_x_tick_text_show?l:30,d=n.subchart_show&&!o?n.subchart_size_height+h:0,t=e.hasType("gauge")&&n.arc_needle_show&&!n.gauge_fullCircle&&!n.gauge_label_show?10:0,r=e.getCurrentPadding();i.margin=!o&&a?{top:e.getHorizontalAxisHeight("y2")+r.top,right:o?0:e.getCurrentPaddingRight(!0),bottom:e.getHorizontalAxisHeight("y")+c+r.bottom,left:d+(o?0:r.left)}:{top:(s?0:4)+r.top,right:o?0:e.getCurrentPaddingRight(!0),bottom:t+l+d+c+r.bottom,left:o?0:r.left},i.margin=e.getResettedPadding(i.margin),i.margin2=a?{top:i.margin.top,right:NaN,bottom:20+c,left:e.state.rotatedPadding.left}:{top:i.current.height-d-c,right:NaN,bottom:h+c,left:i.margin.left},i.margin3={top:0,right:NaN,bottom:0,left:0},null==e.updateSizeForLegend||e.updateSizeForLegend(u),i.width=i.current.width-i.margin.left-i.margin.right,i.height=i.current.height-i.margin.top-i.margin.bottom,i.width<0&&(i.width=0),i.height<0&&(i.height=0),i.width2=a?i.margin.left-i.rotatedPadding.left-i.rotatedPadding.right:i.width,i.height2=a?i.height:i.current.height-i.margin2.top-i.margin2.bottom,i.width2<0&&(i.width2=0),i.height2<0&&(i.height2=0),e.hasArcType()&&(c=e.hasType("gauge"),a=n.legend_show&&i.isLegendRight,i.arcWidth=i.width-(a?u.width+10:0),i.arcHeight=i.height-(a&&!c?0:10),c&&!n.gauge_fullCircle&&(i.arcHeight+=i.height-e.getPaddingBottomForGauge()),null==e.updateRadius||e.updateRadius()),i.isLegendRight&&o&&(i.margin3.left=i.arcWidth/2+1.1*i.radiusExpanded)}},Ue={setCssRule:function(r,a,o,s){var e=this,u=this,t=u.config,n=u.state,c=n.cssRule,l=n.style;return(t.boost_useCssRule?function(t){var i=this;P(this,e),t.each(function(t){var e=this;P(this,i);var n=s&&(null==s?void 0:s.call(u,t)),t=(r?"."+(Dt.shapes+u.getTargetSelectorSuffix(t.id)):"")+a;a in c&&l.sheet.deleteRule(c[t]),u.state.cssRule[t]=function(t,e,n){var i=this,r=t.rootSelctor,t=t.sheet,n=r+" "+function(t){return P(this,i),t.replace(/\s?(bb-)/g,".$1").replace(/\.+/g,".")}.bind(this)(e)+" {"+n.join(";")+"}";return t[t.insertRule?"insertRule":"addRule"](n,t.cssRules.length)}(l,t,o.filter(Boolean).map(function(t){return P(this,e),b(n)&&-1===t.indexOf(":")?t+": "+n:t||""}.bind(this)))}.bind(this))}:function(){P(this,e)}).bind(this)},getStylePropValue:function(t){return this.config.boost_useCssRule?null:E(t)?t.bind(this):t}};function He(t,e){var n=this.config.data_labels_position,i=t.id,r=t.index,t=t.value;return null!=(e=E(n)?n.bind(this.api)(e,t,i,r,this.$el.text):(i in n?n[i]:n)[e])?e:0}var qe={opacityForText:function(t){return(!this.isBarType(t)||this.meetsLabelThreshold(Math.abs(this.getRatio("bar",t)),"bar"))&&this.hasDataLabel?null:"0"},initText:function(){var t=this.$el;t.main.select("."+ht.chart).append("g").attr("class",Pt.chartTexts).style("pointer-events",t.treemap?"none":null)},updateTargetsForText:function(t){var e=this,n=this.getChartClass("Text"),i=this.getClass("texts","id"),r=this.classFocus.bind(this);this.$el.main.select("."+Pt.chartTexts).selectAll("."+Pt.chartText).data(t).attr("class",function(t){return P(this,e),(""+n(t)+r(t)).trim()}.bind(this)).enter().append("g").style("opacity","0").attr("class",n).call(this.setCssRule(!0," ."+Pt.text,["fill","pointer-events:none"],this.updateTextColor)).append("g").attr("class",i)},updateText:function(){var i=this,o=this,t=o.$el,e=o.$T,r=o.config,a=o.axis,n=o.getClass("text","index"),s=r.data_labels.centered,u=t.main.selectAll("."+Pt.texts).selectAll("."+Pt.text).data(o.labelishData.bind(o));e(u.exit()).style("fill-opacity","0").remove(),t.text=u.enter().append("text").merge(u).attr("class",n).attr("text-anchor",function(t){P(this,i);var e=r["axis_"+(null==a?void 0:a.getId(t.id))+"_inverted"]?0<t.value:t.value<0;if(o.isCandlestickType(t))var n=o.getCandlestickData(t),e=!(null!=n&&n._isUp);else if(o.isTreemapType(t))return s?"middle":"start";return r.axis_rotated?e?"end":"start":"middle"}.bind(this)).style("fill",o.getStylePropValue(o.updateTextColor)).style("fill-opacity","0").each(function(t,e,n){var i,r=(0,L.select)(this),a=t.value;o.isBubbleZType(t)?a=o.getBubbleZData(a,"z"):!o.isCandlestickType(t)||(i=o.getCandlestickData(t))&&(a=i.close),a=o.isTreemapType(t)?o.treemapDataLabelFormat(t)(r):o.dataLabelFormat(t.id)(a,t.id,e,n),N(a)?this.textContent=a:X(r,a)})},updateTextColor:function(t){var e,n=this.config,i=n.data_labels_colors,r=this.isArcType(t)&&!this.isRadarType(t)||this.isTreemapType(t)?null:this.color(t);return b(i)?e=i:D(i)?e=i[(t.data||t).id]:E(i)&&(e=i.bind(this.api)(r,t)),this.isCandlestickType(t)&&!E(i)&&(null!=(i=this.getCandlestickData(t))&&i._isUp||(n=n.candlestick_color_down,e=D(n)?n[t.id]:n)),e||r},updateTextBacgroundColor:function(t){var e=this.$el,n=this.config.data_labels_backgroundColors,i="";return(b(n)||D(n))&&(t=b(n)?"":this.getTargetSelectorSuffix(("id"in t?t:t.data).id),(t=e.defs.select(["filter[id*='labels-bg","']"].join(t))).size()&&(i="url(#"+t.attr("id")+")")),i||null},redrawText:function(r,a,t,o){var e,n,s=this,u=s.$T,c=s.axis,l=s.config,h=s.state.hasTreemap,d=U(!0),f=l.axis_rotated,g=l.data_labels.rotate,p=(n="middle",0<(e=g)&&e<=170?n="end":190<e&&e<=360&&(n="start"),n),v=g?"rotate("+g+")":"";return s.$el.text.style("fill",s.getStylePropValue(s.updateTextColor)).attr("filter",s.updateTextBacgroundColor.bind(s)).style("fill-opacity",t?0:s.opacityForText.bind(s)).each(function(t,e){var n=u(h&&this.childElementCount?this.parentNode:this,!(!o||!this.getAttribute("x")),d),i=l["axis_"+(null==c?void 0:c.getId(t.id))+"_inverted"],e={x:r.bind(this)(t,e),y:a.bind(this)(t,e)};g&&(e=function(t,e,n,i,r){var a=t.value,o=this.isCandlestickType(t),t=N(a)&&a<0||o&&!(null!=(s=this.getCandlestickData(t))&&s._isUp),s=e.x,e=e.y;return i?"start"===n?(s+=t?0:8,e+=4):"middle"===n?(s+=8,e-=8):"end"===n&&(t&&(s-=8),e+=4):("start"===n?(s+=4,t&&(e+=16)):"middle"===n?e-=8:"end"===n&&(s-=4,t&&(e+=16)),r&&(e+=t?-17:o?13:7)),{x:s,y:e}}.bind(s)(t,e,p,f,i),n.attr("text-anchor",p)),this.childElementCount||g?n.attr("transform","translate("+e.x+" "+e.y+") "+v):n.attr("x",e.x).attr("y",e.y)}),!0},getTextRect:function(t,e){var n=this,i=t.node?t.node():t,r=(i=!/text/i.test(i.tagName)?i.querySelector("text"):i).textContent,t=ue+"-"+r.replace(/\W/g,"_"),a=this.cache.get(t);return a||(this.$el.svg.append("text").style("visibility","hidden").style("font",(0,L.select)(i).style("font")).classed(e,!0).text(r).call(function(t){P(this,n),a=V(t.node())}.bind(this)).remove(),this.cache.add(t,a)),a},generateXYForText:function(e,t){var n=this,i=this,r=i.state,a=r.hasRadar,o=r.hasTreemap,r=Object.keys(e),s={},u=t?i.getXForText:i.getYForText;return a&&r.push("radar"),o&&r.push("treemap"),r.forEach(function(t){P(this,n),s[t]=i["generateGet"+W(t)+"Points"](e[t],!1)}.bind(this)),function(t,e){var n=(i.isAreaType(t)?"area":i.isBarType(t)&&"bar")||i.isCandlestickType(t)&&"candlestick"||i.isRadarType(t)&&"radar"||i.isTreemapType(t)&&"treemap"||"line";return u.call(i,s[n](t,e),t,this)}},getCenteredTextPos:function(t,e,n,i){var r=this.config,a=r.axis_rotated,o=this.isBarType(t),s=this.isTreemapType(t);if(r.data_labels.centered&&(o||s)){n=V(n);if(o){t=0<=t.value;if(a){var u=(t?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+n.width/2;return t?-u-3:2+u}u=(t?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+n.height/2;return t?u:-u-2}if(s)return"x"===i?(e[1][0]-e[0][0])/2:(e[1][1]-e[0][1])/2+n.height/2}return 0},getXForText:function(t,e,n){var i,r,a=this.config,o=this.state,s=a.axis_rotated,u=this.isTreemapType(e),c=t[0][0];return this.isCandlestickType(e)?s?c=null!=(i=this.getCandlestickData(e))&&i._isUp?t[2][2]+4:t[2][1]-4:c+=(t[1][0]-c)/2:u?c+=a.data_labels.centered?0:5:s?(i=a["axis_"+this.axis.getId(e.id)+"_inverted"],a=this.isBarType(e)?4:6,r=e.value,c=t[2][1],i?c-=a*(0<r?1:-1):c+=a*(r<0?-1:1)):c=this.hasType("bar")?(t[2][0]+t[0][0])/2:c,null===e.value&&(c>o.width?(r=V(n).width,c=o.width-r):c<0&&(c=4)),(s||u)&&(c+=this.getCenteredTextPos(e,t,n,"x")),c+He.call(this,e,"x")},getYForText:function(t,e,n){var i,r=this,a=r.axis,o=r.config,s=r.state,u=o.axis_rotated,c=o["axis_"+(null==a?void 0:a.getId(e.id))+"_inverted"],l=r.isBarType(e),h=r.isTreemapType(e),d=o.point_r,f=V(n),g=e.value,a=3;return r.isCandlestickType(e)?(g=r.getCandlestickData(e),u?(i=t[0][0],i+=(t[1][0]-i)/2+a):(i=g&&g._isUp?t[2][2]-a:t[2][1]+4*a,c&&(i+=15*(g._isUp?1:-1)))):h?i=t[0][1]+(o.data_labels.centered?0:f.height+5):u?i=(t[0][0]+t[2][0]+.6*f.height)/2:(i=t[2][1],N(d)&&5<d&&(r.isLineType(e)||r.isScatterType(e))&&(a+=o.point_r/2.3),g<0||0===g&&!s.hasPositiveValue&&s.hasNegativeValue?i+=c?l?-3:-5:f.height+(l?-a:a):(g=2*-a,l?g=-a:r.isBubbleType(e)&&(g=a),i+=g=c?l?10:15:g)),null!==e.value||u||(i<(f=f.height)?i=f:i>s.height&&(i=s.height-4)),u&&!h||(i+=r.getCenteredTextPos(e,t,n,"y")),i+He.call(this,e,"y")},markOverlapped:function(e,t,n){var i=this,t=t.$el.arcs.selectAll(n),n=t.filter(function(t){return P(this,i),t.data.id!==e}.bind(this)),r=t.filter(function(t){return P(this,i),t.data.id===e}.bind(this)),a=J(r.node()),o=function(t,e){return P(this,i),Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}.bind(this);r.node()&&n.each(function(){var t=J(this),e=(0,L.select)(this),n=o(a.e,a.f)>o(t.e,t.f)?r:e,n=Math.ceil(Math.abs(a.e-t.e))<Math.ceil(n.node().getComputedTextLength()),t=Math.ceil(Math.abs(a.f-t.f))<parseInt(r.style("font-size"),10);e.classed(Pt.TextOverlapping,n&&t)})},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each(function(){(0,L.selectAll)([this,this.previousSibling]).classed(Pt.TextOverlapping,!1)})},meetsLabelThreshold:function(t,e){return(this.config[e+"_label_threshold"]||0)<=(t=void 0===t?0:t)}};function We(t,e){void 0===t&&(t="left");var n=N(e),n=-1<t.indexOf("center")?n?e/2:"middle":-1<t.indexOf("right")?n?e:"end":n?0:"start";return n}var Ze={initTitle:function(){var t=this.config,e=this.$el;t.title_text&&(e.title=e.svg.append("g"),X(e.title.append("text").style("text-anchor",We(t.title_position)).attr("class",Pt.title),t.title_text,[.3,1.5]))},redrawTitle:function(){var t,e=this.config,n=this.state.current,i=this.$el.title;i&&(t=this.yForTitle.call(this),/g/i.test(i.node().tagName)?i.attr("transform","translate("+We(e.title_position,n.width)+", "+t+")"):i.attr("x",this.xForTitle.call(this)).attr("y",t))},xForTitle:function(){var t,e=this.config,n=this.state.current,i=e.title_position||"left",r=this.getTextRect(this.$el.title,Pt.title).width;return/(right|center)/.test(i)?(t=n.width-r,0<=i.indexOf("right")?t=n.width-r-e.title_padding.right:0<=i.indexOf("center")&&(t=(n.width-r)/2)):t=e.title_padding.left||0,t},yForTitle:function(){return(this.config.title_padding.top||0)+this.getTextRect(this.$el.title,Pt.title).height},getTitlePadding:function(){return this.yForTitle()+(this.config.title_padding.bottom||0)}},t={initTooltip:function(){var t=this.config,e=this.$el;e.tooltip=(0,L.select)(t.tooltip_contents.bindto),e.tooltip.empty()&&(e.tooltip=e.chart.append("div").attr("class",Lt.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),this.bindTooltipResizePos()},initShowTooltip:function(){var n=this,i=this,r=i.config,t=i.$el,e=i.state,a=e.hasAxis,e=e.hasRadar;if(r.tooltip_init_show){var o=!(a&&e);if(null!=(e=i.axis)&&e.isTimeSeries()&&b(r.tooltip_init_x)){var s,u,c=i.data.targets[0];for(r.tooltip_init_x=ot.call(i,r.tooltip_init_x),s=0;(u=c.values[s])&&u.x-r.tooltip_init_x!=0;s++);r.tooltip_init_x=s}e=i.data.targets.map(function(t){P(this,n);var e=o?0:r.tooltip_init_x;return i.addName(t.values[e])}.bind(this));o&&(e=[e[r.tooltip_init_x]]),t.tooltip.html(i.getTooltipHTML(e,null==(e=i.axis)?void 0:e.getXAxisTickFormat(),i.getDefaultValueFormat(),i.color)),r.tooltip_contents.bindto||t.tooltip.style("top",r.tooltip_init_position.top).style("left",r.tooltip_init_position.left).style("display",null)}},getTooltipHTML:function(){var t=this.api,e=this.config;return E(e.tooltip_contents)?e.tooltip_contents.bind(t).apply(void 0,arguments):this.getTooltipContent.apply(this,arguments)},getTooltipContent:function(l,t,e,n){var r,a=this,h=this,i=h.api,o=h.config,d=h.state,f=h.$el,s=["title","name","value"].map(function(t){P(this,a);t=o["tooltip_format_"+t];return E(t)?t.bind(i):t}.bind(this)),g=s[0],p=s[1],v=s[2],g=g||t,p=p||function(t){return P(this,a),t}.bind(this),v=v||(d.hasTreemap||h.isStackNormalized()?function(t,e){return P(this,a),(100*e).toFixed(2)+"%"}.bind(this):e),u=o.tooltip_order,b=function(t){return P(this,a),h.axis&&h.isBubbleZType(t)?h.getBubbleZData(t.value,"z"):h.getBaseValue(t)}.bind(this),_=(h.levelColor?function(t){return P(this,a),h.levelColor(t.value)}:function(t){return P(this,a),n(t)}).bind(this),y=o.tooltip_contents,x=y.template,m=h.mapToTargetIds();null===u&&o.data_groups.length?(r=h.orderTargets(h.data.targets).map(function(t){return P(this,a),t.id}.bind(this)).reverse(),l.sort(function(t,e){P(this,a);var n=t?t.value:null,i=e?e.value:null;return 0<n&&0<i&&(n=t.id?r.indexOf(t.id):null,i=e.id?r.indexOf(e.id):null),n-i}.bind(this))):/^(asc|desc)$/.test(u)?l.sort(function(t,e){P(this,a);t=t?b(t):null,e=e?b(e):null;return"asc"===u?t-e:e-t}.bind(this)):E(u)&&l.sort(u.bind(i));for(var w,T,A,M,S=h.getTooltipContentTemplate(x),c=l.length,k=0;k<c;k++)(function(){var t,e,n,i,r,a=this;if(!(T=l[k])||!b(T)&&0!==b(T))return;if(z(w)&&(t=(d.hasAxis||d.hasRadar)&&B(g?g(T.x):T.x),w=at(S[0],{CLASS_TOOLTIP:Lt.tooltip,TITLE:O(t)?x?t:'<tr><th colspan="2">'+t+"</th></tr>":""})),!T.ratio&&f.arcs&&(A=["arc",h.$el.arcs.select("path."+dt.arc+"-"+T.id).data()[0]],T.ratio=h.getRatio.apply(h,A)),A=[T.ratio,T.id,T.index,l],M=B(v.apply(void 0,[b(T)].concat(A))),h.isAreaRangeType(T)?(n=(e=["high","low"].map(function(t){return P(this,a),B(v.apply(void 0,[h.getRangedData(T,t)].concat(A)))}.bind(this)))[0],i=e[1],M="<b>Mid:</b> "+M+" <b>High:</b> "+n+" <b>Low:</b> "+i):h.isCandlestickType(T)?(t=(r=["open","high","low","close","volume"].map(function(t){return P(this,a),B(v.apply(void 0,[h.getRangedData(T,t,"candlestick")].concat(A)))}.bind(this)))[0],e=r[1],n=r[2],i=r[3],r=r[4],M="<b>Open:</b> "+t+" <b>High:</b> "+e+" <b>Low:</b> "+n+" <b>Close:</b> "+i+(r?" <b>Volume:</b> "+r:"")):h.isBarRangeType(T)&&(s=(u=T.value)[0],u=u[1],M=v(s)+" ~ "+v(u)),void 0!==M){if(null===T.name)return;var o,s=B(p.apply(void 0,[T.name].concat(A))),u=_(T),c={CLASS_TOOLTIP_NAME:Lt.tooltipName+h.getTargetSelectorSuffix(T.id),COLOR:x||!h.patterns?u:'<svg><rect style="fill:'+u+'" width="10" height="10"></rect></svg>',NAME:s,VALUE:M};x&&D(y.text)&&(o=m.indexOf(T.id),Object.keys(y.text).forEach(function(t){P(this,a),c[t]=y.text[t][o]}.bind(this))),w+=at(S[1],c)}})();return w+"</table>"},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+'{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>').replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},setTooltipPosition:function(t,e){var n,i=this,r=this.config,a=this.scale,o=this.state,s=this.$el,u=s.eventRect,c=s.tooltip,s=r.tooltip_contents.bindto,l=null==c||null==c.datum?void 0:c.datum();!s&&l&&(e={x:(s=Y(o.event,null!=e?e:null==u?void 0:u.node()))[0],y:s[1]},a.x&&l&&"x"in l&&(e.xAxis=a.x(l.x)),a=void 0===(s=l.width)?0:s,s=void 0===(s=l.height)?0:s,n=null!=(u=null==(r=r.tooltip_position)?void 0:r.bind(this.api)(null!=t?t:JSON.parse(l.current),a,s,null==u?void 0:u.node(),e))?u:this.getTooltipPosition.bind(this)(a,s,e),["top","left"].forEach(function(t){P(this,i);var e=n[t];c.style(t,e+"px"),"left"!==t||l.xPosInPercent||(l.xPosInPercent=e/o.current.width*100)}.bind(this)))},getTooltipPosition:function(t,e,n){var i=this,r=this,a=r.config,o=r.scale,s=r.state,u=s.width,c=s.height,l=s.current,h=s.isLegendRight,d=s.inputType,f=r.hasType("gauge")&&!a.gauge_fullCircle,g=s.hasTreemap,p=a.axis_rotated,v=r.getSvgLeft(!0),b=v+l.width-r.getCurrentPaddingRight(),_=r.getCurrentPaddingLeft(!0),s=n.x,a=n.y;r.hasArcType()?"touch"===d||r.hasType("radar")||(a+=f?c:c/2,s+=(u-(h?r.getLegendWidth():0))/2):g||(p?(a=n.xAxis+20,s+=v,b-=v):(a-=5,s=v+_+20+(o.zoom?s:n.xAxis))),b<s+t+15&&(s-=p?t-_:t+(g?0:_)),a+e>l.height&&(a-=f?3*e:e+(g?0:30));var y={top:a,left:s};return Object.keys(y).forEach(function(t){P(this,i),y[t]<0&&(y[t]=0)}.bind(this)),y},showTooltip:function(t,e){var n,i,r,a,o=this,s=this,u=s.config,c=s.$el.tooltip,l=t.filter(function(t){return P(this,o),t&&O(s.getBaseValue(t))}.bind(this));c&&0!==l.length&&u.tooltip_show&&(n=null==c||null==c.datum?void 0:c.datum(),i=JSON.stringify(t),n&&n.current===i||(r=(a=t.concat().sort()[0]).index,a=a.x,M(u.tooltip_onshow,s.api,t),c.html(s.getTooltipHTML(t,s.axis?s.axis.getXAxisTickFormat():s.categoryName.bind(s),s.getDefaultValueFormat(),s.color)).style("display",null).style("visibility",null).datum(n={index:r,x:a,current:i,width:c.property("offsetWidth"),height:c.property("offsetHeight")}),M(u.tooltip_onshown,s.api,t),s._handleLinkedCharts(!0,r)),s.setTooltipPosition(l,e))},bindTooltipResizePos:function(){var i=this,t=this.resizeFunction,r=this.state,a=this.$el.tooltip;t.add(function(){var t,e,n;P(this,i),"block"===a.style("display")&&(t=r.current,n=(e=a.datum()).width,e=e.xPosInPercent,e=t.width/100*e,(n=t.width-(e+n))<0&&(e+=n),a.style("left",e+"px"))}.bind(this))},hideTooltip:function(t){var e=this.api,n=this.config,i=this.$el.tooltip;!i||"none"===i.style("display")||n.tooltip_doNotHide&&!t||(t=JSON.parse(null!=(t=null==i||null==i.datum?void 0:i.datum().current)?t:{}),M(n.tooltip_onhide,e,t),i.style("display","none").style("visibility","hidden").datum(null),M(n.tooltip_onhidden,e,t))},_handleLinkedCharts:function(a,o){var s,u=this,e=this,t=e.charts,n=e.config,i=e.state.event;null!=i&&i.isTrusted&&n.tooltip_linked&&1<t.length&&(s=n.tooltip_linked_name,t.filter(function(t){return P(this,u),t!==e.api}.bind(this)).forEach(function(t){P(this,u);var e=t.internal,n=e.config,i=e.$el,r=n.tooltip_linked,e=n.tooltip_linked_name,n=v.body.contains(i.chart.node());if(r&&s===e&&n){i=i.tooltip.data()[0],i=o!==(null==i?void 0:i.index);try{t.tooltip[a&&i?"show":"hide"]({index:o})}catch(t){}}}.bind(this)))},updateTooltipOnRedraw:function(t,e){var n,i,r,a=this,o=this,s=o.config,u=o.$el,c=u.eventRect,l=u.svg,h=u.tooltip,d=o.state,f=d.event,g=d.hasAxis,u=d.hasRadar,p=d.hasTreemap;"block"===(null==h?void 0:h.style("display"))&&f&&(n=null!=t?t:null==(n=u?l:c)?void 0:n.node(),g||u?o.isMultipleX()?o.selectRectForMultipleXs(n,!1):(u=null!=e?e:o.getDataIndexFromEvent(f),-1===e?o.api.tooltip.hide():(o.selectRectForSingle(n,u),o.setExpand(u,null,!0))):(i=f.clientX,r=f.clientY,setTimeout(function(){P(this,a);var t=v.elementFromPoint(i,r),e=(0,L.select)(t).datum();e?(e=o.hasArcType()?o.convertToArcData(o.updateAngle(e)):null==e?void 0:e.data,p&&(t=l.node()),e&&o.showTooltip([e],t)):o.api.tooltip.hide()}.bind(this),s.transition_duration)))}},i={getTranslate:function(t,e){var n,i,r=this.config,a=this.state,o=r.axis_rotated,r=0;return(e=void 0===e?0:e)&&/^(x|y2?)$/.test(t)&&(r=this.getAxisSize(t)*e),"main"===t?(n=x(a.margin.left),i=x(a.margin.top)):"context"===t?(n=x(a.margin2.left),i=x(a.margin2.top)):"legend"===t?(n=a.margin3.left,i=a.margin3.top):"x"===t?(n=o?-r:0,i=o?0:a.height+r):"y"===t?(n=o?0:-r,i=o?a.height+r:0):"y2"===t?(n=o?0:a.width+r,i=o&&r?1-r:0):"subX"===t?(n=0,i=o?0:a.height2):"arc"===t||"polar"===t?(n=a.arcWidth/2,i=a.arcHeight/2):"radar"===t&&(t=this.getRadarSize()[0],n=a.width/2-t,i=x(a.margin.top)),"translate("+n+", "+i+")"},transformMain:function(t,e){var n=this.$el.main,i=this.$T,r=null!=e&&e.axisX?e.axisX:i(n.select("."+gt.axisX),t),a=null!=e&&e.axisY?e.axisY:i(n.select("."+gt.axisY),t),e=null!=e&&e.axisY2?e.axisY2:i(n.select("."+gt.axisY2),t);i(n,t).attr("transform",this.getTranslate("main")),r.attr("transform",this.getTranslate("x")),a.attr("transform",this.getTranslate("y")),e.attr("transform",this.getTranslate("y2")),n.select("."+dt.chartArcs).attr("transform",this.getTranslate("arc"))},transformAll:function(t,e){var n=this.config,i=this.state,r=i.hasAxis,a=i.hasTreemap,i=this.$el;a||this.transformMain(t,e),r&&n.subchart_show&&this.transformContext(t,e),i.legend&&this.transformLegend(t)}},a={isValidChartType:function(t){return!!(t&&-1<Object.values(S).indexOf(t))},setTargetType:function(t,e){var n=this,i=this.config,r=this.state.withoutFadeIn;this.mapToTargetIds(t).forEach(function(t){P(this,n),r[t]=e===i.data_types[t],i.data_types[t]=e}.bind(this)),t||(i.data_type=e)},updateTypesElements:function(){var i=this,r=this,a=r.state.current;Object.keys(S).forEach(function(t){P(this,i);var e=S[t],n=r.hasType(e,null,!0),t=a.types.indexOf(e);-1===t&&n?a.types.push(e):-1<t&&!n&&a.types.splice(t,1)}.bind(this)),r.setChartElements()},hasType:function(e,t,n){var i=this,r=this.config,a=this.state.current,o=r.data_types,t=t||this.data.targets,s=!1;return!(n=void 0===n?!1:n)&&-1<(null==(a=a.types)?void 0:a.indexOf(e))?s=!0:null!=t&&t.length?t.forEach(function(t){P(this,i);t=o[t.id];t!==e&&(t||"line"!==e)||(s=!0)}.bind(this)):Object.keys(o).length?Object.keys(o).forEach(function(t){P(this,i),o[t]===e&&(s=!0)}.bind(this)):s=r.data_type===e,s},hasTypeOf:function(t,e,n){var i=this;return void 0===n&&(n=[]),t in k&&!k[t].filter(function(t){return P(this,i),-1===n.indexOf(t)}.bind(this)).every(function(t){return P(this,i),!this.hasType(t,e)}.bind(this))},isTypeOf:function(t,e){t=b(t)?t:t.id,t=this.config.data_types[t]||this.config.data_type;return $(e)?0<=e.indexOf(t):t===e},hasPointType:function(){return this.hasTypeOf("Line")||this.hasType("bubble")||this.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){t=b(t)?t:t.id;return!this.config.data_types[t]||this.isTypeOf(t,k.Line)},isStepType:function(t){return this.isTypeOf(t,k.Step)},isSplineType:function(t){return this.isTypeOf(t,k.Spline)},isAreaType:function(t){return this.isTypeOf(t,k.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,k.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isCandlestickType:function(t){return this.isTypeOf(t,"candlestick")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isTreemapType:function(t){return this.isTypeOf(t,"treemap")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isPolarType:function(t){return this.isTypeOf(t,"polar")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isPolarType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,n=e.point_pattern;return"circle"===(null==t?void 0:t.tagName)||"circle"===e.point_type&&(!n||$(n)&&0===n.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},labelishData:function(t){var e=this;return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isCandlestickType(t)||this.isRadarType(t)||this.isTreemapType(t)?t.values.filter(function(t){return P(this,e),N(t.value)||!!t.value}.bind(this)):[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return 0<=["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)}},Je=function(){function t(t){this.api=void 0,this.config=void 0,this.cache=void 0,this.$el=void 0,this.state=void 0,this.charts=void 0,this.data={xs:{},targets:[]},this.axis=void 0,this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.color=void 0,this.patterns=void 0,this.levelColor=void 0,this.point=void 0,this.brush=void 0,this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};this.api=t,this.config=new Kt,this.cache=new ce;t=new Ft;this.$el=t.getStore("element"),this.state=t.getStore("state"),this.$T=this.$T.bind(this)}var e=t.prototype;return e.$T=function(t,e,n){var i=this.config,r=this.state,a=i.transition_duration,i=i.subchart_show,t=t;return t&&("tagName"in t&&(t=(0,L.select)(t)),t=(!1!==e&&a||e)&&(!r.zooming||r.dragging)&&!r.resizing&&r.rendered&&!i?t.transition(n).duration(a):t),t},e.beforeInit=function(){this.callPluginHook("$beforeInit"),M(this.config.onbeforeinit,this.api)},e.afterInit=function(){this.callPluginHook("$afterInit"),M(this.config.onafterinit,this.api)},e.init=function(){var t=this.config,e=this.state,n=this.$el,i=t.boost_useCssRule;ut(this),e.hasRadar=!e.hasAxis&&this.hasType("radar"),e.hasTreemap=!e.hasAxis&&this.hasType("treemap"),e.hasAxis=!this.hasArcType()&&!e.hasTreemap,e.datetimeId="bb-"+ +new Date*U(),i&&((r=v.createElement("style")).type="text/css",v.head.appendChild(r),e.style={rootSelctor:"."+e.datetimeId,sheet:r.sheet},n.style=r);var r={element:t.bindto,classname:"bb"};D(t.bindto)&&(r.element=t.bindto.element||"#chart",r.classname=t.bindto.classname||r.classname),n.chart=E(r.element.node)?t.bindto.element:(0,L.select)(r.element||[]),n.chart.empty()&&(n.chart=(0,L.select)(v.body.appendChild(v.createElement("div")))),n.chart.html("").classed(r.classname,!0).classed(e.datetimeId,i).style("position","relative"),this.initParams(),this.initToRender()},e.initToRender=function(t){var n=this,i=this,e=i.config,r=i.state,a=i.$el.chart,o=function(){return P(this,n),"none"===a.style("display")||"hidden"===a.style("visibility")}.bind(this),s=e.render.lazy||o(),u=m.MutationObserver;s&&u&&!1!==e.render.observe&&!t&&new u(function(t,e){P(this,n),o()||(e.disconnect(),r.rendered||i.initToRender(!0))}.bind(this)).observe(a.node(),{attributes:!0,attributeFilter:["class","style"]}),s&&!t||i.convertData(e,function(t){P(this,n),i.initWithData(t),i.afterInit()}.bind(this))},e.initParams=function(){var i,r=this,a=this,t=a.config,o=a.format,e=a.state,n=t.axis_rotated;a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),!1===t.padding&&(t.axis_x_show=!1,t.axis_y_show=!1,t.axis_y2_show=!1,t.subchart_show=!1),a.hasPointType()&&(a.point=a.generatePoint()),e.hasAxis&&(a.initClip(),o.extraLineClasses=a.generateExtraLineClass(),o.dataTime=t.data_xLocaltime?s.timeParse:s.utcParse,o.axisTime=t.axis_x_localtime?s.timeFormat:s.utcFormat,i=a.config.zoom_enabled&&"drag"===a.config.zoom_type,o.defaultAxisTime=function(t){P(this,r);var e=a.scale,n=e.x,e=e.zoom,e=i?e:e&&n.orgDomain().toString()!==e.domain().toString(),e=(t.getMilliseconds()?".%L":t.getSeconds()&&".:%S")||t.getMinutes()&&"%I:%M"||t.getHours()&&"%I %p"||1!==t.getDate()&&"%b %d"||e&&1===t.getDate()&&"%b'%y"||t.getMonth()&&"%-m/%-d"||"%Y";return o.axisTime(e)(t)}.bind(this)),e.isLegendRight="right"===t.legend_position,e.isLegendInset="inset"===t.legend_position,e.isLegendTop="top-left"===t.legend_inset_anchor||"top-right"===t.legend_inset_anchor,e.isLegendLeft="top-left"===t.legend_inset_anchor||"bottom-left"===t.legend_inset_anchor,e.rotatedPadding.top=a.getResettedPadding(e.rotatedPadding.top),e.rotatedPadding.right=n&&!t.axis_x_show?0:30,e.inputType=function(t,e){var n=this,i=m.DocumentTouch,r=m.matchMedia,a=m.navigator,o=!1;return e&&(o=a&&"maxTouchPoints"in a?0<a.maxTouchPoints:!!("ontouchmove"in m||i&&v instanceof i)||(!(null==r||!r("(pointer:coarse)").matches)||(a=a.userAgent,/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(a)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(a)))),(t&&["any-hover:hover","any-pointer:fine"].some(function(t){return P(this,n),null==r?void 0:r("("+t+")").matches}.bind(this))?"mouse":o&&"touch")||"mouse"}(t.interaction_inputType_mouse,t.interaction_inputType_touch)},e.initWithData=function(t){var e,n,i,r,a,o=this,s=this,u=s.config,c=s.scale,l=s.state,h=s.$el,d=s.org,f=l.hasAxis,g=l.hasTreemap,p=u.interaction_enabled,v=s.hasType("polar");f&&(s.axis=s.getAxisInstance(),u.zoom_enabled&&s.initZoom()),s.data.xs={},s.data.targets=s.convertDataToTargets(t),u.data_filter&&(s.data.targets=s.data.targets.filter(u.data_filter.bind(s.api))),u.data_hide&&s.addHiddenTargetIds(!0===u.data_hide?s.mapToIds(s.data.targets):u.data_hide),u.legend_hide&&s.addHiddenLegendIds(!0===u.legend_hide?s.mapToIds(s.data.targets):u.legend_hide),s.updateSizes(),s.updateScales(!0),f&&(e=c.x,i=c.y,a=c.y2,n=c.subX,t=c.subY,r=c.subY2,e&&(e.domain(et(s.getXDomain(s.data.targets),!u.axis_x_inverted)),n.domain(e.domain()),d.xDomain=e.domain()),i&&(i.domain(s.getYDomain(s.data.targets,"y")),t.domain(i.domain())),a&&(a.domain(s.getYDomain(s.data.targets,"y2")),r&&r.domain(a.domain()))),h.svg=h.chart.append("svg").style("overflow","hidden").style("display","block"),p&&l.inputType&&(i="touch"===l.inputType,r=u.onclick,a=u.onover,b=u.onout,h.svg.on("click",(null==r?void 0:r.bind(s.api))||null).on(i?"touchstart":"mouseenter",(null==a?void 0:a.bind(s.api))||null).on(i?"touchend":"mouseleave",(null==b?void 0:b.bind(s.api))||null)),u.svg_classname&&h.svg.attr("class",u.svg_classname);var b=E(u.color_tiles)&&s.patterns;(f||b||v||g||u.data_labels_backgroundColors)&&(h.defs=h.svg.append("defs"),f&&["id","idXAxis","idYAxis","idGrid"].forEach(function(t){P(this,o),s.appendClip(h.defs,l.clip[t])}.bind(this)),s.generateDataLabelBackgroundColorFilter(),b&&s.patterns.forEach(function(t){var e=this;return P(this,o),h.defs.append(function(){return P(this,e),t.node}.bind(this))}.bind(this))),s.updateSvgSize(),s.bindResize();var _,b=h.svg.append("g").classed(ht.main,!0).attr("transform",g?null:s.getTranslate("main"));h.main=b,u.subchart_show&&s.initSubchart(),u.tooltip_show&&s.initTooltip(),u.title_text&&s.initTitle(),!g&&u.legend_show&&s.initLegend(),u.data_empty_label_text&&b.append("text").attr("class",Pt.text+" "+ht.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),f&&(u.regions.length&&s.initRegion(),u.clipPath||s.axis.init()),b.append("g").classed(ht.chart,!0).attr("clip-path",f?l.clip.path:null),s.callPluginHook("$init"),s.initChartElements(),f&&(p&&null!=s.initEventRect&&s.initEventRect(),s.initGrid(),u.clipPath&&null!=(_=s.axis)&&_.init()),s.updateTargets(s.data.targets),s.updateDimension(),M(u.oninit,s.api),s.setBackground(),s.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),(u.data_onmin||u.data_onmax)&&(_=s.getMinMaxData(),M(u.data_onmin,s.api,_.min),M(u.data_onmax,s.api,_.max)),u.tooltip_show&&s.initShowTooltip(),l.rendered=!0},e.initChartElements=function(){var n=this,i=this,t=i.state,e=t.hasAxis,r=t.hasRadar,t=t.hasTreemap,a=[];e?(e=["bar","bubble","candlestick","line"],i.config.bar_front&&e.push(e.shift()),e.forEach(function(t){P(this,n);var e=W(t);("line"===t&&i.hasTypeOf(e)||i.hasType(t))&&a.push(e)}.bind(this))):t?a.push("Treemap"):(t=i.hasType("polar"),r||a.push("Arc","Pie"),i.hasType("gauge")?a.push("Gauge"):r?a.push("Radar"):t&&a.push("Polar")),a.forEach(function(t){P(this,n),i["init"+t]()}.bind(this)),R(i.config.data_labels)&&!i.hasArcType(null,["radar"])&&i.initText()},e.setChartElements=function(){var t=this.$el,e=t.chart,n=t.svg,i=t.defs,r=t.main,a=t.tooltip,o=t.legend,s=t.title,u=t.grid,c=t.needle,l=t.arcs,h=t.circle,d=t.bar,f=t.candlestick,g=t.line,p=t.area,t=t.text;this.api.$={chart:e,svg:n,defs:i,main:r,tooltip:a,legend:o,title:s,grid:u,arc:l,circles:h,bar:{bars:d},candlestick:f,line:{lines:g,areas:p},needle:c,text:{texts:t}}},e.setBackground=function(){var t=this.config.background,e=this.state,n=this.$el.svg;R(t)&&(n=n.select("g").insert(t.imgUrl?"image":"rect",":first-child"),t.imgUrl?n.attr("href",t.imgUrl):t.color&&n.style("fill",t.color).attr("clip-path",e.clip.path),n.attr("class",t.class||null).attr("width","100%").attr("height","100%"))},e.updateTargets=function(e){var n=this,i=this,t=i.state,r=t.hasAxis,a=t.hasRadar,t=t.hasTreemap,o=function(t){return P(this,n),i["updateTargetsFor"+t](e.filter(i["is"+t+"Type"].bind(i)))}.bind(this);i.updateTargetsForText(e),r?(["bar","candlestick","line"].forEach(function(t){P(this,n);var e=W(t);("line"===t&&i.hasTypeOf(e)||i.hasType(t))&&o(e)}.bind(this)),i.updateTargetsForSubchart&&i.updateTargetsForSubchart(e)):i.hasArcType(e)?(r="Arc",a?r="Radar":i.hasType("polar")&&(r="Polar"),o(r)):t&&o("Treemap");t=i.hasType("bubble")||i.hasType("scatter");t&&(null==i.updateTargetForCircle||i.updateTargetForCircle()),i.filterTargetsToShowAtInit(t)},e.filterTargetsToShowAtInit=function(t){var e=this,n=this,i=n.$el.svg,r=n.$T,a="."+ht.target;(t=void 0===t?!1:t)&&(a+=", ."+bt.chartCircles+" > ."+bt.circles),r(i.selectAll(a).filter(function(t){return P(this,e),n.isTargetToShow(t.id)}.bind(this))).style("opacity",null)},e.getWithOption=function(n){var i=this,r={Dimension:!0,EventRect:!0,Legend:!1,Subchart:!0,Transform:!1,Transition:!0,TrimXDomain:!0,UpdateXAxis:"UpdateXDomain",UpdateXDomain:!1,UpdateOrgXDomain:!1,TransitionForExit:"Transition",TransitionForAxis:"Transition",Y:!0};return Object.keys(r).forEach(function(t){P(this,i);var e=r[t];b(e)&&(e=r[e]),r[t]=A(n,"with"+t,e)}.bind(this)),r},e.initialOpacity=function(t){var e=this.state.withoutFadeIn;return null!==this.getBaseValue(t)&&e[t.id]?null:"0"},e.bindResize=function(){var e=this,t=this,n=t.config,i=t.state,r=function(e){var n,i=this,r=[],a=function(){var t=this;a.clear(),!1===e?o(function(){var e=this;P(this,t),r.forEach(function(t){return P(this,e),t()}.bind(this))}.bind(this),{timeout:200}):n=le(function(){var e=this;P(this,t),r.forEach(function(t){return P(this,e),t()}.bind(this))}.bind(this),N(e)?e:200)};return a.clear=function(){P(this,i),n&&(he(n),n=null)}.bind(this),a.add=function(t){return P(this,i),r.push(t)}.bind(this),a.remove=function(t){return P(this,i),r.splice(r.indexOf(t),1)}.bind(this),a}(n.resize_timer),a=[];a.push(function(){return P(this,e),M(n.onresize,t.api)}.bind(this)),n.resize_auto&&a.push(function(){P(this,e),i.resizing=!0,n.legend_show&&(t.updateSizes(),t.updateLegend()),t.api.flush(!1)}.bind(this)),a.push(function(){P(this,e),M(n.onresized,t.api),i.resizing=!1}.bind(this)),a.forEach(function(t){return P(this,e),r.add(t)}.bind(this)),t.resizeFunction=r,m.addEventListener("resize",t.resizeFunction=r)},e.callPluginHook=function(e){for(var n=this,t=arguments.length,i=Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.config.plugins.forEach(function(t){P(this,n),"$beforeInit"===e&&(t.$$=this).api.plugins.push(t),t[e].apply(t,i)}.bind(this))},t}();q(Je.prototype,[Te,Ae,Se,{categoryName:function(t){var e=this.config.axis_x_categories;return t<(null==e?void 0:e.length)?e[t]:t}},Ce,Pe,Le,Ee,ze,$e,Be,je,Ge,Ve,Ue,qe,Ze,t,i,a]);Pe={resize:function(t){var e=this.internal,n=e.config,i=e.state;i.rendered&&(n.size_width=t?t.width:null,n.size_height=t?t.height:null,i.resizing=!0,this.flush(!1),e.resizeFunction())},flush:function(t){var e,n=this.internal,i=n.state,r=n.$el.zoomResetBtn;i.rendered?(i.resizing?null==(e=n.brush)||e.updateResize():null==(e=n.axis)||e.setOrient(),null==r||r.style("display","none"),n.scale.zoom=null,t?n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):n.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!i.resizing&&n.brush&&(n.brush.getSelection().call(n.brush.move),n.unselectRect())):n.initToRender(!0)},destroy:function(){var n=this,i=this.internal,t=i.$el,e=t.chart,r=t.style,t=t.svg;if(R(i))for(var a in i.callPluginHook("$willDestroy"),i.charts.splice(i.charts.indexOf(this),1),i.unbindAllEvents(),t.select("*").interrupt(),i.resizeFunction.clear(),m.removeEventListener("resize",i.resizeFunction),e.classed("bb",!1).style("position",null).selectChildren().remove(),r&&r.parentNode.removeChild(r),Object.keys(this).forEach(function(t){var e=this;P(this,n),"internal"===t&&Object.keys(i).forEach(function(t){P(this,e),i[t]=null}.bind(this)),this[t]=null,delete this[t]}.bind(this)),this)this[a]=function(){P(this,n)}.bind(this);return null},config:function(t,e,n){var i,r=this.internal,a=r.config,o=r.state,r=null==t?void 0:t.replace(/\./g,"_");return t&&r in a?I(e)?(i=a[r]=e,n&&this.flush()):i=a[r]:0!==arguments.length&&!T(t)||(i=o.orgConfig),i}},Le=function(t){var i=this,e=this.internal.data.targets;if(z(t))return e;var r=$(t)?t:[t];return e.filter(function(e){var n=this;return P(this,i),r.some(function(t){return P(this,n),t===e.id}.bind(this))}.bind(this))};q(Le,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,n){var i=this;void 0===n&&(n=!0);var r=null;return t&&(t=this.data(t),$(t)&&(r=[],t.forEach(function(t){var e=this;P(this,i);t=t.values.map(function(t){return P(this,e),t.value}.bind(this));n?r=r.concat(t):r.push(t)}.bind(this)))),r},names:function(t){return this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var Ee={data:Le},Ke=function(t){var n=this;return P(this,void 0),null==m.btoa?void 0:m.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return P(this,n),String.fromCharCode(+("0x"+e))}.bind(this)))}.bind(void 0);function Qe(t,e,n){var i=this,r=e||n,a=r.width,o=r.height,s=new XMLSerializer,u=t.cloneNode(!0),r=function(t){var i=this,r=[];return t.forEach(function(e){P(this,i);try{e.cssRules&&e.cssRules.length&&(r=r.concat(Z(e.cssRules)))}catch(t){var n;null==(n=m.console)||n.warn("Error while reading rules from "+e.href+": "+t.toString())}}.bind(this)),r}(Z(v.styleSheets)).filter(function(t){return P(this,i),t.cssText}.bind(this)).map(function(t){return P(this,i),t.cssText}.bind(this));u.setAttribute("xmlns",L.namespaces.xhtml),u.style.margin="0",u.style.padding="0",e.preserveFontStyle&&u.querySelectorAll("text").forEach(function(t){P(this,i),t.innerHTML=""}.bind(this));t=s.serializeToString(u),u=v.createElement("style");u.appendChild(v.createTextNode(r.join("\n")));u=s.serializeToString(u),t=('<svg xmlns="'+L.namespaces.svg+'" width="'+a+'" height="'+o+'" \n\t\tviewBox="0 0 '+n.width+" "+n.height+'" \n\t\tpreserveAspectRatio="'+(!1===(null==e?void 0:e.preserveAspectRatio)?"none":"xMinYMid meet")+'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t'+u+"\n\t\t\t\t"+t.replace(/(url\()[^#]+/g,"$1")+"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,"+Ke(t)}function tn(t){var n=this,e=t.getBoundingClientRect(),y=e.left,x=e.top,i=function(t){return P(this,n),t.textContent||t.childElementCount}.bind(this),r=[];return Z(t.querySelectorAll("text")).filter(i).forEach(function(t){var _=this;P(this,n);var e=function(t){P(this,_);var e,n,i,r,a,o,s,u,c,l,h,d=m.getComputedStyle(t),f=d.fill,g=d.fontFamily,p=d.fontSize,v=d.textAnchor,b=d.transform,e=(e=t,i=(n={left:y,top:x}).top,r=n.left,a=(l=e.getBBox()).x,o=l.y,s=(h=e.getScreenCTM()).a,u=h.b,c=h.c,d=h.d,n=h.e,l=h.f,e=(h=e.getBoundingClientRect()).width,h=h.height,{x:s*a+c*o+n-r,y:u*a+d*o+l-i+(h-Math.round(h/4)),width:e,height:h});return(h={})[t.textContent]={x:e.x,y:e.y,width:e.width,height:e.height,fill:f,fontFamily:g,fontSize:p,textAnchor:v,transform:b},h}.bind(this);if(1<t.childElementCount)return Z(t.querySelectorAll("tspan")).filter(i).forEach(function(t){P(this,_),r.push(e(t))}.bind(this)),[];r.push(e(t))}.bind(this)),r}function en(t,e,n){var i=this,r=this.internal,a=r.mapToTargetIds(e),o=r.state.hiddenTargetIds.map(function(t){return P(this,i),-1<a.indexOf(t)&&t}.bind(this)).filter(Boolean);r.state.toggling=!0,r[(t?"remove":"add")+"HiddenTargetIds"](a);var s=r.$el.svg.selectAll(r.selectorTargets(a)),u=t?null:"0";t&&o.length&&(s.style("display",null),M(r.config.data_onshown,this,o)),r.$T(s).style("opacity",u,"important").call(F,function(){P(this,i),t||0!==o.length||(s.style("display","none"),M(r.config.data_onhidden,this,a)),s.style("opacity",u)}.bind(this)),n.withLegend&&r[(t?"show":"hide")+"Legend"](a),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.state.toggling=!1}var nn=function t(e){this.plugins=[],this.internal=void 0;var n=new Je(this);this.internal=n,function a(o,s,u){var c=this;Object.keys(o).forEach(function(t){P(this,c);var e=E(o[t]),n=s!==u,i=R(o[t]),r=i&&0<Object.keys(o[t]).length;s[t]=e&&(!n&&r||n)?o[t].bind(u):i&&!e?{}:o[t],r&&a(o[t],s[t],u)}.bind(this))}(t.prototype,this,this),function(e){var n,i,r,a=this,o=this.config,s=function(){P(this,a);var t=i.shift();return t&&n&&w(n)&&t in n?(n=n[t],s()):t?void 0:n}.bind(this);Object.keys(o).forEach(function(t){P(this,a),n=e,i=t.split("_"),r=s(),I(r)&&(o[t]=r)}.bind(this)),this.api&&(this.state.orgConfig=e)}.call(n,e),n.beforeInit(),n.init()};function rn(t,n,e){var i=this,r=t.config,a=function(t,e){P(this,i);e=N(e)?e:!1===e?void 0:null;null!==e&&(r["axis_"+t+"_"+n]=e)}.bind(this);I(e)&&(w(e)?Object.keys(e).forEach(function(t){P(this,i),a(t,e[t])}.bind(this)):!N(e)&&!1!==e||["y","y2"].forEach(function(t){P(this,i),a(t,e)}.bind(this)),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function an(t,e){t=t.config;return{x:t["axis_x_"+e],y:t["axis_y_"+e],y2:t["axis_y2_"+e]}}q(nn.prototype,[Pe,{color:function(t){return this.internal.color(t)}},Ee,{export:function(t,n){var i,r=this,e=this.internal,a=e.state,o=e.$el,e=o.chart,o=o.svg,a=a.current,s=a.width,u=a.height,c=tt({width:s,height:u,preserveAspectRatio:!0,preserveFontStyle:!1,mimeType:"image/png"},t),e=Qe(e.node(),c,{width:s,height:u}),l=c.preserveFontStyle?tn(o.node()):[];return n&&E(n)&&((i=new Image).crossOrigin="Anonymous",i.onload=function(){P(this,r);var t=v.createElement("canvas"),e=t.getContext("2d");t.width=c.width||s,t.height=c.height||u,e.drawImage(i,0,0),l.length&&(function(d,t){var e=this;t.forEach(function(l){var h=this;P(this,e),Object.keys(l).forEach(function(t){var e=this;P(this,h);var n=l[t],i=n.x,r=n.y,a=n.width,o=n.height,s=n.fill,u=n.fontFamily,c=n.fontSize,n=n.transform;d.save(),d.font=c+" "+u,d.fillStyle=s,"none"===n?d.fillText(t,i,r):((n=n.replace(/(matrix|\(|\))/g,"").split(",")).splice(4).every(function(t){return P(this,e),0==+t}.bind(this))?(n.push(i+a-a/4),n.push(r-o+o/3)):(n.push(i),n.push(r)),d.transform.apply(d,n),d.fillText(t,0,0)),d.restore()}.bind(this))}.bind(this))}(e,l),l.length=0),n.bind(this)(t.toDataURL(c.mimeType))}.bind(this),i.src=e),e}},{focus:function(t){var e=this,n=this.internal,i=n.state,r=n.mapToTargetIds(t),a=n.$el.svg.selectAll(n.selectorTargets(r.filter(n.isTargetToShow,n)));this.revert(),this.defocus(),a.classed(At.focused,!0).classed(At.defocused,!1),n.hasArcType()&&!i.hasRadar&&(n.expandArc(r),n.hasType("gauge")&&n.markOverlapped(t,n,"."+xt.gaugeValue)),n.toggleFocusLegend(r,!0),i.focusedTargetIds=r,i.defocusedTargetIds=i.defocusedTargetIds.filter(function(t){return P(this,e),r.indexOf(t)<0}.bind(this))},defocus:function(t){var e=this,n=this.internal,i=n.state,r=n.mapToTargetIds(t);n.$el.svg.selectAll(n.selectorTargets(r.filter(n.isTargetToShow,n))).classed(At.focused,!1).classed(At.defocused,!0),n.hasArcType(null,["polar"])&&(n.unexpandArc(r),n.hasType("gauge")&&n.undoMarkOverlapped(n,"."+xt.gaugeValue)),n.toggleFocusLegend(r,!1),i.focusedTargetIds=i.focusedTargetIds.filter(function(t){return P(this,e),r.indexOf(t)<0}.bind(this)),i.defocusedTargetIds=r},revert:function(t){var e=this.internal,n=e.config,i=e.state,r=e.$el,t=e.mapToTargetIds(t);r.svg.selectAll(e.selectorTargets(t)).classed(At.focused,!1).classed(At.defocused,!1),e.hasArcType(null,["polar"])&&e.unexpandArc(t),n.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),r.legend.selectAll(e.selectorLegends(t)).filter(function(){return(0,L.select)(this).classed(At.legendItemFocused)}).classed(At.legendItemFocused,!1)),i.focusedTargetIds=[],i.defocusedTargetIds=[]}},{legend:{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}}},{load:function(e){var n=this,i=this.internal,r=i.config;e.xs&&i.addXs(e.xs),"names"in e&&this.data.names(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){P(this,n),r.data_classes[t]=e.classes[t]}.bind(this)),"categories"in e&&i.axis.isCategorized()&&(r.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){P(this,n),r.data_axes[t]=e.axes[t]}.bind(this)),"colors"in e&&Object.keys(e.colors).forEach(function(t){P(this,n),r.data_colors[t]=e.colors[t]}.bind(this)),"unload"in e&&!1!==e.unload?i.unload(i.mapToTargetIds(!0===e.unload?null:e.unload),function(){var t=this;P(this,n),o(function(){return P(this,t),i.loadFromArgs(e)}.bind(this))}.bind(this)):i.loadFromArgs(e)},unload:function(t){var e=this,n=this.internal,i=t||{};T(i)&&this.tooltip.hide(),$(i)?i={ids:i}:b(i)&&(i={ids:[i]});var r=n.mapToTargetIds(i.ids);n.unload(r,function(){P(this,e),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.cache.remove(r),Me.call(n,i.done,i.resizeAfter)}.bind(this))}},{show:function(t,e){en.call(this,!0,t,e=void 0===e?{}:e)},hide:function(t,e){en.call(this,!1,t,e=void 0===e?{}:e)},toggle:function(t,e){var n=this;void 0===e&&(e={});var i=this.internal,r={show:[],hide:[]};i.mapToTargetIds(t).forEach(function(t){return P(this,n),r[i.isTargetToShow(t)?"hide":"show"].push(t)}.bind(this)),r.show.length&&this.show(r.show,e),r.hide.length&&setTimeout(function(){return P(this,n),this.hide(r.hide,e)}.bind(this),0)}},{tooltip:{show:function(t){var e,n,i,r=this,a=this.internal,o=a.$el,s=a.config,u=a.state,c=u.eventReceiver,l=u.hasTreemap,h=u.inputType;t.mouse&&(n=t.mouse),t.data?(i=t.data,u=null==(u=a.getYScaleById(i.id))?void 0:u(i.value),l&&i.id?c.rect=o.main.select(""+a.selectorTarget(i.id,void 0,"rect")):a.isMultipleX()?n=[a.xx(i),u]:(s.tooltip_grouped||(n=[0,u]),e=null!=(u=i.index)?u:a.hasArcType()&&i.id?null==(u=a.getArcElementByIdOrIndex(i.id))?void 0:u.datum().index:a.getIndexByX(i.x))):I(t.x)?e=a.getIndexByX(t.x):I(t.index)&&(e=t.index),("mouse"===h?["mouseover","mousemove"]:["touchstart"]).forEach(function(t){P(this,r),a.dispatchEvent(t,e,n)}.bind(this))},hide:function(){var e,n=this,i=this.internal,t=i.state.inputType,r=i.$el.tooltip,r=null==r?void 0:r.datum();r&&(e=JSON.parse(r.current)[0].index,("mouse"===t?["mouseout"]:["touchend"]).forEach(function(t){P(this,n),i.dispatchEvent(t,e)}.bind(this))),"touch"===t&&i.callOverOutForTouch(),i.hideTooltip(!0),null==i.hideGridFocus||i.hideGridFocus(),null==i.unexpandCircles||i.unexpandCircles(),null==i.expandBarTypeShapes||i.expandBarTypeShapes(!1)}}}]);ze={axis:{labels:function(e){var n,i=this,r=this.internal;return e&&(Object.keys(e).forEach(function(t){P(this,i),r.axis.setLabelText(t,e[t])}.bind(this)),r.axis.updateLabels()),["x","y","y2"].forEach(function(t){P(this,i);var e=r.axis.getLabelText(t);e&&((n=n||{})[t]=e)}.bind(this)),n},min:function(t){var e=this.internal;return O(t)||!1===t?rn(e,"min",t):an(e,"min")},max:function(t){var e=this.internal;return O(t)||!1===t?rn(e,"max",t):an(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};var n=t.min,t=t.max;I(t)&&e.max(t),I(n)&&e.min(n)}}};function on(t,e){var n=this.internal,i=n.config,r=i.transition_duration&&st(),e="grid_"+e+"_lines";return t&&(i[e]=t,n.updateGrid(),n.redrawGrid(r)),i[e]}function sn(t,e){return on.bind(this)(this.internal.config["grid_"+e+"_lines"].concat(t||[]),e)}function un(t,e){this.internal.removeGridLines(t,e)}$e=function(t){return on.bind(this)(t,"x")};q($e,{add:function(t){return sn.bind(this)(t,"x")},remove:function(t){return un.bind(this)(t,!0)}});Be=function(t){return on.bind(this)(t,"y")};q(Be,{add:function(t){return sn.bind(this)(t,"y")},remove:function(t){return un.bind(this)(t,!1)}});je={xgrids:$e,ygrids:Be},Ge={groups:function(t){var e=this.internal,n=e.config;return z(t)||(n.data_groups=t,e.redraw()),n.data_groups}};function cn(t,e){var n=this.internal,i=n.config,r=i.transition_duration&&st();return t?(i.regions=(e=void 0===e?!1:e)?i.regions.concat(t):t,n.updateRegion(),n.redrawRegion(r),e?i.regions:t):i.regions}Ve=function(t){return cn.bind(this)(t)};q(Ve,{add:function(t){return cn.bind(this)(t,!0)},remove:function(t){var i=this,e=this.internal,n=e.config,r=e.$T,t=t||{},a=A(t,"classes",[Ct.region]),e=e.$el.main.select("."+Ct.regions).selectAll(a.map(function(t){return P(this,i),"."+t}.bind(this)));return r(e).style("opacity","0").remove(),e=n.regions,Object.keys(t).length?(e=e.filter(function(t){var e=this;P(this,i);var n=!1;return!t.class||(t.class.split(" ").forEach(function(t){P(this,e),0<=a.indexOf(t)&&(n=!0)}.bind(this)),!n)}.bind(this)),n.regions=e):n.regions=[],e}});var Ue={regions:Ve},qe={x:function(t){var e=this.internal,n=e.axis,i=e.data,n=n.isCustomX()&&n.isCategorized();return $(t)&&(n?this.categories(t):(e.updateTargetX(i.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),n?this.categories():i.xs},xs:function(t){var e=this.internal;return D(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},Ze={flow:function(d){var f,e=this,g=this.internal;(d.json||d.rows||d.columns)&&g.convertData(d,function(t){P(this,e),f=t,function(){var t,e,n,r,i,a,o,s,u,c=this,l=0,h=0;!g.state.redrawing&&f&&st()&&(r=[],i=g.getMaxDataCount(),a=g.convertDataToTargets(f,!0),o=g.axis.isTimeSeries(),g.data.targets.forEach(function(t){P(this,c);for(var e=!1,n=0;n<a.length;n++)if(t.id===a[n].id){e=!0,t.values[t.values.length-1]&&(h=t.values[t.values.length-1].index+1),l=a[n].values.length;for(var i=0;i<l;i++)a[n].values[i].index=h+i,o||(a[n].values[i].x=h+i);t.values=t.values.concat(a[n].values),a.splice(n,1);break}e||r.push(t.id)}.bind(this)),g.data.targets.forEach(function(t){P(this,c);for(var e=0;e<r.length;e++)if(t.id===r[e]){h=t.values[t.values.length-1].index+1;for(var n=0;n<l;n++)t.values.push({id:t.id,index:h+n,x:o?g.getOtherTargetX(h+n):h+n,value:null})}}.bind(this)),g.data.targets.length&&a.forEach(function(t){var e=this;P(this,c);for(var n=[],i=g.data.targets[0].values[0].index;i<h;i++)n.push({id:t.id,index:i,x:o?g.getOtherTargetX(i):i,value:null});t.values.forEach(function(t){P(this,e),t.index+=h,o||(t.x+=h)}.bind(this)),t.values=n.concat(t.values)}.bind(this)),g.data.targets=g.data.targets.concat(a),s=g.data.targets[0],u=s.values[0],I(d.to)?(l=0,n=o?ot.call(g,d.to):d.to,s.values.forEach(function(t){P(this,c),t.x<n&&l++}.bind(this))):I(d.length)&&(l=d.length),i?1===i&&o&&(e=(s.values[s.values.length-1].x-u.x)/2,t=[new Date(+u.x-e),new Date(+u.x+e)]):(e=o?1<s.values.length?s.values[s.values.length-1].x-u.x:u.x-g.getXDomain(g.data.targets)[0]:1,t=[u.x-e,u.x]),t&&g.updateXDomain(null,!0,!0,!1,t),g.updateTargets(g.data.targets),g.redraw({flow:{index:u.index,length:l,duration:O(d.duration)?d.duration:g.config.transition_duration,done:d.done,orgDataCount:i},withLegend:!0,withTransition:1<i,withTrimXDomain:!1,withUpdateXAxis:!0}))}()}.bind(this))}},ln=qi(10),hn=function(){function t(t){this.owner=void 0,this.config=void 0,this.scale=void 0;var e=Xe(),n=t.config,i=t.params;this.owner=t,this.config=n,this.scale=e,!n.noTransition&&i.config.transition_duration||(n.withoutTransition=!0),n.range=this.scaleExtent((i.orgXScale||e).range())}t.getSizeFor1Char=function(t){var r=this,a={w:5.5,h:11.5};return t.empty()||t.select("text").text("0").call(function(t){P(this,r);try{var e=t.node().getBBox(),n=e.width,i=e.height;n&&i&&(a.w=n,a.h=i)}catch(t){}finally{t.text("")}}.bind(this)),this.getSizeFor1Char=function(){return P(this,r),a}.bind(this),a};var e=t.prototype;return e.getTickTransformSetter=function(t){var i=this,e=this.config,r=("x"===t?function(t){return P(this,i),"translate("+(t+e.tickOffset)+",0)"}:function(t){return P(this,i),"translate(0,"+t+")"}).bind(this);return function(t,e){var n=this;P(this,i),t.attr("transform",function(t){return P(this,n),O(t)?r(Math.ceil(e(t))):null}.bind(this))}.bind(this)},e.scaleExtent=function(t){var e=t[0],t=t[t.length-1];return e<t?[e,t]:[t,e]},e.generateTicks=function(t,e){var n=this,i=this.owner.params.tickStepSize,r=t.domain(),a=r[0],o=r[1],s=[];if(e&&i)for(var u=Math.round(a);u<=o;)s.push(u),u+=i;else if(t.ticks){e=this.config.tickArguments;if("log"!==t.type||e)s=t.ticks.apply(t,this.config.tickArguments||[]);else{for(var c=Xe("_log").domain([0<a?a:1,o]).range(t.range()),s=c.ticks(),l=o.toFixed().length;15<s.length;l--)s=c.ticks(l);s.splice(0,1,a),s.splice(s.length-1,1,o)}s=s.map(function(t){return P(this,n),b(t)&&N(t)&&!isNaN(t)&&Math.round(10*t)/10||t}.bind(this))}else{for(var h=Math.ceil(a);h<o;h++)s.push(h);0<s.length&&0<s[0]&&s.unshift(s[0]-(s[1]-s[0]))}return s},e.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},e.textFormatted=function(t){var e=this.config.tickFormat,t=/\d+\.\d+0{5,}\d$/.test(t)?+(t+"").replace(/0+\d$/,""):t,t=e?e(t):t;return I(t)?t:""},e.transitionise=function(t){var e=this.config,n=t;if(e.withoutTransition)n=t.interrupt();else if(e.transition||!this.owner.params.noTransition)try{n=t.transition(e.transition)}catch(t){}return n},t}(),dn=function(){function t(t){void 0===t&&(t={}),this.helper=void 0,this.config=void 0,this.params=void 0,this.g=void 0,this.generatedTicks=void 0;var e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.config=e,this.params=t,this.helper=new hn(this)}var e=t.prototype;return e.create=function(t){var f=this,g=f.config,p=f.helper,v=f.params,b=p.scale,_=g.orient,y=this.splitTickText.bind(f),x=/^(left|right)$/.test(_),m=/^(top|bottom)$/.test(_),w=p.getTickTransformSetter(m?"x":"y"),T=w===p.axisX?"y":"x",A=/^(top|left)$/.test(_)?-1:1,M=v.tickTextRotate;this.config.range=b.rangeExtent?b.rangeExtent():p.scaleExtent((v.orgXScale||b).range());var S,k=g.innerTickSize,E=g.tickLength,C=g.range,e=v.id,R=e&&/^(x|y|y2)$/.test(e)?v.config["axis_"+e+"_tick_text_position"]:{x:0,y:0},n="subX"===e?"subchart_axis_x":"axis_"+e,e=v.config[n+"_show"],D=!!e&&v.config[n+"_tick_show"],O=!!e&&v.config[n+"_tick_text_show"];t.each(function(){var i=this,t=(0,L.select)(this),e=this.__chart__||b,r=p.copyScale();S=t,this.__chart__=r,g.tickOffset=v.isCategory?Math.ceil((r(1)-r(0))/2):0;var a,n,o,s,u,c,l,h,d=t.selectAll(".domain").data([0]);d.enter().append("path").attr("class","domain").merge(d).attr("d",function(){P(this,i);var t=g.outerTickSize*A;return m?"M"+C[0]+","+t+"V0H"+C[1]+"V"+t:"M"+t+","+C[0]+"H0V"+C[1]+"H"+t}.bind(this)),(D||O)&&(a=g.tickValues||p.generateTicks(r,x),f.generatedTicks=a,n=(s=t.selectAll(".tick").data(a,r)).enter().insert("g",".domain").attr("class","tick"),o=s.exit().remove(),s=n.merge(s),D&&n.append("line"),O&&n.append("text"),u=hn.getSizeFor1Char(s),c=[],(d=s.select("text").selectAll("tspan").data(function(t,e){var n=this;P(this,i);t=v.tickMultiline?y(t,r,a,x,u.w):$(p.textFormatted(t))?p.textFormatted(t).concat():[p.textFormatted(t)];return c[e]=t.length,t.map(function(t){return P(this,n),{index:e,splitted:t}}.bind(this))}.bind(this))).exit().remove(),(d=d.enter().append("tspan").merge(d).text(function(t){return P(this,i),t.splitted}.bind(this))).attr("x",m?0:E*A).attr("dx",function(){P(this,i);var t=0;return(t=/(top|bottom)/.test(_)&&M?8*Math.sin(Math.PI*(M/180))*("top"===_?-1:1):t)+(R.x||0)}.bind(this)()).attr("dy",function(t,e){P(this,i);var n=0;return"top"!==_&&(n=u.h,0===e&&(n=x?-((c[t.index]-1)*(u.h/2)-3):0===R.y?".71em":0)),N(n)&&R.y?n+R.y:n||".71em"}.bind(this)),t=s.select("line"),d=s.select("text"),n.select("line").attr(T+"2",k*A),n.select("text").attr(T,E*A),f.setTickLineTextPosition(t,d),v.tickTitle&&((t=d.select("title")).empty()?d.append("title"):t).text(function(t){return P(this,i),v.tickTitle[t]}.bind(this)),r.bandwidth?(h=(l=r).bandwidth()/2,r=e=function(t){return P(this,i),l(t)+h}.bind(this)):e.bandwidth?e=r:w(o,r),s=v.owner.state.flowing?p.transitionise(s):v.owner.$T(s),w(n,e),w(s.style("opacity",null),r))}),this.g=S},e.getGeneratedTicks=function(t){var n,i=this,e=(null==(r=this.generatedTicks)?void 0:r.length)-1,r=this.generatedTicks;return t<e&&(n=Math.round(e/t+.1),r=this.generatedTicks.map(function(t,e){return P(this,i),e%n==0?t:null}.bind(this)).filter(function(t){return P(this,i),null!==t}.bind(this)).splice(0,t)),r},e.getTickXY=function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e},e.getTickSize=function(t){var e=this.helper.scale,n=this.config,i=n.innerTickSize,r=n.range,n=e(t)+(n.tickCentered?0:n.tickOffset);return r[0]<n&&n<r[1]?i:0},e.setTickLineTextPosition=function(t,e){var n=this,i=this.getTickXY(),r=this.config,a=r.innerTickSize,o=r.orient,s=r.tickLength,u=r.tickOffset,c=this.params.tickTextRotate,l=function(t){P(this,n);var e=["start","end"];return"top"===o&&e.reverse(),t?e[0<t?0:1]:"middle"}.bind(this),h=function(t){return P(this,n),t?"rotate("+t+")":null}.bind(this),d=function(t){return P(this,n),t?11.5-2.5*(t/("bottom"===o?15:23))*(0<t?1:-1):s}.bind(this);switch(o){case"bottom":t.attr("x1",i.x).attr("x2",i.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",d(c)).style("text-anchor",l(c)).attr("transform",h(c));break;case"top":t.attr("x2",0).attr("y2",-a),e.attr("x",0).attr("y",2*-d(c)).style("text-anchor",l(c)).attr("transform",h(c));break;case"left":t.attr("x2",-a).attr("y1",i.y).attr("y2",i.y),e.attr("x",-s).attr("y",u).style("text-anchor","end");break;case"right":t.attr("x2",a).attr("y2",0),e.attr("x",s).attr("y",0).style("text-anchor","start")}},e.splitTickText=function(t,e,n,i,o){var r=this.params,a=this.helper.textFormatted(t),t=b(a)&&-1<a.indexOf("\n")?a.split("\n"):[];if(t.length)return t;if($(a))return a;var s=r.tickWidth;return(!s||s<=0)&&(s=i?95:r.isCategory?Math.ceil(r.isInverted?e(n[0])-e(n[1]):e(n[1])-e(n[0]))-12:110),function t(e,n){for(var i,r,a=1;a<n.length;a++)if(" "===n.charAt(a)&&(i=a),r=n.substr(0,a+1),r=o*r.length,s<r)return t(e.concat(n.substr(0,i||a)),n.slice(i?i+1:a));return e.concat(n)}(t,a+"")},e.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},e.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",this):this.config.orient},e.tickFormat=function(t){var e=this.config;return arguments.length?(e.tickFormat=t,this):e.tickFormat},e.tickCentered=function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered},e.tickOffset=function(){return this.config.tickOffset},e.tickInterval=function(t){var e,i=this,n=this.config,r=n.outerTickSize,a=n.tickOffset,n=n.tickValues;return(e=this.params.isCategory?2*a:(e=(this.g.select("path.domain").node().getTotalLength()-2*r)/(t||this.g.selectAll("line").size()),n=n?n.map(function(t,e,n){P(this,i);e+=1;return e<n.length?this.helper.scale(n[e])-this.helper.scale(t):null}.bind(this)).filter(Boolean):[],Math.min.apply(Math,n.concat([e]))))===1/0?0:e},e.ticks=function(){for(var t=this.config,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.length?(t.tickArguments=Z(n),this):t.tickArguments},e.tickCulling=function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling},e.tickValues=function(t){var e=this,n=this.config;if(E(t))n.tickValues=function(){return P(this,e),t(this.helper.scale.domain())}.bind(this);else{if(!arguments.length)return n.tickValues;n.tickValues=t}return this},e.setTransition=function(t){return this.config.transition=t,this},t}(),t={getAxisInstance:function(){return this.axis||new fn(this)}},fn=function(){function t(t){this.owner=void 0,this.x=void 0,this.subX=void 0,this.y=void 0,this.y2=void 0,this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}var e=t.prototype;return e.getAxisClassName=function(t){return gt.axis+" "+gt["axis"+W(t)]},e.isHorizontal=function(t,e){t=t.config.axis_rotated;return e?t:!t},e.isCategorized=function(){var t=this.owner,e=t.config,t=t.state;return 0<=e.axis_x_type.indexOf("category")||t.hasRadar},e.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||R(t.data_xs))},e.isTimeSeries=function(t){return"timeseries"===this.owner.config["axis_"+(t=void 0===t?"x":t)+"_type"]},e.isLog=function(t){return"log"===this.owner.config["axis_"+(t=void 0===t?"x":t)+"_type"]},e.isTimeSeriesY=function(){return this.isTimeSeries("y")},e.getAxisType=function(t){var e="linear";return this.isTimeSeries(t=void 0===t?"x":t)?e=this.owner.config.axis_x_localtime?"time":"utc":this.isLog(t)&&(e="log"),e},e.init=function(){var r=this,a=this.owner,o=a.config,t=a.$el,s=t.main,u=t.axis,c=a.state.clip,l=o.axis_rotated,t=["x","y"];o.axis_y2_show&&t.push("y2"),t.forEach(function(e){var n=this;P(this,r);var t=this.getAxisClassName(e),i=gt["axis"+e.toUpperCase()+"Label"];u[e]=s.append("g").attr("class",t).attr("clip-path",function(){P(this,n);var t=null;return"x"===e?t=c.pathXAxis:"y"===e&&(t=c.pathYAxis),t}.bind(this)).attr("transform",a.getTranslate(e)).style("visibility",o["axis_"+e+"_show"]?null:"hidden"),u[e].append("text").attr("class",i).attr("transform",["rotate(-90)",null]["x"===e?+!l:+l]).style("text-anchor",function(){return P(this,n),this.textAnchorForAxisLabel(e)}.bind(this)),this.generateAxes(e)}.bind(this))},e.setOrient=function(){var t=this.owner.config,e=t.axis_rotated,n=t.axis_y_inner,t=t.axis_y2_inner;this.orient={x:e?"left":"bottom",y:e?n?"top":"bottom":n?"right":"left",y2:e?t?"bottom":"top":t?"left":"right",subX:e?"left":"bottom"}},e.generateAxes=function(r){var a,o=this,s=this.owner,t=s.config,u=[],e=t["axis_"+r+"_axes"],t=t.axis_rotated;"x"===r?a=t?ln.axisLeft:ln.axisBottom:"y"===r?a=t?ln.axisBottom:ln.axisLeft:"y2"===r&&(a=t?ln.axisTop:ln.axisRight),e.length&&e.forEach(function(t){var e=this;P(this,o);var n=t.tick||{},i=s.scale[r].copy();t.domain&&i.domain(t.domain),u.push(a(i).ticks(n.count).tickFormat(E(n.format)?n.format.bind(s.api):function(t){return P(this,e),t}.bind(this)).tickValues(n.values).tickSizeOuter(!1===n.outer?0:6))}.bind(this)),this.axesList[r]=u},e.updateAxes=function(){var t=this,h=this.owner,d=h.config,f=h.$el.main,g=h.$T;Object.keys(this.axesList).forEach(function(o){var s=this;P(this,t);var u=d["axis_"+o+"_axes"],c=h.scale[o].copy(),l=c.range();this.axesList[o].forEach(function(t,e){var n=this;P(this,s);var i=t.scale().range();l.every(function(t,e){return P(this,n),t===i[e]}.bind(this))||t.scale().range(l);var r=this.getAxisClassName(o)+"-"+(e+1),a=f.select("."+r.replace(/\s/,"."));a.empty()?a=f.append("g").attr("class",r).style("visibility",d["axis_"+o+"_show"]?null:"hidden").call(t):(u[e].domain&&c.domain(u[e].domain),g(a).call(t.scale(c))),a.attr("transform",h.getTranslate(o,e+1))}.bind(this))}.bind(this))},e.setAxis=function(t,e,n,i){var r=this.owner;"subX"!==t&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,e,n,!("x"!==t||!(r.scale.zoom||r.config.subchart_show||r.state.resizing))||i)},e.getAxis=function(t,e,n,i,r){var a,o=this,s=this.owner,u=s.config,c=/^(x|subX)$/.test(t),l=c?"x":t,h=c&&this.isCategorized(),d=this.orient[t],r=r?0:s.getAxisTickRotate(l);c?a="subX"===t?s.format.subXAxisTick:s.format.xAxisTick:(f=u["axis_"+t+"_tick_format"],E(f)&&(a=f.bind(s.api)));var f=this.tick[l],r=tt({outerTick:n,noTransition:i,config:u,id:t,tickTextRotate:r,owner:s},c&&{isCategory:h,isInverted:u.axis_x_inverted,tickMultiline:u.axis_x_tick_multiline,tickWidth:u.axis_x_tick_width,tickTitle:h&&u.axis_x_tick_tooltip&&s.api.categories(),orgXScale:s.scale.x});c||(r.tickStepSize=u["axis_"+l+"_tick_stepSize"]);var g,d=new dn(r).scale(c&&s.scale.zoom||e).orient(d);c&&this.isTimeSeries()&&f&&!E(f)?(g=ot.bind(s),f=f.map(function(t){return P(this,o),g(t)}.bind(this))):!c&&this.isTimeSeriesY()&&(d.ticks(u.axis_y_tick_time_value),f=null),f&&d.tickValues(f),d.tickFormat(a||!c&&s.isStackNormalized()&&function(t){return P(this,o),t+"%"}.bind(this)),h&&(d.tickCentered(u.axis_x_tick_centered),T(u.axis_x_tick_culling)&&(u.axis_x_tick_culling=!1));l=u["axis_"+l+"_tick_count"];return l&&d.ticks(l),d},e.updateXAxisTickValues=function(t,e){var n,i=this.owner,r=i.config,a=r.axis_x_tick_fit,r=r.axis_x_tick_count;return(a||r&&a)&&(n=i.mapTargetsToUniqueXs(t),this.isCategorized()&&r>n.length&&(r=n.length),n=this.generateTickValues(n,r,this.isTimeSeries())),e?e.tickValues(n):this.x&&(this.x.tickValues(n),null==(e=this.subX)||e.tickValues(n)),n},e.getId=function(t){var e=this.owner,n=e.config,e=e.scale,t=n.data_axes[t];return t=!t||!e[t]?"y":t},e.getXAxisTickFormat=function(t){var e,n=this,i=this.owner,r=i.config,a=i.format,o=t&&r.subchart_axis_x_tick_format||r.axis_x_tick_format,r=this.isTimeSeries(),s=this.isCategorized();return o?E(o)?e=o.bind(i.api):r&&(e=function(t){return P(this,n),t?a.axisTime(o)(t):""}.bind(this)):e=r?a.defaultAxisTime:s?i.categoryName:function(t){return P(this,n),t<0?t.toFixed(0):t}.bind(this),E(e)?function(t){return P(this,n),e.apply(i,s?[t,i.categoryName(t)]:[t])}.bind(this):e},e.getTickValues=function(t){var e=this.owner,n=e.config["axis_"+t+"_tick_values"],t=e[t+"Axis"];return(E(n)?n.call(e.api):n)||(t?t.tickValues():void 0)},e.getLabelOptionByAxisId=function(t){return this.owner.config["axis_"+t+"_label"]},e.getLabelText=function(t){t=this.getLabelOptionByAxisId(t);return b(t)?t:t?t.text:null},e.setLabelText=function(t,e){var n=this.owner.config,i=this.getLabelOptionByAxisId(t);b(i)?n["axis_"+t+"_label"]=e:i&&(i.text=e)},e.getLabelPosition=function(t,e){var n=this,i=this.owner.config.axis_rotated,t=this.getLabelOptionByAxisId(t),r=w(t)&&t.position?t.position:e[+!i],i=function(t){return P(this,n),!!~r.indexOf(t)}.bind(this);return{isInner:i("inner"),isOuter:i("outer"),isLeft:i("left"),isCenter:i("center"),isRight:i("right"),isTop:i("top"),isMiddle:i("middle"),isBottom:i("bottom")}},e.getAxisLabelPosition=function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])},e.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},e.xForAxisLabel=function(t){var e=this.owner,n=e.state,i=n.width,r=n.height,a=this.getAxisLabelPosition(t),n=a.isMiddle?-r/2:0;return this.isHorizontal(e,"x"!==t)?n=a.isLeft?0:a.isCenter?i/2:i:a.isBottom&&(n=-r),n},e.dxForAxisLabel=function(t){var e=this.owner,n=this.getAxisLabelPosition(t),i=n.isBottom?"0.5em":"0";return this.isHorizontal(e,"x"!==t)?i=n.isLeft?"0.5em":n.isRight?"-0.5em":"0":n.isTop&&(i="-0.5em"),i},e.textAnchorForAxisLabel=function(t){var e=this.owner,n=this.getAxisLabelPosition(t),i=n.isMiddle?"middle":"end";return this.isHorizontal(e,"x"!==t)?i=n.isLeft?"start":n.isCenter?"middle":"end":n.isBottom&&(i="start"),i},e.dyForAxisLabel=function(t){var e,n=this.owner,i=n.config,r=i.axis_rotated,a=this.getAxisLabelPosition(t).isInner,o=i["axis_"+t+"_tick_rotate"]?n.getHorizontalAxisHeight(t):0,s=this.getMaxTickWidth(t);return e="x"===t?(n=i.axis_x_height,r?a?"1.2em":-25-s:a?"-0.5em":n?n-10:o?o-10:"3em"):(e={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],r?a?e[0]:o?o*("y2"===t?-1:1)-e[1]:e[2]:a?e[3]:(e[4]+(i["axis_"+t+"_inner"]?0:s+e[4]))*("y"===t?-1:1))},e.getMaxTickWidth=function(t,e){var n=this,i=this.owner,r=i.config,a=i.state.current,o=i.$el,s=o.svg,u=o.chart,c=a.maxTickWidths[t],l=0;if(e||!r["axis_"+t+"_show"]||0<c.size&&0===i.filterTargetsToShow().length)return c.size;if(s){var h=/^y2?$/.test(t),o=i.filterTargetsToShow(i.data.targets),a=i.scale[t].copy().domain(i["get"+(h?"Y":"X")+"Domain"](o,t)),e=a.domain(),s=e[0]===e[1]&&e.every(function(t){return P(this,n),0<t}.bind(this)),i=$(c.domain)&&c.domain[0]===c.domain[1]&&c.domain.every(function(t){return P(this,n),0<t}.bind(this));if(s||i)return c.size;c.domain=e,h||c.ticks.splice(0);i=this.getAxis(t,a,!1,!1,!0),a=r["axis_"+t+"_tick_count"];!r["axis_"+t+"_tick_values"]&&a&&i.tickValues(this.generateTickValues(e,a,h?this.isTimeSeriesY():this.isTimeSeries())),h||this.updateXAxisTickValues(o,i);u=u.append("svg").style("visibility","hidden").style("position","fixed").style("top","0").style("left","0");i.create(u),u.selectAll("text").each(function(t,e){var n=this.getBoundingClientRect().width;l=Math.max(l,n),h||(c.ticks[e]=n)}),u.remove()}return 0<l&&(c.size=l),c.size},e.getXAxisTickTextY2Overflow=function(t){var e=this.owner,n=e.axis,i=e.config,r=e.state,a=e.getAxisTickRotate("x");if((n.isCategorized()||n.isTimeSeries())&&i.axis_x_tick_fit&&!i.axis_x_tick_culling&&!i.axis_x_tick_multiline&&0<a&&a<90){e=r.current.width-e.getCurrentPaddingLeft(),a=this.getXAxisTickMaxOverflow(a,e-t),t=Math.max(0,a)+t;return Math.min(t,e/2)}return 0},e.getXAxisTickMaxOverflow=function(t,e){for(var n=this.owner,i=n.axis,r=n.config,a=n.state,o=i.isTimeSeries(),s=a.current.maxTickWidths.x.ticks,u=s.length,i=a.axis.x.padding,c=i.left,l=i.right,h=0,d=u-(o&&r.axis_x_tick_fit?.5:0),f=0;f<u;f++){var g=f+1,p=Math.cos(Math.PI*t/180)*s[f],v=g-(o?1:.5)+c;v<=0||(v=(e-p)/v,h=Math.max(h,p-v/2-((d-g)*v+l*v)))}a=n.filterTargetsToShow(n.data.targets),i=0;return!o&&r.axis_x_tick_count<=a.length&&a[0].values.length&&(n=Xe(n.axis.getAxisType("x"),0,e-h).domain([-1*c,n.getXDomainMax(n.data.targets)+1+l]),i=Math.ceil((n(1)-n(0))/2)),h+i},e.updateLabels=function(i){var r=this,t=this.owner,e=t.$el.main,a=t.$T,o={x:e.select("."+gt.axisX+" ."+gt.axisXLabel),y:e.select("."+gt.axisY+" ."+gt.axisYLabel),y2:e.select("."+gt.axisY2+" ."+gt.axisY2Label)};Object.keys(o).filter(function(t){return P(this,r),!o[t].empty()}.bind(this)).forEach(function(t){var e=this;P(this,r);var n=o[t];a(n,i).attr("x",function(){return P(this,e),this.xForAxisLabel(t)}.bind(this)).attr("dx",function(){return P(this,e),this.dxForAxisLabel(t)}.bind(this)).attr("dy",function(){return P(this,e),this.dyForAxisLabel(t)}.bind(this)).text(function(){return P(this,e),this.getLabelText(t)}.bind(this))}.bind(this))},e.getPadding=function(t,e,n,i){t=N(t)?t:t[e];return O(t)?this.owner.convertPixelToScale(/(bottom|top)/.test(e)?"y":"x",t,i):n},e.generateTickValues=function(t,e,n){var i=this,r=t;if(e){e=E(e)?e():e;if(1===e)r=[t[0]];else if(2===e)r=[t[0],t[t.length-1]];else if(2<e){for(var a,o=this.isCategorized(),s=e-2,u=t[0],c=t[t.length-1],r=[u],l=0;l<s;l++)a=+u+(c-u)/(1+s)*(l+1),r.push(n?new Date(a):o?Math.round(a):a);r.push(c)}}return r=!n?r.sort(function(t,e){return P(this,i),t-e}.bind(this)):r},e.generateTransitions=function(e){var n=this,t=this.owner,i=t.$el.axis,r=t.$T,t=["x","y","y2","subX"].map(function(t){return P(this,n),r(i[t],e)}.bind(this));return{axisX:t[0],axisY:t[1],axisY2:t[2],axisSubX:t[3]}},e.redraw=function(i,t,r){var a=this,e=this.owner,o=e.config,s=e.$el,u=t?"0":null;["x","y","y2","subX"].forEach(function(t){P(this,a);var e=this[t],n=s.axis[t];e&&n&&(r||o.transition_duration||(e.config.withoutTransition=!0),n.style("opacity",u),e.create(i["axis"+W(t)]))}.bind(this)),this.updateAxes()},e.redrawAxis=function(a,t,e,n,i){var o,s=this,u=this.owner,c=u.config,l=u.scale,r=u.$el,h=!!l.zoom;!h&&this.isCategorized()&&0===a.length&&l.x.domain([0,r.axis.x.selectAll(".tick").size()]),l.x&&a.length?(h||u.updateXDomain(a,t.UpdateXDomain,t.UpdateOrgXDomain,t.TrimXDomain),c.axis_x_tick_values||this.updateXAxisTickValues(a)):this.x&&(this.x.tickValues([]),null==(h=this.subX)||h.tickValues([])),c.zoom_rescale&&!n&&(o=l.x.orgDomain()),["y","y2"].forEach(function(t){var e=this;P(this,s);var n,i="axis_"+t+"_",r=l[t];r&&(n=c[i+"tick_values"],i=c[i+"tick_count"],r.domain(u.getYDomain(a,t,o)),!n&&i&&(t=u.axis[t],r=r.domain(),t.tickValues(this.generateTickValues(r,r.every(function(t){return P(this,e),0===t}.bind(this))?1:i,this.isTimeSeriesY()))))}.bind(this)),this.redraw(e,u.hasArcType(),i),this.updateLabels(t.Transition),(t.UpdateXDomain||t.UpdateXAxis||t.Y)&&a.length&&this.setCulling(),t.Y&&(null==(t=l.subY)||t.domain(u.getYDomain(a,"y")),null==(t=l.subY2)||t.domain(u.getYDomain(a,"y2")))},e.setCulling=function(){var l=this,t=this.owner,h=t.config,e=t.state,d=e.clip,f=e.current,g=t.$el;["subX","x","y","y2"].forEach(function(t){P(this,l);var e=g.axis[t],n="axis_"+("subX"===t?"x":t)+"_tick_culling",i=h[n];if(e&&i){var r,e=e.selectAll(".tick"),a=et(e.data()),o=a.length,s=h[n+"_max"],u=h[n+"_lines"];if(o){for(var c=1;c<o;c++)if(o/c<s){r=c;break}e.each(function(t){var e=u?this.querySelector("text"):this;e&&(e.style.display=a.indexOf(t)%r?"none":null)})}else e.style("display",null);"x"===t&&(t=f.maxTickWidths.x.clipPath?d.pathXAxisTickTexts:null,g.svg.selectAll("."+gt.axisX+" .tick text").attr("clip-path",t))}}.bind(this))},t}(),i={initEventRect:function(){this.$el.main.select("."+ht.chart).append("g").attr("class",Tt.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t,n=this,e=this,i=e.config,r=e.state,a=e.$el,o=e.isMultipleX(),s=i.axis_x_inverted;a.eventRect?e.updateEventRect(a.eventRect,!0):e.data.targets.length&&(t=e.$el.main.select("."+Tt.eventRects).style("cursor",i.zoom_enabled&&"drag"!==i.zoom_type?i.axis_rotated?"ns-resize":"ew-resize":null).classed(Tt.eventRectsMultiple,o).classed(Tt.eventRectsSingle,!o).selectAll("."+Tt.eventRect).data([0]).enter().append("rect"),e.updateEventRect(t),o?e.generateEventRectsForMultipleXs(t):e.generateEventRectsForSingleX(t),t.call(e.getDraggableSelection()),a.eventRect=t,"touch"!==e.state.inputType||a.svg.on("touchstart.eventRect")||e.hasArcType()||e.bindTouchOnEventRect(),r.rendered&&e.updateEventRect(a.eventRect,!0)),o||(o=e.getMaxDataCountTarget(),i.data_xSort&&!s||o.sort(function(t,e){return P(this,n),s?e.x-t.x:t.x-e.x}.bind(this)),e.updateDataIndexByX(o),e.updateXs(o),null==e.updatePointClass||e.updatePointClass(!0),r.eventReceiver.data=o),e.updateEventRectData()},bindTouchOnEventRect:function(){var i,r=this,n=this,a=n.config,o=n.state,t=n.$el,e=t.eventRect,s=t.svg,u=function(t){var e;P(this,r),n.isMultipleX()?n.selectRectForMultipleXs(t):(e=n.getDataIndexFromEvent(o.event),n.callOverOutForTouch(e),-1===e?n.unselectRect():n.selectRectForSingle(t,e))}.bind(this),c=function(){P(this,r),n.unselectRect(),n.callOverOutForTouch()}.bind(this),t=a.interaction_inputType_touch.preventDefault,l=_(t)&&t||!1,h=!isNaN(t)&&t||null,d=function(t){P(this,r);var e=t.type,n=t.changedTouches[0]["client"+(a.axis_rotated?"Y":"X")];"touchstart"===e?l?t.preventDefault():null!==h&&(i=n):"touchmove"===e&&(l||!0===i||null!==h&&Math.abs(i-n)>=h)&&(i=!0,t.preventDefault())}.bind(this);e.on("touchstart",function(t){P(this,r),o.event=t,n.updateEventRect()}.bind(this)).on("touchstart.eventRect touchmove.eventRect",function(t){P(this,r),o.event=t,!e.empty()&&e.classed(Tt.eventRect)?o.dragging||o.flowing||n.hasArcType()||1<t.touches.length||(d(t),u(e.node())):c()}.bind(this),!0).on("touchend.eventRect",function(t){P(this,r),o.event=t,!e.empty()&&e.classed(Tt.eventRect)&&(n.hasArcType()||!n.toggleShape||o.cancelClick)&&o.cancelClick&&(o.cancelClick=!1)}.bind(this),!0),s.on("touchstart",function(t){P(this,r);t=(o.event=t).target;t&&t!==e.node()&&c()}.bind(this))},updateEventRect:function(t,e){var n=this;void 0===e&&(e=!1);var i=this.state,r=this.$el,a=i.eventReceiver,o=i.width,s=i.height,u=i.rendered,i=i.resizing,c=t||r.eventRect,r=function(){P(this,n),a&&(a.rect=c.node().getBoundingClientRect())}.bind(this);u&&!i&&!e||(c.attr("x",0).attr("y",0).attr("width",o).attr("height",s),u&&!e||c.classed(Tt.eventRect,!0)),r()},updateEventRectData:function(){var n,i,r,a,e,o=this,s=this,t=s.config,u=s.scale,c=s.state,l=u.zoom||u.x,h=t.axis_rotated,d=s.isMultipleX()?(i=n=0,r=c.width,c.height):(t=s.axis.isCategorized()?(e=s.getEventRectWidth(),function(t){return P(this,o),l(t.x)-e/2}.bind(this)):(a=function(t){t=t.index;return P(this,o),{prev:s.getPrevX(t),next:s.getNextX(t)}}.bind(this),e=function(t){var n=this;P(this,o);var i=a(t),r=l.domain(),t=null===i.prev&&null===i.next?h?c.height:c.width:null===i.prev?(l(i.next)+l(t.x))/2:null===i.next?l(r[1])-(l(i.prev)+l(t.x))/2:(Object.keys(i).forEach(function(t,e){P(this,n),i[t]=null!=(t=i[t])?t:r[e]}.bind(this)),Math.max(0,(l(i.next)-l(i.prev))/2));return t}.bind(this),function(t){P(this,o);var e=a(t),e=null===e.prev&&null===e.next?0:null===e.prev?l(l.domain()[0]):(l(t.x)+l(e.prev))/2;return e}.bind(this)),n=h?0:t,i=h?t:0,r=h?c.width:e,h?e:c.height),f=c.eventReceiver,g=function(t,e){return P(this,o),E(t)?t(e):t}.bind(this);f.coords.splice(f.data.length),f.data.forEach(function(t,e){P(this,o),f.coords[e]={x:g(n,t),y:g(i,t),w:g(r,t),h:g(d,t)}}.bind(this))},selectRectForSingle:function(i,r){var a=this,o=this,t=o.config,e=o.$el,n=e.main,e=e.circle,s=t.data_selection_enabled,u=t.data_selection_grouped,c=t.data_selection_isselectable,l=t.tooltip_grouped,t=o.getAllValuesOnIndex(r);l&&(o.showTooltip(t,i),null==o.showGridFocus||o.showGridFocus(t),!s||u)||(e||n.selectAll("."+ht.EXPANDED+":not(."+Dt.shape+"-"+r+")").classed(ht.EXPANDED,!1),(n=n.selectAll("."+Dt.shape+"-"+r).classed(ht.EXPANDED,!0).style("cursor",c?"pointer":null).filter(function(t){return o.isWithinShape(this,t)})).empty()&&!l&&(null==o.hideGridFocus||o.hideGridFocus(),o.hideTooltip(),u||o.setExpand(r)),n.call(function(t){var e=this;P(this,a);var n=t.data();s&&(u||null!=c&&c.bind(o.api)(n))&&(i.style.cursor="pointer"),l||(o.showTooltip(n,i),null==o.showGridFocus||o.showGridFocus(n),null==o.unexpandCircles||o.unexpandCircles(),t.each(function(t){return P(this,e),o.setExpand(r,t.id)}.bind(this)))}.bind(this)))},selectRectForMultipleXs:function(t,e){var n=this;void 0===e&&(e=!0);var i,r,a=this,o=a.config,s=a.state,u=a.filterTargetsToShow(a.data.targets);s.dragging||a.hasArcType(u)||(r=Y(s.event,t),i=a.findClosestFromTargets(u,r),!e||!s.mouseover||i&&i.id===s.mouseover.id||(o.data_onout.call(a.api,s.mouseover),s.mouseover=void 0),i?(u=(a.isBubbleType(i)||a.isScatterType(i)||!o.tooltip_grouped?[i]:a.filterByX(u,i.x)).map(function(t){return P(this,n),a.addName(t)}.bind(this)),a.showTooltip(u,t),a.setExpand(i.index,i.id,!0),a.showGridFocus(u),r=a.dist(i,r),(a.isBarType(i.id)||r<a.getPointSensitivity(i))&&(a.$el.svg.select("."+Tt.eventRect).style("cursor","pointer"),e&&!s.mouseover&&(o.data_onover.call(a.api,i),s.mouseover=i))):a.unselectRect())},unselectRect:function(){var t=this.config,e=this.$el,n=e.circle,e=e.tooltip;this.$el.svg.select("."+Tt.eventRect).style("cursor",null),this.hideGridFocus(),e&&(this.hideTooltip(),this._handleLinkedCharts(!1)),n&&!t.point_focus_only&&this.unexpandCircles(),this.expandBarTypeShapes(!1)},generateEventRectsForSingleX:function(t){var a,e=this,o=this,s=o.config,u=o.state,c=u.eventReceiver,t=t.style("cursor",s.data_selection_enabled&&s.data_selection_grouped?"pointer":null).on("click",function(t){u.event=t;var e=c.currentIdx,e=c.data[-1===e?o.getDataIndexFromEvent(t):e];o.clickHandlerForSingleX.bind(this)(e,o)});return"mouse"===u.inputType&&(a=function(t){P(this,e);t=t?o.getDataIndexFromEvent(t):c.currentIdx;return-1<t?c.data[t]:null}.bind(this),t.on("mouseover",function(t){P(this,e),u.event=t,o.updateEventRect()}.bind(this)).on("mousemove",function(t){var e,n,i,r=a(t);u.event=t,r&&(e=r.index,n=s.line_step_type,s.line_step_tooltipMatch&&o.hasType("step")&&/^step\-(before|after)$/.test(n)&&(i=o.scale.zoom||o.scale.x,r=o.axis.xs[e],i=i.invert(Y(t,this)[0]),"step-after"===n&&i<r?--e:"step-before"===n&&r<i&&(e+=1)),i=s.tooltip_grouped&&e===c.currentIdx,u.dragging||u.flowing||o.hasArcType()||i?i&&o.setTooltipPosition():(e!==c.currentIdx&&(o.setOverOut(!1,c.currentIdx),c.currentIdx=e),-1===e?o.unselectRect():o.selectRectForSingle(this,e),o.setOverOut(-1!==e,e)))}).on("mouseout",function(t){P(this,e),u.event=t,s&&!o.hasArcType()&&-1!==c.currentIdx&&(o.unselectRect(),o.setOverOut(!1,c.currentIdx),c.currentIdx=-1)}.bind(this))),t},clickHandlerForSingleX:function(t,e){var n,i=e,r=i.config,a=i.state,e=i.$el.main;!t||i.hasArcType()||a.cancelClick?a.cancelClick&&(a.cancelClick=!1):(n=t.index,e.selectAll("."+Dt.shape+"-"+n).each(function(t){(r.data_selection_grouped||i.isWithinShape(this,t))&&(null==i.toggleShape||i.toggleShape(this,t,n),r.data_onclick.bind(i.api)(t,this))}))},generateEventRectsForMultipleXs:function(t){var e=this,n=this,i=n.state;t.on("click",function(t){i.event=t,n.clickHandlerForMultipleXS.bind(this)(n)}),"mouse"===i.inputType&&t.on("mouseover mousemove",function(t){i.event=t,n.selectRectForMultipleXs(this)}).on("mouseout",function(t){P(this,e),i.event=t,n.config&&!n.hasArcType()&&n.unselectRect()}.bind(this))},clickHandlerForMultipleXS:function(t){var e,n=t,i=n.config,r=n.state,t=n.filterTargetsToShow(n.data.targets);n.hasArcType(t)||(r=Y(r.event,this),(e=n.findClosestFromTargets(t,r))&&(n.isBarType(e.id)||n.dist(e,r)<i.point_sensitivity)&&n.$el.main.selectAll("."+Dt.shapes+n.getTargetSelectorSuffix(e.id)).selectAll("."+Dt.shape+"-"+e.index).each(function(){(i.data_selection_grouped||n.isWithinShape(this,e))&&(null==n.toggleShape||n.toggleShape(this,e,e.index),i.data_onclick.bind(n.api)(e,this))}))}},gn=qi(11),a={generateFlow:function(t){var n=this,a=n.data,o=n.state,s=n.$el;return function(){var i=this,e=t.flow.length;o.flowing=!0,a.targets.forEach(function(t){P(this,i),t.values.splice(0,e)}.bind(this)),n.updateXGrid&&n.updateXGrid(!0);var r={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach(function(t){P(this,i);var e=t.split("."),n=s[e[0]];null!=(n=n&&1<e.length?n[e[1]]:n)&&n.size()&&(r[t]=n)}.bind(this)),n.hideGridFocus(),n.setFlowList(r,t)}},setFlowList:function(n,t){var i,r=this,a=this,e=t.flow,o=t.targets,s=e.duration,u=void 0===s?t.duration:s,c=e.index,s=e.length,e=e.orgDataCount,l=a.getFlowTransform(o,e,c,s),s=de();s.add(Object.keys(n).map(function(t){var e=this;return P(this,r),i=n[t].transition().ease(gn.easeLinear).duration(u),i="axis.x"===t?i.call(function(t){P(this,e),a.axis.x.setTransition(t).create(t)}.bind(this)):("region.list"===t?i.filter(a.isRegionOnX):i).attr("transform",l)}.bind(this))),i.call(s,function(){P(this,r),a.cleanUpFlow(n,t)}.bind(this))},cleanUpFlow:function(a,t){var o=this,s=this,u=s.config,c=s.state,i=s.$el.svg,l=u.axis_rotated,e=t.flow,h=t.shape,d=t.xv,t=h.pos,f=t.cx,g=t.cy,p=t.xForText,v=t.yForText,t=e,e=t.done,e=void 0===e?function(){P(this,o)}.bind(this):e,r=t.length;r&&(["circle","text","shape","eventRect"].forEach(function(t){P(this,o);for(var e=[],n=0;n<r;n++)e.push("."+It[t]+"-"+n);i.selectAll("."+It[t+"s"]).selectAll(e).remove()}.bind(this)),i.select("."+It.xgrid).remove()),Object.keys(a).forEach(function(t){var e=this;P(this,o);var n,i,r=a[t];"axis.x"!==t&&r.attr("transform",null),"grid.x"===t?r.attr(c.xgridAttr):"gridLines.x"===t?r.attr("x1",l?0:d).attr("x2",l?c.width:d):"gridLines.x"===t?(r.select("line").attr("x1",l?0:d).attr("x2",l?c.width:d),r.select("text").attr("x",l?c.width:0).attr("y",d)):/^(area|bar|line)$/.test(t)?r.attr("d",h.type[t]):"text"===t?r.attr("x",p).attr("y",v).style("fill-opacity",s.opacityForText.bind(s)):"circle"===t?s.isCirclePoint()?r.attr("cx",f).attr("cy",g):(n=function(t){return P(this,e),f(t)-u.point_r}.bind(this),i=function(t){return P(this,e),g(t)-u.point_r}.bind(this),r.attr("x",n).attr("y",i).attr("cx",f).attr("cy",g)):"region.list"===t&&r.select("rect").filter(s.isRegionOnX).attr("x",s.regionX.bind(s)).attr("width",s.regionWidth.bind(s))}.bind(this)),u.interaction_enabled&&s.redrawEventRect(),e.call(s.api),c.flowing=!1},getFlowTransform:function(t,e,n,i){var r=this.data,a=this.scale.x,o=r.targets[0].values,r=this.getValueOnIndex(o,n),n=this.getValueOnIndex(o,n+i),i=a.domain(),t=this.updateXDomain(t,!0,!0);return"translate("+(e?1===e||(null==r?void 0:r.x)===(null==n?void 0:n.x)||this.axis.isTimeSeries()?a(i[0])-a(t[0]):a((null==r?void 0:r.x)||0)-a(n.x):1!==o.length?a(i[0])-a(t[0]):this.axis.isTimeSeries()?(r=this.getValueOnIndex(o,0),n=this.getValueOnIndex(o,o.length-1),a(r.x)-a(n.x)):C(t)/2)+",0) scale("+C(i)/C(t)+",1)"}},Le={initClip:function(){var t=this.state,e=t.clip,t=t.datetimeId;e.id=t+"-clip",e.idXAxis=e.id+"-xaxis",e.idYAxis=e.id+"-yaxis",e.idGrid=e.id+"-grid",e.path=this.getClipPath(e.id),e.pathXAxis=this.getClipPath(e.idXAxis),e.pathYAxis=this.getClipPath(e.idYAxis),e.pathGrid=this.getClipPath(e.idGrid)},getClipPath:function(t){var e=this.config;return!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t)?null:"url("+(!!m.navigator&&0<=m.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":v.URL.split("#")[0])+"#"+t+")"},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this.config,n=this.state,i=n.margin,r=n.width,a=n.height,o=e.axis_rotated,s=Math.max(30,i.left)-(o?0:20),n=o?-(1+s):-(s-1),e=-Math.max(15,i.top),s=o?i.left+20:r+10+s,i=(o?i.top+a+10:i.bottom)+20;t.attr("x",n).attr("y",e).attr("width",s).attr("height",i)},setYAxisClipPath:function(t){var e=this.config,n=this.state,i=n.margin,r=n.width,a=n.height,o=e.axis_rotated,s=Math.max(30,i.left)-(o?20:0),u=e.axis_y_inner,c=u&&!o?e.axis_y_label.text?-20:-1:o?-(1+s):-(s-1),n=-(o?20:i.top),u=(o?r+15+s:i.left+20)+(u?20:0),a=(o?i.bottom+("fit"===(null==(e=e.padding)?void 0:e.mode)?10:0):i.top+a)+10;t.attr("x",c).attr("y",n).attr("width",u).attr("height",a)},updateXAxisTickClip:function(){var t=this,e=t.config,n=t.state,i=n.clip,r=n.xAxisHeight,a=t.$el.defs,o=t.getHorizontalAxisHeight("x");a&&!i.idXAxisTickTexts&&(n=i.id+"-xaxisticktexts",t.appendClip(a,n),i.pathXAxisTickTexts=t.getClipPath(i.idXAxisTickTexts),i.idXAxisTickTexts=n),!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&o!==r&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=o},setXAxisTickClipWidth:function(){var t=this.config,e=this.state.current.maxTickWidths,n=this.getAxisTickRotate("x");!t.axis_x_tick_multiline&&n?(n=Math.sin(Math.PI/180*Math.abs(n)),e.x.clipPath=(this.getHorizontalAxisHeight("x")-20)/n):e.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this.state,e=t.clip,n=t.current,t=this.$el.svg;t&&t.select("#"+e.idXAxisTickTexts+" rect").attr("width",n.maxTickWidths.x.clipPath).attr("height",30)}},pn=function(t){return P(this,void 0),O(t.position)||"end"}.bind(void 0),vn=function(t){return P(this,void 0),"start"===t.position?4:"middle"===t.position?0:-4}.bind(void 0);function bn(n,i,r){var a=this;return function(t){P(this,a);var e=n?0:i;return"start"===t.position?e=n?-r:0:"middle"===t.position&&(e=(n?-r:i)/2),e}.bind(this)}function _n(t,e){"grid"===e&&t.each(function(){var e=this,n=(0,L.select)(this);["x1","x2","y1","y2"].forEach(function(t){return P(this,e),n.attr(t,Math.ceil(+n.attr(t)))}.bind(this))})}Pe={hasGrid:function(){var e=this,n=this.config;return["x","y"].some(function(t){return P(this,e),n["grid_"+t+"_show"]||n["grid_"+t+"_lines"].length}.bind(this))},initGrid:function(){this.hasGrid()&&this.initGridLines(),this.initFocusGrid()},initGridLines:function(){var t=this.config,e=this.state.clip,n=this.$el;(t.grid_x_lines.length||t.grid_y_lines.length)&&(n.gridLines.main=n.main.insert("g","."+ht.chart+(t.grid_lines_front?" + *":"")).attr("clip-path",e.pathGrid).attr("class",Mt.grid+" "+Mt.gridLines),n.gridLines.main.append("g").attr("class",Mt.xgridLines),n.gridLines.main.append("g").attr("class",Mt.ygridLines),n.gridLines.x=(0,L.selectAll)([]))},updateXGrid:function(t){var e=this,n=this.config,i=this.scale,r=this.state,a=this.$el,o=a.main,s=a.grid,u=n.axis_rotated,a=this.generateGridData(n.grid_x_type,i.x),c=this.axis.isCategorized()?this.axis.x.tickOffset():0,n=function(t){return P(this,e),(i.zoom||i.x)(t)+c*(u?-1:1)}.bind(this);r.xgridAttr=u?{x1:0,x2:r.width,y1:n,y2:n}:{x1:n,x2:n,y1:0,y2:r.height},s.x=o.select("."+Mt.xgrids).selectAll("."+Mt.xgrid).data(a),s.x.exit().remove(),s.x=s.x.enter().append("line").attr("class",Mt.xgrid).merge(s.x),t||s.x.each(function(){var n=this,i=(0,L.select)(this);Object.keys(r.xgridAttr).forEach(function(t){var e=this;P(this,n),i.attr(t,r.xgridAttr[t]).style("opacity",function(){return P(this,e),i.attr(u?"y1":"x1")===(u?r.height:0)?"0":null}.bind(this))}.bind(this))})},updateYGrid:function(){var e=this,t=this.axis,n=this.config,i=this.scale,r=this.state,a=this.$el,o=a.grid,s=a.main,u=n.axis_rotated,a=function(t){return P(this,e),Math.ceil(i.y(t))}.bind(this),n=t.y.getGeneratedTicks(n.grid_y_ticks)||this.scale.y.ticks(n.grid_y_ticks);o.y=s.select("."+Mt.ygrids).selectAll("."+Mt.ygrid).data(n),o.y.exit().remove(),o.y=o.y.enter().append("line").attr("class",Mt.ygrid).merge(o.y),o.y.attr("x1",u?a:0).attr("x2",u?a:r.width).attr("y1",u?0:a).attr("y2",u?r.height:a),_n(o.y,"grid")},updateGrid:function(){var t=this.$el,e=t.grid;t.gridLines.main||this.initGridLines(),e.main.style("visibility",this.hasArcType()?"hidden":null),this.hideGridFocus(),this.updateXGridLines(),this.updateYGridLines()},updateXGridLines:function(){var e=this,t=this.config,n=this.$el,i=n.gridLines,r=n.main,a=this.$T,n=t.axis_rotated;t.grid_x_show&&this.updateXGrid();r=r.select("."+Mt.xgridLines).selectAll("."+Mt.xgridLine).data(t.grid_x_lines);a(r.exit()).style("opacity","0").remove();t=r.enter().append("g");t.append("line").style("opacity","0"),t.append("text").attr("transform",n?null:"rotate(-90)").attr("dy",-5).style("opacity","0"),a((r=t.merge(r)).attr("class",function(t){return P(this,e),(Mt.xgridLine+" "+(t.class||"")).trim()}.bind(this)).select("text").attr("text-anchor",pn).attr("dx",vn)).text(function(t){return P(this,e),t.text}.bind(this)).style("opacity",null),i.x=r},updateYGridLines:function(){var e=this,t=this.config,n=this.state,i=n.width,r=n.height,a=this.$el,o=this.$T,s=t.axis_rotated;t.grid_y_show&&this.updateYGrid(),o((n=a.main.select("."+Mt.ygridLines).selectAll("."+Mt.ygridLine).data(t.grid_y_lines)).exit()).style("opacity","0").remove();t=n.enter().append("g");t.append("line").style("opacity","0"),t.append("text").attr("transform",s?"rotate(-90)":"").style("opacity","0");n=t.merge(n),t=this.yv.bind(this);o(n.attr("class",function(t){return P(this,e),(Mt.ygridLine+" "+(t.class||"")).trim()}.bind(this)).select("line")).attr("x1",s?t:0).attr("x2",s?t:i).attr("y1",s?0:t).attr("y2",s?r:t).style("opacity",null),o(n.select("text").attr("text-anchor",pn).attr("dx",vn)).attr("dy",-5).attr("x",bn(s,i,r)).attr("y",t).text(function(t){return P(this,e),t.text}.bind(this)).style("opacity",null),a.gridLines.y=n},redrawGrid:function(t){var e=this,n=this.config.axis_rotated,i=this.state,r=i.width,a=i.height,o=this.$el.gridLines,s=this.$T,u=this.xv.bind(this),i=o.x.select("line"),o=o.x.select("text"),i=s(i,t).attr("x1",n?0:u).attr("x2",n?r:u).attr("y1",n?u:0).attr("y2",n?u:a),o=s(o,t).attr("x",bn(!n,r,a)).attr("y",u).text(function(t){return P(this,e),t.text}.bind(this));return[i.style("opacity",null),o.style("opacity",null)]},initFocusGrid:function(){var t=this.config,e=this.state.clip,n=this.$el,i=t.grid_front,i="."+(i&&n.gridLines.main?Mt.gridLines:ht.chart)+(i?" + *":""),e=n.main.insert("g",i).attr("clip-path",e.pathGrid).attr("class",Mt.grid);n.grid.main=e,t.grid_x_show&&e.append("g").attr("class",Mt.xgrids),t.grid_y_show&&e.append("g").attr("class",Mt.ygrids),t.interaction_enabled&&t.grid_focus_show&&(e.append("g").attr("class",At.xgridFocus).append("line").attr("class",At.xgridFocus),t.grid_focus_y&&!t.tooltip_grouped&&e.append("g").attr("class",At.ygridFocus).append("line").attr("class",At.ygridFocus))},showGridFocus:function(t){var a,o,e=this,s=this,n=s.config,i=s.state,u=i.width,c=i.height,l=n.axis_rotated,r=s.$el.main.selectAll("line."+At.xgridFocus+", line."+At.ygridFocus),i=(t||[r.datum()]).filter(function(t){return P(this,e),t&&O(s.getBaseValue(t))}.bind(this));!n.tooltip_show||0===i.length||s.hasType("bubble")||s.hasArcType()||(a=n.grid_focus_edge&&!n.tooltip_grouped,o=s.xx.bind(s),r.style("visibility",null).data(i.concat(i)).each(function(t){var n,i=this,r=(0,L.select)(this),e={x:o(t),y:s.getYScaleById(t.id)(t.value)};n=r.classed(At.xgridFocus)?l?[null,e.x,a?e.y:u,e.x]:[e.x,a?e.y:null,e.x,c]:(t="y2"===s.axis.getId(t.id),l?[e.y,a&&!t?e.x:null,e.y,a&&t?e.x:c]:[a&&t?e.x:null,e.y,a&&!t?e.x:u,e.y]),["x1","y1","x2","y2"].forEach(function(t,e){return P(this,i),r.attr(t,n[e])}.bind(this))}),_n(r,"grid"),null==s.showCircleFocus||s.showCircleFocus(t))},hideGridFocus:function(){var t=this.state,e=t.inputType,n=t.resizing,t=this.$el.main;"mouse"!==e&&n||(t.selectAll("line."+At.xgridFocus+", line."+At.ygridFocus).style("visibility","hidden"),null==this.hideCircleFocus||this.hideCircleFocus())},updateGridFocus:function(){var t=this.state,e=t.inputType,n=t.width,i=t.height,r=t.resizing,t=this.$el.grid.main.select("line."+At.xgridFocus);return"touch"===e?t.empty()?r&&null!=this.showCircleFocus&&this.showCircleFocus():this.showGridFocus():(r=this.config.axis_rotated,t.attr("x1",r?0:-10).attr("x2",r?n:-10).attr("y1",r?-10:0).attr("y2",r?-10:i)),!0},generateGridData:function(t,e){var n=this,i=this.$el.main.select("."+gt.axisX).selectAll(".tick").size(),r=[];if("year"===t)for(var a=this.getXDomain().map(function(t){return P(this,n),t.getFullYear()}.bind(this)),t=a[0],o=a[1],s=t;s<=o;s++)r.push(new Date(s+"-01-01 00:00:00"));else(r=e.ticks(10)).length>i&&(r=r.filter(function(t){return P(this,n),(t+"").indexOf(".")<0}.bind(this)));return r},getGridFilterToRemove:function(t){var r=this;return(t?function(e){var n=this;P(this,r);var i=!1;return($(t)?t.concat():[t]).forEach(function(t){P(this,n),("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(i=!0)}.bind(this)),i}:function(){return P(this,r),!0}).bind(this)},removeGridLines:function(t,e){var n=this,i=this.config,r=this.$T,a=this.getGridFilterToRemove(t),o=function(t){return P(this,n),!a(t)}.bind(this),t=e?Mt.xgridLine:Mt.ygridLine;r(this.$el.main.select("."+(e?Mt.xgridLines:Mt.ygridLines)).selectAll("."+t).filter(a)).style("opacity","0").remove();e="grid_"+(e?"x":"y")+"_lines";i[e]=i[e].filter(o)}},Ee={initRegion:function(){var t=this.$el;t.region.main=t.main.insert("g",":first-child").attr("clip-path",this.state.clip.path).attr("class",Ct.regions)},updateRegion:function(){var t=this.config,e=this.$el.region,n=this.$T;e.main||this.initRegion(),e.main.style("visibility",this.hasArcType()?"hidden":null);t=e.main.selectAll("."+Ct.region).data(t.regions);n(t.exit()).style("opacity","0").remove();n=t.enter().append("g");n.append("rect").style("fill-opacity","0"),e.list=n.merge(t).attr("class",this.classRegion.bind(this))},redrawRegion:function(t){var e=this,n=this,i=n.$el.region;return[(0,n.$T)(i.list.select("rect"),t).attr("x",n.regionX.bind(n)).attr("y",n.regionY.bind(n)).attr("width",n.regionWidth.bind(n)).attr("height",n.regionHeight.bind(n)).style("fill-opacity",function(t){return P(this,e),O(t.opacity)?t.opacity:null}.bind(this)).on("end",function(){(0,L.select)(this.parentNode).selectAll("rect:not([x])").remove()})]},getRegionXY:function(t,e){var n=this.config,i=this.scale,r=n.axis_rotated,a="x"===t,n="start",t=0;return"y"===e.axis||"y2"===e.axis?(a||(n="end"),(a?r:!r)&&n in e&&(t=(0,i[e.axis])(e[n]))):(a?!r:r)&&n in e&&(t=(i.zoom||i.x)(this.axis.isTimeSeries()?ot.call(this,e[n]):e[n])),t},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var n=this.config,i=this.scale,r=this.state,a=n.axis_rotated,o="width"===t,s=this[o?"regionX":"regionY"](e),n="end",t=r[t];return"y"===e.axis||"y2"===e.axis?(o||(n="start"),(o?a:!a)&&n in e&&(t=(0,i[e.axis])(e[n]))):(o?!a:a)&&n in e&&(t=(i.zoom||i.x)(this.axis.isTimeSeries()?ot.call(this,e[n]):e[n])),t<s?0:t-s},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}},$e={getAxisSize:function(t){var e=this.config.axis_rotated;return e&&"x"===t||!e&&/y2?/.test(t)?this.getAxisWidthByAxisId(t,!0):this.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){if(this.axis){var n=null==(n=this.axis)?void 0:n.getLabelPositionById(t),t=this.axis.getMaxTickWidth(t,e),e=0===t?.5:0;return t+("fit"===(null==(t=this.config.padding)?void 0:t.mode)?n.isInner?10+e:10:n.isInner?20+e:40)}return 40},getHorizontalAxisHeight:function(t){var e,n=this.config,i=this.state,r=i.current,a=i.rotatedPadding,o=i.isLegendRight,s=i.isLegendInset,u=n.axis_rotated,c="fit"===(null==(e=n.padding)?void 0:e.mode),l=n["axis_"+t+"_inner"],i=n["axis_"+t+"_label"].text,i="fit"===(null==(e=n.padding)?void 0:e.mode)?l&&!i?"y"===t?1:0:20:30;if("x"===t&&!n.axis_x_show)return 8;if("x"===t&&n.axis_x_height)return n.axis_x_height;if("y"===t&&!n.axis_y_show)return!n.legend_show||o||s?1:10;if("y2"===t&&!n.axis_y2_show)return c?0:a.top;a=this.getAxisTickRotate(t);return("x"===t&&!u||/y2?/.test(t)&&u)&&a&&(i=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(a))/180),!n.axis_x_tick_multiline&&r.height&&i>r.height/2&&(i=r.height/2)),i+(this.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||u?0:-10)},getEventRectWidth:function(){var t=this.config,e=this.axis,t=t.axis_x_inverted,e=e.x.tickInterval();return Math.max(0,t?Math.abs(e):e)},getAxisTickRotate:function(t){var e,n,i=this.axis,r=this.config,a=this.state,o=this.$el,s=r["axis_"+t+"_tick_rotate"];return"x"===t&&(e=i.isCategorized()||i.isTimeSeries(),r.axis_x_tick_fit&&e&&(n=r.axis_x_tick_count,t=a.current.maxTickWidths.x.ticks.length,i=0,n?i=t<n?t:n:t&&(i=t),i!==a.axis.x.tickCount&&(t=this.data.targets,a.axis.x.padding=this.getXDomainPadding([this.getXDomainMinMax(t,"min"),this.getXDomainMinMax(t,"max")],i)),a.axis.x.tickCount=i),o.svg&&r.axis_x_tick_fit&&!r.axis_x_tick_multiline&&!r.axis_x_tick_culling&&r.axis_x_tick_autorotate&&e&&(s=this.needToRotateXAxisTickTexts()?r.axis_x_tick_rotate:0)),s},needToRotateXAxisTickTexts:function(){var t=this.state,e=t.axis,t=t.current.width-this.getCurrentPaddingLeft(!1)-this.getCurrentPaddingRight(),e=e.x.tickCount+e.x.padding.left+e.x.padding.right;return(e?t/e:0)<this.axis.getMaxTickWidth("x")}},Be={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_culling_lines:!0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},Ve={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_culling_lines:!0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]};function yn(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function xn(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?yn(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var Ve=xn(xn(xn({axis_rotated:!1},{axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_culling_lines:!0,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_inverted:!1,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]}),Be),Ve),mn=[ze,{category:function(t,e){var n=this.internal,i=n.config;return 1<arguments.length&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},categories:function(t){var e=this.internal,n=e.config;return arguments.length&&(n.axis_x_categories=t,e.redraw()),n.axis_x_categories}},Ze,je,Ge,Ue,qe],wn=[t,Le,i,a,Pe,Ee,$e],Tn=[{data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},Ve,{grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:void 0,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0}],An=qi(12);function Mn(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function Sn(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?Mn(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function kn(i){void 0===i&&(i=0);var a=this,o=a.config,r=a.state,s=a.hasMultiArcGauge(),u=r.gaugeArcWidth/a.filterTargetsToShow(a.data.targets).length,c=i?Math.min(r.radiusExpanded*i-r.radius,.8*u-100*(1-i)):0;return{inner:function(t){var e=a.getRadius(t).innerRadius;return s?r.radius-u*(t.index+1):N(e)?e:0},outer:function(t){var e,n=a.getRadius(t).outerRadius;return s?e=r.radius-u*t.index+c:a.hasType("polar")&&!i?e=a.getPolarOuterRadius(t,n):(e=n,i&&(t=r.radiusExpanded,r.radius!==n&&(t-=Math.abs(r.radius-n)),e=t*i)),e},corner:function(t,e){var n=o.arc_cornerRadius_ratio,i=void 0===n?0:n,r=o.arc_cornerRadius,n=void 0===r?0:r,r=t.data.id,t=t.value;return i?i*e:N(n)?n:n.call(a.api,r,t,e)}}}function En(o){return function(r){var i=this,t=function(t){var e=t.startAngle,n=void 0===e?0:e,e=t.endAngle,e=void 0===e?0:e,t=t.padAngle,t=void 0===t?0:t;return P(this,i),{startAngle:n,endAngle:e,padAngle:t}}.bind(this),a=(0,An.interpolate)(t(this._current),t(r));return this._current=r,function(t){var e=a(t),n=r.data,i=r.index,t=r.value;return o(Sn(Sn({},e),{},{data:n,index:i,value:t}))}}}var Cn={initPie:function(){var e=this,t=this.config,n=t.data_type,i=t[n+"_padding"],r=t[n+"_startingAngle"]||0,n=(i?.01*i:t[n+"_padAngle"])||0;this.pie=(0,Ye.pie)().startAngle(r).endAngle(r+2*Math.PI).padAngle(n).value(function(t){var n=this;return P(this,e),t.values.reduce(function(t,e){return P(this,n),t+e.value}.bind(this),0)}.bind(this)).sort(this.getSortCompareFn.bind(this)(!0))},updateRadius:function(){var t=this.config,e=this.state,n=t[t.data_type+"_padding"],i=t.gauge_width||t.donut_width,r=this.filterTargetsToShow(this.data.targets).length*t.gauge_arcs_minWidth;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2*(this.hasMultiArcGauge()&&t.gauge_label_show?.85:1),e.radius=.95*e.radiusExpanded,e.innerRadiusRatio=i?(e.radius-i)/e.radius:.6,e.gaugeArcWidth=i||(r<=e.radius-e.innerRadius?e.radius-e.innerRadius:r<=e.radius?r:e.radius);n=t.pie_innerRadius||(n?n*(e.innerRadiusRatio+.1):0);e.outerRadius=t.pie_outerRadius,e.innerRadius=this.hasType("donut")||this.hasType("gauge")?e.radius*e.innerRadiusRatio:n},getRadius:function(t){var e=null==t?void 0:t.data,n=this.state,t=n.innerRadius,n=n.outerRadius;return!N(t)&&e&&(t=t[e.id]||0),D(n)&&e&&e.id in n?n=n[e.id]:N(n)||(n=this.state.radius),{innerRadius:t,outerRadius:n}},updateArc:function(){this.updateRadius(),this.svgArc=this.getSvgArc(),this.svgArcExpanded=this.getSvgArcExpanded()},getArcLength:function(){var t=3.6*this.config.gauge_arcLength,e=t/360*2;return t<-360?e=-2:360<t&&(e=2),e*Math.PI},getGaugeStartAngle:function(){var t=this.config,e=t.gauge_fullCircle,n=-1*Math.PI/2,i=Math.PI/2,t=t.gauge_startingAngle;return!e&&t<=n?t=n:!e&&i<=t?t=i:(t>Math.PI||t<-1*Math.PI)&&(t=Math.PI),t},updateAngle:function(t){var i=this,e=this,n=e.config,r=e.state,a=e.pie,o=t,s=!1;if(!n)return null;var u,c=e.getGaugeStartAngle(),l=n.gauge_fullCircle?e.getArcLength():-2*c;return o.data&&e.isGaugeType(o.data)&&!e.hasMultiArcGauge()&&(u=n.gauge_min,t=n.gauge_max,r=e.getTotalDataSum(r.rendered),a=a.startAngle(c).endAngle(l*((r-u)/(t-u))+c)),a(e.filterTargetsToShow()).forEach(function(t,e){var n;P(this,i),s||t.data.id!==(null==(n=o.data)?void 0:n.id)||(s=!0,(o=t).index=e)}.bind(this)),isNaN(o.startAngle)&&(o.startAngle=0),isNaN(o.endAngle)&&(o.endAngle=o.startAngle),o.data&&e.hasMultiArcGauge()&&(a=n.gauge_min,e=n.gauge_max,n=o.value<a?0:o.value<e?o.value-a:e-a,o.startAngle=c,o.endAngle=c+l/(e-a)*n),s?o:null},getSvgArc:function(){var r=this,t=kn.call(r),e=t.inner,a=t.outer,o=t.corner,s=(0,Ye.arc)().innerRadius(e).outerRadius(a),e=function(t,e){var n,i="M 0 0";return!t.value&&!t.data||(n=e?t:null!=(n=r.updateAngle(t))?n:null)&&(i=s.cornerRadius(o(n,a(n)))(n)),i};return e.centroid=s.centroid,e},getSvgArcExpanded:function(t){var i=this,r=this,e=kn.call(r,t=void 0===t?1:t),t=e.inner,a=e.outer,o=e.corner,s=(0,Ye.arc)().innerRadius(t).outerRadius(a);return function(t){P(this,i);var e=r.updateAngle(t),n=a(e),t=0;return e&&(t=o(e,n)),e?s.cornerRadius(t)(e):"M 0 0"}.bind(this)},getArc:function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e,n,i,r=this,a=this,o=a.config,s=a.state.radiusExpanded,u=a.updateAngle(t),c="";return u&&(a.hasMultiArcGauge()?(e=Math.sin(u.endAngle-Math.PI/2),c="translate("+(i=Math.cos(u.endAngle-Math.PI/2)*(s+25))+","+(n=e*(s+15-Math.abs(10*e))+3)+")"):(!a.hasType("gauge")||1<a.data.targets.length)&&(e=a.getRadius(t).outerRadius,a.hasType("polar")&&(e=a.getPolarOuterRadius(t,e)),i=(u=this.svgArc.centroid(u).map(function(t){return P(this,r),isNaN(t)?0:t}.bind(this)))[0],n=u[1],u=Math.sqrt(i*i+n*n),c="translate("+i*(i=(i=null==(i=["donut","pie","polar"].filter(a.hasType.bind(a)).map(function(t){return P(this,r),o[t+"_label_ratio"]}.bind(this)))?void 0:i[0])?E(i)?i.bind(a.api)(t,e,u):i:e&&(u?(.375<36/e?1.175-36/e:.8)*e/u:0))+","+n*i+")")),c},convertToArcData:function(t){return this.addName({id:("data"in t?t.data:t).id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})},textForArcLabel:function(t){var a=this,o=a.hasType("gauge");a.shouldShowArcLabel()&&t.style("fill",a.updateTextColor.bind(a)).attr("filter",a.updateTextBacgroundColor.bind(a)).each(function(t){var e,n=(0,L.select)(this),i=a.updateAngle(t),r=a.getRatio("arc",i);a.meetsLabelThreshold(r,null==(e=["donut","gauge","pie","polar"].filter(a.hasType.bind(a)))?void 0:e[0])?(i=(i||t).value,X(n,(a.getArcLabelFormat()||a.defaultArcValueFormat)(i,r,t.data.id).toString(),[-1,1],o)):n.text("")})},expandArc:function(t){var e,n,i=this,r=this,a=r.state.transiting,o=r.$el;a?e=setInterval(function(){P(this,i),a||(clearInterval(e),0<o.legend.selectAll("."+At.legendItemFocused).size()&&r.expandArc(t))}.bind(this),10):(n=r.mapToTargetIds(t),o.svg.selectAll(r.selectorTargets(n,"."+dt.chartArc)).each(function(t){var e;r.shouldExpand(t.data.id)&&(e=r.getExpandConfig(t.data.id,"duration"),t=r.getSvgArcExpanded(r.getExpandConfig(t.data.id,"rate")),(0,L.select)(this).selectAll("path").transition().duration(e).attrTween("d",En(r.svgArcExpanded.bind(r))).transition().duration(2*e).attrTween("d",En(t.bind(r))))}))},unexpandArc:function(t){var e=this,n=this,i=n.state.transiting,r=n.$el.svg;i||(t=n.mapToTargetIds(t),r.selectAll(n.selectorTargets(t,"."+dt.chartArc)).selectAll("path").transition().duration(function(t){return P(this,e),n.getExpandConfig(t.data.id,"duration")}.bind(this)).attrTween("d",En(n.svgArc.bind(n))),r.selectAll(""+dt.arc).style("opacity",null))},getExpandConfig:function(t,e){var n,i=this.config;return this.isDonutType(t)?n="donut":this.isGaugeType(t)?n="gauge":this.isPieType(t)&&(n="pie"),n?i[n+"_expand_"+e]:{duration:50,rate:.98}[e]},shouldExpand:function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},shouldShowArcLabel:function(){var e=this,n=this,i=n.config;return["donut","gauge","pie","polar"].some(function(t){return P(this,e),n.hasType(t)&&i[t+"_label_show"]}.bind(this))},getArcLabelFormat:function(){var e=this,n=this.config,i=function(t){return P(this,e),t}.bind(this);return["donut","gauge","pie","polar"].filter(this.hasType.bind(this)).forEach(function(t){P(this,e),i=n[t+"_label_format"]}.bind(this)),E(i)?i.bind(this.api):i},updateTargetsForArc:function(t){var e=this,n=this,i=n.$el,r=n.hasType("gauge"),a=n.getChartClass("Arc"),o=n.getClass("arcs",!0),s=n.classFocus.bind(n),u=i.main.select("."+dt.chartArcs),c=u.selectAll("."+dt.chartArc).data(n.pie(t)).attr("class",function(t){return P(this,e),a(t)+s(t.data)}.bind(this)),t=c.enter().append("g").attr("class",a).call(this.setCssRule(!1,"."+dt.chartArcs+" text",["pointer-events:none","text-anchor:middle"]));t.append("g").attr("class",o).merge(c),t.append("text").attr("dy",r&&!n.hasMultiTargets()?"-.1em":".35em").style("opacity","0").style("text-anchor",n.getStylePropValue("middle")).style("pointer-events",n.getStylePropValue("none")),i.text=u.selectAll("."+ht.target+" text")},initArc:function(){var t=this.$el;t.arcs=t.main.select("."+ht.chart).append("g").attr("class",dt.chartArcs).attr("transform",this.getTranslate("arc")),this.setArcTitle()},setArcTitle:function(t){var e,n=t||this.getArcTitle(),i=this.hasType("gauge");n&&((t=this.$el.arcs.select("."+(e=i?xt.chartArcsGaugeTitle:dt.chartArcsTitle))).empty()&&(t=this.$el.arcs.append("text").attr("class",e).style("text-anchor","middle")),i&&t.attr("dy","-0.3em"),X(t,n,i?void 0:[-.6,1.35],!0))},getArcTitle:function(){var t=this.hasType("donut")?"donut":this.hasType("gauge")&&"gauge";return t?this.config[t+"_title"]:""},getArcTitleWithNeedleValue:function(){var t=this.config,e=this.state,n=this.getArcTitle();if(n&&this.config.arc_needle_show&&/{=[A-Z_]+}/.test(n)){e=e.current.needle;return N(e)||(e=t.arc_needle_value),at(n,{NEEDLE_VALUE:N(e)?e:0})}return!1},redrawArc:function(t,e,n){var i=this,r=this,a=r.config,o=r.state,s=r.$el.main,u=a.interaction_enabled,c=u&&a.data_selection_isselectable,s=s.selectAll("."+dt.arcs).selectAll("."+dt.arc).data(r.arcData.bind(r));s.exit().transition().duration(e).style("opacity","0").remove(),s=s.enter().append("path").attr("class",r.getClass("arc",!0)).style("fill",function(t){return P(this,i),r.color(t.data)}.bind(this)).style("cursor",function(t){return P(this,i),null!=c&&null!=c.bind&&c.bind(r.api)(t)?"pointer":null}.bind(this)).style("opacity","0").each(function(t){r.isGaugeType(t.data)&&(t.startAngle=a.gauge_startingAngle,t.endAngle=a.gauge_startingAngle),this._current=t}).merge(s),r.hasType("gauge")&&(r.updateGaugeMax(),r.hasMultiArcGauge()&&r.redrawMultiArcGauge()),s.attr("transform",function(t){return P(this,i),!r.isGaugeType(t.data)&&n?"scale(0)":""}.bind(this)).style("opacity",function(t){return t===this._current?"0":null}).each(function(){P(this,i),o.transiting=!0}.bind(this)).transition().duration(t).attrTween("d",function(e){var t=this,n=r.updateAngle(e);if(!n)return function(){return P(this,t),"M 0 0"}.bind(this);isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var i=(0,An.interpolate)(this._current,n);return this._current=i(0),function(t){t=i(t);return t.data=e.data,r.getArc(t,!0)}}).attr("transform",n?"scale(1)":"").style("fill",function(t){var e;return P(this,i),r.levelColor?(e=r.levelColor(t.data.values[0].value),a.data_colors[t.data.id]=e):e=r.color(t.data),e}.bind(this)).style("opacity",null).call(F,function(){var t,e;r.levelColor&&(e=(t=(0,L.select)(this)).datum(this._current),r.updateLegendItemColor(e.data.id,t.style("fill"))),o.transiting=!1,M(a.onrendered,r.api)}),u&&r.bindArcEvent(s),r.hasType("polar")&&r.redrawPolar(),r.hasType("gauge")&&r.redrawBackgroundArcs(),a.arc_needle_show&&r.redrawNeedle(),r.redrawArcText(t)},redrawNeedle:function(){var i=this,r=this,a=r.$el,o=r.config,t=r.state,e=t.hiddenTargetIds,n=(t.radius-1)/100*o.arc_needle_length,s=e.length!==r.data.targets.length,u=r.$el.arcs.select("."+dt.needle),c=o.arc_needle_path,l=o.arc_needle_bottom_width/2,h=o.arc_needle_top_width/2,d=o.arc_needle_top_rx,f=o.arc_needle_top_ry,g=o.arc_needle_bottom_len,p=o.arc_needle_bottom_rx,t=o.arc_needle_bottom_ry,e=r.getNeedleAngle(),v=function(){P(this,i);var t=r.getArcTitleWithNeedleValue();t&&r.setArcTitle(t)}.bind(this);v(),u.empty()&&(u=a.arcs.append("path").classed(dt.needle,!0),a.needle=u,a.needle.updateHelper=function(t,e){var n=this;void 0===e&&(e=!1),P(this,i),"none"!==a.needle.style("display")&&r.$T(a.needle).style("transform","rotate("+r.getNeedleAngle(t)+"deg)").call(F,function(){P(this,n),e&&(o.arc_needle_value=t),v()}.bind(this))}.bind(this)),s?(g=E(c)?c.call(r,n):"M-"+l+" "+g+" A"+p+" "+t+" 0 0 0 "+l+" "+g+" L"+h+" -"+n+" A"+d+" "+f+" 0 0 0 -"+h+" -"+n+" L-"+l+" "+g+" Z",r.$T(u).attr("d",g).style("fill",o.arc_needle_color).style("display",null).style("transform","rotate("+e+"deg)")):u.style("display","none")},getNeedleAngle:function(t){var e=this.config,n=this.state,i=this.getArcLength(),r=this.hasType("gauge"),a=this.getTotalDataSum(!0),o=I(t)?t:e.arc_needle_value,s=e[e.data_type+"_startingAngle"]||0,t=0;return N(o)||(o=r&&1===this.data.targets.length?a:0),n.current.needle=o,t=r?(s=this.getGaugeStartAngle(),(e.gauge_fullCircle?i:-2*s)*((o-(r=e.gauge_min))/(e.gauge_max-r))):i*(o/a),(s+t)*(180/Math.PI)},redrawBackgroundArcs:function(){var e,n=this,i=this,r=i.config,a=i.state,t=i.hasMultiArcGauge(),o=r.gauge_fullCircle,s=0===i.filterTargetsToShow(i.data.targets).length&&!!r.data_empty_label_text,u=i.getGaugeStartAngle(),c=o?u+i.getArcLength():-1*u,o=i.$el.arcs.select((t?"g":"")+"."+dt.chartArcsBackground);t?(e=0,(o=o.selectAll("path."+dt.chartArcsBackground).data(i.data.targets)).enter().append("path").attr("class",function(t,e){return P(this,n),dt.chartArcsBackground+" "+dt.chartArcsBackground+"-"+e}.bind(this)).merge(o).style("fill",r.gauge_background||null).attr("d",function(t){t=t.id;if(P(this,n),s||0<=a.hiddenTargetIds.indexOf(t))return"M 0 0";t={data:[{value:r.gauge_max}],startAngle:u,endAngle:c,index:e++};return i.getArc(t,!0,!0)}.bind(this)),o.exit().remove()):o.attr("d",s?"M 0 0":function(){P(this,n);var t={data:[{value:r.gauge_max}],startAngle:u,endAngle:c};return i.getArc(t,!0,!0)}.bind(this))},bindArcEvent:function(t){var n,i=this,r=this,a=r.config,o=r.state,e="touch"===o.inputType,s="mouse"===o.inputType;function u(t,e,n){r.expandArc(n),r.api.focus(n),r.toggleFocusLegend(n,!0),r.showTooltip([e],t)}function c(t){t=(null==t?void 0:t.id)||void 0;r.unexpandArc(t),r.api.revert(),r.revertLegend(),r.hideTooltip()}t.on("click",function(t,e,n){e=r.updateAngle(e);e&&(e=r.convertToArcData(e),null==r.toggleShape||r.toggleShape(this,e,n),a.data_onclick.bind(r.api)(e,this))}),s&&t.on("mouseover",function(t,e){o.transiting||(o.event=t,u(this,e=(e=r.updateAngle(e))?r.convertToArcData(e):null,(null==e?void 0:e.id)||void 0),r.setOverOut(!0,e))}).on("mouseout",function(t,e){P(this,i),o.transiting||(o.event=t,e=(e=r.updateAngle(e))?r.convertToArcData(e):null,c(),r.setOverOut(!1,e))}.bind(this)).on("mousemove",function(t,e){e=r.updateAngle(e),e=e?r.convertToArcData(e):null;o.event=t,r.showTooltip([e],this)}),e&&r.hasArcType()&&!r.radars&&(n=function(t){P(this,i);t=t.changedTouches[0];return(0,L.select)(v.elementFromPoint(t.clientX,t.clientY))}.bind(this),r.$el.svg.on("touchstart touchmove",function(t){var e;o.transiting||(o.event=t,t=(null==(e=(t=null!=(e=n(t).datum())&&e.data&&e.data.id?r.updateAngle(e):null)?r.convertToArcData(t):null)?void 0:e.id)||void 0,r.callOverOutForTouch(e),z(t)?c():u(this,e,t))}))},redrawArcText:function(t){var e,n=this,i=this,r=i.config,a=i.state,o=i.$el,s=o.main,u=o.arcs,o=i.hasType("gauge"),c=i.hasMultiArcGauge();o&&1===i.data.targets.length&&r.gauge_title||(e=s.selectAll("."+dt.chartArc).select("text").style("opacity","0").attr("class",function(t){return P(this,n),i.isGaugeType(t.data)?xt.gaugeValue:null}.bind(this)).call(i.textForArcLabel.bind(i)).attr("transform",i.transformForArcLabel.bind(i)).style("font-size",function(t){return P(this,n),i.isGaugeType(t.data)&&1===i.data.targets.length&&!c?Math.round(a.radius/5)+"px":null}.bind(this)).transition().duration(t).style("opacity",function(t){return P(this,n),i.isTargetToShow(t.data.id)&&i.isArcType(t.data)?null:"0"}.bind(this)),c&&e.attr("dy","-.1em")),s.select("."+dt.chartArcsTitle).style("opacity",i.hasType("donut")||o?null:"0"),o&&((o=r.gauge_fullCircle)&&null!=e&&e.attr("dy",""+(c?0:Math.round(a.radius/14))),r.gauge_label_show&&(u.select("."+xt.chartArcsGaugeUnit).attr("dy",(o?1.5:.75)+"em").text(r.gauge_units),u.select("."+xt.chartArcsGaugeMin).attr("dx",-1*(a.innerRadius+(a.radius-a.innerRadius)/(o?1:2))+"px").attr("dy","1.2em").text(i.textForGaugeMinMax(r.gauge_min,!1)),o||u.select("."+xt.chartArcsGaugeMax).attr("dx",a.innerRadius+(a.radius-a.innerRadius)/2+"px").attr("dy","1.2em").text(i.textForGaugeMinMax(r.gauge_max,!0))))},getArcElementByIdOrIndex:function(e){var n=this,t=this.$el.arcs,i=(N(e)?function(t){return P(this,n),t.index===e}:function(t){return P(this,n),t.data.id===e}).bind(this);return null==t?void 0:t.selectAll("."+ht.target+" path").filter(i)}},Rn={initArea:function(t){var e=this.config;t.insert("g","."+(e.area_front?bt.circles:wt.lines)).attr("class",this.getClass("areas",!0))},updateAreaColor:function(t){return this.config.area_linearGradient?this.getGradienColortUrl(t.id):this.color(t)},updateArea:function(t,e){var n=this,i=n.config,r=n.state,a=n.$el,o=n.$T,a=(e=void 0===e?!1:e)?a.subchart:a;i.area_linearGradient&&n.updateLinearGradient();i=a.main.selectAll("."+ft.areas).selectAll("."+ft.area).data(n.lineData.bind(n));o(i.exit(),t).style("opacity","0").remove(),a.area=i.enter().append("path").attr("class",n.getClass("area",!0)).style("fill",n.updateAreaColor.bind(n)).style("opacity",function(){return r.orgAreaOpacity=(0,L.select)(this).style("opacity"),"0"}).merge(i),i.style("opacity",r.orgAreaOpacity),n.setRatioForGroupedData(a.area.data())},redrawArea:function(t,e,n){var i=this,r=this,n=((n=void 0===n?!1:n)?this.$el.subchart:this.$el).area,a=r.state.orgAreaOpacity;return[r.$T(n,e,U()).attr("d",t).style("fill",r.updateAreaColor.bind(r)).style("opacity",function(t){return P(this,i),(r.isAreaRangeType(t)?a/1.75:a)+""}.bind(this))]},generateDrawArea:function(t,n){var o=this,s=this,u=s.config,c=u.line_connectNull,l=u.axis_rotated,i=s.generateGetAreaPoints(t,n),r=s.getYScaleById.bind(s),h=function(t){return P(this,o),(n?s.subxx:s.xx).call(s,t)}.bind(this),d=function(t,e){return P(this,o),s.isGrouped(t.id)?i(t,e)[0][1]:r(t.id,n)(s.isAreaRangeType(t)?s.getRangedData(t,"high"):s.getShapeYMin(t.id))}.bind(this),f=function(t,e){return P(this,o),s.isGrouped(t.id)?i(t,e)[1][1]:r(t.id,n)(s.isAreaRangeType(t)?s.getRangedData(t,"low"):t.value)}.bind(this);return function(t){var e=this;P(this,o);var n,i=c?s.filterRemoveNull(t.values):t.values,r=0,a=0,a=s.isAreaType(t)?(n=(0,Ye.area)(),n=l?n.y(h).x0(d).x1(f):n.x(h).y0(u.area_above?0:u.area_below?s.state.height:d).y1(f),c||(n=n.defined(function(t){return P(this,e),null!==s.getBaseValue(t)}.bind(this))),s.isStepType(t)&&(i=s.convertValuesToStep(i)),n.curve(s.getCurve(t))(i)):(i[0]&&(r=s.scale.x(i[0].x),a=s.getYScaleById(t.id)(i[0].value)),l?"M "+a+" "+r:"M "+r+" "+a);return a||"M 0 0"}.bind(this)},generateGetAreaPoints:function(t,a){var o=this,s=o.config,u=o.getShapeX(0,t,a),c=o.getShapeY(!!a),l=o.getShapeOffset(o.isAreaType,t,a),h=o.getYScaleById.bind(o);return function(t,e){var n=h.call(o,t.id,a)(o.getShapeYMin(t.id)),i=l(t,e)||n,r=u(t),e=t.value,t=c(t);return[[r,i],[r,(t=s.axis_rotated&&(0<e&&t<n||e<0&&n<t)?n:t)-(n-i)],[r,t-(n-i)],[r,i]]}}},Dn={initBar:function(){var t=this.$el,e=this.config,n=this.state.clip;t.bar=t.main.select("."+ht.chart),t.bar=e.bar_front?t.bar.append("g"):t.bar.insert("g",":first-child"),t.bar.attr("class",pt.chartBars).call(this.setCssRule(!1,"."+pt.chartBars,["pointer-events:none"])),!1===e.clipPath&&(e.bar_radius||e.bar_radius_ratio)&&t.bar.attr("clip-path",n.pathXAxis.replace(/#[^)]*/,"#"+n.id))},updateTargetsForBar:function(t){var n=this,i=this,e=i.config,r=i.$el,a=i.getChartClass("Bar"),o=i.getClass("bars",!0),s=i.classFocus.bind(i),u=e.interaction_enabled&&e.data_selection_isselectable;r.bar||i.initBar(),r.main.select("."+pt.chartBars).selectAll("."+pt.chartBar).data(t.filter(function(t){var e=this;return P(this,n),t.values.some(function(t){return P(this,e),N(t.value)||i.isBarRangeType(t)}.bind(this))}.bind(this))).attr("class",function(t){return P(this,n),a(t)+s(t)}.bind(this)).enter().append("g").attr("class",a).style("opacity","0").style("pointer-events",i.getStylePropValue("none")).append("g").attr("class",o).style("cursor",function(t){return P(this,n),null!=u&&null!=u.bind&&u.bind(i.api)(t)?"pointer":null}.bind(this)).call(i.setCssRule(!0," ."+pt.bar,["fill"],i.color))},updateBar:function(t,e){var n=this,i=n.config,r=n.$el,a=n.$T,o=(e=void 0===e?!1:e)?r.subchart:r,e=n.getClass("bar",!0),r=n.initialOpacity.bind(n);i.bar_linearGradient&&n.updateLinearGradient();i=o.main.selectAll("."+pt.bars).selectAll("."+pt.bar).data(n.labelishData.bind(n));a(i.exit(),t).style("opacity","0").remove(),o.bar=i.enter().append("path").attr("class",e).style("fill",n.updateBarColor.bind(n)).merge(i).style("opacity",r),n.setRatioForGroupedData(o.bar.data())},updateBarColor:function(t){var e=this.getStylePropValue(this.color);return this.config.bar_linearGradient?this.getGradienColortUrl(t.id):e?e(t):null},redrawBar:function(e,t,n){var i=this,r=this,n=((n=void 0===n?!1:n)?r.$el.subchart:r.$el).bar;return[r.$T(n,t,U()).attr("d",function(t){return P(this,i),(N(t.value)||r.isBarRangeType(t))&&e(t)}.bind(this)).style("fill",r.updateBarColor.bind(r)).style("opacity",null)]},generateDrawBar:function(t,e){var c=this,l=this,h=l.config,d=l.generateGetBarPoints(t,e),f=h.axis_rotated,n=h.bar_radius,i=h.bar_radius_ratio,g=N(n)&&0<n?function(){return P(this,c),n}.bind(this):N(i)?function(t){return P(this,c),t*i}.bind(this):null;return function(t,e){P(this,c);var n=d(t,e),i=+f,r=+!i,a=t.value<0,o=h["axis_"+l.axis.getId(t.id)+"_inverted"],s=!o&&a||o&&!a,u=["",""],e=0,o=l.isGrouped(t.id),a=!(!g||!o)&&l.isStackingRadiusData(t);g&&(t=n[2][t=f?r:i]-n[0][t],t="a"+(e=!o||a?g(t):0)+","+e+" "+(s?"1 0 0":"0 0 1")+" ",u[+!f]=t+e+","+e,u[+f]=t+[-e,e][f?"sort":"reverse"](),s&&u.reverse());u=f?"H"+(n[1][i]+(s?e:-e))+" "+u[0]+"V"+(n[2][r]-e)+" "+u[1]+"H"+n[3][i]:"V"+(n[1][r]+(s?-e:e))+" "+u[0]+"H"+(n[2][i]-e)+" "+u[1]+"V"+n[3][r];return"M"+n[0][i]+","+n[0][r]+u+"z"}.bind(this)},isStackingRadiusData:function(t){var n=this,e=this.$el,i=this.config,r=this.data,a=this.state,o=t.id,s=t.index,u=t.value;if(-1<a.hiddenTargetIds.indexOf(o)){e=e.bar.filter(function(t){return P(this,n),t.id===o&&t.value===u}.bind(this));return!e.empty()&&/a\d+/i.test(e.attr("d"))}var c=i.data_groups.find(function(t){return P(this,n),-1<t.indexOf(o)}.bind(this)),r=this.orderTargets(this.filterTargetsToShow(r.targets.filter(this.isBarType,this))).filter(function(t){return P(this,n),-1<c.indexOf(t.id)}.bind(this)).map(function(t){var e=this;return P(this,n),t.values.filter(function(t){return P(this,e),t.index===s&&(N(u)&&0<u?0<t.value:t.value<0)}.bind(this))[0]}.bind(this)).filter(Boolean).map(function(t){return P(this,n),t.id}.bind(this));return 0!==u&&r.indexOf(o)===r.length-1},generateGetBarPoints:function(t,u){var c=this,l=this,h=l.config,e=u?l.axis.subX:l.axis.x,n=l.getIndicesMax(t)+1,d=l.getBarW("bar",e,n),f=l.getShapeX(d,t,!!u),g=l.getShapeY(!!u),p=l.getShapeOffset(l.isBarType,t,!!u),v=l.getYScaleById.bind(l);return function(t,e){P(this,c);var n=t.id,i=v.call(l,n,u)(l.getShapeYMin(n)),r=p(t,e)||i,a=N(d)?d:d[t.id]||d._$width,o=h["axis_"+l.axis.getId(n)+"_inverted"],s=t.value,e=f(t),n=g(t);h.axis_rotated&&!o&&(0<s&&n<i||s<0&&i<n)&&(n=i),l.isBarRangeType(t)||(n-=i-r);a=e+a;return[[e,r],[e,n],[a,n],[a,r]]}.bind(this)}};function On(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}var Pn={initCandlestick:function(){var t=this.$el;t.candlestick=t.main.select("."+ht.chart).append("g").attr("class",vt.chartCandlesticks)},updateTargetsForCandlestick:function(t){var e=this,n=this.$el,i=this.getChartClass("Candlestick"),r=this.classFocus.bind(this);n.candlestick||this.initCandlestick(),this.$el.main.select("."+vt.chartCandlesticks).selectAll("."+vt.chartCandlestick).data(t).attr("class",function(t){return P(this,e),i(t)+r(t)}.bind(this)).enter().append("g").attr("class",i).style("pointer-events","none")},updateCandlestick:function(t,e){var n=this,i=this.$el,r=this.$T,a=(e=void 0===e?!1:e)?i.subchart:i,o=this.getClass("candlestick",!0),e=this.initialOpacity.bind(this),i=a.main.selectAll("."+vt.chartCandlestick).selectAll("."+vt.candlestick).data(this.labelishData.bind(this));r(i.exit(),t).style("opacity","0").remove();o=i.enter().filter(function(t){return P(this,n),t.value}.bind(this)).append("g").attr("class",o);o.append("line"),o.append("path"),a.candlestick||(a.candlestick={}),a.candlestick=i.merge(o).style("opacity",e)},generateDrawCandlestick:function(t,e){var c=this,l=this,n=l.config,h=l.generateGetCandlestickPoints(t,e),d=n.axis_rotated,f=n.candlestick_color_down;return function(t,e,n){var i=this;P(this,c);var r=h(t,e),e=l.getCandlestickData(t),a=null==e?void 0:e._isUp,t=+d;n.classed&&n.classed(vt[a?"valueUp":"valueDown"],!0);e=d?"H"+r[1][1]+" V"+r[1][0]+" H"+r[0][1]:"V"+r[1][1]+" H"+r[1][0]+" V"+r[0][1];n.select("path").attr("d","M"+r[0][t]+","+r[0][+!t]+e+"z").style("fill",function(t){return P(this,i),(a?l.color(t):D(f)?f[t.id]:f)||l.color(t)}.bind(this));var o,s=n.select("line"),u=d?{x1:r[2][1],x2:r[2][2],y1:r[2][0],y2:r[2][0]}:{x1:r[2][0],x2:r[2][0],y1:r[2][1],y2:r[2][2]};for(o in u)s.attr(o,u[o])}.bind(this)},generateGetCandlestickPoints:function(t,u){var c=this,l=this,h=l.config,e=(u=void 0===u?!1:u)?l.axis.subX:l.axis.x,n=l.getIndicesMax(t)+1,d=l.getBarW("candlestick",e,n),f=l.getShapeX(d,t,!!u),g=l.getShapeY(!!u),p=l.getShapeOffset(l.isBarType,t,!!u),v=l.getYScaleById.bind(l);return function(t,e){P(this,c);var n,i=v.call(l,t.id,u)(l.getShapeYMin(t.id)),r=p(t,e)||i,a=N(d)?d:d[t.id]||d._$width,o=l.getCandlestickData(t),s=o?((n={start:f(t),end:0}).end=n.start+a,e={start:g(o.open),end:g(o.close)},s={x:n.start+a/2,high:g(o.high),low:g(o.low)},h.axis_rotated&&(0<t.value&&e.start<i||t.value<0&&i<e.start)&&(e.start=i),e.start-=i-r,[[n.start,e.start],[n.end,e.end],[s.x,s.low,s.high]]):[[0,0],[0,0],[0,0,0]];return s}.bind(this)},redrawCandlestick:function(i,r,t){var e=this.$el,a=this.$T,e=((t=void 0===t?!1:t)?e.subchart:e).candlestick,o=U(!0);return[e.each(function(t,e){var n=a((0,L.select)(this),r,o);i(t,e,n)}).style("opacity",null)]},getCandlestickData:function(t){var e,n=t.value;return $(n)?!(e={open:n[0],high:n[1],low:n[2],close:n[3]})!==(t=void 0!==(t=n[4])&&t)&&(e.volume=t):D(n)&&(e=function(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?On(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}({},n)),e&&(e._isUp=e.close>=e.open),e||null}},Ln={initGauge:function(){var t,e=this,n=this.config,i=this.$el.arcs,r=function(t){P(this,e),i.append("text").attr("class",t).style("text-anchor","middle").style("pointer-events","none")}.bind(this);this.hasType("gauge")&&(t=this.hasMultiArcGauge(),i.append(t?"g":"path").attr("class",dt.chartArcsBackground).style("fill",!t&&n.gauge_background||null),n.gauge_units&&r(xt.chartArcsGaugeUnit),n.gauge_label_show&&(r(xt.chartArcsGaugeMin),n.gauge_fullCircle||r(xt.chartArcsGaugeMax)))},updateGaugeMax:function(){var t=this.config,e=this.state,e=this.hasMultiArcGauge()?this.getMinMaxData().max[0].value:this.getTotalDataSum(e.rendered);e+t.gauge_min*(0<t.gauge_min?-1:1)>t.gauge_max&&(t.gauge_max=e-t.gauge_min)},redrawMultiArcGauge:function(){var e=this,u=this,t=u.config,c=u.state,n=u.$el,l=u.state.hiddenTargetIds,n=n.main.selectAll("."+dt.arcs).selectAll("."+dt.arcLabelLine).data(u.arcData.bind(u));n.enter().append("rect").attr("class",function(t){return P(this,e),dt.arcLabelLine+" "+ht.target+" "+ht.target+"-"+t.data.id}.bind(this)).merge(n).style("fill",function(t){return P(this,e),u.levelColor?u.levelColor(t.data.values[0].value):u.color(t.data)}.bind(this)).style("display",t.gauge_label_show?null:"none").each(function(t){var e,n,i,r=0,a=0,o=0,s="";l.indexOf(t.data.id)<0&&(i=u.updateAngle(t),e=c.gaugeArcWidth/u.filterTargetsToShow(u.data.targets).length*(i.index+1),i=(n=i.endAngle-Math.PI/2)-(0==(t=c.radius-e)?0:1/t),r=c.radiusExpanded-c.radius+e,a=Math.cos(i)*t,o=Math.sin(i)*t,s="rotate("+180*n/Math.PI+", "+a+", "+o+")"),(0,L.select)(this).attr("x",a).attr("y",o).attr("width",r).attr("height",2).attr("transform",s).style("stroke-dasharray","0, "+(r+2)+", 0")})},textForGaugeMinMax:function(t,e){var n=this.config.gauge_label_extents;return E(n)?n.bind(this.api)(t,e):t},getGaugeLabelHeight:function(){var t=this.config;return this.config.gauge_label_show&&!t.gauge_fullCircle?20:0},getPaddingBottomForGauge:function(){return this.getGaugeLabelHeight()*(this.config.gauge_label_show?2:2.5)}},Nn={initBubble:function(){var t=this.config;this.hasType("bubble")&&(t.point_show=!0,t.point_type="circle")},getBaseLength:function(){var t=this.state,e=t.width,n=t.height,i=Qt,t=this.cache.get(i);return t||this.cache.add(i,t=nt("min",[e,n])),t},getBubbleR:function(t){var e=this,n=this,i=n.config.bubble_maxR;E(i)?i=i.bind(n.api)(t):N(i)||(i=n.getBaseLength()/(2*n.getMaxDataCount())+12);var r=nt("max",n.getMinMaxData().max.map(function(t){return P(this,e),n.isBubbleZType(t)?n.getBubbleZData(t.value,"y"):D(t.value)?t.value.mid:t.value}.bind(this))),i=i*i*Math.PI,r=(n.isBubbleZType(t)?n.getBubbleZData(t.value,"z"):t.value)*(i/r);return Math.sqrt(r/Math.PI)},getBubbleZData:function(t,e){return D(t)?t[e]:t["y"===e?0:1]}},zn={initLine:function(){var t=this.$el;t.line=t.main.select("."+ht.chart).append("g").attr("class",wt.chartLines).call(this.setCssRule(!1,"."+wt.chartLines,["pointer-events:none"]))},updateTargetsForLine:function(t){var e=this,n=this,i=n.$el,r=i.area,a=i.line,o=i.main,s=n.getChartClass("Line"),i=n.getClass("lines",!0),u=n.classFocus.bind(n);a||n.initLine();a=t.filter(function(t){return P(this,e),!(n.isScatterType(t)||n.isBubbleType(t))}.bind(this)),t=o.select("."+wt.chartLines).selectAll("."+wt.chartLine).data(a).attr("class",function(t){return P(this,e),s(t)+u(t)}.bind(this)),o=t.enter().append("g").attr("class",s).style("opacity","0").style("pointer-events",n.getStylePropValue("none"));o.append("g").attr("class",i),n.hasTypeOf("Area")&&(t=(!r&&o.empty()?t:o).filter(n.isAreaType.bind(n)),n.initArea(t)),n.updateTargetForCircle(a,o)},updateLine:function(t,e){var n=this,i=this,r=i.format.extraLineClasses,a=i.$el,o=i.$T,e=(e=void 0===e?!1:e)?a.subchart:a,a=e.main.selectAll("."+wt.lines).selectAll("."+wt.line).data(i.lineData.bind(i));o(a.exit(),t).style("opacity","0").remove(),e.line=a.enter().append("path").attr("class",function(t){return P(this,n),i.getClass("line",!0)(t)+" "+(r(t)||"")}.bind(this)).style("stroke",i.color).merge(a).style("opacity",i.initialOpacity.bind(i)).attr("transform",null)},redrawLine:function(t,e,n){var i=this.$el;return[(0,this.$T)(((n=void 0===n?!1:n)?i.subchart:i).line,e,U()).attr("d",t).style("stroke",this.color).style("opacity",null)]},getCurve:function(e){var n=this,i=this;return i.config.axis_rotated&&i.isStepType(e)?function(t){P(this,n);t=i.getInterpolate(e)(t);return t.orgPoint=t.point,t.pointRotated=function(t,e){1===this._point&&(this._point=2);var n=this._y*(1-this._t)+e*this._t;this._context.lineTo(this._x,n),this._context.lineTo(t,n),this._x=t,this._y=e},t.point=function(t,e){0===this._point?this.orgPoint(t,e):this.pointRotated(t,e)},t}.bind(this):i.getInterpolate(e)},generateDrawLine:function(t,o){var s=this,u=this,c=u.config,l=u.scale,h=c.line_connectNull,d=c.axis_rotated,n=u.generateGetLinePoints(t,o),f=u.getYScaleById.bind(u),e=function(t){return P(this,s),(o?u.subxx:u.xx).call(u,t)}.bind(this),t=function(t,e){return P(this,s),u.isGrouped(t.id)?n(t,e)[0][1]:f(t.id,o)(u.getBaseValue(t))}.bind(this),g=(0,Ye.line)(),g=d?g.x(t).y(e):g.x(e).y(t);h||(g=g.defined(function(t){return P(this,s),null!==u.getBaseValue(t)}.bind(this)));var p=o?l.subX:l.x;return function(t){P(this,s);var e,n=f(t.id,o),i=h?u.filterRemoveNull(t.values):t.values,r=0,a=0;return(u.isLineType(t)?(e=c.data_regions[t.id])?u.lineWithRegions(i,l.zoom||p,n,e):(u.isStepType(t)&&(i=u.convertValuesToStep(i)),g.curve(u.getCurve(t))(i)):(i[0]&&(r=p(i[0].x),a=n(i[0].value)),d?"M "+a+" "+r:"M "+r+" "+a))||"M 0 0"}.bind(this)},lineWithRegions:function(t,a,o,e){var s=this,n=this,u=n.config.axis_rotated,i=n.axis.isTimeSeries(),r=[];if(I(e))for(var c,l=function(t,e){return P(this,s),z(t)?e:i?ot.call(n,t):t}.bind(this),h=0;c=e[h];h++){var d=l(c.start,t[0].x),f=l(c.end,t[t.length-1].x),g=c.style||{dasharray:"2 2"};r[h]={start:d,end:f,style:g}}for(var p,v=(u?function(t){return P(this,s),o(t.value)}:function(t){return P(this,s),a(t.x)}).bind(this),b=(u?function(t){return P(this,s),a(t.x)}:function(t){return P(this,s),o(t.value)}).bind(this),_=function(t){return P(this,s),"M"+t[0][0]+","+t[0][1]+"L"+t[1][0]+","+t[1][1]}.bind(this),y=(i?function(t,e,n,i){P(this,s);var r=t.x.getTime(),e=e.x-t.x,t=new Date(r+e*n),i=new Date(r+e*(n+i)),n=u?[[o(k(n)),a(t)],[o(k(n+M)),a(i)]]:[[a(t),o(k(n))],[a(i),o(k(n+M))]];return _(n)}:function(t,e,n,i){P(this,s);i=u?[[o(k(n),!0),a(S(n))],[o(k(n+i),!0),a(S(n+i))]]:[[a(S(n),!0),o(k(n))],[a(S(n+i),!0),o(k(n+i))]];return _(i)}).bind(this),x={x:n.axis.getAxisType("x"),y:n.axis.getAxisType("y")},m="",w=0;p=t[w];w++){var T=t[w-1],A=T&&O(T.value),g=n.isWithinRegions(p.x,r);if(O(p.value))if(!z(r)&&g&&A){if(A){try{g=g.dasharray.split(" ")}catch(t){g="2 2".split(" ")}for(var M,S=Xe(x.x,T.x,p.x),k=Xe(x.y,T.value,p.value),E=a(p.x)-a(T.x),C=o(p.value)-o(T.value),C=Math.sqrt(Math.pow(E,2)+Math.pow(C,2)),R=(M=g[0]/C)*g[1],D=M;D<=1;D+=R)m+=y(T,p,D,M),1<=D+R&&(m+=y(T,p,1,0))}}else m+=(w&&A?"L":"M")+v(p)+","+b(p)}return m},isWithinRegions:function(t,e){for(var n,i=0;n=e[i];i++)if(n.start<t&&t<=n.end)return n.style;return!1},isWithinStep:function(t,e){return Math.abs(e-Y(this.state.event,t)[1])<30},shouldDrawPointsForLine:function(t){var e=this.config.line_point;return!0===e||$(e)&&-1!==e.indexOf(t.id)}},In=function(){return P(this,void 0),U()}.bind(void 0),$n={hasValidPointType:function(t){return/^(circle|rect(angle)?|polygon|ellipse|use)$/i.test(t||this.config.point_type)},hasValidPointDrawMethods:function(t){t=t||this.config.point_type;return w(t)&&E(t.create)&&E(t.update)},initialOpacityForCircle:function(t){var e=this.config,n=this.state.withoutFadeIn,e=e.point_opacity;return e=z(e)?null!==this.getBaseValue(t)&&n[t.id]?this.opacityForCircle(t):"0":e},opacityForCircle:function(t){var e=this.config,n=e.point_opacity;return z(n)&&(n=e.point_show&&!e.point_focus_only?null:"0",n=O(this.getBaseValue(t))?this.isBubbleType(t)||this.isScatterType(t)?"0.5":n:"0"),n},initCircle:function(){var t=this.$el.main;this.point=this.generatePoint(),(this.hasType("bubble")||this.hasType("scatter"))&&t.select("."+bt.chartCircles).empty()&&t.select("."+ht.chart).append("g").attr("class",bt.chartCircles)},updateTargetForCircle:function(t,e){var i=this,r=this,n=r.config,a=r.data,o=r.$el,s=n.interaction_enabled&&n.data_selection_enabled,u=s&&n.data_selection_isselectable,c=r.getClass("circles",!0);n.point_show&&(o.circle||r.initCircle(),e=e,(t=t)||(t=a.targets.filter(function(t){return P(this,i),this.isScatterType(t)||this.isBubbleType(t)}.bind(this)),(a=o.main.select("."+bt.chartCircles).style("pointer-events","none").selectAll("."+bt.circles).data(t)).exit().remove(),e=a.enter()),s&&e.append("g").attr("class",function(t){return P(this,i),r.generateClass(Rt.selectedCircles,t.id)}.bind(this)),e.append("g").attr("class",c).call(function(t){P(this,i),r.setCssRule(!0,"."+bt.circles,["cursor:pointer"],u)(t),r.setCssRule(!0," ."+bt.circle,["fill","stroke"],r.color)(t)}.bind(this)).style("opacity",function(){return-1<(0,L.select)(this.parentNode).attr("class").indexOf(bt.chartCircles)?"0":null}),s&&t.forEach(function(e){var n=this;P(this,i),o.main.selectAll("."+Rt.selectedCircles+r.getTargetSelectorSuffix(e.id)).selectAll(""+Rt.selectedCircle).each(function(t){P(this,n),t.value=e.values[t.index].value}.bind(this))}.bind(this)))},updateCircle:function(t){var e=this,n=this,i=n.config,r=n.state,a=n.$el,o=i.point_focus_only,a=(t=void 0===t?!1:t)?a.subchart:a;i.point_show&&!r.toggling&&((r=a.main.selectAll("."+bt.circles).selectAll("."+bt.circle).data(function(t){return P(this,e),n.isLineType(t)&&n.shouldDrawPointsForLine(t)||n.isBubbleType(t)||n.isRadarType(t)||n.isScatterType(t)?o?[t.values[0]]:t.values:[]}.bind(this))).exit().remove(),r.enter().filter(Boolean).append(n.point("create",this,n.pointR.bind(n),n.getStylePropValue(n.color))),a.circle=a.main.selectAll("."+bt.circles+" ."+bt.circle).style("stroke",n.getStylePropValue(n.color)).style("opacity",n.initialOpacityForCircle.bind(n)))},redrawCircle:function(t,e,n,i,r){var a=this,o=a.state.rendered,s=a.$el,u=a.$T,r=(r=void 0===r?!1:r)?s.subchart:s,s=r.main.selectAll("."+Rt.selectedCircle);if(!a.config.point_show)return[];var c=a.point("update",a,t,e,a.getStylePropValue(a.color),n,i,s),i=a.isCirclePoint()?"c":"",l=U(),h=a.opacityForCircle.bind(a),d=[];return r.circle.each(function(t){t=c.bind(this)(t),t=u(t,n||!o,l).style("opacity",h);d.push(t)}),[d,u(s,n).attr(i+"x",t).attr(i+"y",e)]},showCircleFocus:function(i){var a,o=this,t=o.config,e=o.state,n=e.hasRadar,r=e.resizing,s=e.toggling,u=e.transiting,e=o.$el.circle;!1===u&&t.point_focus_only&&e&&(t=(n?o.radarCircleX:o.circleX).bind(o),n=(n?o.radarCircleY:o.circleY).bind(o),s=s||z(i),a=o.point("update",o,t,n,o.getStylePropValue(o.color),!r&&s),(e=i?e.filter(function(e){var n=this,t=null==i.filter?void 0:i.filter(function(t){return P(this,n),t.id===e.id}.bind(this));return!!t.length&&(0,L.select)(this).datum(t[0])}):e).attr("class",this.updatePointClass.bind(this)).style("opacity",null).each(function(t){var e=t.id,n=t.index,i=t.value,r="hidden";O(i)&&(a.bind(this)(t),o.expandCircles(n,e),r=""),this.style.visibility=r}))},hideCircleFocus:function(){var t=this.config,e=this.$el.circle;t.point_focus_only&&e&&(this.unexpandCircles(),e.style("visibility","hidden"))},circleX:function(t){return this.xx(t)},updateCircleY:function(i){var r=this;void 0===i&&(i=!1);var a=this,o=a.generateGetLinePoints(a.getShapeIndices(a.isLineType),i);return function(t,e){P(this,r);var n=t.id;return a.isGrouped(n)?o(t,e)[0][1]:a.getYScaleById(n,i)(a.getBaseValue(t))}.bind(this)},expandCircles:function(t,e,n){var i=this.pointExpandedR.bind(this);n&&this.unexpandCircles();var e=this.getShapeByIndex("circle",t,e).classed(ht.EXPANDED,!0),r=i(e)/this.config.point_r,a=1-r;this.isCirclePoint()?e.attr("r",i):e.each(function(){var t,e,n=(0,L.select)(this);"circle"===this.tagName?n.attr("r",i):(t=(e=this.getBBox()).width,e=e.height,t=a*(+n.attr("x")+t/2),e=a*(+n.attr("y")+e/2),n.attr("transform","translate("+t+" "+e+") scale("+r+")"))})},unexpandCircles:function(t){var e=this.pointR.bind(this),t=this.getShapeByIndex("circle",t).filter(function(){return(0,L.select)(this).classed(ht.EXPANDED)}).classed(ht.EXPANDED,!1);t.attr("r",e),this.isCirclePoint()||(e=e(t)/this.config.point_r,t.attr("transform",1!=e?"scale("+e+")":null))},pointR:function(t){var e=this.config.point_r,n=e;return this.isBubbleType(t)?n=this.getBubbleR(t):E(e)&&(n=e.bind(this.api)(t)),t.r=n},pointExpandedR:function(t){var e=this.config,n=this.isBubbleType(t)?1.15:1.75;return e.point_focus_expand_enabled?e.point_focus_expand_r||this.pointR(t)*n:this.pointR(t)},pointSelectR:function(t){var e=this.config.point_select_r;return E(e)?e(t):e||4*this.pointR(t)},isWithinCircle:function(t,e){var n=Y(this.state.event,t),i=(0,L.select)(t),r=this.isCirclePoint(t)?"c":"",a=+i.attr(r+"x"),r=+i.attr(r+"y");return a||r||1!==t.nodeType||(a=(t=V(t)).x,r=t.y),Math.sqrt(Math.pow(a-n[0],2)+Math.pow(r-n[1],2))<(e||this.config.point_sensitivity)},getPointSensitivity:function(t){var e=this.config.point_sensitivity;return E(e)?e=e.call(this.api,t):"radius"===e&&(e=t.r),e},insertPointInfoDefs:function(t,e){var n,a=this,i=function(t,e){P(this,a);for(var n,i=t.attributes,r=0;n=i[r];r++)n=n.name,e.setAttribute(n,t.getAttribute(n))}.bind(this),r=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement,t=v.createElementNS(L.namespaces.svg,r.nodeName.toLowerCase());t.id=e,t.style.fill="inherit",t.style.stroke="inherit",i(r,t),null!=(e=r.childNodes)&&e.length&&(n=(0,L.select)(t),"innerHTML"in t?n.html(r.innerHTML):Z(r.childNodes).forEach(function(t){P(this,a),i(t,n.append(t.tagName).node())}.bind(this))),this.$el.defs.node().appendChild(t)},pointFromDefs:function(t){return this.$el.defs.select("#"+t)},updatePointClass:function(t){var e=this,n=e.$el.circle,i=!1;return i=D(t)||n?!0===t?n.each(function(t){t=e.getClass("circle",!0)(t);-1<this.getAttribute("class").indexOf(ht.EXPANDED)&&(t+=" "+ht.EXPANDED),this.setAttribute("class",t)}):e.getClass("circle",!0)(t):i},generateGetLinePoints:function(t,a){var o=this,s=this,u=s.config,c=s.getShapeX(0,t,a),l=s.getShapeY(a),h=s.getShapeOffset(s.isLineType,t,a),d=s.getYScaleById.bind(s);return function(t,e){P(this,o);var n=d.call(s,t.id,a)(s.getShapeYMin(t.id)),i=h(t,e)||n,r=c(t),e=l(t),i=[r,(e=u.axis_rotated&&(0<t.value&&e<n||t.value<0&&n<e)?n:e)-(n-i)];return[i,i,i,i]}.bind(this)},generatePoint:function(){var o=this,t=o.config,s=o.state.datetimeId,u=[],c=R(t.point_pattern)?t.point_pattern:[t.point_type];return function(i,r){for(var t=arguments.length,a=Array(2<t?t-2:0),e=2;e<t;e++)a[e-2]=arguments[e];return function(t){var e=o.getTargetSelectorSuffix(t.id||(null==(n=t.data)?void 0:n.id)||t),n=(0,L.select)(this);u.indexOf(e)<0&&u.push(e);t=c[u.indexOf(e)%c.length];if(o.hasValidPointType(t))t=o[t];else if(!o.hasValidPointDrawMethods(t)){e=s+"-point"+e;if(o.pointFromDefs(e).size()<1&&o.insertPointInfoDefs(t,e),"create"===i)return o.custom.create.bind(r).apply(void 0,[n,e].concat(a));if("update"===i)return o.custom.update.bind(r).apply(void 0,[n].concat(a))}return t[i].bind(r).apply(void 0,[n].concat(a))}}},custom:{create:function(t,e,n){return t.append("use").attr("xlink:href","#"+e).attr("class",this.updatePointClass.bind(this)).style("fill",n).node()},update:function(t,e,n,i,r,a,o){var s=this,u=t.node().getBBox(),c=u.width,l=u.height,h=function(t){return P(this,s),O(t.value)?e(t)-c/2:0}.bind(this),u=function(t){return P(this,s),O(t.value)?n(t)-l/2:0}.bind(this),t=t;return r&&(a&&t.attr("x",h),t=this.$T(t,r,In()),o&&this.$T(o,r,In())),t.attr("x",h).attr("y",u).style("fill",i)}},circle:{create:function(t,e,n){return t.append("circle").attr("class",this.updatePointClass.bind(this)).attr("r",e).style("fill",n).node()},update:function(t,e,n,i,r,a,o){return this.hasType("bubble")&&t.attr("r",this.pointR.bind(this)),r&&(a&&t.attr("cx",e),t.attr("cx")&&(t=this.$T(t,r,In())),o&&this.$T(t,r,In())),t.attr("cx",e).attr("cy",n).style("fill",i)}},rectangle:{create:function(t,e,n){var i=this,r=function(t){return P(this,i),2*e(t)}.bind(this);return t.append("rect").attr("class",this.updatePointClass.bind(this)).attr("width",r).attr("height",r).style("fill",n).node()},update:function(t,e,n,i,r,a,o){var s=this,u=this.config.point_r,c=function(t){return P(this,s),e(t)-u}.bind(this),l=function(t){return P(this,s),n(t)-u}.bind(this),t=t;return r&&(a&&t.attr("x",c),t=this.$T(t,r,In()),o&&this.$T(o,r,In())),t.attr("x",c).attr("y",l).style("fill",i)}}};function Fn(t){var e=t.config.polar_level_max,t=t.getMinMaxData().max[0].value;return t=e&&t<e?e:t}var Bn={initPolar:function(){var t=this.$el.arcs,e=this.config,n=e.polar_level_text_show,e=e.polar_level_text_backgroundColor;t.levels=t.append("g").attr("class",kt),n&&e&&this.generateDataLabelBackgroundColorFilter(e)},getPolarOuterRadius:function(t,e){var n=Fn(this);return(null!=(t=null==t?void 0:t.data.values[0].value)?t:0)/n*e},updateTargetsForPolar:function(t){this.updateTargetsForArc(t)},redrawPolar:function(){this.config.polar_level_show&&this.updatePolarLevel()},updatePolarLevel:function(){var n=this,t=this.config,e=this.state,i=this.$el.arcs.levels,r=t.polar_level_depth,a=Fn(this),o=it(0,r),s=e.radius,u=o.map(function(t){return P(this,n),s*((t+1)/r)}.bind(this)),c=(t.polar_level_text_format||function(){}).bind(this.api),l=i.selectAll("."+St).data(o);l.exit().remove();i=l.enter().append("g").attr("class",function(t,e){return P(this,n),St+" "+St+"-"+e}.bind(this));i.append("circle"),i.merge(l).selectAll("circle").style("visibility",t.polar_level_show?null:"hidden").attr("cx",0).attr("cy",0).attr("r",function(t){return P(this,n),u[t]}.bind(this)),t.polar_level_text_show&&(t=t.polar_level_text_backgroundColor,e="#"+e.datetimeId+"-labels-bg"+this.getTargetSelectorSuffix(t),i.append("text").style("text-anchor","middle"),i.merge(l).selectAll("text").attr("dy",function(t){return P(this,n),5-u[t]}.bind(this)).attr("filter",t?"url("+e+")":null).text(function(t){return P(this,n),c(a/o.length*(t+1))}.bind(this)))}};var Xn=ae,jn={initRadar:function(){var t=this.config,e=this.state.current,n=this.$el;this.hasType("radar")&&(n.radar=n.main.select("."+ht.chart).append("g").attr("class",Et.chartRadars),n.radar.levels=n.radar.append("g").attr("class",kt),n.radar.axes=n.radar.append("g").attr("class",gt.axis),n.radar.shapes=n.radar.append("g").attr("class",Dt.shapes),e.dataMax=t.radar_axis_max||this.getMinMaxData().max[0].value)},getRadarSize:function(){var t=this.config,e=this.state,n=e.arcWidth,e=e.arcHeight,t=t.axis_x_categories.length<4?-20:10,t=(Math.min(n,e)-t)/2;return[t,t]},updateTargetsForRadar:function(t){var e=this,n=this.config;T(n.axis_x_categories)&&(n.axis_x_categories=it(0,nt("max",t.map(function(t){return P(this,e),t.values.length}.bind(this))))),this.generateRadarPoints()},getRadarPosition:function(s,u,c,l){var h=this,d=this.config,t=this.getRadarSize(),f=t[0],g=t[1],p=d.axis_x_categories.length,v=d.radar_direction_clockwise,t=Z(s).map(function(t){return P(this,h),e=v,n=t,i=p,r=u,a=I(c)?c:"x"===s?f:g,o=N(l)?l:d.radar_size_ratio,t=2*Math.PI,a*(1-o*("x"===n?Math.sin:Math.cos)((e&&0<r?i-r:r)*t/i));var e,n,i,r,a,o}.bind(this));return 1===t.length?t[0]:t},generateRadarPoints:function(){var e=this,i=this,t=i.data.targets,n=i.getRadarSize(),r=n[0],a=n[1],o=i.cache.get(Xn)||{},n=o._size;n&&(n.width===r||n.height===a)||(t.forEach(function(t){var n=this;P(this,e),o[t.id]=t.values.map(function(t,e){return P(this,n),i.getRadarPosition(["x","y"],e,void 0,i.getRatio("radar",t))}.bind(this))}.bind(this)),o._size={width:r,height:a},i.cache.add(Xn,o))},redrawRadar:function(){var t=this.$el,e=t.radar,n=t.main,t=this.getTranslate("radar");t&&(e.attr("transform",t),n.select("."+Pt.chartTexts).attr("transform",t),this.generateRadarPoints(),this.updateRadarLevel(),this.updateRadarAxes(),this.updateRadarShape())},generateGetRadarPoints:function(){var n=this,i=this.cache.get(Xn);return function(t,e){P(this,n);e=i[t.id][e];return[e,e,e,e]}.bind(this)},updateRadarLevel:function(){var i=this,r=this,t=r.config,e=r.state,n=r.$el.radar,a=r.getRadarSize(),o=a[0],s=a[1],u=t.radar_level_depth,c=t.axis_x_categories.length,l=t.radar_level_text_show,h=n.levels,d=it(0,u),f=t.radar_size_ratio*Math.min(o,s),g=d.map(function(t){return P(this,i),(t+1)/u*f}.bind(this)),p=(t.radar_level_text_format||function(){}).bind(r.api),v=d.map(function(t){var e=this;P(this,i);var n=g[t];return it(0,c).map(function(t){return P(this,e),r.getRadarPosition(["x","y"],t,n,1).join(",")}.bind(this)).join(" ")}.bind(this)),a=h.selectAll("."+St).data(d);a.exit().remove();n=a.enter().append("g").attr("class",function(t,e){return P(this,i),St+" "+St+"-"+e}.bind(this));n.append("polygon").style("visibility",t.radar_level_show?null:"hidden"),l&&(h.select("text").empty()&&h.append("text").attr("dx","-.5em").attr("dy","-.7em").style("text-anchor","end").text(function(){return P(this,i),p(0)}.bind(this)),n.append("text").attr("dx","-.5em").style("text-anchor","end").text(function(t){return P(this,i),p(e.current.dataMax/d.length*(t+1))}.bind(this))),n.merge(a).attr("transform",function(t){return P(this,i),"translate("+(o-g[t])+", "+(s-g[t])+")"}.bind(this)).selectAll("polygon").attr("points",function(t){return P(this,i),v[t]}.bind(this)),l&&h.selectAll("text").attr("x",function(t){return P(this,i),z(t)?o:v[t].split(",")[0]}.bind(this)).attr("y",function(t){return P(this,i),z(t)?s:0}.bind(this))},updateRadarAxes:function(){var n=this,i=this,t=i.config,e=i.$el.radar,r=i.getRadarSize(),a=r[0],o=r[1],r=t.axis_x_categories,e=e.axes.selectAll("g").data(r);e.exit().remove();var s,u,r=e.enter().append("g").attr("class",function(t,e){return P(this,n),gt.axis+"-"+e}.bind(this));t.radar_axis_line_show&&r.append("line"),t.radar_axis_text_show&&r.append("text"),e=r.merge(e),t.radar_axis_line_show&&e.select("line").attr("x1",a).attr("y1",o).attr("x2",function(t,e){return P(this,n),i.getRadarPosition("x",e)}.bind(this)).attr("y2",function(t,e){return P(this,n),i.getRadarPosition("y",e)}.bind(this)),t.radar_axis_text_show&&(t=(r=t.radar_axis_text_position).x,s=void 0===t?0:t,r=r.y,u=void 0===r?0:r,e.select("text").style("text-anchor","middle").attr("dy",".5em").call(function(t){P(this,n),t.each(function(t){X((0,L.select)(this),t+"",[-.6,1.2])})}.bind(this)).datum(function(t,e){return P(this,n),{index:e}}.bind(this)).attr("transform",function(t){z(this.width)&&(this.width=this.getBoundingClientRect().width/2);var e=i.getRadarPosition("x",t.index,void 0,1),t=Math.round(i.getRadarPosition("y",t.index,void 0,1));return a<e?e+=this.width+s:Math.round(e)<a&&(e-=this.width+s),o<t?(t/2===o&&"tspan"===this.firstChild.tagName&&this.firstChild.setAttribute("dy","0em"),t+=u):t<o&&(t-=u),"translate("+e+" "+t+")"})),i.bindRadarEvent()},bindRadarEvent:function(){var n,i=this,r=this,t=r.config,a=r.state,e=r.$el,o=e.radar,s=e.svg,u=t.point_focus_only,e=a.inputType,c=a.transiting;t.interaction_enabled&&(n="mouse"===e,e=function(t){P(this,i),a.event=t;var e=r.getDataIndexFromEvent(t),t=z(e);(n||t)&&(r.hideTooltip(),u?r.hideCircleFocus():r.unexpandCircles(),n?r.setOverOut(!1,e):t&&r.callOverOutForTouch())}.bind(this),o.axes.selectAll("text").on(n?"mouseover ":"touchstart",function(t){P(this,i),c||(a.event=t,t=r.getDataIndexFromEvent(t),r.selectRectForSingle(s.node(),t),n?r.setOverOut(!0,t):r.callOverOutForTouch(t))}.bind(this)).on("mouseout",n?e:null),n||s.on("touchstart",e))},updateRadarShape:function(){var e=this,n=this,t=n.data.targets.filter(function(t){return P(this,e),n.isRadarType(t)}.bind(this)),i=n.cache.get(Xn),r=n.$el.radar.shapes.selectAll("polygon").data(t),a=r.enter().append("g").attr("class",n.getChartClass("Radar"));n.$T(r.exit()).remove(),a.append("polygon").merge(r).style("fill",n.color).style("stroke",n.color).attr("points",function(t){return P(this,e),i[t.id].join(" ")}.bind(this)),n.updateTargetForCircle(t,a)},radarCircleX:function(t){return this.cache.get(Xn)[t.id][t.index][0]},radarCircleY:function(t){return this.cache.get(Xn)[t.id][t.index][1]}},Yn=qi(13);function Gn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Vn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var Un={initTreemap:function(){var i=this,r=this,t=r.$el,e=r.state,n=e.current,a=n.width,o=n.height,n=e.clip,e=e.datetimeId;n.id=e+"-clip",r.treemap=(0,Yn.treemap)().tile(r.getTreemapTile()),r.treemapFn=function(t){var e=this;P(this,i);var n=(0,Yn.hierarchy)(t).sum(function(t){return P(this,e),t.value}.bind(this)),t=r.getSortCompareFn(!0);return r.treemap(t?n.sort(t):n)}.bind(this),t.defs.append("clipPath").attr("id",n.id).append("rect").attr("width",a).attr("height",o),t.treemap=t.main.select("."+ht.chart).attr("clip-path","url(#"+n.id+")").append("g").classed(Nt.chartTreemaps,!0),r.bindTreemapEvent()},bindTreemapEvent:function(){var i=this,n=this,t=n.$el,e=n.config,r=n.state,a=function(t){P(this,i);var e,n=t.isTrusted?t.target:null==(n=r.eventReceiver.rect)?void 0:n.node();return/^rect$/i.test(n.tagName)&&(r.event=t,e=(0,L.select)(n).datum()),null==e?void 0:e.data}.bind(this);e.interaction_enabled&&(e="touch"===r.inputType,t.treemap.on(e?"touchstart":"mousemove",function(t){P(this,i);var e=a(t);e&&(n.showTooltip([e],t.currentTarget),"mouseover"===t.type&&n.setOverOut(!0,e))}.bind(this)).on(e?"touchend":"mouseout",function(t){P(this,i);t=a(t);n.hideTooltip(),n.setOverOut(!1,t)}.bind(this)))},getTreemapTile:function(){var t=this.config,e=this.state.current,s=e.width,u=e.height,c=null!=(t={binary:Yn.treemapBinary,dice:Yn.treemapDice,slice:Yn.treemapSlice,sliceDice:Yn.treemapSliceDice,squarify:Yn.treemapSquarify,resquarify:Yn.treemapResquarify}[null!=(t=t.treemap_tile)?t:"binary"])?t:Yn.treemapBinary,l=this;return function(t,e,n,i,r){P(this,l),c(t,0,0,s,u);for(var a=Gn(t.children);!(o=a()).done;){var o=o.value;o.x0=e+o.x0/s*(i-e),o.x1=e+o.x1/s*(i-e),o.y0=n+o.y0/u*(r-n),o.y1=n+o.y1/u*(r-n)}}.bind(this)},getTreemapData:function(t){return{name:"root",children:function(t){var n=this,i=this;return t.map(function(t){P(this,n);var e=t.id,t=t.values;return{name:e,id:e,value:t[0].value,ratio:i.getRatio("treemap",t[0])}}.bind(this))}.bind(this)(this.filterTargetsToShow(t.filter(this.isTreemapType,this)))}},updateTargetsForTreemap:function(t){var e=this.$el.treemap,t=this.treemapFn(this.getTreemapData(null!=t?t:this.data.targets));e.data(t)},updateTreemap:function(t){var e=this,n=this,i=n.$el,r=n.$T,a=i.treemap.datum(),o=n.getChartClass("Treemap"),a=i.treemap.selectAll("g").data(a.children);r(a.exit(),t).style("opacity","0").remove(),a.enter().append("g").append("rect"),i.treemap.selectAll("g").attr("class",o).select("rect").attr("fill",function(t){return P(this,e),n.color(t.data.name)}.bind(this))},generateGetTreemapPoints:function(){var e=this,t=this.$el,n=this.scale,i=n.x,r=n.y,a={};return t.treemap.selectAll("g").each(function(t){P(this,e),a[t.data.name]=[[i(t.x0),r(t.y0)],[i(t.x1),r(t.y1)]]}.bind(this)),function(t){return P(this,e),a[t.id]}.bind(this)},redrawTreemap:function(t){var e=this.$el,n=this.state.current,i=n.width,n=n.height;return e.defs.select("rect").attr("width",i).attr("height",n),[this.$T(e.treemap,t,U()).call(function(t,e){var n=this,i=this.scale,r=i.x,a=i.y,o=this.state.width;t.selectAll("g").attr("transform",function(t){return P(this,n),"translate("+(t===e?"0,0":r(t.x0)+","+a(t.y0))+")"}.bind(this)).select("rect").attr("width",function(t){return P(this,n),t===e?o:r(t.x1)-r(t.x0)}.bind(this)).attr("height",function(t){return P(this,n),t===e?0:a(t.y1)-a(t.y0)}.bind(this))}.bind(this),e.treemap.datum())]},treemapDataLabelFormat:function(t){var e=this,n=e.config,i=t.id,r=t.value,a=n.treemap_label_format,o=e.getRatio("treemap",t),s=(100*o).toFixed(2),u=n.treemap_label_show&&e.meetsLabelThreshold(o,"treemap")?null:"0";return function(t){return t.style("opacity",u),E(a)?a.bind(e.api)(r,o,i):i+"\n"+s+"%"}}},Hn={point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_focus_only:!1,point_opacity:void 0,point_pattern:[],point_select_r:void 0,point_type:"circle"},qn={area_above:!1,area_below:!1,area_front:!0,area_linearGradient:!1,area_zerobased:!0},Wn={bar_front:!1,bar_indices_removeNull:!1,bar_label_threshold:0,bar_linearGradient:!1,bar_overlap:!1,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0},Zn={bubble_maxR:35,bubble_zerobased:!1},Jn={candlestick_width:void 0,candlestick_width_ratio:.6,candlestick_width_max:void 0,candlestick_color_down:"red"},Kn={line_connectNull:!1,line_step_type:"step",line_step_tooltipMatch:!1,line_zerobased:!1,line_classes:void 0,line_point:!0},Qn={scatter_zerobased:!1},ti={spline_interpolation_type:"cardinal"},ei={arc_cornerRadius:0,arc_cornerRadius_ratio:0,arc_needle_show:!1,arc_needle_color:void 0,arc_needle_value:void 0,arc_needle_path:void 0,arc_needle_length:100,arc_needle_top_rx:0,arc_needle_top_ry:0,arc_needle_top_width:0,arc_needle_bottom_rx:1,arc_needle_bottom_ry:1,arc_needle_bottom_width:15,arc_needle_bottom_len:0},ni={donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_rate:.98,donut_expand_duration:50,donut_padAngle:0,donut_startingAngle:0},ii={gauge_background:"",gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_label_extents:void 0,gauge_label_threshold:0,gauge_min:0,gauge_max:100,gauge_type:"single",gauge_startingAngle:-1*Math.PI/2,gauge_arcLength:100,gauge_title:"",gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_rate:.98,gauge_expand_duration:50},ri={pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_rate:.98,pie_expand_duration:50,pie_innerRadius:0,pie_outerRadius:void 0,pie_padAngle:0,pie_padding:0,pie_startingAngle:0},ai={polar_label_show:!0,polar_label_format:void 0,polar_label_threshold:.05,polar_label_ratio:void 0,polar_level_depth:3,polar_level_max:void 0,polar_level_show:!0,polar_level_text_backgroundColor:"#fff",polar_level_text_format:function(t){return P(this,void 0),t%1==0?t:t.toFixed(2)}.bind(void 0),polar_level_text_show:!0,polar_padAngle:0,polar_padding:0,polar_startingAngle:0},oi={radar_axis_max:void 0,radar_axis_line_show:!0,radar_axis_text_show:!0,radar_axis_text_position:{},radar_level_depth:3,radar_level_show:!0,radar_level_text_format:function(t){return P(this,void 0),t%1==0?t:t.toFixed(2)}.bind(void 0),radar_level_text_show:!0,radar_size_ratio:.87,radar_direction_clockwise:!1},si={treemap_tile:"binary",treemap_label_format:void 0,treemap_label_threshold:.05,treemap_label_show:!0},ui=void 0;function ci(t,e){q(Je.prototype,wn.concat(t)),q(nn.prototype,mn),Kt.setOptions(Tn.concat(e||[]))}function li(t,e){ci([$n,zn].concat(t||[])),Kt.setOptions([Hn,Kn].concat(e||[]))}function hi(t,e){q(Je.prototype,[Cn].concat(t||[])),Kt.setOptions(e)}var di=function(){var t=this;return P(this,ui),li(Rn,[qn]),(di=function(){return P(this,t),S.AREA}.bind(this))()}.bind(void 0),fi=function(){var t=this;return P(this,ui),li(Rn,[qn]),(fi=function(){return P(this,t),S.AREA_LINE_RANGE}.bind(this))()}.bind(void 0),gi=function(){var t=this;return P(this,ui),li(Rn,[qn,ti]),(gi=function(){return P(this,t),S.AREA_SPLINE}.bind(this))()}.bind(void 0),pi=function(){var t=this;return P(this,ui),li(Rn,[qn,ti]),(pi=function(){return P(this,t),S.AREA_SPLINE_RANGE}.bind(this))()}.bind(void 0),vi=function(){var t=this;return P(this,ui),li(Rn,[qn]),(vi=function(){return P(this,t),S.AREA_STEP}.bind(this))()}.bind(void 0),bi=function(){var t=this;return P(this,ui),li(),(bi=function(){return P(this,t),S.LINE}.bind(this))()}.bind(void 0),_i=function(){var t=this;return P(this,ui),li(void 0,[ti]),(_i=function(){return P(this,t),S.SPLINE}.bind(this))()}.bind(void 0),yi=function(){var t=this;return P(this,ui),li(),(yi=function(){return P(this,t),S.STEP}.bind(this))()}.bind(void 0),xi=function(){var t=this;return P(this,ui),hi(void 0,[ei,ni]),(xi=function(){return P(this,t),S.DONUT}.bind(this))()}.bind(void 0),mi=function(){var t=this;return P(this,ui),hi([Ln],[ei,ii]),(mi=function(){return P(this,t),S.GAUGE}.bind(this))()}.bind(void 0),wi=function(){var t=this;return P(this,ui),hi(void 0,[ei,ri]),(wi=function(){return P(this,t),S.PIE}.bind(this))()}.bind(void 0),Ti=function(){var t=this;return P(this,ui),hi([Bn],[ei,ai]),(Ti=function(){return P(this,t),S.POLAR}.bind(this))()}.bind(void 0),Ai=function(){var t=this;return P(this,ui),hi([$n,jn],[Hn,oi]),(Ai=function(){return P(this,t),S.RADAR}.bind(this))()}.bind(void 0),Mi=function(){var t=this;return P(this,ui),ci([Dn],Wn),(Mi=function(){return P(this,t),S.BAR}.bind(this))()}.bind(void 0),Si=function(){var t=this;return P(this,ui),ci([$n,Nn],[Zn,Hn]),(Si=function(){return P(this,t),S.BUBBLE}.bind(this))()}.bind(void 0),ki=function(){var t=this;return P(this,ui),ci([Pn],[Jn]),(ki=function(){return P(this,t),S.CANDLESTICK}.bind(this))()}.bind(void 0),Ei=function(){var t=this;return P(this,ui),ci([$n],[Hn,Qn]),(Ei=function(){return P(this,t),S.SCATTER}.bind(this))()}.bind(void 0),Ci=function(){var t=this;return P(this,ui),ci([Un],[si]),(Ci=function(){return P(this,t),S.TREEMAP}.bind(this))()}.bind(void 0);function Ri(s,u,c,l){void 0===s&&(s=!1);var h=this,t=h.config,e=h.$el.main,d=t.data_selection_grouped,f=t.data_selection_isselectable.bind(h.api);t.data_selection_enabled&&e.selectAll("."+Dt.shapes).selectAll("."+Dt.shape).each(function(t){var e=(0,L.select)(this),n=t.data||t,i=n.id,r=n.index,a=h.getToggle(this,t).bind(h),o=d||!u||0<=u.indexOf(i),n=!c||0<=c.indexOf(r),i=e.classed(Rt.SELECTED);e.classed(wt.line)||e.classed(ft.area)||(s?o&&n&&f(t)&&!i?a(!0,e.classed(Rt.SELECTED,!0),t,r):I(l)&&l&&i&&a(!1,e.classed(Rt.SELECTED,!1),t,r):o&&n&&f(t)&&i&&a(!1,e.classed(Rt.SELECTED,!1),t,r))})}var Di={selected:function(t){var e=this,n=this.internal,i=[];return n.$el.main.selectAll("."+(Dt.shapes+n.getTargetSelectorSuffix(t))).selectAll("."+Dt.shape).filter(function(){return(0,L.select)(this).classed(Rt.SELECTED)}).each(function(t){return P(this,e),i.push(t)}.bind(this)),i},select:function(t,e,n){var i=this.internal;Ri.bind(i)(!0,t,e,n)},unselect:function(t,e){var n=this.internal;Ri.bind(n)(!1,t,e)}},Oi={subchart:{show:function(){var t=this.internal,e=t.$el.subchart,n=t.config,i=n.subchart_show;i||(t.unbindZoomEvent(),n.subchart_show=!i,e.main||t.initSubchart(),i=e.main.selectAll("."+ht.target),t.data.targets.length!==i.size()&&(t.updateSizes(),t.updateTargetsForSubchart(t.data.targets),i=null==(t=e.main)?void 0:t.selectAll("."+ht.target)),null==i||i.style("opacity",null),null==(e=e.main)||e.style("display",null),this.resize())},hide:function(){var t=this.internal,e=t.$el.subchart.main,t=t.config;t.subchart_show&&"none"!==(null==e?void 0:e.style("display"))&&(t.subchart_show=!1,e.style("display","none"),this.resize())},toggle:function(){var t=this.internal.config;this.subchart[t.subchart_show?"hide":"show"]()}}},Pi=qi(14);ae=function(t){var n=this,e=this.internal,i=e.$el,r=e.axis,a=e.config,o=e.org,s=e.scale,u=a.axis_rotated,c=a.axis_x_inverted,l=r.isCategorized(),t=t;return a.zoom_enabled&&t?function(i,r,t,a){var o=this;void 0===a&&(a=!1);var s=t[0],u=t[1];return i.every(function(t,e){var n=this;return P(this,o),(0===e?a?+t<=s:s<=+t:a?u<=+t:+t<=u)&&!i.every(function(t,e){return P(this,n),t===r[e]}.bind(this))}.bind(this))}(t=r.isTimeSeries()?t.map(function(t){return P(this,n),ot.bind(e)(t)}.bind(this)):t,e.getZoomDomain(!0),e.getZoomDomain(),c)&&(l&&(t=t.map(function(t,e){return P(this,n),+t+(0===e?0:1)}.bind(this))),e.api.tooltip.hide(),a.subchart_show?(a=s.zoom||s.x,e.brush.getSelection().call(e.brush.move,t.map(a))):(o=[-(l=l?s.x.orgScale():o.xScale||s.x)(t[0]),0],o=(l=Pi.zoomIdentity.scale(l.range()[1]/(l(t[1])-l(t[0])))).translate.apply(l,u?o.reverse():o),i.eventRect.call(e.zoom.transform,o)),e.setZoomResetButton()):t=s.zoom?s.zoom.domain():s.x.orgDomain(),t};q(ae,{enable:function(t){var e=this.internal,n=e.config;/^(drag|wheel)$/.test(t)&&(n.zoom_type=t),n.zoom_enabled=!!t,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,n=e.config,e=e.org.xDomain;return 0!==t&&!t||(n.zoom_x_max=nt("max",[e[1],t])),n.zoom_x_max},min:function(t){var e=this.internal,n=e.config,e=e.org.xDomain;return 0!==t&&!t||(n.zoom_x_min=nt("min",[e[0],t])),n.zoom_x_min},range:function(t){var e,n=this.zoom;return D(t)&&(e=t.min,t=t.max,I(e)&&n.min(e),I(t)&&n.max(t)),{min:n.min(),max:n.max()}}});var Li={zoom:ae,unzoom:function(){var t=this.internal,e=t.config,n=t.$el,i=n.eventRect,n=n.zoomResetBtn;t.scale.zoom&&(e.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(Pi.zoomIdentity),t.updateZoom(!0),null==n||n.style("display","none"),(0,Pi.zoomTransform)(i.node())!==Pi.zoomIdentity&&t.zoom.transform(i,Pi.zoomIdentity))}};function Ni(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function zi(e){for(var n,t=1;t<arguments.length;t++)n=null!=arguments[t]?arguments[t]:{},t%2?Ni(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}var Ii=zi(zi({},{drag:function(t){var e,n,h,d,f,g,i=this,p=this,r=p.config,a=p.state,o=p.$el.main,s=r.data_selection_grouped,u=r.interaction_enabled&&r.data_selection_isselectable;p.hasArcType()||!r.data_selection_enabled||r.zoom_enabled&&!p.zoom.altDomain||!r.data_selection_multiple||(e=(n=a.dragStart||[0,0])[0],r=n[1],n=t[0],t=t[1],h=Math.min(e,n),d=Math.max(e,n),f=s?a.margin.top:Math.min(r,t),g=s?a.height:Math.max(r,t),o.select("."+yt.dragarea).attr("x",h).attr("y",f).attr("width",d-h).attr("height",g-f),o.selectAll("."+Dt.shapes).selectAll("."+Dt.shape).filter(function(t){return P(this,i),null==u?void 0:u.bind(p.api)(t)}.bind(this)).each(function(t,e){var n,i=(0,L.select)(this),r=i.classed(Rt.SELECTED),a=i.classed(yt.INCLUDED),o=!1;if(i.classed(bt.circle))var s=+i.attr("cx"),u=+i.attr("cy"),c=p.togglePoint,o=h<s&&s<d&&f<u&&u<g;else{if(!i.classed(pt.bar))return;var s=(s=(l=(n=this).getBoundingClientRect()).width,l=l.height,{x:(n=j(n))[0].x,y:Math.min(n[0].y,n[1].y),width:s,height:l}),l=s.x,u=s.y;c=p.togglePath,o=!(d<l||l+s.width<h||g<u||u+s.height<f)}o^a&&(i.classed(yt.INCLUDED,!a),i.classed(Rt.SELECTED,!r),c.call(p,!r,i,t,e))}))},dragstart:function(t){var e=this.config,n=this.state,i=this.$el.main;!this.hasArcType()&&e.data_selection_enabled&&(n.dragStart=t,i.select("."+ht.chart).append("rect").attr("class",yt.dragarea).style("opacity","0.1"),this.setDragStatus(!0))},dragend:function(){var t=this.config,e=this.$el.main,n=this.$T;!this.hasArcType()&&t.data_selection_enabled&&(n(e.select("."+yt.dragarea)).style("opacity","0").remove(),e.selectAll("."+Dt.shape).classed(yt.INCLUDED,!1),this.setDragStatus(!1))}}),{},{selectPoint:function(t,e,n){var i=this,r=this,a=r.config,o=r.$el.main,s=r.$T,u=a.axis_rotated,c=(u?r.circleY:r.circleX).bind(r),l=(u?r.circleX:r.circleY).bind(r),u=r.pointSelectR.bind(r);M(a.data_onselected,r.api,e,t.node()),s(o.select("."+Rt.selectedCircles+r.getTargetSelectorSuffix(e.id)).selectAll("."+Rt.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return P(this,i),r.generateClass(Rt.selectedCircle,n)}.bind(this)).attr("cx",c).attr("cy",l).attr("stroke",r.color).attr("r",function(t){return P(this,i),1.4*r.pointSelectR(t)}.bind(this))).attr("r",u)},unselectPoint:function(t,e,n){var i=this.config,r=this.$el.main,a=this.$T;M(i.data_onunselected,this.api,e,null==t?void 0:t.node()),a(r.select("."+Rt.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+Rt.selectedCircle+"-"+n)).attr("r",0).remove()},togglePoint:function(t,e,n,i){this[(t?"":"un")+"selectPoint"](e,n,i)},selectPath:function(t,e){var n=this.config;M(n.data_onselected,this.api,e,t.node()),n.interaction_brighten&&t.style("filter","brightness(1.25)")},unselectPath:function(t,e){var n=this.config;M(n.data_onunselected,this.api,e,t.node()),n.interaction_brighten&&t.style("filter",null)},togglePath:function(t,e,n,i){this[(t?"":"un")+"selectPath"](e,n,i)},getToggle:function(t,e){var n=this;return"path"===t.nodeName?this.togglePath:this.isStepType(e)?function(){P(this,n)}.bind(this):this.togglePoint},toggleShape:function(t,e,n){var i,r,a,o,s,u=this.config,c=this.$el.main;u.data_selection_enabled&&u.data_selection_isselectable.bind(this.api)(e)&&(r=(i=(0,L.select)(t)).classed(Rt.SELECTED),a=this.getToggle(t,e).bind(this),u.data_selection_multiple||(t="."+((s=u.point_focus_only)?Rt.selectedCircles:Dt.shapes),u.data_selection_grouped&&(t+=this.getTargetSelectorSuffix(e.id)),c.selectAll(t).selectAll(s?"."+Rt.selectedCircle:"."+Dt.shape+"."+Rt.SELECTED).classed(Rt.SELECTED,!1).each(function(t){var e=(0,L.select)(this);a(!1,o=e,t,t.index)})),o&&o.node()===i.node()||(i.classed(Rt.SELECTED,!r),a(!r,i,e,n)))}}),$i={initBrush:function(){var r,t,a=this,o=this,s=o.config,u=o.scale,n=o.$el.subchart,c=s.axis_rotated;o.brush=(c?(0,d.brushY):(0,d.brushX))().handleSize(5);var l=function(){P(this,a);var t=o.$el.svg.select("."+It.brush+" .overlay"),e={width:0,height:0};return t.size()&&(e.width=+t.attr("width"),e.height=+t.attr("height")),e[c?"width":"height"]}.bind(this);o.brush.on("start brush end",function(t){var n=this;P(this,a);var i=t.selection,e=t.target,t=t.type;"start"===t&&"touch"===o.state.inputType&&o.hideTooltip(),/(start|brush)/.test(t)&&o.redrawForBrush(),"end"===t&&(r=u.x.orgDomain()),null!=e&&e.handle&&(null===i?o.brush.handle.attr("display","none"):o.brush.handle.attr("display",null).attr("transform",function(t,e){return P(this,n),"translate("+(c?[33,i[e]-(0===e?30:24)]:[i[e],3])+")"}.bind(this)))}.bind(this)),o.brush.updateResize=function(){var e=this;t&&clearTimeout(t),t=setTimeout(function(){P(this,e);var t=this.getSelection();r&&(0,d.brushSelection)(t.node())&&this.move(t,r.map(u.subX.orgScale()))}.bind(this),0)},o.brush.update=function(){var t,e=this;return 0===this.extent()()[1].filter(function(t){return P(this,e),isNaN(t)}.bind(this)).length&&(null==(t=n.main)||t.select("."+It.brush).call(this)),this},o.brush.scale=function(t){var n=this,i=s.subchart_size_height||l(),e=o.getExtent();!e&&t.range?e=[[0,0],[t.range()[1],i]]:$(e)&&(e=e.map(function(t,e){return P(this,n),[t,0<e?i:e]}.bind(this))),c&&e[1].reverse(),this.extent(e),this.update()},o.brush.getSelection=function(){return P(this,a),n.main?n.main.select("."+It.brush):(0,L.select)([])}.bind(this)},initSubchart:function(){var n,i=this,r=this,t=r.config,e=r.state,a=e.clip,o=e.hasAxis,s=r.$el,u=s.defs,c=s.svg,l=s.subchart,h=s.axis;o&&(e=t.subchart_show?null:"hidden",s=a.id+"-subchart",o=r.getClipPath(s),a.idSubchart=s,r.appendClip(u,s),r.initBrush(),l.main=c.append("g").classed(It.subchart,!0).attr("transform",r.getTranslate("context")),(n=l.main).style("visibility",e),n.append("g").attr("clip-path",o).attr("class",It.chart),["bar","line","bubble","candlestick","scatter"].forEach(function(t){P(this,i);var e=W(/^(bubble|scatter)$/.test(t)?"circle":t);(r.hasType(t)||r.hasTypeOf(e))&&(t=n.select("."+It.chart),e=It["chart"+e+"s"],t.select("."+e).empty()&&t.append("g").attr("class",e))}.bind(this)),o=n.append("g").attr("clip-path",o).attr("class",It.brush).call(r.brush),t.subchart_showHandle&&r.addBrushHandle(o),h.subX=n.append("g").attr("class",It.axisX).attr("transform",r.getTranslate("subX")).attr("clip-path",t.axis_rotated?"":a.pathXAxis).style("visibility",t.subchart_axis_x_show?e:"hidden"))},addBrushHandle:function(t){var e=this,n=this.config,i=n.axis_rotated,n=n.subchart_init_range,r=i?["M 5.2491724,29.749209 a 6,6 0 0 0 -5.50000003,-6.5 H -5.7508276 a 6,6 0 0 0 -6.0000004,6.5 z m -5.00000003,-2 H -6.7508276 m 6.99999997,-2 H -6.7508276Z","M 5.2491724,23.249172 a 6,-6 0 0 1 -5.50000003,6.5 H -5.7508276 a 6,-6 0 0 1 -6.0000004,-6.5 z m -5.00000003,2 H -6.7508276 m 6.99999997,2 H -6.7508276Z"]:["M 0 18 A 6 6 0 0 0 -6.5 23.5 V 29 A 6 6 0 0 0 0 35 Z M -2 23 V 30 M -4 23 V 30Z","M 0 18 A 6 6 0 0 1 6.5 23.5 V 29 A 6 6 0 0 1 0 35 Z M 2 23 V 30 M 4 23 V 30Z"];this.brush.handle=t.selectAll(".handle--custom").data(i?[{type:"n"},{type:"s"}]:[{type:"w"},{type:"e"}]).enter().append("path").attr("class","handle--custom").attr("cursor",(i?"ns":"ew")+"-resize").attr("d",function(t){return P(this,e),r[+/[se]/.test(t.type)]}.bind(this)).attr("display",n?null:"none")},updateTargetsForSubchart:function(o){var s=this,u=this,t=u.config,e=u.state,c=u.$el.subchart.main;t.subchart_show&&(["bar","line","bubble","candlestick","scatter"].filter(function(t){return P(this,s),u.hasType(t)||u.hasTypeOf(W(t))}.bind(this)).forEach(function(t){P(this,s);var e=/^(bubble|scatter)$/.test(t),n=W(e?"circle":t),i=u.getChartClass(n,!0),r=u.getClass(e?"circles":t+"s",!0),a=c.select("."+It["chart"+n+"s"]);e?((e=a.selectAll("."+It.circles).data(o.filter(u["is"+W(t)+"Type"].bind(u))).attr("class",r)).exit().remove(),e.enter().append("g").attr("class",r)):(r=(n=a.selectAll("."+It["chart"+n]).attr("class",i).data(o.filter(u["is"+n+"Type"].bind(u)))).enter().append("g").style("opacity","0").attr("class",i).append("g").attr("class",r),n.exit().remove(),"line"===t&&u.hasTypeOf("Area")&&r.append("g").attr("class",u.getClass("areas",!0)))}.bind(this)),c.selectAll("."+It.brush+" rect").attr(t.axis_rotated?"width":"height",t.axis_rotated?e.width2:e.height2))},redrawSubchart:function(t,e,n){var i=this,r=this,a=r.config,o=r.$el.subchart.main,s=r.state,u=!!e;o.style("visibility",a.subchart_show?null:"hidden"),a.subchart_show&&("zoom"===(null==(o=s.event)?void 0:o.type)&&r.brush.update(),t&&(o=a.subchart_init_range,H(r)||r.brush.update(),Object.keys(n.type).forEach(function(t){P(this,i);var e=W(t),t=r["generateDraw"+e](n.indices[t],!0);r["update"+e](u,!0),r["redraw"+e](t,u,!0)}.bind(this)),(r.hasType("bubble")||r.hasType("scatter"))&&(t=n.pos.cx,a=r.updateCircleY(!0),r.updateCircle(!0),r.redrawCircle(t,a,u,void 0,!0)),!s.rendered&&o&&r.brush.move(r.brush.getSelection(),o.map(r.scale.x))))},redrawForBrush:function(){var t=this.config,e=t.subchart_onbrush,n=t.zoom_rescale,t=this.scale;this.redraw({withTransition:!1,withY:n,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e.bind(this.api)(t.x.orgDomain())},transformContext:function(t,e){var n=this.$el.subchart,i=this.$T,t=null!=e&&e.axisSubX?e.axisSubX:i(n.main.select("."+It.axisX),t);n.main.attr("transform",this.getTranslate("context")),t.attr("transform",this.getTranslate("subX"))},getExtent:function(){var e,n=this,t=this.config,i=this.scale,t=t.axis_x_extent;return t&&(E(t)?t=t.bind(this.api)(this.getXDomain(this.data.targets),i.subX):this.axis.isTimeSeries()&&t.every(isNaN)&&(e=ot.bind(this),t=t.map(function(t){return P(this,n),i.subX(e(t))}.bind(this)))),t}},Fi={initZoom:function(){this.scale.zoom=null,this.generateZoom(),this.initZoomBehaviour()},bindZoomEvent:function(t){void 0===t&&(t=!0);var e=this.config;e.zoom_enabled&&t?e.subchart_show||this.bindZoomOnEventRect():!1===t&&(this.api.unzoom(),this.unbindZoomEvent())},generateZoom:function(){var s=this,u=this,c=u.config,l=u.org,h=u.scale,t=(0,Pi.zoom)().duration(0).on("start",u.onZoomStart.bind(u)).on("zoom",u.onZoom.bind(u)).on("end",u.onZoomEnd.bind(u));t.orgScaleExtent=function(){P(this,s);var t=c.zoom_extent||[1,10];return[t[0],Math.max(u.getMaxDataCount()/t[1],t[1])]}.bind(this),t.updateScaleExtent=function(){var t=C(u.scale.x.orgDomain())/C(u.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this},t.updateTransformScale=function(t,e){P(this,s);var n=c.axis_rotated;null==(i=l.xScale)||i.range(h.x.range());var i,r=t[n?"rescaleY":"rescaleX"](l.xScale||h.x),a=u.trimXDomain(r.domain()),o=c.zoom_rescale;r.domain(a,l.xDomain),e&&(i=r(h.x.domain()[0]),e=n?t.x:i,i=n?i:t.y,u.$el.eventRect.property("__zoom",Pi.zoomIdentity.translate(e,i).scale(t.k))),u.state.xTickOffset||(u.state.xTickOffset=u.axis.x.tickOffset()),h.zoom=u.getCustomizedXScale(r),u.axis.x.scale(h.zoom),o&&(l.xScale||(l.xScale=h.x.copy()),h.x.domain(a))}.bind(this),t.getDomain=function(){P(this,s);var t=h[h.zoom?"zoom":"subX"].domain();return u.axis.isCategorized()&&(t[1]-=2),t}.bind(this),u.zoom=t},onZoomStart:function(t){var e=t.sourceEvent;e&&(this.zoom.startEvent=e,this.state.zooming=!0,M(this.config.zoom_onzoomstart,this.api,t))},onZoom:function(t){var e,n,i,r=this,a=this,o=a.config,s=a.scale,u=a.state,c=a.org,l=t.sourceEvent,h=(null==t?void 0:t.transform)===Pi.zoomIdentity;!o.zoom_enabled||0===a.filterTargetsToShow(a.data.targets).length||!s.zoom&&-1<(null==l?void 0:l.type.indexOf("touch"))&&1===(null==l?void 0:l.touches.length)||(t.sourceEvent&&(u.zooming=!0),e="mousemove"===(null==l?void 0:l.type),n=(null==l?void 0:l.wheelDelta)<0,i=t.transform,!e&&n&&s.x.domain().every(function(t,e){return P(this,r),t!==c.xDomain[e]}.bind(this))&&s.x.domain(c.xDomain),a.zoom.updateTransformScale(i,"wheel"===o.zoom_type&&l),t=0<o.transition_duration&&!o.subchart_show&&(u.dragging||h||!t.sourceEvent),a.redraw({withTransition:t,withY:o.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),a.state.cancelClick=e,h||M(o.zoom_onzoom,a.api,a.zoom.getDomain()))},onZoomEnd:function(t){var e=this.config,n=this.state,i=this.zoom.startEvent,r=null==t?void 0:t.sourceEvent,a=(null==t?void 0:t.transform)===Pi.zoomIdentity;-1<(null==i?void 0:i.type.indexOf("touch"))&&(i=i.changedTouches[0],r=null==(t=r)||null==(t=t.changedTouches)?void 0:t[0]),"drag"===e.zoom_type&&r&&i.clientX===r.clientX&&i.clientY===r.clientY||(this.redrawEventRect(),this.updateZoom(),n.zooming=!1,a||!r&&!n.dragging||M(e.zoom_onzoomend,this.api,this.zoom.getDomain()))},updateZoom:function(t){var e=this.scale,n=e.subX,i=e.x,r=e.zoom;r&&(e=r.domain(),r=n.domain(),e=this.config.axis_x_inverted?(e[0]>=r[0]||e[0]+.015>=r[0])&&(r[1]>=e[1]||r[1]>=e[1]+.015):(e[0]<=r[0]||e[0]-.015<=r[0])&&(r[1]<=e[1]||r[1]<=e[1]-.015),(t||e)&&(this.axis.x.scale(n),i.domain(n.orgDomain()),this.scale.zoom=null))},bindZoomOnEventRect:function(){var t=this,e=this.config,n=this.$el.eventRect,e="drag"===e.zoom_type?this.zoomBehaviour:this.zoom;this.$el.svg.on("wheel",function(){P(this,t)}.bind(this)),n.call(e).on("dblclick.zoom",null)},initZoomBehaviour:function(){var i,r=this,a=this,t=a.config,o=a.state,e=t.axis_rotated,s=0,u=0,c={axis:e?"y":"x",attr:e?"height":"width",index:e?1:0};a.zoomBehaviour=(0,ke.drag)().clickDistance(4).on("start",function(t){o.event=t,a.setDragStatus(!0),a.unselectRect(),i=i||a.$el.main.append("rect").attr("clip-path",o.clip.path).attr("class",zt.zoomBrush).attr("width",e?o.width:0).attr("height",e?0:o.height),s=Y(t,this)[c.index],u=s,i.attr(c.axis,s).attr(c.attr,0),a.onZoomStart(t)}).on("drag",function(t){u=Y(t,this)[c.index],i.attr(c.axis,Math.min(s,u)).attr(c.attr,Math.abs(u-s))}).on("end",function(t){var e=this;P(this,r);var n=a.scale.zoom||a.scale.x;o.event=t,i.attr(c.axis,0).attr(c.attr,0),u<s&&(s=(t=[u,s])[0],u=t[1]),s<0&&(u+=Math.abs(s),s=0),s!==u&&a.api.zoom([s,u].map(function(t){return P(this,e),n.invert(t)}.bind(this))),a.setDragStatus(!1)}.bind(this))},setZoomResetButton:function(){var t=this,e=t.config,n=t.$el,i=e.zoom_resetButton;i&&"drag"===e.zoom_type&&(n.zoomResetBtn?n.zoomResetBtn.style("display",null):n.zoomResetBtn=t.$el.chart.append("div").classed(ht.button,!0).append("span").on("click",function(){E(i.onclick)&&i.onclick.bind(t.api)(this),t.api.unzoom()}).classed(zt.buttonZoomReset,!0).text(i.text||"Reset Zoom"))}},Bi={data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return P(this,void 0),!0}.bind(void 0),data_selection_multiple:!0,data_selection_draggable:!1,data_onselected:function(){P(this,void 0)}.bind(void 0),data_onunselected:function(){P(this,void 0)}.bind(void 0)},Xi={subchart_show:!1,subchart_showHandle:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_axis_x_tick_show:!0,subchart_axis_x_tick_format:void 0,subchart_axis_x_tick_text_show:!0,subchart_init_range:void 0,subchart_onbrush:function(){P(this,void 0)}.bind(void 0)},ji={zoom_enabled:!1,zoom_type:"wheel",zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:void 0,zoom_onzoomstart:void 0,zoom_onzoomend:void 0,zoom_resetButton:!0,zoom_x_min:void 0,zoom_x_max:void 0},Yi=function(){var t=this;return P(this,void 0),q(Je.prototype,Ii),q(nn.prototype,Di),Kt.setOptions([Bi]),(Yi=function(){return P(this,t),!0}.bind(this))()}.bind(void 0),Gi=function(){var t=this;return P(this,void 0),q(Je.prototype,$i),q(nn.prototype,Oi),Kt.setOptions([Xi]),(Gi=function(){return P(this,t),!0}.bind(this))()}.bind(void 0),Vi=function(){var t=this;return P(this,void 0),q(Je.prototype,Fi),q(nn.prototype,Li),Kt.setOptions([ji]),(Vi=function(){return P(this,t),!0}.bind(this))()}.bind(void 0),Ui={},Hi={version:"3.9.4",generate:function(t){t=tt({},Ui,t),t=new nn(t);return t.internal.charts=this.instance,this.instance.push(t),t},defaults:function(t){return Ui=D(t)?t:Ui},instance:[],plugin:{}};Object.keys(e).forEach(function(t){return P(this,void 0),e[t]()}.bind(void 0)),Object.keys(n).forEach(function(t){return P(this,void 0),n[t]()}.bind(void 0))}(),Wi}()});const apexDashboardChart=function(zt,It){"use strict";const $t={featureDetails:{name:"APEX-D3Dashboard-Charts",scriptVersion:"23.10.22",utilVersion:"22.11.28",url:"https://github.com/RonnyWeiss",url2:"https://ronnyweiss.app",license:"MIT License"},isDefinedAndNotNull:function(t){return null!=t&&""!==t},groupObjectArray:function(t,i){return t&&Array.isArray(t)?t.reduce(function(t,e){var n=e[i];return n&&(t[n=""+n]=t[n]||[]).push(e),t},{}):[]},link:function(t,e="_parent"){null!=t&&""!==t&&window.open(t,e)},escapeHTML:function(t){if(null===t)return null;if(void 0!==t){if("object"==typeof t)try{t=JSON.stringify(t)}catch(t){}return zt.util.escapeHTML(String(t))}},loader:{start:function(t,e){e&&It(t).css("min-height","100px"),zt.util.showSpinner(It(t))},stop:function(t,e){e&&It(t).css("min-height",""),It(t+" > .u-Processing").remove(),It(t+" > .ct-loader").remove()}},jsonSaveExtend:function(e,n){let i={},t={};if("string"==typeof n)try{t=JSON.parse(n)}catch(t){zt.debug.error({module:"util.js",msg:"Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used.",err:t,targetConfig:n})}else t=It.extend(!0,{},n);try{i=It.extend(!0,{},e,t)}catch(t){i=It.extend(!0,{},e),zt.debug.error({module:"util.js",msg:"Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used.",err:t,finalConfig:i})}return i},printDOMMessage:{show:function(t,e,n,i){const r=It("<div>");if(150<=It(t).height()){const o=It("<div></div>");var a=It("<span></span>").addClass("fa").addClass(n||"fa-info-circle-o").addClass("fa-2x").css("height","32px").css("width","32px").css("margin-bottom","16px").css("color",i||"#D0D0D0");o.append(a);a=It("<span></span>").text(e).css("display","block").css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px");r.css("margin","12px").css("text-align","center").css("padding","10px 0").addClass("dominfomessagediv").append(o).append(a)}else{i=It("<span></span>").addClass("fa").addClass(n||"fa-info-circle-o").css("font-size","22px").css("line-height","26px").css("margin-right","5px").css("color",i||"#D0D0D0"),e=It("<span></span>").text(e).css("color","#707070").css("text-overflow","ellipsis").css("overflow","hidden").css("white-space","nowrap").css("font-size","12px").css("line-height","20px");r.css("margin","10px").css("text-align","center").addClass("dominfomessagediv").append(i).append(e)}It(t).append(r)},hide:function(t){It(t).children(".dominfomessagediv").remove()}},noDataMessage:{show:function(t,e){$t.printDOMMessage.show(t,e,"fa-search")},hide:function(t){$t.printDOMMessage.hide(t)}},errorMessage:{show:function(t,e){$t.printDOMMessage.show(t,e,"fa-exclamation-triangle","#FFCB3D")},hide:function(t){$t.printDOMMessage.hide(t)}},cutString:function(e,t){try{return!(t<0)&&e.length>t?e.substring(0,t-3)+"...":e}catch(t){return e}},isBetween:function(t,e,n){n=n||0;return e-n<=t&&t<=e+n}};function Ft(t,e,n){return n?void 0!==t&&null!=t?1===t||"true"===t:e:$t.isDefinedAndNotNull(t)?t:e}return{initialize:function(l,t,e,n,i,r,a,Nt){var o,s,u={},c="#"+l,h=It(c).find(".d3dc-root");if(zt.debug.info({fct:`${$t.featureDetails.name} - initialize`,msg:"Load...",featureDetails:$t.featureDetails}),c)if(0<h.length){var d={},d=$t.jsonSaveExtend({colSpan:12,height:400,refresh:0},i),f=$t.jsonSaveExtend({axisLabelPosition:"inner3",background:null,chartTitle:null,gauge:{min:0,max:null,type:"single",width:null,arcMinWidth:null,fullCircle:!1,title:null,axisLabels:!0},grid:{x:!0,y:!0},legend:{position:"right",show:!0},line:{step:"step"},padding:{bottom:null,left:null,right:null,top:null},rotateAxis:!1,showDataLabels:!1,showDataPoints:!0,showAbsoluteValues:!1,threshold:.05,tooltip:{grouped:!0,show:!0},transitionDuration:200,x:{axisHeight:null,label:"x Axis",timeFormat:"%Y-%m-%dT%H:%M:%S",type:"category",tick:{cutAfter:30,maxNumber:25,multiline:!1,rotation:60,autoRotate:!0,timeFormat:"%y-%m-%d %H:%M",fit:!0}},y:{label:"y Axis 1",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},y2:{label:"y Axis 2",log:!1,max:null,min:null,unit:null,tick:{maxNumber:null}},zoom:{enabled:!0,type:"scroll",rescale:!1}},r);d.d3JSchart=f,d.noDataMessage=e,d.errorMessage=n;let t=(o=h,(s=It("<div></div>")).addClass("d3dc-container"),s.attr("id",l+"-c"),s.css("min-height","100px"),o.append(s),s);v(d,t);try{It(c).bind("apexrefresh",function(){v(d,t)})}catch(t){$t.errorMessage.show(c,d.errorMessage),zt.debug.error({fct:`${$t.featureDetails.name} - initialize`,msg:"Can't bind refresh event on "+c+". Apex is missing",err:t,featureDetails:$t.featureDetails})}0<d.refresh&&setInterval(function(){It(c).is(":visible")&&v(d)},1e3*d.refresh)}else zt.debug.error({fct:`${$t.featureDetails.name} - initialize`,msg:"Can't find element with class d3dc-root in element with id: "+l,featureDetails:$t.featureDetails});else zt.debug.error({fct:`${$t.featureDetails.name} - initialize`,msg:"Can't find pRegionID: "+l,featureDetails:$t.featureDetails});function g(t,o,s){if(zt.debug.info({fct:`${$t.featureDetails.name} - prepareData`,msg:"AJAX Finished",pAjaxResponse:t,featureDetails:$t.featureDetails}),u.innerItemsIntervals&&It.each(u.innerItemsIntervals,function(t,e){clearInterval(e)}),u.innerItemsIntervals={},s.empty(),t.items&&0<t.items.length)try{let i=p(s),r=0,a;It.each(t.items,function(t,e){a=e.itemConfig||{};var n=e.colSpan||o.colSpan;r+=n,zt.debug.info({fct:`${$t.featureDetails.name} - prepareData`,msg:"Render chart  - Col "+t,featureDetails:$t.featureDetails}),function(t,e,n,i,r,a,o,s,u){var c=l+"-c-"+t,t=It("<div></div>");t.attr("id",c),t.addClass("d3dc-col-"+i),t.addClass("d3chartcol"),n.append(t),s?function(b,_,y,t,x,m){zt.debug.info({fct:`${$t.featureDetails.name} - drawChart`,pItemSel:b,pItemHeight:_,pConfigData:y,pValuesData:t,pDefaultConfig:x,featureDetails:$t.featureDetails});const o=d3,w=["pie","donut","gauge"],T=$t.groupObjectArray(t,"seriesID");let A=!1,M=!1,S=!1;function e(t,a){try{return t.sort(function(t,e){const n=o.timeParse(a),i=n(t.x),r=n(e.x);return new Date(i).getTime()-new Date(r).getTime()})}catch(t){zt.debug.error({fct:`${$t.featureDetails.name} - drawChart`,msg:"Error while try sort JSON Array by Time Value",err:t,featureDetails:$t.featureDetails})}}try{var k=Ft(y.chartTitle,x.d3JSchart.chartTitle||"").toString(),n=Ft(y.background,x.d3JSchart.background);let i=null,o=!1;$t.isDefinedAndNotNull(n)&&(i={color:n});var E=Ft(y.lineStep,x.d3JSchart.line.step);const Q=Ft(y.gaugeMin,x.d3JSchart.gauge.min),tt=Ft(y.gaugeMax,x.d3JSchart.gauge.max),et=Ft(y.gaugeType,x.d3JSchart.gauge.type),nt=Ft(y.gaugeWidth,x.d3JSchart.gauge.width),it=Ft(y.gaugeArcMinWidth,x.d3JSchart.gauge.arcMinWidth),rt=Ft(y.gaugeFullCircle,x.d3JSchart.gauge.fullCircle,!0),at=Ft(y.gaugeAxisLabels,x.d3JSchart.gauge.axisLabels,!0),ot=Ft(y.gaugeTitle,x.d3JSchart.gauge.title||"").toString();var C=Ft(y.gridX,x.d3JSchart.grid.x,!0),R=Ft(y.gridY,x.d3JSchart.grid.y,!0),D=Ft(y.xAxisHeight,x.d3JSchart.x.axisHeight),O=Ft(y.legendShow,x.d3JSchart.legend.show,!0),P=Ft(y.legendPosition,x.d3JSchart.legend.position);const st=$t.jsonSaveExtend(null,x.d3JSchart.padding);$t.isDefinedAndNotNull(y.paddingBottom)&&(st.bottom=y.paddingBottom),$t.isDefinedAndNotNull(y.paddingLeft)&&(st.left=y.paddingLeft),$t.isDefinedAndNotNull(y.paddingRight)&&(st.right=y.paddingRight),$t.isDefinedAndNotNull(y.paddingTop)&&(st.top=y.paddingTop);var L,N=Ft(y.rotateAxis,x.d3JSchart.rotateAxis,!0),z=Ft(y.axisLabelPosition,x.d3JSchart.axisLabelPosition);let r=null,a=null;switch(z){case"inner1":r="inner-left",a="inner-bottom";break;case"inner2":r="inner-center",a="inner-middle";break;case"inner3":r="inner-right",a="inner-top";break;case"outer1":r="outer-left",a="outer-bottom";break;case"outer2":r="outer-center",a="outer-middle";break;case"outer3":r="outer-right",a="outer-top"}N&&(L=r,r=a,a=L);var I=Ft(y.tooltipShow,x.d3JSchart.tooltip.show,!0),$=Ft(y.tooltipGrouped,x.d3JSchart.tooltip.grouped,!0),F=Ft(y.transitionDuration||x.d3JSchart.transitionDuration),B=Ft(y.xShow,x.d3JSchart.x.show,!0),X=Ft(y.xLabel,x.d3JSchart.x.label||"").toString();let s=Ft(y.xType,x.d3JSchart.x.type),u=null,c=null;const ut=Ft(y.xTickCutAfter,x.d3JSchart.x.tick.cutAfter),ct=Ft(y.xTickMaxNumber,x.d3JSchart.x.tick.maxNumber),lt=Ft(y.xTickRotation,x.d3JSchart.x.tick.rotation),ht=Ft(y.xTickMultiline,x.d3JSchart.x.tick.multiline,!0),dt=Ft(y.xTickFit,x.d3JSchart.x.tick.fit,!0),ft=Ft(y.xTickAutoRotate,x.d3JSchart.x.tick.autoRotate,!0);let l=null;"category"!==s&&"timeseries"!==s||(c="x"),"timeseries"===s&&(u=Ft(y.xTimeFormat,x.d3JSchart.x.timeFormat),l=Ft(y.xTickTimeFormat,x.d3JSchart.x.tick.timeFormat),e(t,u)),"category"===s&&(l=function(t,e){return $t.cutString(e,ut)});var j=Ft(y.yLabel,x.d3JSchart.y.label||"").toString(),Y=Ft(y.yLog,x.d3JSchart.y.log,!0);let h=null;Y&&(h="log");const gt=y.yMin||x.d3JSchart.y.min,pt=y.yMax||x.d3JSchart.y.max,vt=y.yTickMaxNumber||x.d3JSchart.y.tick.maxNumber,bt=y.yUnit||x.d3JSchart.y.unit;var G=Ft(y.y2Label,x.d3JSchart.y2.label||"").toString(),V=Ft(y.y2Log,x.d3JSchart.y2.log,!0);let d=null,f=!1;V&&(d="log");const _t=Ft(y.y2Min,x.d3JSchart.y2.min),yt=Ft(y.y2Max,x.d3JSchart.y2.max),xt=Ft(y.y2TickMaxNumber,x.d3JSchart.y2.tick.maxNumber),mt=Ft(y.y2Unit,x.d3JSchart.y2.unit);var U=Ft(y.zoomType,x.d3JSchart.zoom.type);let g=!1,p=Ft(y.zoomEnabled,x.d3JSchart.zoom.enabled,!0);var H=Ft(y.threshold,x.d3JSchart.threshold);!p||"scroll"===U?g=!1:"subchart"===U?(g=!0,p=!1):"drag"===U&&(p=!0,g=!1);var q,W=Ft(y.zoomRescale,x.d3JSchart.zoom.rescale,!0);const wt=[],Tt=[],At=[],Mt={},St={},kt={},Et={},Ct={},Rt=$t.groupObjectArray(t,"x");let v=0;if(T){"category"!==s&&"timeseries"!==s||(Tt.push("x"),q=Object.keys(Rt),It.each(q,function(t,e){Tt.push(Ft(e.replace("",""),null))})),wt.push(Tt),It.each(T,function(t,e){let n;if(v+=1,e[0]&&e[0].seriesID){n=e[0];const r=escape(n.seriesID);var i;Mt[r]=n.color,St[r]=n.type,0<=w.indexOf(n.type)&&(p=!1),"gauge"===n.type&&(A=!0),"pie"===n.type&&(M=!0),"donut"===n.type&&(S=!0),$t.isDefinedAndNotNull(n.tooltip)&&(o=!0),kt[r]=n.yAxis||"y",$t.isDefinedAndNotNull(n.groupID)&&(i=escape(n.groupID.toString()),Ct[i]||(Ct[i]=[]),Ct[i].push(r)),"y2"===n.yAxis&&(f=!0),Et[r]=Ft(n.label,r);const a=[];a.push(r),"category"===s||"timeseries"===s?It.each(Rt,function(t,e){let n=null,i=null;It.each(e,function(t,e){escape(e.seriesID)===r&&(n=e.y,e.z&&(i=e.z))}),null!==i?a.push({y:n,z:i}):a.push(n)}):It.each(e,function(t,e){var n=Ft(e.y,null);e.z?(e=e.z,a.push({y:n,z:e})):a.push(n)}),wt.push(a)}else $t.errorMessage.show(b,x.errorMessage),zt.debug.error({fct:`${$t.featureDetails.name} - drawChart`,msg:"No seriesID found in seriesID Cursor",featureDetails:$t.featureDetails})}),It.each(Ct,function(t,e){At.push(e)});let t=Ft(y.showDataLabels,x.d3JSchart.showDataLabels,!0);M||S?t={colors:"white"}:A&&(t={colors:"single"===et&&1<v?"white":null});var Z=Ft(y.showDataPoints,x.d3JSchart.showDataPoints,!0),J=Ft(y.showAbsoluteValues,x.d3JSchart.showAbsoluteValues);let e;J&&(e=function(t){return t+bt});let n;o&&(n=function(t){const a=It("<div></div>");return a.addClass("bb-tooltip"),a.addClass("bida-chart-tooltip-custome"),It.each(t,function(t,e){var n=""+unescape(e.id),i=T[n],n=e.index;if(i&&i[n]&&$t.isDefinedAndNotNull(i[n].tooltip)&&$t.isDefinedAndNotNull(e.value)){const r=It("<div>");let t=i[n].tooltip;!1!==Nt&&(t=$t.escapeHTML(t)),r.append(t),a.append(r)}}),a[0].outerHTML});try{const Dt=b+"bbc",Ot=Dt.replace("#",""),Pt=It("<div></div>");Pt.attr("id",Ot),It(b).append(Pt);var K={bindto:Dt,background:i,title:{text:k},size:{height:_},data:{x:c,xFormat:u,columns:wt,types:St,groups:At,colors:Mt,labels:t,axes:kt,names:Et,onclick:function(t){!function(t){var e=""+unescape(t.id);let n=t.index;T[e]&&(1===T[e].length&&(n=0),T[e][n]&&T[e][n].link&&$t.link(T[e][n].link,T[e][n].linkTarget))}(t)}},pie:{label:{format:e,threshold:H}},donut:{label:{format:e,threshold:H}},line:{step:{type:E}},gauge:{label:{format:e,threshold:H,extents:function(t){return at?t:null}},fullCircle:rt,min:Q,max:tt,type:et,width:nt,title:ot,arc:{minWidth:it}},radar:{direction:{clockwise:!0}},subchart:{show:g},zoom:{type:U,enabled:p,rescale:W},transition:{duration:F},legend:{show:O,position:P},tooltip:{show:I,grouped:$,contents:n},grid:{x:{show:C},y:{show:R}},point:{show:Z},axis:{rotated:N,x:{show:B,label:{text:X,position:r},type:s,tick:{culling:{max:ct},autorotate:ft,rotate:lt,multiline:ht,format:l,fit:dt},height:D},y:{label:{text:j,position:a},type:h,max:pt,min:gt,tick:{culling:{max:vt},format:function(t){return t+bt}}},y2:{show:f,label:{text:G,position:a},type:d,max:yt,min:_t,tick:{culling:{max:xt},format:function(t){return t+mt}}}},padding:st};zt.debug.info({fct:`${$t.featureDetails.name} - drawChart`,finalChartData:K,featureDetails:$t.featureDetails});const Lt=bb.generate(K);p&&It(Dt).contextmenu(function(t){t.preventDefault(),Lt.unzoom()}),m.on("resize",function(){Lt.resize({height:_})})}catch(t){It(b).empty(),$t.errorMessage.show(b,x.errorMessage),zt.debug.error({fct:`${$t.featureDetails.name} - drawChart`,msg:"Error while try to render chart",err:t,featureDetails:$t.featureDetails})}}else $t.noDataMessage.show(b,x.noDataMessage)}catch(t){It(b).empty(),$t.errorMessage.show(b,x.errorMessage),zt.debug.error({fct:`${$t.featureDetails.name} - drawChart`,msg:"Error while prepare data for chart",err:t,featureDetails:$t.featureDetails})}}("#"+c,e,a,s,o,u):$t.noDataMessage.show(t,o.noDataMessage);$t.isDefinedAndNotNull(r)&&((o=It("<h4></h4>")).css("text-align","center"),!1!==Nt?o.text(r):o.html(r),t.prepend(o))}(t,e.height||o.height,i,n,e.title,a,o,e.itemData,s),12<=r&&(i=p(s),r=0)})}catch(t){$t.errorMessage.show(s,o.errorMessage),zt.debug.error({fct:`${$t.featureDetails.name} - prepareData`,msg:"Error while prepare data for chart",err:t,featureDetails:$t.featureDetails})}else s.css("min-height",""),$t.noDataMessage.show(s,o.noDataMessage);$t.loader.stop(c),zt.debug.info({fct:`${$t.featureDetails.name} - prepareData`,msg:"Finished",featureDetails:$t.featureDetails})}function p(t){var e=It("<div></div>");return e.addClass("d3dc-row"),t.append(e),e}function v(e,n){$t.loader.start(c);zt.server.plugin(t,{pageItems:a},{success:function(t){g(t,e,n)},error:function(t){It(c).empty(),$t.errorMessage.show(c,e.errorMessage),zt.debug.error({fct:`${$t.featureDetails.name} - getData`,msg:"Error while loading AJAX data",err:t,featureDetails:$t.featureDetails}),$t.loader.stop(c)},dataType:"json"})}}}};